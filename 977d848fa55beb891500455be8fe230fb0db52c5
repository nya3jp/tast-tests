{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8ba139bf_a71fb83e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1545162
      },
      "writtenOn": "2022-09-29T08:39:44Z",
      "side": 1,
      "message": "Hi Ashley,\n\nI tried my two ubuntu system, didn\u0027t see that issue.\nBut in Debian system, I face same issue as yours.\n\nAnd I do the `repo sync` \u0026 `update_chroot` again, this issue fixed.\n\nSee logs here:\n(cr) (change-3581755) allion@debian ~/chromiumos/src/platform/tast-tests $ tast run -var\u003dutils.WWCBIP\u003d192.168.0.7 -var\u003dDockingID\u003d1912901 -var\u003d1stExtDispID\u003d2007902 192.168.0.3 wwcb.Dock5NetworkSwitch\n2022-09-29T07:56:03.406147Z Writing results to /tmp/tast/results/20220929-035603\n2022-09-29T07:56:03.406319Z Starting ephemeral devserver at http://127.0.0.1:34755 for remote tests\n2022-09-29T07:56:03.406448Z Connecting to 192.168.0.3\n2022-09-29T07:56:03.589695Z Building remote_test_runner, cros\n2022-09-29T07:56:07.346926Z Built in 3.757s\n2022-09-29T07:56:07.432012Z Building local_test_runner, cros\n2022-09-29T07:56:20.222520Z # chromiumos/tast/local/bundles/cros/cryptohome\n2022-09-29T07:56:20.222554Z src/chromiumos/tast/local/bundles/cros/cryptohome/add_remove_factors.go:69:15: reply.GetConfiguredAuthFactors undefined (type *user_data_auth_proto.ListAuthFactorsReply has no field or method GetConfiguredAuthFactors)\n2022-09-29T07:56:20.222559Z src/chromiumos/tast/local/bundles/cros/cryptohome/add_remove_factors.go:70:99: reply.GetConfiguredAuthFactors undefined (type *user_data_auth_proto.ListAuthFactorsReply has no field or method GetConfiguredAuthFactors)\n2022-09-29T07:56:20.222562Z src/chromiumos/tast/local/bundles/cros/cryptohome/add_remove_factors.go:72:68: reply.ConfiguredAuthFactors undefined (type *user_data_auth_proto.ListAuthFactorsReply has no field or method ConfiguredAuthFactors)\n2022-09-29T07:56:20.222565Z src/chromiumos/tast/local/bundles/cros/cryptohome/add_remove_factors.go:73:35: reply.ConfiguredAuthFactors undefined (type *user_data_auth_proto.ListAuthFactorsReply has no field or method ConfiguredAuthFactors)\n2022-09-29T07:56:20.225126Z Failed to run tests: failed to build and push primary DUT: failed to prepare DUT 192.168.0.3: build failed: failed to build chromiumos/tast/local/bundles/cros: exit status 2\n\n\n\nAfter `repo sync` \u0026 `./update_chroot`:\n(cr) (change-3581755) allion@debian ~/chromiumos/src/platform/tast-tests $ tast run -var\u003dutils.WWCBIP\u003d192.168.0.7 -var\u003dDockingID\u003d1912901 -var\u003d1stExtDispID\u003d2007902 -var\u003dEthernetID\u003d11111 192.168.0.3 wwcb.Dock5NetworkSwitch\n2022-09-29T08:28:18.828549Z Command line: tast run -var\u003dutils.WWCBIP\u003d192.168.0.7 -var\u003dDockingID\u003d1912901 -var\u003d1stExtDispID\u003d2007902 -var\u003dEthernetID\u003d11111 192.168.0.3 wwcb.Dock5NetworkSwitch\n2022-09-29T08:28:18.828568Z Writing results to /tmp/tast/results/20220929-042818\n2022-09-29T08:28:18.828752Z Starting ephemeral devserver at http://127.0.0.1:46319 for remote tests\n2022-09-29T08:28:18.828851Z Connecting to 192.168.0.3\n2022-09-29T08:28:19.011528Z Building remote_test_runner, cros\n2022-09-29T08:28:19.290400Z Built in 279ms\n2022-09-29T08:28:19.334746Z Building local_test_runner, cros\n2022-09-29T08:28:19.787860Z Built in 453ms\n2022-09-29T08:28:19.787894Z Pushing executables to target\n2022-09-29T08:28:20.180785Z Pushed executables in 393ms (sent 0 B)\n2022-09-29T08:28:20.180894Z Sending ListEntities Request to test runner (hops\u003d1)\n2022-09-29T08:28:21.514627Z Got ListEntities Response from local test runner\n2022-09-29T08:28:23.097623Z Unknown /hardware-properties/is-lid-convertible: cros_config failed (stderr: \"\"): exit status 1\n2022-09-29T08:28:23.101289Z Unknown /detachable-base/usbpath: cros_config failed (stderr: \"\"): exit status 1\n2022-09-29T08:28:23.107954Z Unknown /keyboard/backlight: cros_config failed (stderr: \"\"): exit status 1\n2022-09-29T08:28:23.345036Z Charge control V2 not supported: exit status 1\n2022-09-29T08:28:23.350416Z CBI not present: exit status 1\n2022-09-29T08:28:23.356843Z Modem not found: exit status 1\n2022-09-29T08:28:23.483728Z Unknown /hps: cros_config failed (stderr: \"\"): exit status 1\n2022-09-29T08:28:24.130896Z Primary DUT version: grunt-release/R107-15113.0.0\n2022-09-29T08:28:24.348727Z Sending ListEntities Request to test runner (hops\u003d1)\n2022-09-29T08:28:25.720484Z Got ListEntities Response from local test runner\n2022-09-29T08:28:25.720965Z Sending ListEntities Request to test runner (hops\u003d0)\n2022-09-29T08:28:25.762451Z Got ListEntities Response from local test runner\n2022-09-29T08:28:25.762508Z Allowing up to 0 retries\n2022-09-29T08:28:25.900808Z [08:28:25.900] Running rpc server: [env /usr/local/libexec/tast/bundles/local_pushed/cros -rpc]\n2022-09-29T08:28:27.068169Z [08:28:27.067] Connecting to DUT\n2022-09-29T08:28:27.068195Z [08:28:27.067] Connecting to DUT: 192.168.0.3\n2022-09-29T08:28:27.186293Z [08:28:27.186] Opened DUT SSH connection to 192.168.0.3:22\n2022-09-29T08:28:27.188757Z [08:28:27.188] Devserver status: [[http://127.0.0.1:46319 UP]]\n2022-09-29T08:28:27.213673Z [08:28:27.213] Found 0 external linked data file(s), need to download 0\n2022-09-29T08:28:27.214146Z [08:28:27.214] Connecting to 192.168.0.3\n2022-09-29T08:28:27.404199Z [08:28:27.403] Allowing up to 0 retries\n2022-09-29T08:28:28.069362Z [08:28:28.975] Connecting to DUT\n2022-09-29T08:28:28.127551Z [08:28:29.033] Killing orphan process (pid\u003d27468, pgid\u003d27468)\n2022-09-29T08:28:28.390212Z [08:28:29.288] Failed to backup tpm manager local data: owner password not found\n2022-09-29T08:28:28.457833Z [08:28:29.360] Devserver status: [[http://127.0.0.1:38979 UP]]\n2022-09-29T08:28:28.457921Z [08:28:29.360] Found 0 external linked data file(s), need to download 0\n2022-09-29T08:28:28.595355Z [08:28:29.504] Devserver status: [[http://127.0.0.1:38979 UP]]\n2022-09-29T08:28:28.597474Z [08:28:29.505] Found 0 external linked data file(s), need to download 0\n2022-09-29T08:28:28.731329Z Started test wwcb.Dock5NetworkSwitch\n2022-09-29T08:28:28.789669Z [08:28:29.697] Preparing precondition \"chrome_logged_in\"\n2022-09-29T08:28:28.793578Z [08:28:29.698] Running: status cryptohomed\n2022-09-29T08:28:28.796048Z [08:28:29.702] Running: gdbus wait --system org.chromium.UserDataAuth\n2022-09-29T08:28:28.803003Z [08:28:29.711] Stopping ui job\n2022-09-29T08:28:30.212545Z [08:28:31.118] Clearing user data\n2022-09-29T08:28:30.286396Z [08:28:31.194] Clearing device owner info\n2022-09-29T08:28:30.290546Z [08:28:31.198] Starting ui job\n2022-09-29T08:28:30.435712Z [08:28:31.339] Asking session_manager to enable Chrome testing\n2022-09-29T08:28:30.853622Z [08:28:31.761] Waiting for Chrome to write its debugging port to /home/chronos/DevToolsActivePort\n2022-09-29T08:28:31.634302Z [08:28:32.536] Connecting to browser at ws://localhost:33357/devtools/browser/8c0c58ce-b4d4-4e07-89f1-0129ec55ae9d\n2022-09-29T08:28:31.850504Z [08:28:32.758] Log file name: /var/log/chrome/chrome_20220929-082831\n2022-09-29T08:28:31.850594Z [08:28:32.758] Finding OOBE DevTools target\n2022-09-29T08:28:31.914831Z [08:28:32.822] Connecting to Chrome target 45B3B6029353A580EE5B6E9C6BE9EA4B\n2022-09-29T08:28:32.124310Z [08:28:33.031] Waiting for OOBE\n2022-09-29T08:28:37.081603Z [08:28:37.834] Logging in as user \"testuser@gmail.com\"\n2022-09-29T08:28:38.126721Z [08:28:38.992] Waiting for cryptohome for user \"testuser@gmail.com\" with timeout 1m20s\n2022-09-29T08:28:38.330668Z [08:28:39.083] Waiting for OOBE chrome://oobe to be dismissed\n2022-09-29T08:28:42.323181Z [08:28:43.187] Waiting for test API extension at chrome-extension://behllobkkfkfnphdnhnkndlbkcpglgmj/_generated_background_page.html\n2022-09-29T08:28:42.534759Z [08:28:43.399] Connecting to Chrome target 856469840639459F225760635D4E8B24\n2022-09-29T08:28:43.064662Z [08:28:43.929] Test API extension is ready\n2022-09-29T08:28:43.076317Z [08:28:43.984] Using existing keyboard device /dev/input/event3 (\"AT Translated Set 2 keyboard\" 0011:0001:0001:ab83)\n2022-09-29T08:28:43.076411Z [08:28:43.984] Initialize fixtures\n2022-09-29T08:28:43.078224Z [08:28:43.984] request: http://192.168.0.7:8585/api/closeall\n2022-09-29T08:28:45.628480Z [08:28:46.536] response: map[resultCode:0000 resultTxt:Success]\n2022-09-29T08:28:45.628568Z [08:28:46.536] request: http://192.168.0.7:8585/api/AVIOSYS?type\u003d0\u0026port\u003d1\n2022-09-29T08:28:45.808268Z [08:28:46.716] response: map[resultCode:0000 resultTxt:Success]\n2022-09-29T08:28:45.808360Z [08:28:46.716] request: http://192.168.0.7:8585/api/AVIOSYS?type\u003d1\u0026port\u003d1\n2022-09-29T08:28:46.013577Z [08:28:46.922] response: map[resultCode:0000 resultTxt:Success]\n2022-09-29T08:28:46.013680Z [08:28:46.922] Step 1 - Connect the external display to the docking station\n2022-09-29T08:28:46.013712Z [08:28:46.922] request: http://192.168.0.7:8585/api/switchfixture?id\u003d2007902\u0026action\u003don\u0026Interval\u003d0\n2022-09-29T08:28:51.642105Z [08:28:52.550] response: map[resultCode:0000 resultTxt:Success]\n2022-09-29T08:28:51.642218Z [08:28:52.551] Step 2 - Connect the docking station to Chromebook\n2022-09-29T08:28:51.642270Z [08:28:52.551] request: http://192.168.0.7:8585/api/switchfixture?id\u003d1912901\u0026action\u003don\u0026Interval\u003d0\n2022-09-29T08:28:51.651311Z [08:28:52.559] Error at dock5_network_switch.go:93: Failed to execute step 2: failed to connect the docking station: failed to switch fixture: unexpected response: map[resultCode:0002 resultTxt:switchfixture error]\n2022-09-29T08:28:51.651390Z [08:28:52.559] Stack trace:\nFailed to execute step 2\n\tat chromiumos/tast/local/bundles/cros/wwcb.Dock5NetworkSwitch (dock5_network_switch.go:93)\n\tat chromiumos/tast/internal/planner.runTestWithConfig.func3.1 (run.go:824)\n\tat chromiumos/tast/internal/usercode.SafeCall.func2 (usercode.go:112)\n\tat runtime.goexit (asm_amd64.s:1571)\nfailed to connect the docking station\n\tat chromiumos/tast/local/bundles/cros/wwcb.dock5NetworkSwitchStep2 (dock5_network_switch.go:128)\n\tat chromiumos/tast/local/bundles/cros/wwcb.Dock5NetworkSwitch (dock5_network_switch.go:92)\n\tat chromiumos/tast/internal/planner.runTestWithConfig.func3.1 (run.go:824)\n\tat chromiumos/tast/internal/usercode.SafeCall.func2 (usercode.go:112)\n\tat runtime.goexit (asm_amd64.s:1571)\nfailed to switch fixture\n\tat chromiumos/tast/local/bundles/cros/wwcb/utils.SwitchFixture (wwcb_api.go:72)\n\tat chromiumos/tast/local/bundles/cros/wwcb.dock5NetworkSwitchStep2 (dock5_network_switch.go:127)\n\tat chromiumos/tast/local/bundles/cros/wwcb.Dock5NetworkSwitch (dock5_network_switch.go:92)\n\tat chromiumos/tast/internal/planner.runTestWithConfig.func3.1 (run.go:824)\n\tat chromiumos/tast/internal/usercode.SafeCall.func2 (usercode.go:112)\n\tat runtime.goexit (asm_amd64.s:1571)\nunexpected response: map[resultCode:0002 resultTxt:switchfixture error]\n\tat chromiumos/tast/local/bundles/cros/wwcb/utils.HTTPGet (wwcb_api.go:50)\n\tat chromiumos/tast/local/bundles/cros/wwcb/utils.SwitchFixture (wwcb_api.go:71)\n\tat chromiumos/tast/local/bundles/cros/wwcb.dock5NetworkSwitchStep2 (dock5_network_switch.go:127)\n\tat chromiumos/tast/local/bundles/cros/wwcb.Dock5NetworkSwitch (dock5_network_switch.go:92)\n\tat chromiumos/tast/internal/planner.runTestWithConfig.func3.1 (run.go:824)\n\tat chromiumos/tast/internal/usercode.SafeCall.func2 (usercode.go:112)\n\tat runtime.goexit (asm_amd64.s:1571)\n2022-09-29T08:28:51.655160Z [08:28:52.563] Test failed. Dumping the automation node tree into ui_tree.txt\n2022-09-29T08:28:51.846881Z [08:28:52.634] Closing precondition \"chrome_logged_in\"\n2022-09-29T08:28:52.055698Z [08:28:52.843] Connecting to browser at ws://localhost:33357/devtools/browser/8c0c58ce-b4d4-4e07-89f1-0129ec55ae9d\n2022-09-29T08:28:52.061618Z [08:28:52.846] Connecting to Chrome target 856469840639459F225760635D4E8B24\n2022-09-29T08:28:52.061685Z [08:28:52.850] Taking screenshot via chrome API\n2022-09-29T08:28:52.880162Z Completed test wwcb.Dock5NetworkSwitch in 24.102s with 1 error(s)\n2022-09-29T08:28:52.881307Z [08:28:53.739] Disconnecting from DUT\n2022-09-29T08:28:54.201858Z [08:28:54.201] Devserver status: [[http://127.0.0.1:46319 UP]]\n2022-09-29T08:28:54.226197Z [08:28:54.226] Found 0 external linked data file(s), need to download 0\n2022-09-29T08:28:54.226634Z [08:28:54.226] Disconnecting from DUT\n2022-09-29T08:28:54.226647Z [08:28:54.226] Closing DUT SSH connection to 192.168.0.3:22\n2022-09-29T08:28:54.228349Z Got global error: connection to test bundle broken with msgTimeout 2m0s: rpc error: code \u003d Unavailable desc \u003d error reading from server: EOF\n2022-09-29T08:28:55.649609Z --------------------------------------------------------------------------------\n2022-09-29T08:28:55.649651Z wwcb.Dock5NetworkSwitch [ FAIL ] Failed to execute step 2: failed to connect the docking station: failed to switch fixture: unexpected response: map[resultCode:0002 resultTxt:switchfixture error]\n2022-09-29T08:28:55.649669Z --------------------------------------------------------------------------------",
      "revId": "977d848fa55beb891500455be8fe230fb0db52c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f44f7ccf_5b94d137",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1445085
      },
      "writtenOn": "2022-10-03T21:16:05Z",
      "side": 1,
      "message": "We don\u0027t need play video, record audio/video in order to verify network switching with docks.  A simple ping to www.google.com will work.\n\nCouple things to worry in the current Google/Chromebook DUT setup:\n\n1) Servo will be connected to DUT and Ethernet will issued to DUTs as well. The Ethernet should be disconnected/disabled in order to verify the Ethernet from dock works\n\n2) WiFi should be disabled or disconnected to verify dock network switching.\n\nPlease modify your steps.",
      "revId": "977d848fa55beb891500455be8fe230fb0db52c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}