{
  "comments": [
    {
      "key": {
        "uuid": "2e73041b_8488301f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "It would be preferred to move them into a private struct, say testEnv, and pass env across functions that reference to it.",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "beab5ce2_526da433",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e73041b_8488301f",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d8956fd_f62e095a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Starting from here, the pattern repeats:\n\n  startShill()\n  testSomething()\n  stopShill()\n  eraseState()\n\nyou should move the pattern to a function, say testIsolatedShill() and pass function to test.\n\ntestIsolatedShill \u003d func(name string, fn func(context.Context) {\n  ...\n}\ntestIsolatedShill(\"testLogin\", testLogin)\n...",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e49a4e6_b449aa0d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "I did that, However, I have to pass env *testEnv to the follwing function even though they didn\u0027t use it. Just to make all the funcition have the same function signature (type convert func(ctx context.Context, env *testEnv) error):\n1- testStartShill\n2- testLogout",
      "parentUuid": "5d8956fd_f62e095a",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c0968d6d_59156766",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 104,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Inside testIsolatedShill, you shall put the clean-up code in defer.",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f31f4898_99dae895",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 104,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c0968d6d_59156766",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3bd3dd9c_814bf647",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 189,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Delete",
      "range": {
        "startLine": 189,
        "startChar": 4,
        "endLine": 189,
        "endChar": 10
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66037e54_5ac7ff18",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 189,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3bd3dd9c_814bf647",
      "range": {
        "startLine": 189,
        "startChar": 4,
        "endLine": 189,
        "endChar": 10
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3656df15_27e2545e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 195,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "filepath.Join(rootCryptohomeDir, \"shill_logs\")\nsame below",
      "range": {
        "startLine": 195,
        "startChar": 24,
        "endLine": 195,
        "endChar": 57
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00e14ccc_cdf56c64",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 195,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3656df15_27e2545e",
      "range": {
        "startLine": 195,
        "startChar": 24,
        "endLine": 195,
        "endChar": 57
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14ff2a6a_17141f02",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Is it used anywhere?",
      "range": {
        "startLine": 198,
        "startChar": 1,
        "endLine": 198,
        "endChar": 13
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fedf99e2_075a158f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "It is deleted now.",
      "parentUuid": "14ff2a6a_17141f02",
      "range": {
        "startLine": 198,
        "startChar": 1,
        "endLine": 198,
        "endChar": 13
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d78aa124_acf669da",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "How could this happens?",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62f0a655_c344c6be",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "I agree with you, that shouldn\u0027t happen.",
      "parentUuid": "d78aa124_acf669da",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "123fbb2c_916a22b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 209,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Need this?",
      "range": {
        "startLine": 209,
        "startChar": 149,
        "endLine": 209,
        "endChar": 160
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dac02e32_28bb591b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 209,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "It\u0027s deleted",
      "parentUuid": "123fbb2c_916a22b1",
      "range": {
        "startLine": 209,
        "startChar": 149,
        "endLine": 209,
        "endChar": 160
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b41e4729_c7293cb1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Is it assured len(saveDirectories) \u003d\u003d 6?\n\nYou should use:\nrmArgs :\u003d []string{\"-rf\"}\nrmArgs \u003d append(rmArgs, saveDirectories)",
      "range": {
        "startLine": 213,
        "startChar": 53,
        "endLine": 213,
        "endChar": 171
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67440842_38bd6412",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b41e4729_c7293cb1",
      "range": {
        "startLine": 213,
        "startChar": 53,
        "endLine": 213,
        "endChar": 171
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc6cc4cf_19f71646",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 236,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "performs",
      "range": {
        "startLine": 236,
        "startChar": 11,
        "endLine": 236,
        "endChar": 19
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3aceb5b_d8cb93bf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 236,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bc6cc4cf_19f71646",
      "range": {
        "startLine": 236,
        "startChar": 11,
        "endLine": 236,
        "endChar": 19
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "81e22f8a_8d6e9ac4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 240,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Would it be better to continue the following clean up work even the error occurs?",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9203df78_cbaac9f0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 240,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "I changed the code to try to run all the cleaning functions, so it combines the errors and return them at the end of the function if any of them has occured.",
      "parentUuid": "81e22f8a_8d6e9ac4",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "069bfc13_0b4e1e3c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 259,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Refer to comment in line 213. It is a bad practice to assume how an array have at least N items. Say if one day someone adds a directory at the place saveDirectories is defined and forget to change the magic number 5, this bug is bitter.\n\nI would prefer here you just pass saveDirectories to CommandContext instead of expand array manually (thanks golang has a wonderful ... operator).\n\nBTW, what would be the case that len(saveDirectories) !\u003d 6?",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf87eb95_0a317a85",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 259,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "The ... operator is very useful, I was trying to make sure that the erase function is not going to delete saveDirectoies[5] if the test crashes before creating and appending the saveDirectories[5].",
      "parentUuid": "069bfc13_0b4e1e3c",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b54aef9_8f557f56",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "As long as it only restarts shill, how about renaming it as \"restartShill\"?",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "077705ca_a652e8e5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b54aef9_8f557f56",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4d16d84_b4eded43",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 327,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "Just return err should be okay.",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93e20521_d50874ec",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 327,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b4d16d84_b4eded43",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec57ef92_41a4d3cc",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 331,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "If path exists and is not dir, err \u003d\u003d nil and !stat.IsDir(). In the case, is it okay to call errors.Wrapf(err, ...) ?\n\nHow about:\n\nif stat, err :\u003d os.Stat(path); err !\u003d nil {\n  return errors.Wrapf(err, \"not a directory: %s\", path)\n} else if !stat.IsDir() {\n  return errors.Errorf(\"not a directory: %s\", path)\n}",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8284ce9_8874e90c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 331,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "I changed it to the following:\nstat, err :\u003d os.Stat(path)\nif err !\u003d nil {\n  return errors.Wrapf(err, \"failed getting the file info struct of the path: %s\", path)\n}\nif !stat.IsDir() {\n\treturn errors.Errorf(\"failed path is not a directory: %s\", path)\n}",
      "parentUuid": "ec57ef92_41a4d3cc",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b66dc9b_71b736e4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "ctx is not used in assure*().",
      "range": {
        "startLine": 337,
        "startChar": 18,
        "endLine": 337,
        "endChar": 37
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8377e337_d55d4f3e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b66dc9b_71b736e4",
      "range": {
        "startLine": 337,
        "startChar": 18,
        "endLine": 337,
        "endChar": 37
      },
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec394b72_496b500d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 350,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-12-06T16:25:06Z",
      "side": 1,
      "message": "return errors.Errorf(\"Unexpected path: %s\", path)",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04713f2c_518a2ea7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_init_scripts.go",
        "patchSetId": 3
      },
      "lineNbr": 350,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2019-12-09T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec394b72_496b500d",
      "revId": "9b53a936105be20a637991ec312d1d91a6f5dc44",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}