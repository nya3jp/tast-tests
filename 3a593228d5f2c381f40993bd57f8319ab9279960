{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0354c11a_54ac4bb9",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "since we do not vary this per test, instead of making it a param, we can just directly reference the constants in the test.",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4253c5d3_54ed1943",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0354c11a_54ac4bb9",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2b5e8c1_f22cfaa5",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "can we move line 83 to 91 in a separate helper function to reduce the code in the main test function?\n\nWe\u0027re not supposed to reference \"s\" inside helper functions so you can just return an error and do the fatal in main function\n\nExample: https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/arc/optin/optin.go;l\u003d122;drc\u003d0c2581edf4605f1d6853abf1862a85ac42d6447d",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdbf1dbc_766099df",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "Compared to optin.go, I removed the separate helper function, such that I can use \"defer\" statements for clean-up (for fdms). The original code in optin.go didn\u0027t have the need to defer anything from the helper function.\n\nWith a helper function, the caller will have to take the returned fdms and defer clean up call. And additional parameters need to be passed into the helper func (compared to the 2 params in the original optin.go). For a test func \u003c 50 lines, I feel it\u0027s simpler not to have a separate func (which is only called once).\nAnd I would even consider doing the same thing for optin.go.\n\nWhat do you think?",
      "parentUuid": "b2b5e8c1_f22cfaa5",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4f1671b_7f0eb74b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T19:37:34Z",
      "side": 1,
      "message": "I think we can return the object and use defer in the main function.\n\nFunction length is one concern and it\u0027s subjective how long is too long but the other aspect is cohesion/simplicity. If there related lines of code are moved to a helper then I can infer what is being accomplished by reading the function name without going into details of how it is done. Basically, we can selectively zoom in and out of code without going through each line. It makes the code more declarative IMO.\n\nIt would be easier on my eyes the other way but I\u0027ll let you make the final call.",
      "parentUuid": "cdbf1dbc_766099df",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d9ebafe_0008b7f9",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "we can introduce setupChrome kind of helper here as well as in the original optin test above",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "deb675ad_25290f52",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "Please see my reply above.",
      "parentUuid": "9d9ebafe_0008b7f9",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37074ba0_62f0a456",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "nit: if we declare the policy in a new line and reference it here, it may make it more clear what policy we\u0027re trying to server. WDYT?",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3cb6d9f_c7d5a2ff",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "I agree. Will update the code.",
      "parentUuid": "37074ba0_62f0a456",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0539fbe9_63daae35",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 111,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "Can we use `apps.Launch(ctx, tconn, apps.PlayStore.ID)` instead to avoid simulating key presses and going through the launcher?\n\nExamples: https://source.chromium.org/search?q\u003d%22apps.Launch(ctx,%20tconn,%20apps.PlayStore.ID)%22",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1091f1f_e287df72",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 111,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "Great suggestion. It\u0027s faster and more reliable than simulating key presses.",
      "parentUuid": "0539fbe9_63daae35",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05509ade_5d78903d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-12-22T17:55:48Z",
      "side": 1,
      "message": "isn\u0027t waitForPlayStoreShown enough? I\u0027m wondering why do we need this additional visibility check?",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f08977ee_89646cfc",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin_managed.go",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1519467
      },
      "writtenOn": "2021-12-22T19:15:16Z",
      "side": 1,
      "message": "Got it. Will remove.",
      "parentUuid": "05509ade_5d78903d",
      "revId": "3a593228d5f2c381f40993bd57f8319ab9279960",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}