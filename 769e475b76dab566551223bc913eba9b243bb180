{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a0b77b5d_2d7e053e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 101,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "Check",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b23ec34_d4ce2472",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 101,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a0b77b5d_2d7e053e",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a0586dd_5da910ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 102,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "nits:\ns/give a wait of/wait/\ns/60sec/60 seconds/\ns/do scan/scan/\ns/as if/if/\n. at the end of a sentence.",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d09fc1a1_59f8354f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 102,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-01T15:12:27Z",
      "side": 1,
      "message": "One other thing: if we put a TODO here, and there is no way to track work on it, it will get lost easily. We should file a bug (even if it\u0027s e.g. a P2 feature request) and then put the b/ link here so that it isn\u0027t forgotten.",
      "parentUuid": "0a0586dd_5da910ab",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10d0a6b6_feda5e30",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 102,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d09fc1a1_59f8354f",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db299885_aff9ab68",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 107,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "We should avoid a \"graceful exit\" *unless* we know this test will be running on hardware that does not support the test and have no other way to test that. For that scenario we should try to test just for that condition (i.e. not combine it with a test that could fail fatally) and document it clearly.\n\nOtherwise the test will appear to pass and the next test may fail and be assumed to be the culprit since this test \"passed\".",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fcf0157_95a27339",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 107,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Yes to the reason graceful exit only in case of \u0027network timeout\u0027 error, which can happen with over the air cellular networks and sometimes cellular denies connect for test devices as they do regular register/connect/disconnects. \n\nOTA timeout errors are bound to happen due to signal not reachable in sync with modem scan.",
      "parentUuid": "db299885_aff9ab68",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d6f2786b_bfe7c84c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 107,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-10T02:34:29Z",
      "side": 1,
      "message": "Removed exit.",
      "parentUuid": "7fcf0157_95a27339",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6984c784_35fdaa23",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 112,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "Sleep\ns/loaded/load/\ns/try connect/try to connect./",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1756e9f_3b4827f8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 112,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6984c784_35fdaa23",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57fca49d_bdc8f5c9",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "Avoid sleeping, instead wait for the expected properties (doesn\u0027t EnsureRegistered already do that?) and/or wrap the ModemConnect call below in a loop with a timeout.",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bbabcd13_bf5d128c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "EnsureRegistered return once it finds register state, need to wait atleast 2 sec to attempt connect, I see service denied QMI error if not waited.\n\nQMI protocol error (14): \u0027CallFailed\u0027  , this is like network registration denied(though state changed just now) error.\n\nConnect already waits for 60 seconds, but fails if 2 second sleep not given.",
      "parentUuid": "57fca49d_bdc8f5c9",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a71543c2_80d71fa4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-09T20:20:16Z",
      "side": 1,
      "message": "If we know what error specifically comes up as a result of not waiting for long enough here, maybe we should poll on the Connect as well below. I could see this particular error still sticking around if we have e.g. a slower/lower-cost QC-based modem, if that\u0027s the problem.\n\nIn any event, I think the comment might be a bit misleading anyway -- if we were just waiting for properties to be updated then I would have expected this to already be taken care of like Steven said.",
      "parentUuid": "bbabcd13_bf5d128c",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b528085_5aab0c2b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-10T02:34:29Z",
      "side": 1,
      "message": "Added poll on connect status and connect call. Removed sleep.\n\nQMI error can be handled with poll retries, but sometimes I see other error where fails to connect : https://paste.googleplex.com/5619414687809536",
      "parentUuid": "a71543c2_80d71fa4",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "569ef030_a793fe60",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-10T15:27:39Z",
      "side": 1,
      "message": "Are you talking about the error\n\n [modem0] couldn\u0027t load extended signal information: No way to load extended signal information\n\nI don\u0027t know if that one is relevant. Otherwise, if we\u0027re getting that connect failure, then we\u0027re getting a connect failure -- not sure what would change if we did this instead of just sleeping.\n\nI guess this state change is a bit worrying:\n\n 2021-09-10T02:18:52.762416Z INFO ModemManager[2262]: \u003cinfo\u003e  [modem0] 3GPP registration state changed (home -\u003e unknown)\n 2021-09-10T02:18:52.762636Z INFO ModemManager[2262]: \u003cinfo\u003e  [modem0] state changed (registered -\u003e enabled)\n\nsince we can\u0027t retry connect from that state. Can we turn up the log verbosity and maybe see why that is? (We can also avoid continuing the poll if we\u0027re in the Enabled state rather than Registered by returning the error wrapped in a testing.PollBreak.)",
      "parentUuid": "1b528085_5aab0c2b",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22d33636_1220cc8c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-21T08:47:42Z",
      "side": 1,
      "message": "Tried deletion of all bearers, and waiting for different states not worked.\n\nFound that connect fails if a sleep/delay not given after disable modem, and this is with all qualcomm modems bug: https://buganizer.corp.google.com/u/0/issues/200644653. as this scenario might not be considered as realtime scenario, delay is needed till fix arrives.\n\non Fibocomm devices issue was with connect properties, now its working fine.\n\nEnabled state resulted as a consequence of retrying connect after failed attempt on  trogdor modem(no delay after disable) specific error, might not required to cover this scenario.",
      "parentUuid": "569ef030_a793fe60",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "829e0873_877deea4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 113,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-22T16:03:33Z",
      "side": 1,
      "message": "I see Pavan marked that bug a duplicate of b:188448918... We should put a TODO referencing that bug here so we know to unwind this hack when the time comes.",
      "parentUuid": "22d33636_1220cc8c",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1b95da1_5c0466cf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 119,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "Same comment here, we definitely should not exit here without an error.",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62526882_a9ac07fb",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 119,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "For now will fail test for network timeouts with log message to see how frequent this can happen.",
      "parentUuid": "d1b95da1_5c0466cf",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49594e17_b134d04c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 119,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-10T02:34:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "62526882_a9ac07fb",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a1a01ee_37fada95",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 137,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-01T15:12:27Z",
      "side": 1,
      "message": "We don\u0027t need this log line; the test framework will make note of the end of the test.",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b75d01a0_c8a0c3fd",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 137,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a1a01ee_37fada95",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0785324b_6a6c8541",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 144,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-01T15:12:27Z",
      "side": 1,
      "message": "We\u0027re guaranteed to fall into this case here, as lastGoodApn is defined as \"\" in the line just above.\n\nIs there any reason we need this function at all? Or are we planning to initialize lastGoodApn with something else in a future revision of the CL?",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3351982b_be5beed5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_enable_and_connect.go",
        "patchSetId": 10
      },
      "lineNbr": 144,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "as not using this removing unused function, plan to try with last good known apn but that requires reading service/shill which might not be required to test simple connect/disconnect",
      "parentUuid": "0785324b_6a6c8541",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f320f5f_c4e8c74e",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 228,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "s/boolean/a boolean/\nComments that are sentences should end in a .",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb4bd441_bc370ae4",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 228,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f320f5f_c4e8c74e",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05ee7ce0_6c7f68ec",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 238,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "s/simple modem/SimpleModem/",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "81208710_ab8f45c6",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 238,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05ee7ce0_6c7f68ec",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3fdc6fa_8ed40a54",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 372,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-08-30T17:45:18Z",
      "side": 1,
      "message": "IIRC, this pattern can be simplified using an else (the declared varables are valid for the entire if/else statement):\nif isPowered, err :\u003d modem.IsPowered(ctx); err !\u003d nil {\n  return ...\n} else if !isPowered {\n  return ..\n}\nSame below.",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bae67974_38b779d4",
        "filename": "src/chromiumos/tast/local/modemmanager/modem.go",
        "patchSetId": 10
      },
      "lineNbr": 372,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-09-09T00:31:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3fdc6fa_8ed40a54",
      "revId": "769e475b76dab566551223bc913eba9b243bb180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}