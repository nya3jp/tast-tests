{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4e8b4cef_1992fb2e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2022-09-12T06:58:12Z",
      "side": 1,
      "message": "Hi Robert,\n\nI\u0027d like to use the dut_power code you wrote to measure power in some ARC tests, but I want to make sure my changes don\u0027t break anything.\n\npower.SuspendConsumption.s0ix fails when I run it on a hatch/helios because there is no ppvar_bat or ppvar_bat_q rails (but there is a ppvar_vbat). Do I need to run this test on a specific board?",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31f654f6_83cb1178",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1531252
      },
      "writtenOn": "2022-09-12T15:34:27Z",
      "side": 1,
      "message": "I\u0027d recommend that you update `power.SuspendConsumption.s0ix` to support `ppvar_vbat`. As far as I know there isn\u0027t a standard for how those rails are named so `power.SuspendConsumption.s0ix` checks a couple of different ones.",
      "parentUuid": "4e8b4cef_1992fb2e",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f4f2427_195d5c8e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2022-09-13T03:56:06Z",
      "side": 1,
      "message": "Test now fails on a hatch/helios with:\n```\n2022-09-13T03:46:15.951415Z power.SuspendConsumption.s0ix [ FAIL ] Device battery life of 4.375000 days is less than minimum of 14.000000\n```\n\nWhich means at least the power measurement code works.",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb95f71b_ee648f62",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1531252
      },
      "writtenOn": "2022-09-12T15:34:27Z",
      "side": 1,
      "message": "Is there a particular reason that you want to merge all the measurements together? The values from on-board sensors should be more accurate than the EC measurements so I want to avoid a situation where a more accurate measurement gets overwritten by a less accurate one.",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66225fa3_629b8fdc",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2022-09-13T03:56:06Z",
      "side": 1,
      "message": "In the test I\u0027m writing, I\u0027d like to just log everything. That way we can compare boards even when not all rails are available.\n\nI think all the rails have unique names, so it should be save to merge them into one map.",
      "parentUuid": "eb95f71b_ee648f62",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60454cf6_d3f08708",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1531252
      },
      "writtenOn": "2022-09-14T17:45:29Z",
      "side": 1,
      "message": "Would it be possible to make that an option that can be passed into the function? I\u0027m just concerned that a future change to how rails are named could cause results to get silently overwritten.",
      "parentUuid": "66225fa3_629b8fdc",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdcec0d6_5736d492",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2022-09-21T04:47:18Z",
      "side": 1,
      "message": "I added an `allSummaries` flag, when false it reverts back to only picking the first summary file in the list.\n\nWe also return an error if there are duplicate names for any of the metrics.\n\nThis caused power.SuspendConsumption.s0ix to fail though, because onboard_summary.json exists, and only contains ppchg5 and ppdut5. So when we look for ppvar_vbat, it\u0027s not there.\n\nI\u0027ve updated the test to read power from ppdut5 as well, but I\u0027m not sure this is the correct thing to do.",
      "parentUuid": "60454cf6_d3f08708",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10a029b5_137b2b65",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2022-09-22T05:21:01Z",
      "side": 1,
      "message": "Oh, I updated this too soon,\n\nI needed to remove all the time related means, since they have the same name for each.\n\nIf that\u0027s a problem, I think we should probably just explicitly return all the different results and not hide them behind the Results interface.",
      "parentUuid": "bdcec0d6_5736d492",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "623ba491_a93edf74",
        "filename": "src/chromiumos/tast/remote/firmware/power/dut_power.go",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1531252
      },
      "writtenOn": "2022-09-28T22:26:11Z",
      "side": 1,
      "message": "Do you mean returning all results from all files? I.e. make the results from the onboard sensors it\u0027s own map, and a separate map for the EC results? I think that would be a good idea. It would make things a bit more flexible and each individual test could determine which results they want to prioritize.",
      "parentUuid": "10a029b5_137b2b65",
      "revId": "cd79036cdacbc45fa8c793093cab27be27dc4cf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}