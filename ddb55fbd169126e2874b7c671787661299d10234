{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0aa31391_8dd74a31",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T10:17:47Z",
      "side": 1,
      "message": "Hi Gabor!\n\nWhile we can\u0027t really test anything after a real update (right?), I already wrote a test basically faking a rollback by triggering the respective script and faking clobber_state. So far it only checks whether the enrollment screen is automatically reached but we can extend it in the future.",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c2690e8_0591db05",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "Right, right now we cannot test anything after a real update.",
      "parentUuid": "0aa31391_8dd74a31",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f444429_17cf35f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "Is it urgent to merge this test, or can we wait until Victor is back?\nAs it touches enrollment, and it is a remote test, I\u0027d rather wait for him.",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad7d9bfb_dfe7649c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T12:49:45Z",
      "side": 1,
      "message": "I would prefer to merge it before, because when Victor is back I will be gone until roughly end of September. That would make catching any errors in M94 tricky and we plan to start TT again with M96 -\u003e M94.\nI\u0027d say if you think the test may be problematic for infrastructure / break device, we should wait for Victor. If it\u0027s just a matter of how to write the test I\u0027d prefer to merge now and then ask Victor when I\u0027m back. Up to you.",
      "parentUuid": "1f444429_17cf35f1",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da3bf6d5_61ffc1f8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T13:34:59Z",
      "side": 1,
      "message": "Do you think it has a possibility to break a device?\nThe test can stop at any point because of a timeout. Can any command without the cleanup leave the DUT in an undesirable state?",
      "parentUuid": "ad7d9bfb_dfe7649c",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab569801_0f8b2c92",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T13:34:59Z",
      "side": 1,
      "message": "As this test has an unusual structure, just a few function calls in the main functions, I add Kamil and Oleh as reviewers as well.\nI am adding Kamil as he likes these kinds of structures.\nOleh, can you check the exec.Commands? Do you think some should be replaced by Go calls? Like the file deletion.",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "034e077e_e06ae971",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T13:53:54Z",
      "side": 1,
      "message": "I don\u0027t think so, as I am not doing anything with a device that\u0027s not already done apart form starting oobe_config_save. I will investigate what happens if oobe_config_save does not terminate, i.e. wether it wil still be running on the device after the context timeout, if that is the case one should probably do \"stop oobe_config_save\" on the cleanup task.",
      "parentUuid": "da3bf6d5_61ffc1f8",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3a771d3_3bcc33b8",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "You shouldn\u0027t pass testing.State to a helper function.\nIf you have an error, you should Wrap() it, and return with it, and you can raise s.Error() or s.Fatal() in the main function.",
      "range": {
        "startLine": 51,
        "startChar": 35,
        "endLine": 51,
        "endChar": 51
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0282e6cc_ce05835a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T12:49:45Z",
      "side": 1,
      "message": "Am I allowed to not add anything to the error, i.e. just call s.Error(err.Error()) in the main test function?\n\nOut of curiousity, why shouldn\u0027t I do that?",
      "parentUuid": "f3a771d3_3bcc33b8",
      "range": {
        "startLine": 51,
        "startChar": 35,
        "endLine": 51,
        "endChar": 51
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c34d22b_2382cc16",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T13:34:59Z",
      "side": 1,
      "message": "https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#test-subpackages\nIt is not forbidden if it is not an exported function, just better to avoid it.\nAnd yes, it is possible to raise an error with s.Error(err).",
      "parentUuid": "0282e6cc_ce05835a",
      "range": {
        "startLine": 51,
        "startChar": 35,
        "endLine": 51,
        "endChar": 51
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bc7fdca_2b1bb50e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T13:53:54Z",
      "side": 1,
      "message": "I see, so the argument is information hiding. For example here I could pass s.DUT() and return an error instead. That sounds very reasonable.\nMy original motiviation to pass testing.State was avoiding the additional boilerplate code for the errors, but I suppose that\u0027s something one has to live with when writing go code.",
      "parentUuid": "4c34d22b_2382cc16",
      "range": {
        "startLine": 51,
        "startChar": 35,
        "endLine": 51,
        "endChar": 51
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fef521a5_64305e29",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "Can you Dial once in the main function, and pass client as a parameter?",
      "range": {
        "startLine": 58,
        "startChar": 1,
        "endLine": 58,
        "endChar": 7
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fdef576d_88a0be14",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2021-08-16T12:49:45Z",
      "side": 1,
      "message": "No because I lose the connection during reboot, I actually need to dial twice.",
      "parentUuid": "fef521a5_64305e29",
      "range": {
        "startLine": 58,
        "startChar": 1,
        "endLine": 58,
        "endChar": 7
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f091aae1_fd3aea9d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T13:34:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fdef576d_88a0be14",
      "range": {
        "startLine": 58,
        "startChar": 1,
        "endLine": 58,
        "endChar": 7
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ac5c2bd_f4777f6f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/policy/enterprise_rollback_in_place.go",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "Use CommandContext() for every call.",
      "range": {
        "startLine": 80,
        "startChar": 26,
        "endLine": 80,
        "endChar": 33
      },
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b07b080_652eccf9",
        "filename": "src/chromiumos/tast/services/cros/policy/rollback_service.proto",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-08-16T12:12:51Z",
      "side": 1,
      "message": "nit: add newline to the end of the file.",
      "revId": "ddb55fbd169126e2874b7c671787661299d10234",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}