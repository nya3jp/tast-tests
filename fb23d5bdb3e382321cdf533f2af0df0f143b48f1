{
  "comments": [
    {
      "key": {
        "uuid": "a6eb1fc2_7196c4b6",
        "filename": "src/chromiumos/tast/local/bundles/cros/wilco/ec_event.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "I did not get how it works: there is infinity loop to read EC events until EC stops emitting events. But what if EC will never stop emitting events? We even do not log events we ignored",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 53
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "317f28de_e2a292ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/wilco/ec_event.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "Why do you need to clear EC event queue if you will ignore other events anyway?",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 2
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a3e4c3d_834229e7",
        "filename": "src/chromiumos/tast/local/bundles/cros/wilco/ec_event.go",
        "patchSetId": 2
      },
      "lineNbr": 71,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "can be ommited",
      "range": {
        "startLine": 71,
        "startChar": 73,
        "endLine": 71,
        "endChar": 75
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29cd72e3_20e81ca0",
        "filename": "src/chromiumos/tast/local/bundles/cros/wilco/ec_event.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "blank line after?",
      "range": {
        "startLine": 72,
        "startChar": 2,
        "endLine": 72,
        "endChar": 16
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cebb252f_0811edc9",
        "filename": "src/chromiumos/tast/local/bundles/cros/wilco/ec_event.go",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "not needed `else` if you break",
      "range": {
        "startLine": 83,
        "startChar": 4,
        "endLine": 83,
        "endChar": 10
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6bbb1bb_fc6b54d5",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-11-19T12:43:21Z",
      "side": 1,
      "message": "Slices already have a length, could we use that instead of the struct?",
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b418ab42_9f98f2ab",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "We allocating 16 bytes of memory all the time:\n    ev.Payload \u003d make([]byte, maxEventSize)\n\nOnly if we\u0027ll manually resize |Payload| after reading",
      "parentUuid": "d6bbb1bb_fc6b54d5",
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d71121e_42b4bf2c",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "I would like to add `else` statement as well here. If !ok we probably shouldn\u0027t try to read at all.",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 55,
        "endChar": 2
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d14b584e_fe55f716",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-11-19T12:43:21Z",
      "side": 1,
      "message": "Shorten the slice after the read to the actual length.",
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a490ee7_2e3b54c4",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "nil",
      "range": {
        "startLine": 59,
        "startChar": 9,
        "endLine": 59,
        "endChar": 11
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39886058_14f5b3d2",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "Should be nil",
      "range": {
        "startLine": 62,
        "startChar": 9,
        "endLine": 62,
        "endChar": 11
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "affcd4fa_8f2be912",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "I am not sure whether it useful",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 70,
        "endChar": 51
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3ecba31_d79925e0",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-11-19T12:43:21Z",
      "side": 1,
      "message": "nit: Could we lower this? Maybe 10 ms is enough.",
      "range": {
        "startLine": 72,
        "startChar": 62,
        "endLine": 72,
        "endChar": 65
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b650ab5_cc8f1ef0",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "I guess 100ms is fine, in theory kernel can do smth else and test can be flaky",
      "parentUuid": "f3ecba31_d79925e0",
      "range": {
        "startLine": 72,
        "startChar": 62,
        "endLine": 72,
        "endChar": 65
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efab1423_680c6b79",
        "filename": "src/chromiumos/tast/local/wilco/ec.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2019-11-19T14:01:52Z",
      "side": 1,
      "message": "Maybe it\u0027s better to log all ignored events",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 74,
        "endChar": 32
      },
      "revId": "fb23d5bdb3e382321cdf533f2af0df0f143b48f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}