{
  "comments": [
    {
      "key": {
        "uuid": "0c42e74b_d5286d3c",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-08-14T07:42:06Z",
      "side": 1,
      "message": "In this case out is nil, so we should not close it.",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 13
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a57eb96f_c0247e93",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1359584
      },
      "writtenOn": "2019-08-14T08:59:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c42e74b_d5286d3c",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 13
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "766f64f6_7c77dbe7",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-08-14T07:42:06Z",
      "side": 1,
      "message": "out.Close is missing in this case.\n\nAs you see, doing cleanup in every failure case is error-prone. I recommend using defer. For example:\n\n success :\u003d false\n\n out, err :\u003d os.Create(...)\n if err !\u003d nil {\n   ...\n }\n defer func() {\n   if !success {\n     out.Close()\n   }\n }()\n\n ...\n\n if err :\u003d cmdAwk.Start(); err !\u003d nil {\n   ...\n }\n defer func() {\n   if !success {\n     cmdAwk.Kill()\n     cmdAwk.Wait()\n   }\n }()\n\n ...\n\n success \u003d true\n return \u0026top{...}, nil",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 16
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60cb32ae_62c4545c",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1359584
      },
      "writtenOn": "2019-08-14T08:59:05Z",
      "side": 1,
      "message": "Done. I have also added this to vmstat.go since this make the logic more clear.",
      "parentUuid": "766f64f6_7c77dbe7",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 16
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fca200f2_ead13077",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-08-14T11:09:40Z",
      "side": 1,
      "message": "Do you want to use the same method for cmdAwk as well, just like the example code above?",
      "parentUuid": "60cb32ae_62c4545c",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 16
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51addbe5_b01bbccb",
        "filename": "src/chromiumos/tast/local/profiler/top.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1359584
      },
      "writtenOn": "2019-08-14T11:22:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fca200f2_ead13077",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 16
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78f60411_0e1b30ee",
        "filename": "src/chromiumos/tast/local/profiler/vmstat.go",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-08-14T07:42:06Z",
      "side": 1,
      "message": "no close in this case",
      "range": {
        "startLine": 33,
        "startChar": 2,
        "endLine": 33,
        "endChar": 13
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bb0c4a1_c6149b76",
        "filename": "src/chromiumos/tast/local/profiler/vmstat.go",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1359584
      },
      "writtenOn": "2019-08-14T08:59:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "78f60411_0e1b30ee",
      "range": {
        "startLine": 33,
        "startChar": 2,
        "endLine": 33,
        "endChar": 13
      },
      "revId": "59c3b55ff547c2de76c4478075deedcaa92e2fda",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}