{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "318dce97_95cdf327",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-28T08:41:08Z",
      "side": 1,
      "message": "optional: I think the biggest change of this CL is the user switch from root to chronos?\nIf you agreed, maybe nice to have it at the first line.",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c89c80db_786fb276",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-08-16T07:04:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "318dce97_95cdf327",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ce08724_4127d38a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-07-28T04:50:07Z",
      "side": 1,
      "message": "PTAL. This is part of a series of CLs trying to make the options between command line Tast lacros and shelf lacros more similar.",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5e006f5_4430edf3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-28T08:41:08Z",
      "side": 1,
      "message": "Great work!",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d3e4b55_a1562f94",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-07-29T04:22:12Z",
      "side": 1,
      "message": "CQ failure might be a real failure",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "450bd839_9105e642",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-07-29T07:43:24Z",
      "side": 1,
      "message": "Yu-hsuan, do you know why this change might break audio tests?",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd564a4c_ca21eda4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-07-29T14:32:44Z",
      "side": 1,
      "message": "It seems that if Chrome run in sandbox, it doesn\u0027t have permission to access the CRAS socket file (/run/cras/.socket). Not sure how to fix it. Is it possible to add it into the whitelist?",
      "parentUuid": "450bd839_9105e642",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "afc34c31_f90b6dbf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-07-30T03:01:44Z",
      "side": 1,
      "message": "Let me check if we can run as chronos with --no-sandbox (I think for some reason it required root?)\n\nIs there a way we can rewrite this test to not require those permissions?",
      "parentUuid": "cd564a4c_ca21eda4",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d8698a2_20c3cfdb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-08-11T03:50:00Z",
      "side": 1,
      "message": "Friendly ping on the question: \u003e Is there a way we can rewrite this test to not require those permissions?\n\nIdeally we don\u0027t want to run with --no-sandbox because it changes the environment.",
      "parentUuid": "afc34c31_f90b6dbf",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5787d011_2992854b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-08-11T06:45:48Z",
      "side": 1,
      "message": "I think it\u0027s difficult to rewrite test since we needs to use CRAS.\n\nOn the real device, lacros connect to CRAS with the same way. Does it also have --no-sandbox flag? Maybe we can follow the this environment.",
      "parentUuid": "1d8698a2_20c3cfdb",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33539b67_f329fbdb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-08-12T05:39:51Z",
      "side": 1,
      "message": "No, lacros is not launched with --no-sandbox on real devices. That\u0027s why I\u0027m trying to remove this flag. I\u0027m trying to make the environment the same.\n\nWhy does it work on real devices and not here?",
      "parentUuid": "5787d011_2992854b",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15ca0df7_b1dc4429",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-08-12T09:51:53Z",
      "side": 1,
      "message": "Just found that the reason may not be related to --no-sandox flag. It may be the problem about the permission of chronos.\n\nNot sure why the lacros opened by chronos has no permission to access /run/cras/.cras_socket. But if we set `chmod 777 /run/cras/.cras_socket`, the test will pass.",
      "parentUuid": "33539b67_f329fbdb",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5ea57ff_5adb0e39",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-08-12T12:26:28Z",
      "side": 1,
      "message": "The reason is that chronos doesn\u0027t belong to the cras group in this function. That\u0027s why it can not access the cras socket file.",
      "parentUuid": "15ca0df7_b1dc4429",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e14e0e9c_3915de6c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-08-13T02:24:04Z",
      "side": 1,
      "message": "Thanks for looking into it. Shelf launched lacros is run as the chronos user though, so I wonder why it wouldn\u0027t work in tast tests when it does in regular usage?",
      "parentUuid": "c5ea57ff_5adb0e39",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94cf48ab_471b2a53",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-08-13T04:15:16Z",
      "side": 1,
      "message": "I think the issue is that \"syscall.Credential\" doesn\u0027t include the groups of chronos. If you add group in this function, the issue will be fixed.",
      "parentUuid": "e14e0e9c_3915de6c",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4be24dea_f4a18677",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-08-13T04:25:40Z",
      "side": 1,
      "message": "Thanks! Let me update the CL. We should probably include all of the chronos groups though so I\u0027ll work on that.",
      "parentUuid": "94cf48ab_471b2a53",
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "406a19df_1c26c235",
        "filename": "src/chromiumos/tast/local/lacros/launcher/launcher.go",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1269379
      },
      "writtenOn": "2021-08-13T04:13:08Z",
      "side": 1,
      "message": "l.cmd.Cred(syscall.Credential{Uid: sysutil.ChronosUID, Gid: sysutil.ChronosGID, Groups:[]uint32{600}})\n\nIt should be the easiest fix. 600 is the ID of CRAS group.",
      "range": {
        "startLine": 170,
        "startChar": 0,
        "endLine": 170,
        "endChar": 83
      },
      "revId": "1f48f699324f16a33b8e0b74ed772e118f1266fe",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}