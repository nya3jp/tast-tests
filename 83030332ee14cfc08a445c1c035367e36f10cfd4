{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b73aebfa_d609ed33",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-09T10:24:52Z",
      "side": 1,
      "message": "thanks for your recommendation",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e73a2a4d_6beb11c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "Thank you for offline chat. That helped me to understand your intention. Here are recommendations.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7171b892_63a70a3e",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 56,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "So, per offline chat, you do not need to run shell script.\nI think this function can just return a command line as an array of strings.\n\n  func DisplayCMD(dir string) []string {\n    return []string{\"python\", displayScript, dir}\n  }\n  \nPls find below for recommendations of other parts.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a79bf886_f25756e1",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 56,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "from offline discussion , since display_chart.py will not terminated when its finished , so we can not running as foreground. \nHow ever , after discussion , we modify the whole process as background process in python command replace by cmd.Start()",
      "parentUuid": "7171b892_63a70a3e",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c11614cb_07640af8",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 56,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a79bf886_f25756e1",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "777eef33_590dfc84",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 225,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "sh -c is needed here now, because there\u0027s no easy way to obtain PID of the remote process. So, let\u0027s inline the workaround part here, which is not needed for your new test.\n\nout, err :\u003d conn.CommandContext(ctx, \"sh\", \"-c\", fmt.Sprintf(\"(%s \u003e %s 2\u003e\u00261) \u0026 echo -n $!\", shutil.EscapeSlice(displayCmd), shutil.Escape(displayOutputLog))\n\nIt\u0027s better to document the reasons.\n\n// Currently, there\u0027s no easy way to obtain the process ID of remote process.\n// So, here shell trick ($!) is used to print the PID on stdout.\n// Output is redirected into a file.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d0a2c41_e66e0405",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 225,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "777eef33_590dfc84",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f986ea86_ad1d312c",
        "filename": "src/chromiumos/tast/common/camera/chart/chart.go",
        "patchSetId": 8
      },
      "lineNbr": 225,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2d0a2c41_e66e0405",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "874f7f54_35c5c47c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "nit/style: \"image\" starting from small letter.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7dbfc1bd_18948fcb",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "874f7f54_35c5c47c",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8ca8a8b_a7447a9c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 28,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "nit: could you use s.Log() instead? Ditto for all testing.ContextLog* in this function.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "450bb22e_860ae300",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 28,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "b8ca8a8b_a7447a9c",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e92074a7_3592c488",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "nit: filepath.Join(s.OutDir(), \"camerabox_displaychart.log\")",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "81fe9e90_b5100c13",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "e92074a7_3592c488",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6960a38e_dc47edb3",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 31,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "nit/style: CMD (all capitals for acronyms)",
      "range": {
        "startLine": 31,
        "startChar": 8,
        "endLine": 31,
        "endChar": 11
      },
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2fd5a7c8_ed554644",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 31,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "6960a38e_dc47edb3",
      "range": {
        "startLine": 31,
        "startChar": 8,
        "endLine": 31,
        "endChar": 11
      },
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a25a0dc_d8745943",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 41,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "Here, per offline chat, you can run the script on foreground.\n\n  out, err :\u003d testexec.CommandContext(ctx, displayCMD...).Output(testexec.DumpLogOnError)\n  if err !\u003d nil {\n    ...\n  }\n  if err :\u003d os.WriteFile(logFile, out, 0644); err !\u003d nil {\n    ...\n  }\n\nThen, out holds stdout of the command. Note that Output() is a blocking execution.\nSo, you can check if ChartReadyMsg is contained.\n\n  if !strings.Contains(string(out), chart.ChartReadyMsg) {\n    ...\n  }",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c01a0017_71ac8fc6",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 41,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "4a25a0dc_d8745943",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29b70b24_67a4a9be",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "s.Fatal(\"Failed to execute chart script: \", err)\n\nlet\u0027s use s.Fatal to report an error.\nCould you include \"err\" instance into the logging message, that will help you to debug in the future.\n\nDitto for error handling in the if stmt in my recommendation above.\ntesting.ContextLogf() records logs, but it does not report any errors.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ab90a79_c93daff0",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "29b70b24_67a4a9be",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30387579_96e44adf",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 47,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-05-10T08:40:31Z",
      "side": 1,
      "message": "note: as Output() is a blocking execution, you do not need Kill here.",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b82c7b9f_8170e263",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/camerabox_displaychart.go",
        "patchSetId": 8
      },
      "lineNbr": 47,
      "author": {
        "id": 1539172
      },
      "writtenOn": "2022-05-12T09:27:40Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "30387579_96e44adf",
      "revId": "83030332ee14cfc08a445c1c035367e36f10cfd4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}