{
  "comments": [
    {
      "key": {
        "uuid": "900215bf_d9636871",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-04-20T14:04:55Z",
      "side": 1,
      "message": "IMO there is little value to duplicate the HAL3* test for ARCVM, as the test is designed for exercising the camera HAL directly without any interaction with ARC. The only reason why we need ARC to run this test is to get the recording parameter from media_profiles.xml, which should be same for ARC++ and ARCVM.\n\n+hywu@, the author of HAL3 test binary, WDYT?",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31f34ae5_d2263a46",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1221932
      },
      "writtenOn": "2020-04-21T01:06:20Z",
      "side": 1,
      "message": "The arcvm parameter is needed to run these tests in ARCVM board (because of the android_vm dependency) - otherwise, these tests will only be run in ARC++ container boards. That\u0027s the reason we need to enable extra \"vm\" parameter here even though they mostly does not have interaction with the Android side.\n\nBut actually, there are 2 tests that require android-sh (which depends on Android being booted in ARCVM): the hal3_module and hal3_recording, so they also need different Pre for ARCVM.",
      "parentUuid": "900215bf_d9636871",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f568836c_1bf1ca12",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-04-21T01:55:49Z",
      "side": 1,
      "message": "Maybe we can use \"arc\" as the dep which covers both ARC++ and ARCVM, run generate_camera_profile in tast, and get the recording params from /mnt/stateful_partition/encrypted/var/cache/camera/media_profiles.xml.\n\nNote that inker@ is also adding a remote test for running HAL3 on camera box, which is already duplicating a test to 3 tests (local and camera box with front/back camera). I would prefer not to double the combination if possible.\n\n+inker@ to confirm generate_camera_profile is available on all boards with ARC, and check the camera box plan.\n\nref: https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/test_dependencies.md",
      "parentUuid": "31f34ae5_d2263a46",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf3ac076_1fe519cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-04-22T09:06:30Z",
      "side": 1,
      "message": "I think the key point of having \"vm\" parameter is to allow promoting tests to critical independently. There are several mainline informational tests in the CL. If we don\u0027t parameterize them, critical promotion of those tests will be blocked until we stabilize ARCVM.",
      "parentUuid": "f568836c_1bf1ca12",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7d77725_527c3a3e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-04-22T09:54:01Z",
      "side": 1,
      "message": "The test is exercising the camera stack lower than ARC level, and should work even if ARCVM failed to boot. \n\nDo we run other non-ARC related critical tests on ARCVM boards? If so, I think HAL3 should be classified as such too.",
      "parentUuid": "bf3ac076_1fe519cd",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2b84597_2e4ef247",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-04-23T05:14:06Z",
      "side": 1,
      "message": "I see, thanks for clarification.",
      "parentUuid": "b7d77725_527c3a3e",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa127878_9cd5571e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1221932
      },
      "writtenOn": "2020-04-23T07:07:14Z",
      "side": 1,
      "message": "Hm, are you suggesting to use a dependency that covers both android_pi and android_vm (i.e., android_both)?\n\n+yusukes@ IIRC, you deprecated android_both but I don\u0027t remember the reason, could you elaborate if it is ok to use that here?",
      "parentUuid": "c2b84597_2e4ef247",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcaeea26_08b91a44",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2020-04-23T07:15:38Z",
      "side": 1,
      "message": "android_both didn\u0027t work well (and was removed) for two reasons:\n\n- it didn\u0027t support dual boot boards like eve. on such a board, android_both only ran the test with container.\n- it was unclear which container and VM versions the android_both dep supports. Although we only support P container and R vm today, at that time we had many (N,P,Q,R,S container and P,R vm). We ended up too many android_*_both variants and the situation was not managable.\n\nanyway, if this test doesn\u0027t really care about underlying ARC architecture, using \"arc\" dep is what we should do.",
      "parentUuid": "aa127878_9cd5571e",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "224a155c_004ef3e9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1221932
      },
      "writtenOn": "2020-04-24T08:45:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcaeea26_08b91a44",
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11956889_f7626b4e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1143539
      },
      "writtenOn": "2020-04-28T08:30:27Z",
      "side": 1,
      "message": "How about using \u0027with\u0027 instead to avoid the misunderstanding that the test is run inside of ARC?",
      "range": {
        "startLine": 7,
        "startChar": 18,
        "endLine": 7,
        "endChar": 20
      },
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff3b0d57_4e3b80f4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3/hal3.go",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1221932
      },
      "writtenOn": "2020-04-20T12:59:43Z",
      "side": 1,
      "message": "jcliang, is this safe? From what I can see, we should have this even in pi-arc: https://source.corp.google.com/pi-arc-dev/device/google/cheets2/video/Android.mk;l\u003d28",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 62
      },
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f93da35b_45606bab",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3/hal3.go",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1001646
      },
      "writtenOn": "2020-04-20T13:07:20Z",
      "side": 1,
      "message": "I never noticed that we have a symlink from /system/etc/media_profiles.xml to /vendor/etc/media_profiles.xml in ARC++. I think this should work.",
      "parentUuid": "ff3b0d57_4e3b80f4",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 62
      },
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3922950e_7d4c6600",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_recording.go",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1221932
      },
      "writtenOn": "2020-04-20T12:59:43Z",
      "side": 1,
      "message": "Btw, this test is not passing in ARCVM due to high video frame drop rate:\nhttps://paste.googleplex.com/6269307505868800",
      "range": {
        "startLine": 17,
        "startChar": 16,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "f3ab2d30a0154dcef65c30bbd8081b136e4489e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}