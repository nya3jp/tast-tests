{
  "comments": [
    {
      "key": {
        "uuid": "dc9c03fb_3d2cdc8a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2020-09-28T14:41:14Z",
      "side": 1,
      "message": "A quick heads-up here.\n\nLooks like this has an unfortunate consequence of taking longer time out of tests.\nThe default timeout for a local Tast test is 2 minutes. If we fail to wait for CPU to become idle, this takes all the time a local test with default timeout has.\n\nYou\u0027ll a clear \"failure transition\" in some tests, e.g., this one: https://tastboard.corp.google.com/test/camera.HAL3JDA",
      "revId": "4d7a2ab485dc229eb98bcdfbc8e4f9f878fd8419",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e5db362_34de148f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2020-09-28T14:43:38Z",
      "side": 1,
      "message": "I personally think the better, more sensical long term solution is to make the wait-for-idle process a precondition, rather than consuming the context of the main test.\n\nWhat do you think?",
      "parentUuid": "dc9c03fb_3d2cdc8a",
      "revId": "4d7a2ab485dc229eb98bcdfbc8e4f9f878fd8419",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "895baae4_c5b618a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2020-09-30T01:52:48Z",
      "side": 1,
      "message": "Making it a precondition could be useful. One possible concern is that it\u0027s possible some tests rely on WaitUntilIdle to wait for setup work done in the test body (although the tests I work with don\u0027t).",
      "parentUuid": "6e5db362_34de148f",
      "revId": "4d7a2ab485dc229eb98bcdfbc8e4f9f878fd8419",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e080eb29_de139e3e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1288602
      },
      "writtenOn": "2020-09-30T02:56:39Z",
      "side": 1,
      "message": "I\u0027m not sure if a precondition would work here. If preconditions are shared between tests, CPU usage might still be high from a previous test run on the same device. Having a separate WaitUntilIdle function also gives test writers more control. This is e.g. useful in encoder tests to wait for the CPU to become Idle only after extracting the input webm video to create the raw YUV input file.",
      "parentUuid": "895baae4_c5b618a2",
      "revId": "4d7a2ab485dc229eb98bcdfbc8e4f9f878fd8419",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}