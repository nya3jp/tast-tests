{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "dcb66ea8_bacf709a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-21T17:47:49Z",
      "side": 1,
      "message": "tast-wise: +2 (see comment about the comment)\n\nwait for +2 from someone from your team.",
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f80adeb_39111bd2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-22T16:54:32Z",
      "side": 1,
      "message": "tast-wise SLGM (see comments / wait for +2 from team mate)",
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bdc70a0_a10406bd",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-21T17:47:49Z",
      "side": 1,
      "message": "not clear what do you mean by \"we can\"... followed by \"That\u0027s the reason we can\u0027t call reboot\".\n\nDo you mean that we are actually connecting to the DUT? (as opposed that \u0027we can connect to the DUT\u0027).",
      "range": {
        "startLine": 153,
        "startChar": 29,
        "endLine": 153,
        "endChar": 37
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bccb12e_18b53e45",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1441652
      },
      "writtenOn": "2022-07-21T23:34:03Z",
      "side": 1,
      "message": "Update flow consists of the following steps:\n1. The test reboots the device.\n2. During boot, `bio_fw_updater` is called and it updates FP firmware. After update `bio_fw_updater` schedules reboot.\n3. When all devices are updated (it could also be touchpad for example) the DUT reboots.\n4. DUT boots to the login screen.\n\nSo there are actually 2 reboots. The problem is that we can connect to the device before the second reboot (After all devices are updated, but before reboot). If I call `d.Reboot()` it could return before the second reboot, so the connection will eventually be broken.\n\nI wrote \"we can\" because it hugely depends on the board, DHCP server, servo, etc. For example, on Zork the test connects to DUT always after the second reboot but on the hatch it connects before that.",
      "parentUuid": "4bdc70a0_a10406bd",
      "range": {
        "startLine": 153,
        "startChar": 29,
        "endLine": 153,
        "endChar": 37
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8dea550_dc13475a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-22T16:54:32Z",
      "side": 1,
      "message": "Thanks for the info.\nIn case it is not documented already on the file, it would be good to add those comments somewhere in the file. Could be useful for future maintainers.",
      "parentUuid": "1bccb12e_18b53e45",
      "range": {
        "startLine": 153,
        "startChar": 29,
        "endLine": 153,
        "endChar": 37
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d8defcc5_033409e6",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1441652
      },
      "writtenOn": "2022-07-26T19:07:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f8dea550_dc13475a",
      "range": {
        "startLine": 153,
        "startChar": 29,
        "endLine": 153,
        "endChar": 37
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c68ad3a_c91d4ad3",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-21T17:47:49Z",
      "side": 1,
      "message": "to be address in another CL: This con be improved... perhaps with a Poll...\n\nwhat if the DUT takes longer than 60 seconds? or what if it takes less (we are wasting lab time) ?",
      "range": {
        "startLine": 161,
        "startChar": 1,
        "endLine": 167,
        "endChar": 2
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ea05dca_9fe4144b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1441652
      },
      "writtenOn": "2022-07-21T23:34:03Z",
      "side": 1,
      "message": "I really tried to use `Poll` (that was my first idea), but it needs to take into account DUT behaviour from the comment above. I was thinking about polling for e.g. 10 seconds if DUT is reachable, if it\u0027s not reachable then I could use `WaitConnect`.\n\nMaybe you have some better idea to implement it?",
      "parentUuid": "7c68ad3a_c91d4ad3",
      "range": {
        "startLine": 161,
        "startChar": 1,
        "endLine": 167,
        "endChar": 2
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e14fd1a8_fc62f24a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2022-07-22T16:54:32Z",
      "side": 1,
      "message": "yes, tricky.\n\nperhaps to check for the existence of a file or something like that.\n\ne.g:\nwhen it is being updated (after the 1st reboot), you add a script that creates a file.. you place that script in the scripts-that-get-run when the machine boots (?)\n\nso, on the second reboot, that file will be created.\nand you only have to check to see whether that file exists (?)",
      "parentUuid": "6ea05dca_9fe4144b",
      "range": {
        "startLine": 161,
        "startChar": 1,
        "endLine": 167,
        "endChar": 2
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3958fbbb_e8616504",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1441652
      },
      "writtenOn": "2022-07-22T17:06:52Z",
      "side": 1,
      "message": "Yes! The following [file](https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform2/init/upstart/boot-update-firmware.conf;l\u003d140-141;drc\u003d90da8f5ad54dc5f0534a26038a626cc09182dbe5) is created when DUT needs second reboot.\n\nThanks for the advice!",
      "parentUuid": "e14fd1a8_fc62f24a",
      "range": {
        "startLine": 161,
        "startChar": 1,
        "endLine": 167,
        "endChar": 2
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "20b31269_702e1d86",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_updater.go",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1441652
      },
      "writtenOn": "2022-07-26T19:07:58Z",
      "side": 1,
      "message": "I implemented polling https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3788174. Actually it\u0027s not checking if the file exists. Let\u0027s move discussion to that patch.",
      "parentUuid": "3958fbbb_e8616504",
      "range": {
        "startLine": 161,
        "startChar": 1,
        "endLine": 167,
        "endChar": 2
      },
      "revId": "86ec01852d3be8888b2b591f8b00a1bfda202692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}