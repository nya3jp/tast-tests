{
  "comments": [
    {
      "key": {
        "uuid": "6a251bbb_91303a25",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 19,
      "author": {
        "id": 1322146
      },
      "writtenOn": "2020-03-12T08:44:16Z",
      "side": 1,
      "message": "Hmm if I understand what Shuhei taught me correctly, I would propose to rename it to |UserTokenGetter|. I personally think this confusing naming of one of reasons why we had so many comments going in this CL.\n\nSee other comments for more contexts.",
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "982c57b7_dbfe3a89",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1322146
      },
      "writtenOn": "2020-03-12T08:44:16Z",
      "side": 1,
      "message": "(Cont.) Looks like in the current this is not even used. So,\n1. I think just removing it is sensible to just remove this. With renamed interface I think is better above, I have no problem with the readability for now.\n2. If we want to keep this and remove the function argument, I am also okay with it too.\n3. Despite of 2., I would vote for 1., since we only call |GetTokenForUser| in one place.\n\nThough, I am not golang expert so I would hope to get some challenges from Abe san, still.",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6156e65d_6a2a1e67",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-16T06:01:53Z",
      "side": 1,
      "message": "My question here is; what is this interface for, if you have only one concrete struct which provides the function?\nAccording to the comment, at least, it is for the interface to the cryptohome, whose features a re provided by utilityCryptohomeBinary. Why do you need interface here?",
      "parentUuid": "982c57b7_dbfe3a89",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35b1f87e_79accfb1",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1322146
      },
      "writtenOn": "2020-03-16T06:09:17Z",
      "side": 1,
      "message": "Fair enough.\n\nThough in many cases of hwsec, because of refactoring going on, it is expected that we have potentially several ways to do one thing (e.g., calling cryptohomed to enroll, calling attestationd to enroll, calling the command line tool to enroll, sending the dbus message to enroll...), I did use interfaces for that; in this case I think we need John\u0027s input.\n\nHey, John:\nDo you expect to implement |GetTokenForUser| in a different way soon? IIUC, even for cryptohome proxy we are still using cryptohome binary, no?",
      "parentUuid": "6156e65d_6a2a1e67",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02662538_14fa06ed",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1314760
      },
      "writtenOn": "2020-03-17T14:16:53Z",
      "side": 1,
      "message": "From a UtilityCryptohomeBinary perspective, no. I\u0027m not planning to change GetTokenForUser() soon. Launching of cryptohome-proxy doesn\u0027t change things (at least the launch itself). However, after the launch, when things gets migrated over, I\u0027m not certain if we are going to continue to depend on cryptohome command line utility (say, maybe use dbus directly or have another command line utility that uses UserDataAuth dbus APIs directly), and that premise I believe is the reason why we\u0027ve such abstractions in the first place.",
      "parentUuid": "35b1f87e_79accfb1",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eaa7efa8_d80cacc2",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-04-01T15:40:43Z",
      "side": 1,
      "message": "Leo, any thoughts with John\u0027s reply?",
      "parentUuid": "02662538_14fa06ed",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbb02c1c_0d22a7d3",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1322146
      },
      "writtenOn": "2020-04-03T05:14:44Z",
      "side": 1,
      "message": "Well, John still knows the best about his own plan ðŸ˜Š\nif he is going to use it one day for sure, then it\u0027s probably fine doing it now.\n\n\nthe worst case would be we use interface here, and no one cleans it up even if we don\u0027t really need interface, and i don\u0027t wanna see it happen (again).\n\nMakes sense?",
      "parentUuid": "eaa7efa8_d80cacc2",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cdc78004_52f52b2d",
        "filename": "src/chromiumos/tast/common/pkcs11/pkcs11.go",
        "patchSetId": 35
      },
      "lineNbr": 30,
      "author": {
        "id": 1314760
      },
      "writtenOn": "2020-04-05T22:35:11Z",
      "side": 1,
      "message": "I\u0027m not really certain if we are going to need a new form of cryptohome utility after the launch, and I\u0027ve been given the impression (through code review from hidehiko@) that it\u0027s best to leave things out of this CL unless it\u0027s used in this CL.\n\nSince the change to cryptohome utility is not going to happen any time soon (as in before this CL gets merged), by the above logic, it would be best to leave the UserTokenGetter interface out of this CL, and take a utilityCryptohomeBinary here.\n\nTo go ahead with this plan, I would need Leo\u0027s +1/+2.",
      "parentUuid": "bbb02c1c_0d22a7d3",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 30,
        "endChar": 8
      },
      "revId": "c943b4e5062701583ca4bbd48ced3caa8e5b1b40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}