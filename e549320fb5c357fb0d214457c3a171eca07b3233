{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ff6659f1_e7036525",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-04-21T00:58:44Z",
      "side": 1,
      "message": "hidehiko@: Quick question: How do remote tests interact with vars? e.g. we probably want to support lacrosDeployedBinary here somehow",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f26f6124_f780b294",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-04-21T01:06:54Z",
      "side": 1,
      "message": "Opening for comments..\n\nContext: build is failing as DefaultLacrosConfig has recently been removed. I wanted to have a CL like https://crrev.com/c/3598170 in to unblock this migration assuming that this firmware test doesn\u0027t really need the deployed lacros from Chromium CI to verify the OS.",
      "parentUuid": "ff6659f1_e7036525",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cef4e683_85248fe7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-04-21T12:52:16Z",
      "side": 1,
      "message": "Re edcourtney: afaik, host side testing.State should have variables, so it can be passed via args of IPCs.",
      "parentUuid": "f26f6124_f780b294",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "106c548b_cf5fdfdc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-04-21T16:20:36Z",
      "side": 1,
      "message": "Technically, as Hidehiko said, it is possible for remote tests to pass the var value (a string of `s.Var(LacrosDeployedBinary)` and a bool of `deployed`) over gRPC, instead of testing.State. and it may need a new lacrosfixt.NewConfigXXX method to accept them in local service.\n\nHowever, a fundamental question is\nDoes the OS firmware test really need to be run against ToT browser builds in the *Browser infra* or is it just okay to run against the pre-qualified rootfs-lacros in the *OS infra*?\nIf yes to the former, I can go with passing the vars over gRPC to support that.\nIf yes to the latter, I can go with https://crrev.com/c/3598170.\n\nI assume the latter is the case because this firmware test is primarily to verify EC over the tablet mode by using the VK, but not specifically to verify interactions between VK/browser itself (which I think should be a separate test in the input or browser package to prevent a bad change in VK or browser at the ToT of browser).\n\n+Jeremy, +Kevin, can you share your views into this from the test owner\u0027s perspective? Thanks,",
      "parentUuid": "cef4e683_85248fe7",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8752a67_410e8078",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1202834
      },
      "writtenOn": "2022-04-21T17:31:44Z",
      "side": 1,
      "message": "+1 to your analysis that \"this firmware test is primarily to verify EC over the tablet mode by using the VK, but not specifically to verify interactions between VK/browser itself\"",
      "parentUuid": "106c548b_cf5fdfdc",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88e07e69_ba6aa8d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-04-21T23:58:19Z",
      "side": 1,
      "message": "Discussion seems split between here and https://crrev.com/c/3598170 - let\u0027s discuss the lacros Tast API change here: https://crrev.com/c/3598170. It may be true that this test doesn\u0027t need to run in an environment which needs LacrosDeployedBinary. But, I want to make sure we get the API for this correct (before other tests start using whatever API we add incorrectly). Just because this remote test doesn\u0027t need this var doesn\u0027t mean no remote tests will need them, so we\u0027ll likely need a mechanism to send the appropriate vars over via IPC anyway.",
      "parentUuid": "e8752a67_410e8078",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d07cd06_9bbdfdee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-04-22T16:05:45Z",
      "side": 1,
      "message": "I see where you\u0027re coming from. Going slightly off topic there would be four different types of tests:\na. local tests that need to be run in both Browser/OS\nb. remote tests that need to be run in both Browser/OS\nc. local tests that don’t need to be run in Browser, but in OS\nd. remote tests that don’t need to be run in Browser, but in OS\n\nFor a, we have a lot of them and also solution with NewConfigFromState, which is fine.\nFor b, it\u0027s not supported, but there is no actual use case yet. As you pointed out above, new Tast API design is helpful here *when needed*.\nFor c, d, it\u0027s not supported, by far the firmware test is the first case in the case d. Thus, https://crrev.com/c/3598170 is proposed to unblock this CL. Practically speaking we can give some flexibility to design Tast API that is likely for internal users and not to be widespread in public, and improve it as we go with more cases. PTAL again.",
      "parentUuid": "88e07e69_ba6aa8d5",
      "revId": "e549320fb5c357fb0d214457c3a171eca07b3233",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}