{
  "comments": [
    {
      "key": {
        "uuid": "6508001b_bfb788db",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 75,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "i\u0027d recommend avoiding adding an \"unknown\" value just to return when errors are encountered, as now callers need to handle this value even in non-error cases. instead, consider just returning an arbitrary fixed value (e.g. Back) on error -- callers shouldn\u0027t be using the returned value if an error was returned.",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6123adb5_f631cc37",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 75,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "I see. Thanks for the tip!",
      "parentUuid": "6508001b_bfb788db",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0af9b2bd_f0984472",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 92,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "nit: maybe just GetFacing? including \"Camera\" here seems unnecessary since it isn\u0027t included in the enum name. (or do you plan to make this package return Facing values for things besides cameras later?)",
      "range": {
        "startLine": 92,
        "startChar": 5,
        "endLine": 92,
        "endChar": 20
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35479e30_89109eb4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 92,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "You\u0027re right. In the world of GCA, facing always refers to the direction of the camera.\nRemoved.",
      "parentUuid": "0af9b2bd_f0984472",
      "range": {
        "startLine": 92,
        "startChar": 5,
        "endLine": 92,
        "endChar": 20
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7828b296_3702a074",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 104,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "how about including the bad info here to aid in debugging? e.g. errors.Errorf(\"got bad camera info %q from viewfinder frame\", camInfo)",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59610847_4363b29e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 104,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7828b296_3702a074",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91f6aae5_7e72f1b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 114,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "this isn\u0027t a proper format string, but maybe just use \"unknown camera direction %q\"",
      "range": {
        "startLine": 114,
        "startChar": 32,
        "endLine": 114,
        "endChar": 71
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b899792d_1d7fa86f",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 114,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91f6aae5_7e72f1b4",
      "range": {
        "startLine": 114,
        "startChar": 32,
        "endLine": 114,
        "endChar": 71
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40910192_68b4a57a",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "should you expose some other way for the caller to learn about this case?",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f73bcca_6f428b09",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "On single-camera devices, it wouldn\u0027t even make sense to run this test at all. I think an alternative would be to not run the test if the device only has one camera, but this is difficult to do technically speaking (camera platform doesn\u0027t statically expose this information).\nI think the following solution might be weird.\n1. Add CanSwitchCamera() which returns a boolean that indicates whether the device currently has more than one camera.\n2. Call CanSwitchCamera() at the start of this test. Run the test if true, but skip the test otherwise.\nThe number of cameras can be changed during runtime as well (e.g., plug in an external USB camera), so I don\u0027t know what the right call is.",
      "parentUuid": "40910192_68b4a57a",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "772e27ad_d9b91f8d",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-06T22:37:01Z",
      "side": 1,
      "message": "hmm. yeah, we generally don\u0027t want to return early from non-applicable tests, since it creates the false impression that the test was actually executed and passed. we typically instead want the test to declare dependencies that the framework uses to determine whether it should be skipped entirely.",
      "parentUuid": "3f73bcca_6f428b09",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60b63f40_004c4715",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-07T10:05:01Z",
      "side": 1,
      "message": "Sheng-hao, What do you think?\nShould I leave the code as is, use the CanSwitchCamera() above, or see if there\u0027s anyway we can get a capability for this?",
      "parentUuid": "772e27ad_d9b91f8d",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "348f46cd_d2e91be0",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-05-07T11:34:39Z",
      "side": 1,
      "message": "\u003e The number of cameras can be changed during runtime as well (e.g., plug in an external USB camera), so I don\u0027t know what the right call is.\n\nHow about running this tests only on boards with multiple \"built-in\" cameras?\nSo, we can use autotest-capability (unless the number of camera depends on SKU)\n\nActually, we don\u0027t run any camera Tast tests on boards having only external camera because it can cause uncontrollable flakiness (e.g. we don\u0027t run camera tests on veyron_fievel, which is a Chromebox where external camera is equipped in lab)",
      "parentUuid": "60b63f40_004c4715",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c470a7d2_6030c6a8",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-08T05:38:52Z",
      "side": 1,
      "message": "Hmm. +shik to reviewers.\nI think an autotest-capability should be the best way as far as this test goes, but IIRC shik told me this would be pretty difficult.\nShik@, can I get your thoughts on this? Thanks a lot!",
      "parentUuid": "348f46cd_d2e91be0",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ed3d067_58bec56b",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-05-08T08:55:23Z",
      "side": 1,
      "message": "FYI: You can see a set of CLs that added autotest-capablities for built-in cameras at b/129116218. I think you can add labels like \"single_camera\" and \"multiple_camera\" in a similar manner.",
      "parentUuid": "c470a7d2_6030c6a8",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e3747ae_f0e49e8e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2019-05-08T09:17:21Z",
      "side": 1,
      "message": "It\u0027s a long-standing issue... There is no simple, reliable and universal way to know the number of built-in camera statically. The number of camera depends on SKU, and we install the corresponding media_profiles.xml in arc_setup by querying the sku with `mosys platform sku` for many boards. Some newer boards store this information inside cros config [1], but it\u0027s not available in most of the boards.\n\nTo make things worse, there is even a board (Snappy) that have both 1/2 built-in cameras variants with the same sku number. So we even probe /dev to see how many cameras are there, which causes a tricky race (b/79951497).\n\n[1] https://chromium.googlesource.com/chromiumos/platform2/+/HEAD/chromeos-config/README.md#camera",
      "parentUuid": "3ed3d067_58bec56b",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c11021bd_222e696e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-08T10:29:08Z",
      "side": 1,
      "message": "Hmm. Thanks shik@ for the context.\nIn that case, I personally am more inclined to leave the code as is.\nWhat do you think?",
      "parentUuid": "0e3747ae_f0e49e8e",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcf073fa_06cfd973",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-05-08T11:05:24Z",
      "side": 1,
      "message": "Thanks Shik. \nThen, I think it\u0027s okay to run this test also on boards with single camera if we add a comment about the reason somewhere. (maybe, here and at GCAMultiCamera\u0027s function comment?)",
      "parentUuid": "c11021bd_222e696e",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6822f402_3022affd",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go",
        "patchSetId": 7
      },
      "lineNbr": 148,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-08T12:08:17Z",
      "side": 1,
      "message": "Sounds good! I\u0027ve added some comments.",
      "parentUuid": "fcf073fa_06cfd973",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b14a8b05_616a0f57",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "nit: s/would switch/switches/, s/verify/verifies/",
      "range": {
        "startLine": 31,
        "startChar": 13,
        "endLine": 31,
        "endChar": 25
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa44b78d_13215378",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b14a8b05_616a0f57",
      "range": {
        "startLine": 31,
        "startChar": 13,
        "endLine": 31,
        "endChar": 25
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e82aa432_ef8a6551",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "is there any way to query the number of cameras? right now, you\u0027re switching 6 times, so even if the app doesn\u0027t properly switch back to the default camera, wouldn\u0027t we still be at the default if there are e.g. 2 or 3 cameras? a prime number like 5 or 7 seems like it might be safer.",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b9479a8_c83f0d8c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "It\u0027s not currently exposed by the app nor the platform. Prime number is a great suggestion. I changed to 7.",
      "parentUuid": "e82aa432_ef8a6551",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "864a4ae3_2be1297c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 60,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "nit: can you handle the error separately?\n\nif facing, err :\u003d ...; err !\u003d nil {\n    s.Fatalf(...)\n} else if facing !\u003d defaultFacing {\n    s.Fatalf(...)\n}",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2aa59bd_eae1e444",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 60,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "Oops I didn\u0027t notice I didn\u0027t handle the error here. Thanks for catching this!",
      "parentUuid": "864a4ae3_2be1297c",
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba7ccc52_ce60ebb2",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 61,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-03T20:08:42Z",
      "side": 1,
      "message": "nit: just \"default\"?",
      "range": {
        "startLine": 61,
        "startChar": 70,
        "endLine": 61,
        "endChar": 83
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "071b7240_2ba9e68e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/gca_multi_camera.go",
        "patchSetId": 7
      },
      "lineNbr": 61,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2019-05-06T11:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba7ccc52_ce60ebb2",
      "range": {
        "startLine": 61,
        "startChar": 70,
        "endLine": 61,
        "endChar": 83
      },
      "revId": "0784a5cef44287054b774f754277098afcf3bbb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}