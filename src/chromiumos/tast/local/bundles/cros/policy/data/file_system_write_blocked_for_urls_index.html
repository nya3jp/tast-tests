<a href="#">showSaveFilePicker</a>
<script>
  // Create a promise that we can check from Tast that resolves to true or
  // false depending on whether the file picker opened successfully.
  let resolve;
  window.filePickerShownPromise = new Promise(_resolve => resolve = _resolve);

  document.querySelector("a").addEventListener("click", async (e) => {
    e.preventDefault();
    let fileHandle;
    try {
      fileHandle = await window.showSaveFilePicker({
        suggestedName: 'test-file'
      });
    } catch (err) {
      // showSaveFilePicker() throws if it fails to open due to a policy or if
      // the user closes it without saving.
      resolve(false);
      return;
    }

    const writableStream = await fileHandle.createWritable();
    await writableStream.write("test");
    await writableStream.close();
    resolve(true);
  });
</script>
