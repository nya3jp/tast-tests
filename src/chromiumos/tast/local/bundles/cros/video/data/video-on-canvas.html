<html>
<body>
  <h1>Video</h1>
  <video id="video" height="180" autoplay muted style="border: 1px solid;">
  </video>
  <h1>Canvas</h1>
  <canvas id="canvas" width="320" height="180" style="border: 1px solid;">
  </canvas>
</body>
<script type="text/javascript">
var ctx;

// Sets the size of the canvas to width x height and obtains a 2d context for
// later use.
function initializeCanvas(width, height) {
  const canvas = document.getElementById('canvas');
  canvas.width = width;
  canvas.height = height;
  ctx = canvas.getContext('2d');
}

// Starts playing videoSourcePath. Once playback starts, the video is drawn once
// on the canvas with size videoW x videoH.
async function playAndDrawOnCanvas(videoSourcePath, videoW, videoH) {
  const video = document.getElementById('video');
  video.src = videoSourcePath;
  await video.play();
  const canvas = document.getElementById('canvas');
  ctx.drawImage(video, 0, 0, videoW, videoH);
}

// Returns the color of the canvas at point (x, y) as an ImageData object.
function getCanvasColorAt(x, y) {
  return ctx.getImageData(x, y, 1, 1);
}

// Returns w pixels of color data for row y of the canvas as an ImageData
// object.
function getRowData(y, w) {
  return ctx.getImageData(0, y, w, 1);
}
</script>
</html>
