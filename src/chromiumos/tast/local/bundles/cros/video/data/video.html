<html>
<body>
  <video id='video' name='media' width=50% loop muted>
  </video>
  <br>
  Current time (seconds): <span id='videoCurTime'>0</span> / <span id='videoTotalTime'>0</span>
</body>

<script type="text/javascript">

function play(video_source_path) {
  return new Promise((resolve, reject) => {
    let video = document.getElementById('video');
    video.onerror = e => { return reject(e.error.toString()); };
    video.ontimeupdate = _ => {
      document.getElementById('videoCurTime').innerHTML = video.currentTime;
      document.getElementById('videoTotalTime').innerHTML = video.duration;
    };

    video.src = video_source_path;
    return video.play().then(resolve);
  });
}

function pause() {
  video.pause();
}

// Quick and dirty randomizer that returns the same sequence of numbers provided
// the same seed is used.
function randomizer(seed) {
  return function() {
    const x = Math.sin(seed++) * 10000;
    return x - Math.floor(x);
  }
};

const random = randomizer(1);
let number_finished_seeks = 0;
function randomSeek() {
  return new Promise((resolve, reject) => {
    video.onseeked = (event) => {
      console.log(number_finished_seeks);
      resolve(number_finished_seeks++);
    };
    video.onerror = (event) => {
      reject(new Error('Video error ' + event.error));
    };
    video.currentTime = random() * video.duration;
  });
}

</script>
</html>
