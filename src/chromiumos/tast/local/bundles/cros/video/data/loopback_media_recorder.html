<!DOCTYPE html>
<html>
<head>
<title>MediaRecorder Test</title>
</head>
<body>
  <video id="video" autoplay muted></video>
<script>

pageLoaded = false;

// Starts recording with specified video codec.
async function startRecording(codec) {
  // This records from a fake media device.
  let stream = await navigator.mediaDevices.getUserMedia({audio: false, video: true});

  document.getElementById('video').srcObject = stream;
  let mimeType = 'video/webm; codecs=' + codec;
  let recorder = new MediaRecorder(stream, {'mimeType' : mimeType});

  return new Promise((resolve, reject) => {
    recorder.ondataavailable = function(event) {
      if (event.data.size > 0) {
        resolve();
      } else {
        reject(new Error('Recorded data size is zero'));
      }
    };
    recorder.start(1);
  });
}

window.onload = () => {
  pageLoaded = true;
};

</script>
</body>
</html>
