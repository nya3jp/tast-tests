{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c16b7f9f_fab443ed",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "I\u0027m not sure whether this Cq-Depend for a Chromium CL is respected, but anyway it would be better to submit this CL after Chrome is uprev\u0027ed and has your changes crrev.com/c/3650484 and crrev.com/c/3655844.",
      "range": {
        "startLine": 22,
        "startChar": 11,
        "endLine": 22,
        "endChar": 27
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fdccb2e_6b7c633e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T07:20:52Z",
      "side": 1,
      "message": "Sorry, I forgot to update this line. Should I add chromium:3655844? (Or do I need Cq-Depend in this case in the first place?)",
      "parentUuid": "c16b7f9f_fab443ed",
      "range": {
        "startLine": 22,
        "startChar": 11,
        "endLine": 22,
        "endChar": 27
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ccce262b_456c741a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T08:14:14Z",
      "side": 1,
      "message": "I think you can remove Cq-Depend in this case, and optionally mention the Chromium CLs in the commit message.",
      "parentUuid": "0fdccb2e_6b7c633e",
      "range": {
        "startLine": 22,
        "startChar": 11,
        "endLine": 22,
        "endChar": 27
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3f1bacb_5ca57967",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T09:18:51Z",
      "side": 1,
      "message": "Thank you!",
      "parentUuid": "ccce262b_456c741a",
      "range": {
        "startLine": 22,
        "startChar": 11,
        "endLine": 22,
        "endChar": 27
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1fc4dfde_a6699d4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T04:15:39Z",
      "side": 1,
      "message": "risan@, youkichihosoi@: Please take a look. Thanks!",
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "917ec187_10a29f4b",
        "filename": "src/chromiumos/tast/local/arc/arc.go",
        "patchSetId": 5
      },
      "lineNbr": 925,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "This one does not seem to be specific to ARC, and I\u0027m not sure whether it should be defined in arc.go. Maybe we can add `\u0026policy.ArcEnabled{Val: true, Stat: policy.StatusSet}` by default?\nOr it might be just okay to define setupFakePolicyServer and setupManagedChrome locally in external_storage_disabled.go given that fakedms.New etc. seem to be used in various ways and it might not be simple to define a generic function. For example:\nhttps://source.chromium.org/chromium/chromiumos/platform/tast-tests/+/HEAD:src/chromiumos/tast/local/bundles/cros/policy/arc_enabled.go;l\u003d49-65;drc\u003ddde35ad5392b2a4075ae9c1bf0cb677ca9f3613e\n\nAnyway I do not have a strong opinion, and would like to hear from experts like Hasan and Tast owners about how to deal with this.",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 26
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20b440b7_5afca08b",
        "filename": "src/chromiumos/tast/local/arc/arc.go",
        "patchSetId": 5
      },
      "lineNbr": 925,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T12:39:54Z",
      "side": 1,
      "message": "IIRC, I once tried to just copy-and-paste the two functions from optin_managed.go to external_storage_disabled.go, only to find out that you can\u0027t declare two functions with the same name in a same directory. Since I\u0027m not sure what names to give to the copied version of the functions in external_storage_disabled.go, I prefer to move these functions to somewhere that can be referred from both of the tests.",
      "parentUuid": "917ec187_10a29f4b",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 26
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80fd1d64_d8e94146",
        "filename": "src/chromiumos/tast/local/arc/arc.go",
        "patchSetId": 5
      },
      "lineNbr": 925,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T13:18:22Z",
      "side": 1,
      "message": "Thanks for the explanation! I\u0027d wait for thoughts from other reviewers.",
      "parentUuid": "20b440b7_5afca08b",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 26
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf1db6a0_0f9347a6",
        "filename": "src/chromiumos/tast/local/arc/arc.go",
        "patchSetId": 5
      },
      "lineNbr": 925,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-27T03:43:43Z",
      "side": 1,
      "message": "1. If the method name starts with small letter (camelCase) then it is local to the file it is defined in but if it starts with capital letter (PascalCase) then it becomes an exported function and it has to be unique in the directory.\n\n2. SetupManagedChrome can be local to the methods it is beind used in since it is not very useful as a generic function in my opinion.\n\n3. setupFakeDmsServer seems useful and I agree that being in \u0027arc\u0027 module may not be ideal. We can move it to https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/policyutil/ if something doesn\u0027t exit there already that does this.",
      "parentUuid": "80fd1d64_d8e94146",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 26
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5984255_a1138d3d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "The test also checks removable media.",
      "range": {
        "startLine": 23,
        "startChar": 29,
        "endLine": 23,
        "endChar": 37
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "949a9cf4_8156dadd",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "I think the test checks the behavior on a specific policy (ExternalStorageDisabled), rather than managed users in general.",
      "range": {
        "startLine": 23,
        "startChar": 55,
        "endLine": 23,
        "endChar": 68
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1480c364_db93411b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T07:20:52Z",
      "side": 1,
      "message": "Sorry, I forgot to update this. Thanks for catching.",
      "parentUuid": "f5984255_a1138d3d",
      "range": {
        "startLine": 23,
        "startChar": 29,
        "endLine": 23,
        "endChar": 37
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3096451a_0f2604d9",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T07:20:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "949a9cf4_8156dadd",
      "range": {
        "startLine": 23,
        "startChar": 55,
        "endLine": 23,
        "endChar": 68
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8543942d_c298c630",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "JFYI, this `ExtraAttr` and the one in L36 can be included in `Attr` in L28.\nHowever, I see some tests (incl. arc.OptinManaged) use `ExtraAttr` even when `Attr` can be used instead. So it is probably not mandatory. Maybe some people prefer `ExtraAttr` to explicitly indicate that each parameterized test can be promoted to critical independently from each other.",
      "range": {
        "startLine": 32,
        "startChar": 3,
        "endLine": 32,
        "endChar": 48
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb38d071_6f1e70fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "Can\u0027t this be arc.New?\nhttps://source.chromium.org/chromium/chromiumos/platform/tast-tests/+/HEAD:src/chromiumos/tast/local/arc/arc.go;l\u003d193;drc\u003ddc01ad06d80a8c573f1ef0078a44989f2655d0b6",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 78,
        "endChar": 2
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a08d7c56_99434b8a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/external_storage_disabled.go",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T07:20:52Z",
      "side": 1,
      "message": "Looks like so. Thanks!",
      "parentUuid": "cb38d071_6f1e70fa",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 78,
        "endChar": 2
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "698ba668_dcde3d3b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/removablemedia/removable_media.go",
        "patchSetId": 5
      },
      "lineNbr": 199,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T04:56:50Z",
      "side": 1,
      "message": "Instead of defining RunMountDisabledTest (which will be used only in arc.ExternalStorageDisabled), how about defining a new function that performs CreateZeroFile, AttachLoopDevice, FormatVFAT, and Mount?\n\nIt can be used in not only removablemedia.RunTest, but also arc.EnableExternalStorage:\nhttps://source.chromium.org/chromium/chromiumos/platform/tast-tests/+/HEAD:src/chromiumos/tast/local/bundles/cros/arc/enable_external_storage.go;l\u003d80-105;drc\u003d9677100dfec835b6acaec920dcdd29e4b27a9a28\n\nThe new function should return a cleanup function that performs Unmount, DetachLoopDevice, and and os.Remove (in this order).\nYou can refer to arc.DownloadManager etc. for how to return a cleanup function:\nhttps://source.chromium.org/chromium/chromiumos/platform/tast-tests/+/HEAD:src/chromiumos/tast/local/bundles/cros/arc/download_manager.go;l\u003d188-199;drc\u003d9677100dfec835b6acaec920dcdd29e4b27a9a28",
      "range": {
        "startLine": 199,
        "startChar": 5,
        "endLine": 199,
        "endChar": 25
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0359d93a_97acabb3",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/removablemedia/removable_media.go",
        "patchSetId": 5
      },
      "lineNbr": 199,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T07:20:52Z",
      "side": 1,
      "message": "Sounds good, thanks. (I wonder if we should inline removablemedia.RunTest to arc.RemovableMedia as well? It was ported from autotest: https://crrev.com/c/1698083, https://crrev.com/i/2585656)",
      "parentUuid": "698ba668_dcde3d3b",
      "range": {
        "startLine": 199,
        "startChar": 5,
        "endLine": 199,
        "endChar": 25
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fb3764b4_7890222a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/removablemedia/removable_media.go",
        "patchSetId": 5
      },
      "lineNbr": 199,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-05-26T10:15:23Z",
      "side": 1,
      "message": "Sorry for missing this comment in the previous roll. Inlining removablemedia.RunTest in arc.RemovableMedia sounds good to me. It would make it easier to see what arc.RemovableMedia checks.",
      "parentUuid": "0359d93a_97acabb3",
      "range": {
        "startLine": 199,
        "startChar": 5,
        "endLine": 199,
        "endChar": 25
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97ff9553_6d9f7a3f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/removablemedia/removable_media.go",
        "patchSetId": 5
      },
      "lineNbr": 199,
      "author": {
        "id": 1541210
      },
      "writtenOn": "2022-05-26T10:57:09Z",
      "side": 1,
      "message": "Thanks! (and sorry for marking this as \u0027Resolved\u0027 in the previous roll)\nProbably we should make another CL for the inlining and adding a function that sets up the image (e.g., calls CreateZeroFile, AttachLoopDevice, FormatVFAT and Mount).",
      "parentUuid": "fb3764b4_7890222a",
      "range": {
        "startLine": 199,
        "startChar": 5,
        "endLine": 199,
        "endChar": 25
      },
      "revId": "767eb3d58238a47fa101bad54dd5992daeb0daac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}