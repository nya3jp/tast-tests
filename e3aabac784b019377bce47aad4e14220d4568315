{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "54639142_a812e473",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2021-05-11T01:10:06Z",
      "side": 1,
      "message": "I have different opinion. ReserveForClose shall be router type specific. Making it a function we need to assume all type of routers needs the same amount of clean-up time. If we have confidence that the assumption is valid, we shall consider renaming the function as its naming scope is the wificell package, not just router.go file. Even more, as all router types share the same value, we can just provide a constant, like TimeForClosingRouter \u003d 5*time.Second, and let caller calls ctxutil.Shorten(TimeForClosingRouter).",
      "revId": "e3aabac784b019377bce47aad4e14220d4568315",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cee8f575_a4a139e6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1487074
      },
      "writtenOn": "2021-05-11T02:05:17Z",
      "side": 1,
      "message": "I have a related but different concern here: the function will become wificell.ReserveForClose that is not obvious which \"close\" it is for. ReserveForRouterClose might be clearer, or, as we\u0027re going to have a lot more router codes, we might want to have a wificell/router package.\n\nFor me, I\u0027m not too concerned about shared/different cleanup time because it is usually a very rough estimation, as long as it doesn\u0027t get too long. Still, \"ReserveForClose(ctx)\" looks slightly cleaner than \"ctxutil.Shorten(ctx, TimeForClosingRouter)\" to me.",
      "parentUuid": "54639142_a812e473",
      "revId": "e3aabac784b019377bce47aad4e14220d4568315",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b24fab73_a0face04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2021-05-11T03:12:43Z",
      "side": 1,
      "message": "I think renaming the function to wificell.ReserveForRouterClose is cleaner and clearer. We can use the shared clean-up time (5*time.Second) for now and it can be changed in the future, if some routers need a significantly longer clean-up time. If that happens then we can pass a constant such as TimeForClosingGaleRouter,  and TimeForClosingOpenWrtRouter.",
      "parentUuid": "cee8f575_a4a139e6",
      "revId": "e3aabac784b019377bce47aad4e14220d4568315",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63997275_4e9b5bda",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2021-05-12T09:19:21Z",
      "side": 1,
      "message": "I think what Dean proposed as well as what Yen-lin and Arowa proposed make sense in different deployment situations. If the closing time variance is high between router models, I think Dean\u0027s approach makes the most sense. Otherwise, I think a quick name change to specify what is actually being closed and defining a constant makes sense if all routers need roughly the same close time.\n\nSince I don\u0027t have a good idea of what kind of close times we need, I\u0027m fine abandoning/putting this change on hold for now as it\u0027s more of a speculative fix that really only addresses code reuse rather than runtime efficiency.\n\nFor now, I did the function name change.",
      "parentUuid": "b24fab73_a0face04",
      "revId": "e3aabac784b019377bce47aad4e14220d4568315",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c9506b36_b1bb5414",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2021-05-14T02:24:24Z",
      "side": 1,
      "message": "SGTM. Unless we have some cases that need extra long time to close, which is unlikely I guess.",
      "parentUuid": "63997275_4e9b5bda",
      "revId": "e3aabac784b019377bce47aad4e14220d4568315",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}