{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d71af3b1_b4e1f9c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2021-12-20T18:27:15Z",
      "side": 1,
      "message": "Why do you update specifically policy/gen.go and camerabox/gen.go, but do not make similar change to other packages under src/chromiumos/tast/services/cros? The camerabox package kinda makes sense since it contains common.proto and is causing the namespace conflicts, although I would expect to an update to another package that also contains common.proto. The policy package does not seem to contain such file, so it\u0027s unclear why it\u0027s updated.",
      "revId": "fa97559133c9d4b23cf38ae38714bd81beb6acbd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64749579_ee733f2e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2021-12-20T18:30:33Z",
      "side": 1,
      "message": "Ideally, we\u0027d have all packages under src/chromiumos/tast/services/cros generate their pb.go in a subpackage named after the containing directory. However, if this change is too large for this CL, it is also fine to do so later and focus on fixing an immediate problem first.\n\nI have also noticed that common.proto is only present in src/chromiumos/tast/services/cros/camerabox in this repository, so wherever the other conflicting file is, it is probably going to be updated in a separate CL.",
      "parentUuid": "d71af3b1_b4e1f9c8",
      "revId": "fa97559133c9d4b23cf38ae38714bd81beb6acbd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7eebe877_dcf5aff8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2021-12-23T23:02:19Z",
      "side": 1,
      "message": "1. The policy package has the same issue as the camerabox package. The conflict is in the policy.proto.\n\n2. You\u0027re right. That\u0027s why I created a separate CL to only update the policy package and camerabox package (https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3340314). Fixing these two packages is sufficient to pass the main CL (https://chromium-review.googlesource.com/c/chromiumos/overlays/chromiumos-overlay/+/3252922).\n\nUpdating other packages is not necessarily required at the moment. However, since I uprev the dev-go/protobuf, we have to update the pb.go of other packages at some point. As I\u0027ve fixed the policy package and camerabox package in a separate CL, I will modify the CL description and only update the pb.go format of other packages.",
      "parentUuid": "64749579_ee733f2e",
      "revId": "fa97559133c9d4b23cf38ae38714bd81beb6acbd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a1230816_532bc756",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2021-12-24T17:01:19Z",
      "side": 1,
      "message": "Thanks for explaining. I am relatively new to this, so please do not feel blocked by my questions and land this CL when ready, but can you please help me understand:\n\n1. I see that policy.proto does not import common.proto: https://chromium.googlesource.com/chromiumos/platform/tast-tests/+/main/src/chromiumos/tast/services/cros/policy/policy.proto, so why do we need to rename it? Or is it conflicting with some other package also named policy? I couldn\u0027t find any error messages mentioning \"policy.proto\" in https://logs.chromium.org/logs/chromeos/buildbucket/cr-buildbucket/8828091911485393201/+/u/install_packages/call_chromite.api.SysrootService_InstallPackages/call_response:_tast-local-tests-cros/build_api_stdout (linked from description of https://crrev.com/c/3340314).\n\n2. What is common.proto conflicting with? My understanding is that this issue only arrises when there are two proto files with the same name (or in the directory/package with the same name package). I could only find single common.proto in this repository. I guess there is another common.proto somewhere else in another repository.",
      "parentUuid": "7eebe877_dcf5aff8",
      "revId": "fa97559133c9d4b23cf38ae38714bd81beb6acbd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}