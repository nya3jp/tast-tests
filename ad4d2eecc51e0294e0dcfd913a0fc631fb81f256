{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a85b37bc_7ce69a4f",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-06-28T16:26:22Z",
      "side": 1,
      "message": "Wouldn\u0027t this return the error already unless dump_vpd_log returns 0 which only happens in three cases which all look very harmless?\n\nhttps://source.corp.google.com/chromeos_public/src/platform/vpd/util/dump_vpd_log?q\u003ddump_vpd_log\u0026sq\u003dpackage:chromeos_public",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd8a62c5_ccbe262e",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2022-06-28T17:53:45Z",
      "side": 1,
      "message": "By default, both stdout and stderr are redirected to the log stored in the Cmd, so this should be correct...\n\nI guess they might want to have them as files instead of dumped to the test output?",
      "parentUuid": "a85b37bc_7ce69a4f",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3c9f3e3_73cb5579",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2022-06-29T06:03:24Z",
      "side": 1,
      "message": "dump_vpd_log does not report errors, we need to dump things unconditionally.\n\nNormally there no output, only when actually running flashrom will something be printed.",
      "parentUuid": "cd8a62c5_ccbe262e",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6cab513_e4bae5f4",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2022-06-29T17:59:28Z",
      "side": 1,
      "message": "Not sure what you mean by \"doesn\u0027t report errors\", seems like there are plenty of `exit 1`s in there which should trigger this log dump (including on flashrom failure).\n\nIf we need the logs unconditionally though then I guess this makes sense one way or the other.",
      "parentUuid": "e3c9f3e3_73cb5579",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6037252b_15c9ee60",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-07-01T07:10:41Z",
      "side": 1,
      "message": "Victor, for my understanding, which errors from dump_vpd_log are you catching with adding this CL that were not reported before?",
      "parentUuid": "b6cab513_e4bae5f4",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "339b7fa8_becb5267",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2022-07-04T07:47:57Z",
      "side": 1,
      "message": "We get the output of flashrom this way.",
      "parentUuid": "6037252b_15c9ee60",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0d12484_e28542de",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-07-05T05:55:42Z",
      "side": 1,
      "message": "Grabbing the logs from stdout (i.e. flashrom) if there\u0027s an error is exactly what DumpLogOnError should do.",
      "parentUuid": "339b7fa8_becb5267",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "40638f59_b66f4b55",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2022-07-05T06:49:02Z",
      "side": 1,
      "message": "DumpLogOnError only works if dump_vpd_log reports an error, it does not. It just writes the error to the file and we lose the output.",
      "parentUuid": "e0d12484_e28542de",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3b90e23_4cc43e75",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dump_vpd_log.go",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-07-05T07:36:35Z",
      "side": 1,
      "message": "I would say dump_vpd_log should return 1 if there\u0027s an error. If not, shouldn\u0027t we fix that instead?\n\nhttps://source.corp.google.com/chromeos_public/src/platform/vpd/util/dump_vpd_log;l\u003d143?q\u003ddump_vpd_log\u0026sq\u003dpackage:chromeos_public\n\nInteresting that you\u0027re saying it writes the error to a file. I don\u0027t think that\u0027s what it was meant to do. Looking at the script it seems it should fail, clean up its temp file without writing anything to a file and write the error to stdout. Could it be that there\u0027s a bug in that script if flashrom fails?",
      "parentUuid": "40638f59_b66f4b55",
      "range": {
        "startLine": 125,
        "startChar": 9,
        "endLine": 125,
        "endChar": 40
      },
      "revId": "ad4d2eecc51e0294e0dcfd913a0fc631fb81f256",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}