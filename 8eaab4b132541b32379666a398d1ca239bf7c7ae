{
  "comments": [
    {
      "key": {
        "uuid": "bc7ca8d0_a4c5f534",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-19T17:36:04Z",
      "side": 1,
      "message": "Consider verifying this?",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71f42568_aa29ab68",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-06-19T22:13:17Z",
      "side": 1,
      "message": "I was able to connect to the AP and the ssid was the second one \"TAST_TEST_1nuBSkeClkHwdrq3ImEt\".",
      "parentUuid": "bc7ca8d0_a4c5f534",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac33af1a_2c743a77",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-22T09:11:12Z",
      "side": 1,
      "message": "I don\u0027t know why the original Autotest claims that we cannot connect to the AP that multiple SSIDs sharing the same BSSID.\n\nAs long as each SSID runs on different channel (and even the different band), I guess the device can connect to either AP without any problem.\n\nHowever, that reminds me an issue: does our Tast wificell framework support multiple interface correctly? Yenlin, can you confirm?",
      "parentUuid": "71f42568_aa29ab68",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bb150eb_899596d6",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-06-22T09:38:04Z",
      "side": 1,
      "message": "For this test, the two hostapd are run on different phy (one on 2.4G and one on 5G band) so it should be fine here.\n\nFor the BSSID part, I haven\u0027t traced the related code so I\u0027m not sure. But, I see the behavior of the test changed once. It is originally using same frequency for both hostapd, so it is also possible that the comment is out-dated.",
      "parentUuid": "ac33af1a_2c743a77",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42cad205_fccb8931",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-06-22T20:38:14Z",
      "side": 1,
      "message": "This is the CL where the behavior changed:\nhttps://chromium-review.googlesource.com/c/chromiumos/third_party/autotest/+/1159461/",
      "parentUuid": "3bb150eb_899596d6",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "413c6010_a3a8b998",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-23T02:02:52Z",
      "side": 1,
      "message": "+Brian to confirm: for the case with two SSIDs run on different phys with the same BSSID, is it possible that a device can connect to either SSID? If so, we might want to add the verification step and perhaps change test name and update the test description.",
      "parentUuid": "42cad205_fccb8931",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bdf71ca_b921a402",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-06-24T01:29:47Z",
      "side": 1,
      "message": "I didn\u0027t change anything about the highlighted comment.\n\nI changed how the AP is *producing* those 2 BSSes (and ESSes), because mac80211 no longer allows reuse of the same MAC address on multiple BSSes for the same underlying PHY. But I did not change anything about how a client may connect to them.\n\nI imagine that maybe this comment is referring to this, from Shill:\n\nvoid WiFi::BSSAddedTask(const RpcIdentifier\u0026 path,\n                        const KeyValueStore\u0026 properties) {\n  // Note: we assume that BSSIDs are unique across endpoints. This\n  // means that if an AP reuses the same BSSID for multiple SSIDs, we\n  // lose.\n...\n\nThat dates very very far back, to here:\nhttp://gerrit.chromium.org/gerrit/2910\n\nAnd IIUC, it became obsolete here:\nhttps://gerrit.chromium.org/gerrit/12017\n\nMaybe that means we can simply try connecting, and discard this comment.",
      "parentUuid": "413c6010_a3a8b998",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a026dd6_8a18e290",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-24T12:30:03Z",
      "side": 1,
      "message": "My question is: the original goal of the test was to see how DUT reacts when seeing two SSIDs with the same BSSID. And as you said, this is an illegal configuration on current router, e.g. Gale, so you changed the scenario to provide two SSIDs on different band with the same BSSID (which is okay for Gale). \n\nFor current testing scenario, would BSSID be masked? From my experiment, both SSID under current configuration can be connected and ping is also okay:\nhttps://crrev.com/c/2263316\n\nIf so, the BSSID is not masked. We shall rename the test to something like MultiSSIDSameBSSID. WDYT?",
      "parentUuid": "4bdf71ca_b921a402",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a0d2e99_07b4168e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-06-24T16:56:29Z",
      "side": 1,
      "message": "The assertion is still the same: that the driver should not mask the second ESS just because it uses a duplicate BSSID. Both before my change and after, that is what we\u0027re testing.\n\nI don\u0027t really care about the name much. You can equally well choose to name based on:\n * [negative form] the original buggy behavior that we\u0027re trying to prevent (\"masked BSSID\") or\n * [positive form] the test scenario that we\u0027re trying to support (something like \"duplicate BSSID\")\n\nMaybe the positive form is a little clearer?\n\nBTW, I don\u0027t see how changing the channel/band has much to do with this question.",
      "parentUuid": "1a026dd6_8a18e290",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dca9bcca_4ca1efc2",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-24T18:33:42Z",
      "side": 1,
      "message": "Sorry that I was confused the goal of the test because of the name, MaskedBSSID. I thought the test expects to see a ESS(SSID) out of the two with the same BSSID is masked (unable to discover) by the stations.\n\n+1 on positive form.\n\nThe reason why the AP serves two ESS in different band is that Gale does not support running multiple SSID with same BSSID on the same phy. It is unrelated to the whether DUT can see multiple SSIDs and connect to them.",
      "parentUuid": "9a0d2e99_07b4168e",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 32
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36be00dd_6ff1dc62",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-19T17:36:04Z",
      "side": 1,
      "message": "The error message would be: \"DUT: failed to get the client interface: failed to get the WiFi interface name\". How about \"DUT: failed to get the WiFi interface name\"?\n\ns.Fatal(\"DUT: \", err)",
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb4c1eb3_ff942163",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-06-19T22:13:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "36be00dd_6ff1dc62",
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d199b52_efec13de",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 116,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-06-19T09:35:29Z",
      "side": 1,
      "message": "nit: I guess Errorf(\"... %v ...\", ssids) might be enough?",
      "range": {
        "startLine": 116,
        "startChar": 42,
        "endLine": 116,
        "endChar": 47
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc6c9cd1_67ea721e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/masked_bssid.go",
        "patchSetId": 4
      },
      "lineNbr": 116,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-06-19T22:13:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d199b52_efec13de",
      "range": {
        "startLine": 116,
        "startChar": 42,
        "endLine": 116,
        "endChar": 47
      },
      "revId": "8eaab4b132541b32379666a398d1ca239bf7c7ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}