{
  "comments": [
    {
      "key": {
        "uuid": "dd67b0e8_bca2d510",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1375432
      },
      "writtenOn": "2020-07-23T22:15:13Z",
      "side": 1,
      "message": "I\u0027ve translated the logic of network_WiFi_Reassociate to Tast and it appears to work. What\u0027s the next step here?",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "329454e1_7eee7a06",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-08-06T10:19:33Z",
      "side": 1,
      "message": "Any progress?",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a59b2e0d_78dfbd22",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1374711
      },
      "writtenOn": "2020-08-07T01:13:44Z",
      "side": 1,
      "message": "I\u0027m sorry, I haven\u0027t spent much time on this lately as I\u0027ve been busy working on the Gale image uprev.\n\nI can definitely use the wpa_supplicant\u0027s D-Bus interface to trigger reassociation, but I haven\u0027t yet investigated whether it could be done via Shill instead, or whether we can get the disconnect/reconnect event timing without parsing the log (although this one seems quite likely since the events of interest are just Disconnected/Reconnected).",
      "parentUuid": "329454e1_7eee7a06",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "518e1c2f_6449f95d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-08-07T02:36:38Z",
      "side": 1,
      "message": "Thanks for the heads up.",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "205adb6b_20f4f0d2",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "Please use the just landed Precondition pattern: https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2142664",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "347a19b0_cebea49a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1375432
      },
      "writtenOn": "2020-07-23T22:15:13Z",
      "side": 1,
      "message": "Is it worthwhile to record the reassociation time as a performance metric, or should the test be purely a pass/fail setup?",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b3bbbf9_235c2b63",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-07-23T23:46:24Z",
      "side": 1,
      "message": "I think record the reassociation time as a performance metric is useful but I think pass/fail with logging the reassociation time is sufficent. WDYT dean@?",
      "parentUuid": "347a19b0_cebea49a",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83bec7c5_b64a3579",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T02:46:13Z",
      "side": 1,
      "message": "The original test measure reassociation time and set a 10 seconds threshold. So it is more like a function qualification test. Let\u0027s keep it as is (pass/fail).",
      "parentUuid": "0b3bbbf9_235c2b63",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f4d25a6_6f59f8dc",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "This should be an error if this is a performance test. Note that you can s.Fatal() in the main logic if the test should stop immediately. For the errors in defer function, we always use s.Error() to log the error and fail the test.",
      "range": {
        "startLine": 53,
        "startChar": 5,
        "endLine": 53,
        "endChar": 8
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8224e88b_9faf11b9",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "Delete this.",
      "range": {
        "startLine": 53,
        "startChar": 34,
        "endLine": 53,
        "endChar": 39
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b71ea0f_feca2405",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-07-23T23:46:24Z",
      "side": 1,
      "message": "you can use the default config here:\nap, err :\u003d tf.DefaultOpenNetworkAP(tfCtx)",
      "range": {
        "startLine": 57,
        "startChar": 32,
        "endLine": 57,
        "endChar": 107
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0180ee5_72f0fb04",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "For tfCtx, noted that after the cleanup, https://crrev.com/c/2315518, we\u0027ll use ctx as much as possible.",
      "parentUuid": "1b71ea0f_feca2405",
      "range": {
        "startLine": 57,
        "startChar": 32,
        "endLine": 57,
        "endChar": 107
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8611100a_f397a60b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-07-23T23:46:24Z",
      "side": 1,
      "message": "you can use the function below to verify connection or run a ping to the AP here:\n        if err :\u003d tf.VerifyConnection(ctx, ap2); err !\u003d nil {\n\t\ts.Fatal(\"Failed to verify connection: \", err)\n\t}",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9983b75_6fd7ff3f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "We might shorten ctx for too many seconds. For trivial operation like this one, one second for logger.Stop() should be sufficient.",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "715e7028_8e47a571",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T03:33:55Z",
      "side": 1,
      "message": "First check if you can do this using shill (I guess not) or wpa_supllicant D-Bus interface.",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee92702b_57575e4d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1375432
      },
      "writtenOn": "2020-07-23T22:15:13Z",
      "side": 1,
      "message": "The equivalent autotest code devotes 400 lines to a \"running wpa_cli commands remotely\" abstraction layer (wpa_cli_proxy.py), which supports four different OS variants (Android / Brillo / ChromeOS / Cast) with different ways of invoking it.\n\nShould any of that abstraction be ported to Tast at this time, or is it acceptable to simply issue the appropriate ChromeOS wpa_cli command using the generic RemoteCmdRunner like I\u0027ve done here?",
      "range": {
        "startLine": 121,
        "startChar": 5,
        "endLine": 121,
        "endChar": 18
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e540df6_4e664605",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-07-23T23:46:24Z",
      "side": 1,
      "message": "I have this CL for wpa_supplicant D-Bus interface. \nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2303647\n\nThen you can use a gRPC call that make use of this package.",
      "parentUuid": "ee92702b_57575e4d",
      "range": {
        "startLine": 121,
        "startChar": 5,
        "endLine": 121,
        "endChar": 18
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59cbe4bd_83e8fbb6",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-07-24T02:46:13Z",
      "side": 1,
      "message": "In Tast test, we first seek if there\u0027s high level abstraction/library to use. The preference:\n1. Golang native library\n2. Golang third-party library\n3. D-Bus interface, upper layer, e.g. shill\n4. D-Bus interface, lower layer, e.g. wpa_supplicant\n5. Linux command line tool, e.g. iw\n\nFor observing response, we first see if D-Bus event watcher has the event we expect to see. The last resort is to parse the log, but it is discouraged.\n\nFor this specific question, you can check if wpa_supplicant D-Bus interface provides what you need. If not and you want to use wpa_cli, you can expand \nhttps://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/common/network/wpacli/runner.go?q\u003dwpa_cli\u0026ss\u003dpiper%2FGoogle%2Fchromeos_public:src%2Fplatform%2Ftast-tests%2Fsrc%2Fchromiumos%2Ftast%2F\n\ntips: you can search if there\u0027s any existing package doing the same / similar things here: https://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/?g\u003d0",
      "parentUuid": "5e540df6_4e664605",
      "range": {
        "startLine": 121,
        "startChar": 5,
        "endLine": 121,
        "endChar": 18
      },
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21c3b33e_bef87f66",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/reassociate.go",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-07-23T23:46:24Z",
      "side": 1,
      "message": "If you make use of the wpasupplicant package and implement a gRPC call. you can time the duration before triggering reassociation until getting associated in the property:\nState - s - (read)\nA state of the interface. Possible values are: return \"disconnected\", \"inactive\", \"scanning\", \"authenticating\", \"associating\", \"associated\", \"4way_handshake\", \"group_handshake\", \"completed\",\"unknown\".",
      "revId": "fadf068bdf0ee06260a652ab94d05b513283bb81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}