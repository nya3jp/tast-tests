{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9ecc4d06_b5bf9c74",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-04-05T14:31:20Z",
      "side": 1,
      "message": "as we hit an issue, could you add comment about the background of these flags?\nAlso, I think we need to investigate further, specifically disable-login-lacros-opening. The flag is designed only for testing which does NOT check session start situation for convenience, but it is what we need to check.",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ae986ea_f084e699",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-04-05T14:43:25Z",
      "side": 1,
      "message": "What is the question that you want to have answered?\n\n(We still have to fix the issue with keep-alive leading to a NewWindow request being ignored, but I think here you\u0027re talking about something else.)",
      "parentUuid": "9ecc4d06_b5bf9c74",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ceb3f4c_60333a51",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-04-06T04:33:42Z",
      "side": 1,
      "message": "\"--disable-login-lacros-opening\" is the special flag designed for testing.\nOn chromeos-login, we\u0027re opening Lacros by default.\nhttps://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ash/crosapi/browser_manager.cc;l\u003d1234\n\nThis flag is designed to skip it, because many tests expect the \"clean\" chromeos session, meaning no browser (or even no any) windows at the beginning of the test, so otherwise we must close it every time before each test.\n\nHowever, *this specific test* is a kind of exception, because what we\u0027re taking a look is the behavior on session beginning in production, that should be exercised without --disable-login-lacros-opening.\n\nPls feel free to ping me over IM/VC if needed, so we can chat more to share more background.\n\nAnd, so, yes, this is not keep-alive vs NewWindow (though it is somewhat overlapping).",
      "parentUuid": "9ae986ea_f084e699",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de9f1c63_b1c9f72c",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-04-08T11:24:36Z",
      "side": 1,
      "message": "Without --disable-login-lacros-opening, Lacros starts automatically but it doesn\u0027t automatically restore the pages (only asks the user if they want to restore them). Is this WAI? I assume so.\n\nIf yes, then are you okay with me just adding a comment referencing bug chromium:1312414? I will also update that bug to make it clearer what the problem with keep-alive is.",
      "parentUuid": "4ceb3f4c_60333a51",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3569ed26_84eb6596",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-04-08T15:16:17Z",
      "side": 1,
      "message": "\u003e  Is this WAI?\n\nI think no. Maybe it is because the shutdown is not done in a way UI expects?\nCould you give it a try to click restart in menu (or something to triger the restarting)?",
      "parentUuid": "de9f1c63_b1c9f72c",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f03e9ecb_4d0dc357",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/migrate.go",
        "patchSetId": 3
      },
      "lineNbr": 243,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-04-20T08:43:24Z",
      "side": 1,
      "message": "Uhm... I can\u0027t reproduce that anymore.\n\nNow without --disable-login-lacros-opening it\u0027s failing for basically the original reason: the automatic startup brings us to state RUNNING when the NewWindow request comes in. I\u0027ve added a comment referencing the bug I filed. Let\u0027s land this CL so that we get test coverage of migration again.",
      "parentUuid": "3569ed26_84eb6596",
      "revId": "7647f85146f3f5e2416be20b093763f127214748",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}