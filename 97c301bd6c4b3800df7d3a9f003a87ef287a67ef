{
  "comments": [
    {
      "key": {
        "uuid": "a07cfaa9_78cdcc0a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-03T10:43:25Z",
      "side": 1,
      "message": "Not sure if we need to network.LockCheckNetworkHook here as we know that shill will be restarted?",
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "711e880c_d8e47cc3",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-03T23:41:05Z",
      "side": 1,
      "message": "Yes, that actually is a good idea.",
      "parentUuid": "a07cfaa9_78cdcc0a",
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66de164d_13e76977",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-04T01:05:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "711e880c_d8e47cc3",
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ece768ae_35cb8fed",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-03T23:41:05Z",
      "side": 1,
      "message": "actually, we might resolve that bug before we can really resolve the pci-rescan bug. Maybe file a new bug, specifically for this.",
      "range": {
        "startLine": 144,
        "startChar": 8,
        "endLine": 144,
        "endChar": 26
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6a39430_66cbe10f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-03T23:47:46Z",
      "side": 1,
      "message": "Filed https://crbug.com/1048366. Let\u0027s use that.",
      "parentUuid": "ece768ae_35cb8fed",
      "range": {
        "startLine": 144,
        "startChar": 8,
        "endLine": 144,
        "endChar": 26
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56ff50cf_43578d42",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-04T01:05:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b6a39430_66cbe10f",
      "range": {
        "startLine": 144,
        "startChar": 8,
        "endLine": 144,
        "endChar": 26
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b12a5f4b_22ecc21f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-03T23:41:05Z",
      "side": 1,
      "message": "What does this represent? That Shill crashed before we started doing anything? Seems a little excessive to me.",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 2
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69e98d07_e55d747a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-04T00:32:20Z",
      "side": 1,
      "message": "I checks status to ensure pid is valid (as well as the one in Poll). The doc of JobStatus says that pid is valid only if it\u0027s in running state. Or maybe it\u0027s easier to understand if we check pid !\u003d 0 instead?",
      "parentUuid": "b12a5f4b_22ecc21f",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 2
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f485dac3_3bfb1bbf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-04T00:50:39Z",
      "side": 1,
      "message": "// JobStatus returns the current status of job.\n// If the PID is unavailable (i.e. the process is not running), 0 will be returned.\n// An error will be returned if the job is unknown (i.e. it has no config in /etc/init).\n\nThat seems like PID is valid unless it\u0027s 0, and that suits our purposes. That would also match the poll case, where we don\u0027t really care about the precise Upstart state, except to know that the old instance is no longer running.",
      "parentUuid": "69e98d07_e55d747a",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 2
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d32a399a_23bd97d7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-04T01:05:41Z",
      "side": 1,
      "message": "Thanks for the suggestion. Done.",
      "parentUuid": "f485dac3_3bfb1bbf",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 2
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f4667da5_b8dbc3b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-03T23:41:05Z",
      "side": 1,
      "message": "do you really need to do anything besides check for the PID? We just want to ensure \u0027pid !\u003d shillPid\u0027 (and, we don\u0027t really need to wait for the \"running state\", as that\u0027s just an intermediate state that doesn\u0027t tell us anything). Then after that PID is definitely dead, we can grab a new manager connection (manager, ... :\u003d m.NewManager(ctx)) to wait for the rest.",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6f6abf7_d91a9fe3",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-02-03T23:54:01Z",
      "side": 1,
      "message": "For shill manipulating functions (under tast/local/shill), shall we check if shill is restarted (by checking pid) when there\u0027s something wrong?",
      "parentUuid": "f4667da5_b8dbc3b1",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d5c7009_fbb7eaac",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-04T00:21:56Z",
      "side": 1,
      "message": "Why would we do that? That would just complicate everything. In general, we do not expect Shill to restart while we\u0027re in the middle of calling Shill APIs. Any other case is a bug (e.g., Shill is crashing), and it\u0027s totally fine to just fail -- the Shill APIs should pass back error codes which bubble up to the test, and we can check syslog / net.log for those errors.\n\nThis test is currently the exception, but that\u0027s a bug that we should only work around locally.\n\nOr, am I misunderstanding what you\u0027re asking?",
      "parentUuid": "b6f6abf7_d91a9fe3",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ffc839c_8e31c9a7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-02-04T01:05:41Z",
      "side": 1,
      "message": "The suggestion in initial comment is done.",
      "parentUuid": "5d5c7009_fbb7eaac",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72ac1612_0aec4e68",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-02-04T02:29:33Z",
      "side": 1,
      "message": "Brian, in my previous comment, I thought we shall make shill package more robust on shill restart. But as you said, we should not expect shill to crash from time to time, so just fail the test is the correct way to do so.\n\nFor tests that restart shill, they should wait until the shill up and running.",
      "parentUuid": "5ffc839c_8e31c9a7",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "739c11c8_330315e0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/iwlwifi_pci_rescan.go",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-02-04T17:33:18Z",
      "side": 1,
      "message": "Ack, then this is resolved. *marks resolved*",
      "parentUuid": "72ac1612_0aec4e68",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 177,
        "endChar": 3
      },
      "revId": "97c301bd6c4b3800df7d3a9f003a87ef287a67ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}