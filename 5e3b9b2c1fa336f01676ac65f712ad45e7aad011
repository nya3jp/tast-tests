{
  "comments": [
    {
      "key": {
        "uuid": "a58f513c_12e595d5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "It\u0027s not easy for me to understand the purpose of this CL from this commit message without reading the code.\n\nHow about changing this to \"Don\u0027t use precondition in video.Play* tests\" or something like this?",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bed4d7fa_9e5e17ba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "Sorry. Reworded.",
      "parentUuid": "a58f513c_12e595d5",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4a32476_ef081978",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "Why don\u0027t we do same change for video.Seek?",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c25633a_38d50568",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "Oh, I didn\u0027t know that video.Seek is also flaky. I can add them.",
      "parentUuid": "c4a32476_ef081978",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0a9a1c83_63e214ec",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/lib/pre/pre.go",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "Instead of exporting this, please use ChromeVmoduleFlag() in log_helper.go.\nhttps://cs.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/video/lib/logging/log_helper.go?l\u003d18.\n\nAll contents in this file should be related to precondition.",
      "range": {
        "startLine": 24,
        "startChar": 4,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3101989c_0a4b8a21",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/lib/pre/pre.go",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "I have to make sure the args I used to restart Chrome instance are exactly the same as the Chrome instance in ChromeVideo() precondition.",
      "parentUuid": "0a9a1c83_63e214ec",
      "range": {
        "startLine": 24,
        "startChar": 4,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4f8885a_f088363c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/lib/pre/pre.go",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-07-01T07:32:59Z",
      "side": 1,
      "message": "If so, we should define flags outside of pre.go and use it here. I think pre.go should only provide testing.Precondition values.\nIt\u0027s confusing to use pre package in places to which precondition is unrelated.",
      "parentUuid": "3101989c_0a4b8a21",
      "range": {
        "startLine": 24,
        "startChar": 4,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dad460d_c0446b4c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "Why don\u0027t you modify TestPlay() itself?\nThough TestPlay() is still used by video.Play(VP8|VP9|H264), I couldn\u0027t find a reason why this CL doesn\u0027t change these tests.",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38af31ad_5b4cc67c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "Because when the flaky reason is found, we can switch back to use TestPlay() to save about 10 seconds for restarting Chrome before test and exiting Chrome after test.",
      "parentUuid": "9dad460d_c0446b4c",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2727c31f_3beb77c6",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-07-01T07:32:59Z",
      "side": 1,
      "message": "I think we should keep showing debug logs after the tests are stabilized. Otherwise, it\u0027ll be hard to debug tests if a test becomes flaky again.\nSo, it wouldn\u0027t be a good idea to switch back to TestPlay() without any change. If we choose this way, the tests will be emitting a lot of logs that no one can see. This won\u0027t solve the root problem.\n\nI think possible changes are:\n(a) Give up using Precondition for video tests.\n(b) Reduce the amounts of log messages not to be trimmed.\n(c) Stop trimming by changing autotest (or Tast framework)\nI think (a) is the easiest way and I thought you had chosen this. But, perhaps, we can choose another solution to save 10 seconds.\nWDYT?",
      "parentUuid": "38af31ad_5b4cc67c",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b846cd9d_c8b7a471",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-07-01T08:08:00Z",
      "side": 1,
      "message": "The debug log is still available, though it could be trimmed if there\u0027re too many logs for a Chrome session.\n\nWe can definitely remove some verbose logs (see https://crrev.com/c/1679969). In the meantime, we can still force running those flaky tests on new Chrome session till the root cause is identified.\n\nI have another approach to have only one main entrance TestPlay():\nFor original TestPlay(), rename it as testPlay(), which holds real implementation.\nAnd rename TestPlayIsolate() as TestPlay() with an additional arg: usePrecondition bool\nIf it is set, then TestPlay() assumes precondition Chrome is available. Otherwise, restarts a new Chrome session (and logs out after test).",
      "parentUuid": "2727c31f_3beb77c6",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fe975b1_80cc7b2c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 276,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "Why should we extract this part as a separate function? Since this function is used only once, I think it\u0027s okay to inline this.\n\nIf it\u0027s still good to have this function, how about splitting to another CL for refactoring?",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "728de7d9_3f32ce2e",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 276,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "You are right. It is unrelated to the topic of this CL: getting isolated Chrome log. I\u0027ll separate the timing change to another CL.\n\nI want to collect timing info for histogram snapshotting and verification. By extracting them as separate function make it easier to use the timing pattern:\n  ctx, st :\u003d timing.Start(ctx, \"snapshot_histogram\")\n  defer st.End()\n\nSee https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#Reporting-timing",
      "parentUuid": "4fe975b1_80cc7b2c",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6a592c3_23506064",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "ditto.",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2923f039_d9c7760a",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6a592c3_23506064",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "00575f8c_16872a0e",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 317,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-06-27T17:45:49Z",
      "side": 1,
      "message": "Is this related to the main purpose of this CL? How about creating a separated CL if this is actually needed?",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd9eb055_c6f3039d",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/play/play.go",
        "patchSetId": 1
      },
      "lineNbr": 317,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2019-06-27T18:47:28Z",
      "side": 1,
      "message": "Ok, I\u0027ll move timing change to another CL.",
      "parentUuid": "00575f8c_16872a0e",
      "revId": "5e3b9b2c1fa336f01676ac65f712ad45e7aad011",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}