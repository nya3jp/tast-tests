{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c5ae449c_f1fe4b3e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-03-10T23:20:03Z",
      "side": 1,
      "message": "Rebased to pick up changes in PrimaryBrowser API. Ready for review.",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19b9547d_d01c31e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-14T08:40:44Z",
      "side": 1,
      "message": "overall direction looks good.",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6aaafe7_7a25af60",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/overview_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 155,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-14T08:40:44Z",
      "side": 1,
      "message": "Is this tearing down important?\nIf not, it is recommended to keep such a state at the end of the test\n(so that we can take a look at the failure case manually, and/or some snapshot (like screenshot) works and helps for the investigation).",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43caa25e_c068ce59",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/overview_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 155,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-03-14T16:31:52Z",
      "side": 1,
      "message": "IMO teardown is important given that there is no clean up for lacros done in the fixture now and there seems to be some flakes caused by the state in the previous run breaking the assumption that the subsequent tests have. It would probably be worth cleaning up lacros in the fixture in the long run to avoid any order-dependent test flakiness.\n\nI don\u0027t think this cleanup does more harm than good. If something went wrong before reaching to this point, it would exit early and take a snapshot on the failure point. Please let me know if there is anything that has to block this CL submission.",
      "parentUuid": "f6aaafe7_7a25af60",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "715e57f0_924e068b",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/overview_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 155,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-17T16:10:39Z",
      "side": 1,
      "message": "\u003e IMO teardown is important given that there is no clean up for lacros done in the fixture now and there seems to be some flakes caused by the state in the previous run breaking the assumption that the subsequent tests have. It would probably be worth cleaning up lacros in the fixture in the long run to avoid any order-dependent test flakiness\n\nThis should be avoided for each test to set up its own environment properly.\n\n\u003e  If something went wrong before reaching to this point, it would exit early and take a snapshot on the failure point.\n\nThis does not help in case of test failure case. I don\u0027t think it\u0027s a good approach to introduce such difference for success cases and fail cases.\n\nWDYT",
      "parentUuid": "43caa25e_c068ce59",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a8c5ebd_237c5c18",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/overview_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 155,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-03-17T16:48:05Z",
      "side": 1,
      "message": "The way I see is, in reality, nearly all the wmp.* tests are tied to the same fixture and scheduled to be run together.\n\nThe problem I see is that \u0027lacros fixture\u0027 doesn\u0027t reset the state between tests and the previous run affects the subsequent runs. (example: a new desktop created in the previous run is carried to the next test). For comparison it may not be a problem when \u0027chrome fixture\u0027 is used since it does reset for a clean start.\n\nFYI there is an open comment thread where Eliot and I chatted about resetting the lacros state between tests: https://docs.google.com/document/d/1pKA_7jEGQ_Gh365Fq1x6oXVjoAHiLDpt1RnsDYLfrU8/edit?resourcekey\u003d0-6wmJuP1V5MPI0HUA4F1lfQ\u0026disco\u003dAAAAWtFO4Do\n\nUntil there is a reliable way of resetting, I think we might as well do an individual cleanup to avoid flakiness. A lot of reds already: https://tastboard.corp.google.com/test?contact\u003d\u0026testname\u003d%5Ewmp.*\nCan you share your insights into how to address the reset for lacros as a follow-up?",
      "parentUuid": "715e57f0_924e068b",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "afa0caa5_9c4f35a9",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/overview_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 155,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-08-09T04:07:12Z",
      "side": 1,
      "message": "Resolved this comment now that the test keeps the state where it ends (with no teardown added at the end).",
      "parentUuid": "8a8c5ebd_237c5c18",
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75507359_ae5232eb",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/window_cycle.go",
        "patchSetId": 8
      },
      "lineNbr": 123,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-14T08:40:44Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 119,
        "startChar": 1,
        "endLine": 123,
        "endChar": 4
      },
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c2d0fadb_417fc771",
        "filename": "src/chromiumos/tast/local/bundles/cros/wmp/window_cycle.go",
        "patchSetId": 8
      },
      "lineNbr": 123,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-03-14T16:31:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "75507359_ae5232eb",
      "range": {
        "startLine": 119,
        "startChar": 1,
        "endLine": 123,
        "endChar": 4
      },
      "revId": "4ade034de0ecdd0860240ec886bb3e95c43da568",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}