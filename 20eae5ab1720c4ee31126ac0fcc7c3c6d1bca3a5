{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4d7e2d0e_00b937a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1316063
      },
      "writtenOn": "2021-02-25T12:30:38Z",
      "side": 1,
      "message": "Hi Hugo, Pavol,\n\nCan you please take a look at this CL? \n\nThanks!",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50bf9119_0b5812e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1316063
      },
      "writtenOn": "2021-02-25T13:02:44Z",
      "side": 1,
      "message": "Follow this huge link to see logs where patchpanel is called before tinyproxy starts: \n\nhttps://00f74ba44b9bbcf797cdc930e9cff788aacc6c99ed-apidata.googleusercontent.com/download/storage/v1/b/chromeos-autotest-results/o/swarming-51dca8d30bcad310%2Fautoserv_test%2Ftast%2Fresults%2Ftests%2Fnetwork.TestProxyServer%2Fmessages?jk\u003dAFshE3XRFB0u03Sv4IHpa6yjy2kOJL6iG9PS662D4gVbikrlERKRzVnxs9BOigzWzFdf0yiqJvBUCDx2iCPgt0k_sns-FrZNbLyYJ5OrKst_KzM0_SOPlGUdBgOI1kjUyWTjYcD93ytMUzuooC4Nq6T_Vu5U49gXFnUZ0VgOgXQPGgGfubMjTs59uIfqJCzndmhq2sUP2znekgV92jCoAr4UubHrHUJSz9idICReGHSIu34bWict4h60milLjCQ7uvOr05oqJWD3F27FuqbHGfP1-iTndkJBdd1vPE47wa6PnQwYcf302YBn9DAHcu3Zwfrgu_HmaqFIx8ZtJkAUCOA9P79LMqGxsA93ja7roOqXahQlnE4uR9CPKQBCUKZkItZRGcI74MV8DHZz-XrV8vdGKqW7pd7qOWHUu-sYy13VpJuohNB6ayrCXxTEmlEkEzyulQM-0Jh7K0PpDzkyO2j4izQS2bNaMCt4VY1C5UGxCbgMNQKu1KtOGlEIXQZJMIykNng9zbAmw7dmhvAwvpqRXaL_UEMtDkUqEcKlQkcrEyjpeayJeJ6YwKR7JiBKS1qf_Lvr1ykwsLjAzX3il1uvw6LzodfsAuoEKOi4I0o8QcIvQMC7UHVnrhRC75kLq-wn668QEtUFSnDK_6DoPOHLG4u44sDkLFY083yeXoZWFuO_BWyDChYbc4v4YpizDStkpyPmVWd5x2ngvHrEjFGdbsTqfDZa9mMiCXM2YM-Vcfeq1wWYAWHMFrgMq5mlBoutRvjvFy8N3RTnBlw5QdtiYnuOwmbhyFdGc5OpAlSHvUQXuj14zzrijFoS0uRtNgiUyjQJK9Qvhj_Arv8Zr4OyF11rlPmKKgHkCLG4fIUnoSflUhIE7l6UapFEeH7CUOSJPdENHfhtjj-t8UuTvqigPlObOXz3V0sSibWojuH2yLNtMRPWzm1HIMCrpF_TUx95bVPTYXJfZSz1YGCk1leY3SuCPVzhvYW6pQF8BVF2pOjIOR6Vnf1qZSLFEl3ohmigX0beSpx2_0JNsTU2AE5FnsMA6WVP7HfDlw\u0026isca\u003d1",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e03135f_2b890a4c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2021-02-25T14:26:35Z",
      "side": 1,
      "message": "LGTM, but could you document explicitly the race in the code somewhere ?",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1d2eb15f_fe3ea123",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2021-02-25T14:27:04Z",
      "side": 1,
      "message": "That link did not work for me",
      "parentUuid": "50bf9119_0b5812e4",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b7cb340_24464da8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1316063
      },
      "writtenOn": "2021-02-26T13:21:34Z",
      "side": 1,
      "message": "I tried to explain this in the comment. \n\nThe problem is I added the \"-i\" option to minijail which says immediately exit after fork. We use this for most of our system daemons so we don\u0027t block upstart until the daemon is up and running. But here it doesn\u0027t make sense :D.",
      "parentUuid": "3e03135f_2b890a4c",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb833091_2ae40386",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1316063
      },
      "writtenOn": "2021-02-26T13:21:34Z",
      "side": 1,
      "message": "Uh, sorry Hugo! I didn\u0027t realise it\u0027s a temporary link.\n\nThe log looks like this, for all the 5 failed tests:\n\n2021-02-16T14:33:31.169178Z INFO tast[3123]: network.TestProxyServer: Error at test_proxy_server.go:37: Failed to setup server: failed to setup the network namespace: failed to get proxy process pid: strconv.Atoi: parsing \"\": invalid syntax\n2021-02-16T14:33:31.170204Z INFO tinyproxy[15816]: Initializing tinyproxy ...\n2021-02-16T14:33:31.170363Z INFO tinyproxy[15816]: Reloading config file",
      "parentUuid": "1d2eb15f_fe3ea123",
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28a59730_8503bd58",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/proxy/proxy_server.go",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1175129
      },
      "writtenOn": "2021-02-26T10:53:47Z",
      "side": 1,
      "message": "I struggle to find the minijail0 command line args reference :D what was -i doing?",
      "range": {
        "startLine": 72,
        "startChar": 47,
        "endLine": 72,
        "endChar": 56
      },
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f6d546e_935f22eb",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/proxy/proxy_server.go",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1316063
      },
      "writtenOn": "2021-02-26T13:21:34Z",
      "side": 1,
      "message": "Code search won\u0027t help much. From the `--help` output:\n\n -i:           Exit immediately after fork(2). The jailed process will run\n               in the background.\n\nIn this case, it\u0027s not a good idea because we need tinyproxy to write it\u0027s pid to a file before we can move to the next action.",
      "parentUuid": "28a59730_8503bd58",
      "range": {
        "startLine": 72,
        "startChar": 47,
        "endLine": 72,
        "endChar": 56
      },
      "revId": "20eae5ab1720c4ee31126ac0fcc7c3c6d1bca3a5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}