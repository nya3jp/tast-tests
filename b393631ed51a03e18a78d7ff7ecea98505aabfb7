{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fbe6f06c_24e85aeb",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1459973
      },
      "writtenOn": "2022-05-19T13:33:36Z",
      "side": 1,
      "message": "This mgs.Close(ctx) will clear the policies and restart Chrome. Essentially it removes the MGS setup. \nNext init in the line 84 will set and start fresh MGS. The test will always pass.\n\nI would suggest setting the MGS up, do the action with setting, click on EXIT button and sign in from sign in screen as starting in this line:\n\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2988669/1/src/chromiumos/tast/local/bundles/cros/policy/mgs_policy.go#109",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bf89f33_eb9ff8ae",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-05-23T06:43:37Z",
      "side": 1,
      "message": "Thanks for noticing, I\u0027ll fix it.\n\nFor me to understand, what\u0027s the difference between \"starting fresh MGS\" and signing out and in again?",
      "parentUuid": "fbe6f06c_24e85aeb",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "601eb368_3f0ae521",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1459973
      },
      "writtenOn": "2022-05-23T07:53:19Z",
      "side": 1,
      "message": "the \"starting fresh MGS\" at line 84 does:\n- starts user session\n- applies all passed policies. The important part is that DeviceLocalAccounts will be set with all associated policies (if set)\n- restarts Chrome to pick up local accounts configurations\n\nWhat is also important is that defer mgs.Close(ctx) will clean up the policies (hence local accounts) and restart Chrome.\n\nIN CONTRAST, once MGS is set and you sign out and sing in it does not change policies, does not restart Chrome and does not change any configuration. Hence, this is close to the user point of view interaction.\n\n\nQuestion from my side. Where should such information be held to be clear for new people working with mgs library?\n\nThere is a codelab go/remote-management/tast-codelabs/mgs_testing but is it enough clear?",
      "parentUuid": "5bf89f33_eb9ff8ae",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e0f4a32_7bb93d59",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-06-02T08:10:11Z",
      "side": 1,
      "message": "Haven\u0027t forgotten about this, it\u0027s just that I wanted to see if I can fix some more flakyness at the same time, and a network test disabling the network on the device prevented all the mgs tests to run for a while. So I coulnd\u0027t check on the flaky errors.",
      "parentUuid": "601eb368_3f0ae521",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1d1bca6_ed6215c3",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-06-13T08:31:11Z",
      "side": 1,
      "message": "Looks like other flakes are only general problems :( So I\u0027m going to fix what you mentioned now, but have no hope of getting these tests into the CQ soon.",
      "parentUuid": "3e0f4a32_7bb93d59",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6021305_7213e1f9",
        "filename": "src/chromiumos/tast/local/bundles/cros/mgs/session_ephemeral.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1400492
      },
      "writtenOn": "2022-06-13T11:12:03Z",
      "side": 1,
      "message": "Note that signing out does actually restart Chrome. So I\u0027ll just go with \"restart ui\" as that\u0027s less brittle.",
      "parentUuid": "d1d1bca6_ed6215c3",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "b393631ed51a03e18a78d7ff7ecea98505aabfb7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}