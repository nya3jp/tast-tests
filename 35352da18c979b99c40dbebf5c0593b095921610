{
  "comments": [
    {
      "key": {
        "uuid": "b01dfd7d_50307d3b",
        "filename": "src/chromiumos/tast/remote/firmware/boot_mode.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-17T00:31:53Z",
      "side": 1,
      "message": "null check for svo. (and probably add one for d too)",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8309d7e7_e6e60296",
        "filename": "src/chromiumos/tast/remote/firmware/boot_mode.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-06-22T19:30:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b01dfd7d_50307d3b",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9574c3e_3630591a",
        "filename": "src/chromiumos/tast/remote/firmware/boot_mode.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-17T00:31:53Z",
      "side": 1,
      "message": "Add a todo here to implement the rec boot and can just fallthrough instead of return.",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "608bcd9d_38a049de",
        "filename": "src/chromiumos/tast/remote/firmware/boot_mode.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-06-22T19:30:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c9574c3e_3630591a",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bab43da8_af6fbd5b",
        "filename": "src/chromiumos/tast/remote/servo/methods.go",
        "patchSetId": 2
      },
      "lineNbr": 219,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-17T00:31:53Z",
      "side": 1,
      "message": "The autotest version skips the set if it\u0027s already in the right role.",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "488ec4a9_37900444",
        "filename": "src/chromiumos/tast/remote/servo/methods.go",
        "patchSetId": 2
      },
      "lineNbr": 219,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-06-22T19:30:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bab43da8_af6fbd5b",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a6e4382_73e978a8",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-17T00:31:53Z",
      "side": 1,
      "message": "It\u0027d be more direct if just added a member to store the starting v4 role and restore it back during close if it\u0027s not the same.  Defer isn\u0027t quite the best way to do this.",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6090b556_9c2caa40",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-06-22T19:30:28Z",
      "side": 1,
      "message": "I implemented it this way in order to create a reusable abstraction. Creating a new member for starting v4 role, and adding a special hard-coded call during svo.Close(), would require us to duplicate that logic the the next time we want to do something similar, such as crbug.com/1012925. As our framework grows, I worry that this will get messy. So, I created Defer to keep it all in one place.\n\nWith that additional context, do you still recommend keeping an individual variable for the starting v4 role?",
      "parentUuid": "5a6e4382_73e978a8",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66e116b7_bdf1b172",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-23T00:37:36Z",
      "side": 1,
      "message": "I think tying arbitrary things to happen when the servo closes will be misused.  It\u0027d be much better to expose it via a configuration option like \"servo.restoreCurrentV4RoleOnClose()\", or \"servo.dumpUartStreamOnClose(true)\".\n\nOne area of misuse would be duplicate defers on the same operation, for example defer v4 role restoration multiple times, or defer dumping the stream multiple times.  That\u0027s why making this work like defer is not a good fit.\n\nAnother area is some code could accidentally defer something that messes up the ability to performa a previous defer.",
      "parentUuid": "6090b556_9c2caa40",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eea6fb9a_99b7fd24",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-06-23T00:42:44Z",
      "side": 1,
      "message": "correction, \"servo.restoreCurrentV4RoleOnClose()\" is not as good as \"servo.restoreStartingV4RoleOnClose()\", which means you\u0027ll still need to save the starting v4 role before changing it.",
      "parentUuid": "66e116b7_bdf1b172",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d12850e7_e39ce671",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-06-23T18:20:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eea6fb9a_99b7fd24",
      "revId": "35352da18c979b99c40dbebf5c0593b095921610",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}