{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "25757f18_5a78c069",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2021-10-15T06:49:25Z",
      "side": 1,
      "message": "I\u0027m not very familiar with Tast, and the complexity of this CL has clearly exceeded my recognition capacity, so I\u0027ll count on someone else to review, left a few high level questions.",
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38da918f_f6673343",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 23,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "Can inline into |GetBrowserVersion()|\n\nditto others",
      "range": {
        "startLine": 23,
        "startChar": 1,
        "endLine": 23,
        "endChar": 4
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92f0bde3_9da8270e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 23,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "38da918f_f6673343",
      "range": {
        "startLine": 23,
        "startChar": 1,
        "endLine": 23,
        "endChar": 4
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "087dac1a_dbbf1c71",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 30,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "Should check the len is 1?\n+ output as warning if the list is longer so debugging can be easier in the case that future code changes cause it to be longer than 1?",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 65
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6639782f_6ad49513",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 30,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Thanks for the catch. Done.",
      "parentUuid": "087dac1a_dbbf1c71",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 65
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbc5245d_b31148db",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "nit: constants",
      "range": {
        "startLine": 120,
        "startChar": 6,
        "endLine": 120,
        "endChar": 99
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6460d30a_45b7e5d1",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fbc5245d_b31148db",
      "range": {
        "startLine": 120,
        "startChar": 6,
        "endLine": 120,
        "endChar": 99
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "edf8516a_9856f1d0",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_rootfs_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "There isn\u0027t a conflict with other packages, reason to explicitly rename?",
      "range": {
        "startLine": 13,
        "startChar": 1,
        "endLine": 13,
        "endChar": 13
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "438433d3_4c6c34fe",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_rootfs_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "I ran into https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#scoping-and-shared-code\nwhen moving some common functions for tests to the helper.\n\nBtw, changing the subpackage name to \u0027update\u0027 can remove renaming. Done.",
      "parentUuid": "edf8516a_9856f1d0",
      "range": {
        "startLine": 13,
        "startChar": 1,
        "endLine": 13,
        "endChar": 13
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af80ff6f_87756119",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_rootfs_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 58,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2021-10-15T06:49:25Z",
      "side": 1,
      "message": "This is fine to simplify the test setup, but in reality, it is possible to RootFS to be newer than Stateful, such as on the trunk.",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 75
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9034c10a_677371ed",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_rootfs_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 58,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T17:45:14Z",
      "side": 1,
      "message": "Understood. Transitioning from an older Stateful \u003d\u003e newer Rootfs will be covered in a follow-up CL (https://crrev.com/c/3223762) separately from this test.\n\nFYI that case is being blocked on a potential issue in the selection logic + version skew (https://crbug.com/1258214). will be working on it figuring out what the intended behavior is with Jae.",
      "parentUuid": "af80ff6f_87756119",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 75
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92914140_ea7c45e7",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_rootfs_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 58,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9034c10a_677371ed",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 75
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e2596ba_021d66b4",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2021-10-15T06:49:25Z",
      "side": 1,
      "message": "It\u0027s probably calling out this is true only as of today, it will increase to up to 5 in the future.",
      "range": {
        "startLine": 45,
        "startChar": 95,
        "endLine": 45,
        "endChar": 120
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bb8ca2d_706b7896",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T17:45:14Z",
      "side": 1,
      "message": "Well noted!\nAs you know, a version skew of [0, +2] has not yet even been implemented. For now `IsSkewValid` in `version.go` in this CL has copied the version skew policy from production code, which is [-1, infinite].\nFiled crbug.com/1258138 to track the change and apply to the tests.",
      "parentUuid": "6e2596ba_021d66b4",
      "range": {
        "startLine": 45,
        "startChar": 95,
        "endLine": 45,
        "endChar": 120
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ba11d46_55801016",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6bb8ca2d_706b7896",
      "range": {
        "startLine": 45,
        "startChar": 95,
        "endLine": 45,
        "endChar": 120
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5d905dd_59f80c93",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "nit: overrideVersion or add a comment about it",
      "range": {
        "startLine": 79,
        "startChar": 8,
        "endLine": 79,
        "endChar": 9
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cbc0d2ad_0347b13e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5d905dd_59f80c93",
      "range": {
        "startLine": 79,
        "startChar": 8,
        "endLine": 79,
        "endChar": 9
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b79e2d47_a90394de",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "This can probably be in a helper fucntion of its own + reused in both rootfs2stateful + stateful2stateful tests.",
      "range": {
        "startLine": 80,
        "startChar": 2,
        "endLine": 80,
        "endChar": 20
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "64f0ee74_dde7bba7",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "A good suggestion! Btw, since there might some version check conditions that vary case by case, I\u0027ll probably leave a TODO now for this and future and see how it could be sorted out.",
      "parentUuid": "b79e2d47_a90394de",
      "range": {
        "startLine": 80,
        "startChar": 2,
        "endLine": 80,
        "endChar": 20
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e06d04f_b173523a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2021-10-15T06:49:25Z",
      "side": 1,
      "message": "I\u0027m a little bit confused about this part, IIUC, v should be +9000 major milestone, then the test would fail, but shouldn\u0027t the test be expected to pass?",
      "range": {
        "startLine": 86,
        "startChar": 5,
        "endLine": 86,
        "endChar": 10
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fb4a8eb3_f1e132fb",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update_stateful_to_stateful.go",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T17:45:14Z",
      "side": 1,
      "message": "Thanks for pointing that out. It is because the production code hasn\u0027t implement the version skew policy yet. Currently the test copies the policy from the production code (see https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3214891/6/src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go), which is [-1, inf] so +9000 won\u0027t let the test fail. \n\nThis will be updated as soon as the final version skew decision gets in chromium.",
      "parentUuid": "3e06d04f_b173523a",
      "range": {
        "startLine": 86,
        "startChar": 5,
        "endLine": 86,
        "endChar": 10
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be2130c5_dd392d79",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "nit:\n```\nfor i, component :\u003d range v.components {\n  o :\u003d rhs.components[i]\n  if component !\u003d o {\n    return component \u003e o\n  }\n}\nreturn false\n```",
      "range": {
        "startLine": 72,
        "startChar": 1,
        "endLine": 80,
        "endChar": 26
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "062d5677_fa17c08d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Much better!",
      "parentUuid": "be2130c5_dd392d79",
      "range": {
        "startLine": 72,
        "startChar": 1,
        "endLine": 80,
        "endChar": 26
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9953864_d760aeb3",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "nit: inline, only single use",
      "range": {
        "startLine": 105,
        "startChar": 1,
        "endLine": 105,
        "endChar": 6
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3cb50481_f8648560",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Just wanted to keep the original code style and logic from the production code (see the code location in the comment above)\nBtw, one liner looks good to me. will be updating it with this. Thanks!",
      "parentUuid": "f9953864_d760aeb3",
      "range": {
        "startLine": 105,
        "startChar": 1,
        "endLine": 105,
        "endChar": 6
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3cde4e1_d4949526",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "Helpful to create a constant:\nkAllowedMajorVersionSkew || kMaxMajorVersionSkew",
      "range": {
        "startLine": 106,
        "startChar": 10,
        "endLine": 106,
        "endChar": 11
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14ca85df_a6c33c82",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3cde4e1_d4949526",
      "range": {
        "startLine": 106,
        "startChar": 10,
        "endLine": 106,
        "endChar": 11
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f1529b5_56573462",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2021-10-15T18:50:41Z",
      "side": 1,
      "message": "single line for entire function?\n```\nreturn v.components[0] + kMaxMajorVersionSkew \u003e\u003d ash.components[0]\n```\n\nEven down the line is the actual skew allowed is [0, 2]\n```\nreturn v.components[0] - kMinMajorVersionSkew \u003e\u003d ash.components[0] \u0026\u0026\n       v.components[0] + kMaxMajorVersionSkew \u003c\u003d ash.components[0]\n```",
      "range": {
        "startLine": 110,
        "startChar": 1,
        "endLine": 110,
        "endChar": 12
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "adc248fe_9f3756eb",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/version/version.go",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-10-15T21:52:24Z",
      "side": 1,
      "message": "Done. Btw, [0,2] has not been in production code yet. Until then it would stick to using the current policy, which is [-1, inf]",
      "parentUuid": "9f1529b5_56573462",
      "range": {
        "startLine": 110,
        "startChar": 1,
        "endLine": 110,
        "endChar": 12
      },
      "revId": "3f9183053fcf6c70afccf05f2649de0565e7432c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}