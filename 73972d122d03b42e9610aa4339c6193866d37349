{
  "comments": [
    {
      "key": {
        "uuid": "78a52778_cd98d690",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-09-16T16:13:50Z",
      "side": 1,
      "message": "would it be possible to use something like:\n\n  return time.Now().Sub(0).UnixNano() // I haven\u0027t tried it, but according to the docs it should work\n\nI believe that \"time.Now() was not monotonic before... but since a few years ago it contains both the monotonic and \"Wall\" times.\nIf you do an arithmetic operation then it should return the monotonic one.\n\nhttps://golang.org/pkg/time/#Time.UnixNano",
      "range": {
        "startLine": 166,
        "startChar": 1,
        "endLine": 166,
        "endChar": 33
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ee3689f_595e8d6d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-09-17T21:45:50Z",
      "side": 1,
      "message": "This ended up not working because Sub() takes a Time and returns a Duration, but there isn\u0027t a way construct a Time with monotonic value \u003d\u003d 0. AFAICT, the other constructors (time.Date/Parse/ParseInLocation/Unix) all only set the wall clock value, so t.Sub() would fallback to using the wall-clock value for both.",
      "parentUuid": "78a52778_cd98d690",
      "range": {
        "startLine": 166,
        "startChar": 1,
        "endLine": 166,
        "endChar": 33
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15929db4_877a23b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-09-18T00:56:47Z",
      "side": 1,
      "message": "nya@ could you help me review this part of the code?\n\nI\u0027m not familiar with //go:linkname",
      "parentUuid": "2ee3689f_595e8d6d",
      "range": {
        "startLine": 166,
        "startChar": 1,
        "endLine": 166,
        "endChar": 33
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99403e9f_ebd92884",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-09-18T09:39:29Z",
      "side": 1,
      "message": "It\u0027s first time for me to see //go:linkname :) \n\nBut I\u0027m afraid that this approach might be fragile because it depends on an internal symbol name (runtime.nanotime). Also IIUC there can be several monotonic clocks available in the system (e.g. CLOCK_MONOTONIC, CLOCK_MONOTONIC_COARSE, CLOCK_MONOTONIC_RAW) but in this way we don\u0027t have control of the choice.\n\nDoes unix.ClockGettime work for us?\n\nhttps://godoc.org/golang.org/x/sys/unix#ClockGettime",
      "parentUuid": "15929db4_877a23b4",
      "range": {
        "startLine": 166,
        "startChar": 1,
        "endLine": 166,
        "endChar": 33
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db74122a_78df0ee3",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-09-23T01:07:38Z",
      "side": 1,
      "message": "Thanks, I actually didn\u0027t know unix.ClockGettime was available. I\u0027ve updated the change to use that instead, retrieving time specifically from CLOCK_BOOTTIME since this is the same one that is used by arc-host-clock for its calculations (http://cs/rvc-arc/vendor/google_arc/services/arc-host-clock/main.cpp?l\u003d38).",
      "parentUuid": "99403e9f_ebd92884",
      "range": {
        "startLine": 166,
        "startChar": 1,
        "endLine": 166,
        "endChar": 33
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aefaef10_1fa0b16a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 190,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-09-16T16:13:50Z",
      "side": 1,
      "message": "nit:\n\nMerge the two blocks with something like:\n\n  if vmEnabled, err :\u003d arc.VMEnabled(); err !\u003d nil {\n    ...\n  } else if vmEnabled {\n    ..\n  }",
      "range": {
        "startLine": 176,
        "startChar": 0,
        "endLine": 190,
        "endChar": 2
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33c786fe_ac2b5749",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/inputlatency/util.go",
        "patchSetId": 3
      },
      "lineNbr": 190,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-09-17T21:45:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aefaef10_1fa0b16a",
      "range": {
        "startLine": 176,
        "startChar": 0,
        "endLine": 190,
        "endChar": 2
      },
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4a4bba7_a2eba016",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/mouse_perf.go",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-09-16T16:13:50Z",
      "side": 1,
      "message": "nit: remove empty line",
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3f662bb_fd403c6f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/mouse_perf.go",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-09-17T21:45:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b4a4bba7_a2eba016",
      "revId": "73972d122d03b42e9610aa4339c6193866d37349",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}