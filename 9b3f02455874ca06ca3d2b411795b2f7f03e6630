{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "05dbd799_3920f963",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-03-31T08:21:00Z",
      "side": 1,
      "message": "Updated with time constants, and new modem object for defer.",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d7b5f66_79e649bb",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_slot_switch.go",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-04-02T17:15:57Z",
      "side": 1,
      "message": "We still need to defer this immediately after switching slots, otherwise it will not get called if s.Fatal gets triggered (e.g. in line 71).\n\nWhat we want to do is wrap the above in a helper and call:\ndefar setPrimarySimSlot(cleanupCtx, primary);",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8116e691_8bee78ce",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_slot_switch.go",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-04-02T23:05:16Z",
      "side": 1,
      "message": "calling defer might not be possible if no modem up after slotswitch. can happen with line 71 - timeout due to no modem object in ModemPollTime.\nline 52 s.Fatal results if call to SetPrimarySimSlot fails, here not required to do defer.\nThis seems should be this way.",
      "parentUuid": "0d7b5f66_79e649bb",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35939d67_d9b81453",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_slot_switch.go",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2021-04-02T23:51:37Z",
      "side": 1,
      "message": "Acknowledged, but it would still generally be better to make a best effort I think.\n\nThat said, I\u0027ve learned that in Tast there is a policy of avoiding extra cleanup work that might not be needed. Instead we ensure an expected state in setup instead. That being the case, I don\u0027t think we should actually try to switch the slot back at the end of the test, although it would be a good idea to test that switching back also succeeds.",
      "parentUuid": "8116e691_8bee78ce",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6220e17_7c71a4b6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_slot_switch.go",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-04-07T22:58:45Z",
      "side": 1,
      "message": "- Removing defer as not needed in this scenario(as said above)\n - Calling sim slot switch twice(as discussed on chat), not optimizing in single method for switch, poll, check for better clarity",
      "parentUuid": "35939d67_d9b81453",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df719d05_97b56bbd",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/modemmanager_slot_switch.go",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1443943
      },
      "writtenOn": "2021-04-08T17:31:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c6220e17_7c71a4b6",
      "revId": "9b3f02455874ca06ca3d2b411795b2f7f03e6630",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}