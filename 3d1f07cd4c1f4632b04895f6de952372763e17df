{
  "comments": [
    {
      "key": {
        "uuid": "a18e7df4_1184c435",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-09T15:36:22Z",
      "side": 1,
      "message": "Done, thanks!",
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f8c04f1_9ee99878",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-13T04:09:11Z",
      "side": 1,
      "message": "Should we Wrap() the |err| here instead of dropping it silently?",
      "range": {
        "startLine": 306,
        "startChar": 10,
        "endLine": 306,
        "endChar": 27
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "227539aa_543c860a",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-15T05:16:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3f8c04f1_9ee99878",
      "range": {
        "startLine": 306,
        "startChar": 10,
        "endLine": 306,
        "endChar": 27
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad917e8_61d831b5",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-13T04:09:11Z",
      "side": 1,
      "message": "nit: serve",
      "range": {
        "startLine": 72,
        "startChar": 37,
        "endLine": 72,
        "endChar": 42
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "173fff70_020165ae",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-15T05:16:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5ad917e8_61d831b5",
      "range": {
        "startLine": 72,
        "startChar": 37,
        "endLine": 72,
        "endChar": 42
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5efa64ad_99e3feb8",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 90,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-14T04:10:58Z",
      "side": 1,
      "message": "nit: We should not use the term \"installed\" here since CCA is always installed as part of the Chrome as you said below.",
      "range": {
        "startLine": 90,
        "startChar": 6,
        "endLine": 90,
        "endChar": 15
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84f2b3c5_ee42143e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 90,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-14T04:24:20Z",
      "side": 1,
      "message": "You are right. But on second thought I think we should change the behavior to not install CCA if the app id is blocked. Let\u0027s keep the comment unchanged and change the code logic below.",
      "parentUuid": "5efa64ad_99e3feb8",
      "range": {
        "startLine": 90,
        "startChar": 6,
        "endLine": 90,
        "endChar": 15
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79c63c72_2da95925",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 90,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-15T05:16:11Z",
      "side": 1,
      "message": "Per offline discussion, we decide to not change the behavior since current behavior is consistent to other apps. Edited the comment accordingly.",
      "parentUuid": "84f2b3c5_ee42143e",
      "range": {
        "startLine": 90,
        "startChar": 6,
        "endLine": 90,
        "endChar": 15
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f57017a8_d7b52c85",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-13T04:09:11Z",
      "side": 1,
      "message": "IIRC the background page might be killed after idle, and we won\u0027t have background page after migrated to SWA. Is there any better alternative here such as checking if it available on launcher instead?",
      "range": {
        "startLine": 95,
        "startChar": 70,
        "endLine": 95,
        "endChar": 87
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2120e047_8e42e0c5",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-14T03:43:31Z",
      "side": 1,
      "message": "For current behavior, CCA will still be installed as a component app but will fail to launch its background page since the app id is blocked. I think for SWA we can simply skip this test since we might not want to use app id to block SWA. I believe they might have some other policies for SWA after more and more app is migrated to SWA, and we can add cases for those policies afterwards.",
      "parentUuid": "f57017a8_d7b52c85",
      "range": {
        "startLine": 95,
        "startChar": 70,
        "endLine": 95,
        "endChar": 87
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "adeeba74_3ab61d65",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-14T04:10:58Z",
      "side": 1,
      "message": "Thanks for the explanation, but even if we change the policy used to disable CCA, we still need to check that the app is properly blocked.\n\nSince background page might be killed after idle, I would prefer to check launcher instead. Is it expected to see CCA in launcher if it\u0027s blocked by ID?",
      "parentUuid": "2120e047_8e42e0c5",
      "range": {
        "startLine": 95,
        "startChar": 70,
        "endLine": 95,
        "endChar": 87
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f14eb14_06594ae6",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-14T04:24:20Z",
      "side": 1,
      "message": "We do not check policies when installing CCA in component loader so the app icon will show in the launcher now.\n\nAlthough I am not very familiar with those policies and what should they behave, but imo, \nhaving CCA icon in the launcher but showing no response when clicking it is a bit weird to me.\n\nAs a result, I think it would be better to have another CL to change the behavior first, and then we can land this CL and check by the existence of the app icon in the launcher.",
      "parentUuid": "adeeba74_3ab61d65",
      "range": {
        "startLine": 95,
        "startChar": 70,
        "endLine": 95,
        "endChar": 87
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a988ccd_f155bdd7",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-15T05:16:11Z",
      "side": 1,
      "message": "Per offline discussion, we decide to not change the behavior since current behavior is consistent to other apps.\n\nFor the background page, I tested sleeping 90 seconds after creating Chrome and before testing policies, and the tests work fine. So I think it might be safe now to check background page availability in Tast tests.",
      "parentUuid": "8f14eb14_06594ae6",
      "range": {
        "startLine": 95,
        "startChar": 70,
        "endLine": 95,
        "endChar": 87
      },
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cdff22a_479df8dc",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 131,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-13T04:09:11Z",
      "side": 1,
      "message": "huge nit: I would prefer move this one-level out since it does not need to be nested under \"if !errors.Is(...)\".",
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc925c09_a1344b4e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 131,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-07-13T11:09:55Z",
      "side": 1,
      "message": "so, if statement will be like:\n\nif err !\u003d nil \u0026\u0026 !errors.Is(err, cca.ErrVideoNotActive) ?",
      "parentUuid": "4cdff22a_479df8dc",
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d05867bf_221672e9",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_policy.go",
        "patchSetId": 4
      },
      "lineNbr": 131,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-07-14T03:43:31Z",
      "side": 1,
      "message": "I prefer reporting different errors for these two cases since they are actually different cases:\n\n1. err !\u003d nil:\n  That means the policy does not work as expected\n2. !errors.Is(err, cca.ErrVideoNotActive):\n  The initialization fails on unexpected stage, which means there might be some errors that we need to investigate more. \n\nSo if we want to move the if condition out, maybe we can revert it and use the original structure, like:\n\nif err \u003d\u003d nil {\n  //\n} else if !errors.Is(err, cca.ErrVideoNotActive) {\n  //\n}\n\nWDYT?",
      "parentUuid": "dc925c09_a1344b4e",
      "revId": "3d1f07cd4c1f4632b04895f6de952372763e17df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}