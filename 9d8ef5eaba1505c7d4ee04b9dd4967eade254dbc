{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "30ffd105_eefeba86",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-03-02T22:21:29Z",
      "side": 1,
      "message": "LGTM, i\u0027ll probably leave it to hidehiko for +2 in case there is anything left. Thanks,",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ac9fc30_4b115de7",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/launch_browser.go",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-02T14:25:22Z",
      "side": 1,
      "message": "do you need to check title? Or can it be just window type?\nIf latter, could you simplify?",
      "range": {
        "startLine": 79,
        "startChar": 21,
        "endLine": 79,
        "endChar": 33
      },
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73016717_843a5065",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/launch_browser.go",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-02T22:04:58Z",
      "side": 1,
      "message": "Yes, we need to check the title as well.",
      "parentUuid": "5ac9fc30_4b115de7",
      "range": {
        "startLine": 79,
        "startChar": 21,
        "endLine": 79,
        "endChar": 33
      },
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c855a085_9202db69",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/params_test.go",
        "patchSetId": 5
      },
      "lineNbr": 96,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-03T09:49:08Z",
      "side": 1,
      "message": "Nit: \"lacrosTests\" sounds more natural and in line with the others below.",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 14
      },
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea7db45b_333bb903",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/params_test.go",
        "patchSetId": 5
      },
      "lineNbr": 96,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-03T11:24:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c855a085_9202db69",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 14
      },
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a186575f_390fe790",
        "filename": "src/chromiumos/tast/local/chrome/browser/browserfixt/util.go",
        "patchSetId": 5
      },
      "lineNbr": 24,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-02T14:25:22Z",
      "side": 1,
      "message": "assuming title check can be skipped, can this be a simple window type checking function in ash package?",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d74269aa_e43a141a",
        "filename": "src/chromiumos/tast/local/chrome/browser/browserfixt/util.go",
        "patchSetId": 5
      },
      "lineNbr": 24,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-02T22:04:58Z",
      "side": 1,
      "message": "No, we need to verify the title.",
      "parentUuid": "a186575f_390fe790",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bd1caea_f7aa93d1",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 356,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-03T09:49:08Z",
      "side": 1,
      "message": "I don\u0027t understand this, it looks wrong.",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed337d15_0899362c",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 356,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-03T11:24:05Z",
      "side": 1,
      "message": "Sorry it is a long explanation:\n1. There are usually 4 params in a test, refer to https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3494599/5/src/chromiumos/tast/local/bundles/cros/crostini/launch_browser.go#32. \n2. If there is lacros testing, the Val:browser.Typexxx must be added to all params.\n3. For non-lacros params, the value is browser.TypeAsh (line 355), for lacros params, the value is browser.TypeLacros (line 375, your next comment).\n4. The for loop starting from line 221 iterates all the base cases and add up to 4 non-lacros params of to the tests, so if there is lacros testing, add val:browser.TypeAsh to the param, otherwise, no need.",
      "parentUuid": "0bd1caea_f7aa93d1",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9246f3e1_93d07c80",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 356,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-03T12:26:58Z",
      "side": 1,
      "message": "See next comment.",
      "parentUuid": "ed337d15_0899362c",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "515dbb8a_da43a796",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-03T09:49:08Z",
      "side": 1,
      "message": "I don\u0027t get this either. Why is there a special case for the first element of baseCases?",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ed35db0_245aa6d2",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-03T11:24:05Z",
      "side": 1,
      "message": "Moved this into the line 211 for loop. It does not make any change for current tests because baseCases only have 1 item.",
      "parentUuid": "515dbb8a_da43a796",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a1eed5f_7a193712",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-03T12:26:58Z",
      "side": 1,
      "message": "Okay. I\u0027m not keen on having such a general TestLacros flag with a very ad-hoc semantics.\n\nIf I understand correctly, one way to make this cleaner would be to leave params.go untouched and instead add the Lacros variant as part of TestLacrosTestParams:\n```\nfunc TestLacrosTestParams(t *testing.T) {\n\tfor _, filename :\u003d range lacrosTests {\n\t\t// First generate the Ash variants.\n\t\tparams :\u003d crostini.MakeTestParamsFromList(t, []crostini.Param{{\n\t\t\tTimeout:    2 * time.Minute,\n\t\t\tUseFixture: true,\n\t\t\tVal: \"browser.TypeAsh\",\n\t\t}})\n\t\t// Now add the parameter for the Lacros variant. Note that\n\t\t// \"crostiniBullseyeWithLacros\" is the only Lacros fixture\n\t\t// for Crostini.\n\t\tappend(params, \"{ ... lacros param ... }\")\n\t\tgenparams.Ensure(t, filename, params)\n\t}\n}\n```",
      "parentUuid": "6ed35db0_245aa6d2",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "266758c6_292c3a7e",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-03T22:29:22Z",
      "side": 1,
      "message": "I think the first part of putting in the Param directly good. Done.\n\nAs for the second, it does not align the what params_test.go is doing now. I\u0027d prefer to leave as it is.",
      "parentUuid": "6a1eed5f_7a193712",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c83df4f_8ee621be",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-03-04T08:03:52Z",
      "side": 1,
      "message": "I don\u0027t understand your comment on alignment with what params_test.go is doing now. Could you explain? It\u0027s exactly that code that generates the test registrations in the other files.\n\nThe issue I see with your current code is that the TestLacros flag does not compose with all the other flags, which will be very surprising for anyone trying to use it. I don\u0027t feel comfortable to lgtm this code myself.\n\nI understand that properly implementing a TestLacros flag might not be trivial and/or might not be worth it. That\u0027s why I suggested to move the special case elsewhere.",
      "parentUuid": "266758c6_292c3a7e",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d546a0e5_9a405fe9",
        "filename": "src/chromiumos/tast/local/crostini/params.go",
        "patchSetId": 5
      },
      "lineNbr": 377,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2022-03-04T08:56:20Z",
      "side": 1,
      "message": "params_test.go does:\n1. Group the test files\n2. Create common []Param for each group\n3. Call crostini.MakeTestParamsFromList to create params for each test file.\nIt does not create params for each test file directly. It is done by MakeTestParamsFromList in crostini/params.go.\n\nI\u0027m not sure what you mean by \"compose with all the other flags\", just because it is outside the for loop in 238 and it is the only condition in the if statement? As appending a special case in params_test.go is ok, I guess a special if statement is also ok. \n\nIn addition, it is more scalable. When we want to create 4 params instead of 1, we just need to modify the code in this if statement: create a copy of all the params and change the name and fixture.",
      "parentUuid": "8c83df4f_8ee621be",
      "revId": "9d8ef5eaba1505c7d4ee04b9dd4967eade254dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}