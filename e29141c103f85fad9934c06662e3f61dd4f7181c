{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7b0eb3b4_cdd5ae6f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "nit: There is enough space to spell out `with` and `firmware`. As long as this line does not exceed 72 characters, it is totally fine.",
      "range": {
        "startLine": 15,
        "startChar": 39,
        "endLine": 15,
        "endChar": 58
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25e78080_c64cc0cb",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "I guess you are saying you clear the marker file here so that if you later detect it, you will know that it was generated by the test run? I think this code comment could be a little clearer.",
      "range": {
        "startLine": 40,
        "startChar": 12,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "871dfb89_6f7e65ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "Please check the returned `error`.",
      "range": {
        "startLine": 43,
        "startChar": 1,
        "endLine": 43,
        "endChar": 10
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db87cf06_8bcbb7be",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "`statErr`",
      "range": {
        "startLine": 54,
        "startChar": 8,
        "endLine": 54,
        "endChar": 15
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a37d7b04_8f144ff1",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "Please check the returned `error`.",
      "range": {
        "startLine": 56,
        "startChar": 3,
        "endLine": 56,
        "endChar": 12
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "710990d2_0cee66ce",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "Please check `errors.Is(statErr, os.ErrNotExist)` and report the `error` if it is something else.",
      "range": {
        "startLine": 64,
        "startChar": 4,
        "endLine": 66,
        "endChar": 3
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8b1d198_130aae52",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "How about:\n\t_, gTestErr :\u003d createGTest(logdir, testExec).Run(ctx)\n\t// Check if the marker file is there to indicate FW version incompatibility\n\t// on Intel and then invoke the WV14 variant instead.\n\tif _, statErr :\u003d os.Stat(fwInvalidMarkerFile); statErr \u003d\u003d nil {\n\t\ts.Log(\"Found indicator for FW mismatch, running WV14 variant\")\n\t\tif err :\u003d os.Remove(fwInvalidMarkerFile); err !\u003d nil {\n\t\t\ts.Fatal(\"Failed to remove FW mismatch indicator: \", err)\n\t\t}\n\t\ttestExec +\u003d \"-wv14\"\n\t\t_, gTestErr \u003d createGTest(logdir, testExec).Run(ctx)\n\t} else if !errors.Is(statErr, os.ErrNotExist) {\n\t\ts.Fatal(\"Failed to check FW mismatch indicator: \", statErr)\n\t}\n\tif gTestErr !\u003d nil {\n\t\ts.Errorf(\"%s failed: %v\", testExec, gTestErr)\n\t}\nAdvantages:\n1. If there is a firmware mismatch, then retry the test even if it passed\n2. Avoid duplicating the code `s.Errorf(\"%s failed: %v\", testExec, err)`",
      "range": {
        "startLine": 48,
        "startChar": 0,
        "endLine": 67,
        "endChar": 2
      },
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10ee8ebf_8125e358",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/cdm_oemcrypto.go",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2022-07-29T17:18:55Z",
      "side": 1,
      "message": "How about:\n\tfunc createGTest(logdir, testExec string) *gtest.GTest {\n\t\treturn gtest.New(\n\t\t\ttestExec,\n\t\t\tgtest.Logfile(filepath.Join(logdir, testExec+\".log\")),\n\t\t\tgtest.Filter(\"-*Huge*\"),\n\t\t)\n\t}\nThen use two calls to `createGTest` instead of duplicating the whole `gtest.New` call.",
      "revId": "e29141c103f85fad9934c06662e3f61dd4f7181c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}