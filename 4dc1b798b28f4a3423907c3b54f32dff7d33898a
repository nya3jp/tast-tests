{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "23bdfb6d_cfdd946b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-25T10:26:20Z",
      "side": 1,
      "message": "qq: Which code performs the migration? What is done during the migration?",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51aaf98e_5444073f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-25T10:24:53Z",
      "side": 1,
      "message": "nit: missing .",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af3697a8_6b8e4e0e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-25T12:38:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "51aaf98e_5444073f",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d364e3be_ab987273",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-25T10:24:53Z",
      "side": 1,
      "message": "defer an umount for the directory.",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e081ad64_f3be6edf",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-25T12:38:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d364e3be_ab987273",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6644956b_812643ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T04:31:16Z",
      "side": 1,
      "message": "I added \"defer RemoveVault\" inside mountVaultWithArchivedHomeData() so it gets called only when the preparation-before-login fails.\n\nThis tast test can be used as a quick way to set up post P-\u003eR upgrade state, and I want to allow developers to keep debugging upgrade-related issues after executing this test.",
      "parentUuid": "e081ad64_f3be6edf",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7f0718f_c18e2539",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-28T08:35:04Z",
      "side": 1,
      "message": "https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#test-structure\n\nIf the size of the created user is not large, it should be fine to leave it as is. If it\u0027s more than say 100MB you need to remove user at the end of the test.",
      "parentUuid": "6644956b_812643ab",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29c9dd39_ccfb131f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T13:46:21Z",
      "side": 1,
      "message": "The created user data is more than 100MB, so I added \"defer RemoveVault\" here",
      "parentUuid": "e7f0718f_c18e2539",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8b6976f_10e2862b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-25T10:24:53Z",
      "side": 1,
      "message": "Use a cleanup context.",
      "range": {
        "startLine": 75,
        "startChar": 16,
        "endLine": 75,
        "endChar": 19
      },
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1672e179_11d64d00",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-25T12:38:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8b6976f_10e2862b",
      "range": {
        "startLine": 75,
        "startChar": 16,
        "endLine": 75,
        "endChar": 19
      },
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61b5354d_e0be44f9",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-25T10:26:20Z",
      "side": 1,
      "message": "Is it OK to overwrite the entire vault?\nNewer version chrome may not work well with the current version data.\n\nHow about only overwriting android-data?",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7811a3a9_ad495e62",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T04:31:16Z",
      "side": 1,
      "message": "If I overwrite only android-data, ARC is disabled (not opted-in) after the test user signs in even though android-data exists. Looks like ARC-opt-in state is saved outside of android-data.\n\nDo you happen to know which file it is?\n\n\u003e Is it OK to overwrite the entire vault?\n\u003e Newer version chrome may not work well with the current version data.\nFYI, DataMigration autotest also overwrites the entire vault and it never failed for this reason in the last 3 years.",
      "parentUuid": "61b5354d_e0be44f9",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfd98d61_40420992",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2021-01-28T09:01:11Z",
      "side": 1,
      "message": "\u003e Do you happen to know which file it is?\n\nFWIW, preferences like kArcSignedIn, kArcTermsAccepted seem to be written to /home/user/\u003chash\u003e/Preferences (\u003d /home/.shadow/\u003chash\u003e/mount/user/Preferences). For example, some of these arc-related preferences are set to false when ARC is disabled [1,2].\nI\u0027m not sure whether this is why ARC is disabled when only android-data is overwritten, nor just copying the Preferences file is sufficient/appropriate for the purpose.\n\n[1] https://source.chromium.org/chromium/chromium/src/+/master:chrome/browser/chromeos/arc/session/arc_session_manager.cc;l\u003d1102;drc\u003dba1aa6e7963059601cd4cce4b820d55b4f2387e5\n[2] https://source.chromium.org/chromium/chromium/src/+/master:chrome/browser/chromeos/arc/session/arc_session_manager.cc;l\u003d1424;drc\u003dba1aa6e7963059601cd4cce4b820d55b4f2387e5",
      "parentUuid": "7811a3a9_ad495e62",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2907e87d_f39158c2",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-28T09:39:51Z",
      "side": 1,
      "message": "Hmm, if it has been working well for years, then it might not be a problem.\nAfter all, the migration code needs to work well with an old version user data.",
      "parentUuid": "bfd98d61_40420992",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c0ec485_a73f5093",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T13:46:21Z",
      "side": 1,
      "message": "Thanks Youkichi for the pointers!\n\nI\u0027ll keep the code as is for now, since I\u0027d prefer managing a single archive file (mount/) to managing 2 files (root/android-data and user/Preferences)",
      "parentUuid": "2907e87d_f39158c2",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f75ad4b3_28418312",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-25T10:24:53Z",
      "side": 1,
      "message": "\u003e \"curently\" is a possible misspelling of \"currently\".\n\nPlease fix. Also missing a .",
      "parentUuid": "f841d03a_107f2cf3",
      "range": {
        "startLine": 129,
        "startChar": 31,
        "endLine": 129,
        "endChar": 39
      },
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc878115_f4de78fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-25T12:38:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f75ad4b3_28418312",
      "range": {
        "startLine": 129,
        "startChar": 31,
        "endLine": 129,
        "endChar": 39
      },
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f119a89_b8aeb140",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-25T10:26:20Z",
      "side": 1,
      "message": "Instead of relying on the current log format, how about getting this value directly by doing the same thing as arc-setup?",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba3c97a0_8bec7f72",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T04:31:16Z",
      "side": 1,
      "message": "Done. Updated to get SDK versions from packages.xml",
      "parentUuid": "6f119a89_b8aeb140",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "337732a7_cc49e556",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-25T10:26:20Z",
      "side": 1,
      "message": "ditto.",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c987395_eab5df69",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T04:31:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "337732a7_cc49e556",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cb26fa2_70ce53d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 156,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-01-25T10:24:53Z",
      "side": 1,
      "message": "nit: move this into the error case below.",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ffe4041_d1041b51",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data_migration.go",
        "patchSetId": 2
      },
      "lineNbr": 156,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-28T04:31:16Z",
      "side": 1,
      "message": "Personally I want to see this output even when the check succeeds.",
      "parentUuid": "2cb26fa2_70ce53d4",
      "revId": "4dc1b798b28f4a3423907c3b54f32dff7d33898a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}