{
  "comments": [
    {
      "key": {
        "uuid": "c22b7acc_76f9991b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-25T03:25:05Z",
      "side": 1,
      "message": "Sorry for the latency, I took a brief look at the network_WiFi_RoamNatural and network_WiFi_RoamDiagnostics tests. I think the usage is not very complicated so probably OK to extend current TestFixture. However, if things start to grow, might need to consider some refactor. e.g. move out the multi-router part and have a special single-router wrapping it.\n\nOne more question that is not inline: Do we care the IP subnet range of each AP in roaming tests? Currently each Router object tracks their own map of busy subnet, so there might be some collision.",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25662dd6_29c01904",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-28T20:45:45Z",
      "side": 1,
      "message": "I don\u0027t think we need this level of robustness in tests. Moreover, we may wish to connect routers, so the networks would overlap on purpose.",
      "parentUuid": "c22b7acc_76f9991b",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6ae3c42_d2e0a854",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-25T03:25:05Z",
      "side": 1,
      "message": "Will the Tast version also run in current environment? i.e. the env with only router and pcap.\n\nIf the test feeds the hostname of pcap device into the list of routers and no pcap is specified, it will try default pcap here and can wrongly create another Router object for pcap device if the default hostname works.",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10008009_4a187165",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-28T20:45:45Z",
      "side": 1,
      "message": "This also impacts old, single router case as well, though with less routers it\u0027s less likely to use pcap as a router.\n\nAs far as I understand, pcap and AP work on different router interfaces (monitor vs managed), so they should (at least in theory) work correctly using only single Router object for two purposes. At least this seems to be the assumption in line 236. If it\u0027s not due to error, then perhaps we should reuse this logic in every other case of host/name collision. WDYT?",
      "parentUuid": "d6ae3c42_d2e0a854",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f773e47_2dab3f42",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-29T03:24:17Z",
      "side": 1,
      "message": "\u003e As far as I understand, pcap and AP work on different router interfaces (monitor vs managed), so they should (at least in theory) work correctly using only single Router object for two purposes.\n\nSorry that my comment might be vague. Yes, this should work, but my point is: For example: Assume we have DUT\u0027s hostname as dut.cros. In the test, we feed dut-router.cros and dut-pcap.cros into TFRouter option and no TFPcap is specified. In NewTestFixture, it first creates two Router objects in line 212. Then, as pcapTarget is empty, we\u0027ll try DefaultWifiPcapHost in line 235, which connects to dut-pcap.cros again. If that works, we\u0027ll have two Router object to the same device which is problematic.\n\nThis will depend on how the options are given in the tests requiring multiple routers, but it is not included in this CL so I\u0027m not sure if this is a real problem. (This also reminds me that I might have to start thinking of how to handle this kind of cases.)",
      "parentUuid": "10008009_4a187165",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d4fc0c1_679bb58e",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-29T07:06:51Z",
      "side": 1,
      "message": "Yes, the problem is present even now IMO - nothing prevents giving *-pcap host to router variable.\n\nAnyway, I think I know how to fix it. Let me submit that.",
      "parentUuid": "2f773e47_2dab3f42",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87cae294_944f1a34",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-29T21:11:22Z",
      "side": 1,
      "message": "OK, it seems the best way to fix that would be with dut modification (in tast repo) to get pcap hostname to recognize. \n\nTherefore, I\u0027d like to defer fixing it to another bug so that we don\u0027t block other development waiting for this CL. I have necessary code already prepared. It is not a new problem anyway, so we won\u0027t be degrading quality by leaving that here. WDYT?",
      "parentUuid": "0d4fc0c1_679bb58e",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84648920_177f2d1e",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-30T03:18:28Z",
      "side": 1,
      "message": "I think it is OK to fix this in another CL. But the problem might still block the tests depending on this feature as they\u0027ll possibly hit the problem in lab.\n\nOne more case that I\u0027m not sure if we should handle: what if the default pcap is used as router and specified with IP instead of hostname in TFRouter?",
      "parentUuid": "87cae294_944f1a34",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1c84d97_db27fd2f",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-30T06:14:10Z",
      "side": 1,
      "message": "I\u0027ll open a bug for it then. The tests utilizing multiple routers are yet to be merged, so no worry - as long as bugfix for double-use routers is reviewed without too much delay.\n\nWe can think about multiple corner cases (including two hostnames resolving to one IP), the question is: how robust must we be for tests? I assume people running these tests will be limited in numbers and less likely for making unconventional configurations in their lab.",
      "parentUuid": "84648920_177f2d1e",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "613bff53_e4868927",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-30T09:04:31Z",
      "side": 1,
      "message": "SGTM and we can move the further discussion to the bug. Feel free to resolve this after the bug is created.",
      "parentUuid": "d1c84d97_db27fd2f",
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7710374_888d3849",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 748,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-25T03:25:05Z",
      "side": 1,
      "message": "I\u0027m not really a big fan of \"Ext\" suffix. Do you think something like ArpingFromRouterID might be more readable? (similar for the other Ext functions)",
      "range": {
        "startLine": 748,
        "startChar": 39,
        "endLine": 748,
        "endChar": 42
      },
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fb7774e_6f44d1d8",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 748,
      "author": {
        "id": 1408947
      },
      "writtenOn": "2020-09-28T20:45:45Z",
      "side": 1,
      "message": "I also doesn\u0027t like it much, but I couldn\u0027t think of anything better. I will try to think out something that will also cover `ConfigureAPExt` case. `ConfigureAPOnRouterID()?",
      "parentUuid": "b7710374_888d3849",
      "range": {
        "startLine": 748,
        "startChar": 39,
        "endLine": 748,
        "endChar": 42
      },
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "009cceff_1187d224",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 748,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-30T09:04:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3fb7774e_6f44d1d8",
      "range": {
        "startLine": 748,
        "startChar": 39,
        "endLine": 748,
        "endChar": 42
      },
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f047631_5ee62ceb",
        "filename": "src/chromiumos/tast/remote/wificell/test_fixture.go",
        "patchSetId": 4
      },
      "lineNbr": 846,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-09-25T03:25:05Z",
      "side": 1,
      "message": "I see some similar usage in external repos but I\u0027m not totally sure if this is suggested. One alternative might be introducing another function. e.g. RouterByID",
      "range": {
        "startLine": 846,
        "startChar": 30,
        "endLine": 846,
        "endChar": 40
      },
      "revId": "dcf22c1e62d237565c6e918971105abb56793aa3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}