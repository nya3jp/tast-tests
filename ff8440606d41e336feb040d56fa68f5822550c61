{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ffc70ca6_c4eadc72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1496163
      },
      "writtenOn": "2022-03-25T16:57:32Z",
      "side": 1,
      "message": "Could you take a look at this?\nThank you.",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f9fdd563_7985a00c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1360284
      },
      "writtenOn": "2022-03-25T17:41:30Z",
      "side": 1,
      "message": "Let me make sure I\u0027m understanding correctly. The problem here is that the PersistenceBluetoothSansWifi leaves the DUT in a state with the wrong MAR settings, which is causing a different test to fail, correct? Have we documented any investigation as to why the MAR settings are being set incorrectly? I\u0027m hesitant to push through a workaround like this if we\u0027re papering over an actual platform issue.",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76a6cb9c_f46921db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1360284
      },
      "writtenOn": "2022-03-25T17:43:12Z",
      "side": 1,
      "message": "To clarify, I read through the bug and see that there does not appear to be conclusion on why the settings are being reset. Do we at least have some inclination as to whether it is a platform issue or a test issue?",
      "parentUuid": "f9fdd563_7985a00c",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "087ede46_014ba231",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1158184
      },
      "writtenOn": "2022-03-26T00:03:04Z",
      "side": 1,
      "message": "+Billy who\u0027s familiar with PersistenceBluetoothSansWifi",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80239f7a_4a093c1a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1158184
      },
      "writtenOn": "2022-03-26T00:03:04Z",
      "side": 1,
      "message": "+1 to Kevin\u0027s point that it would be good to understand how/why PersistenceBluetoothSansWifi disables MAR, since it may reveal a real edge case where MAR gets disabled. If it\u0027s really an unexpected condition where MAR gets disabled, we want to fix the underlying condition rather than workaround it",
      "parentUuid": "76a6cb9c_f46921db",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5e2a86f_e54e3097",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1496163
      },
      "writtenOn": "2022-03-31T14:16:41Z",
      "side": 1,
      "message": "Agree.  Maybe it is a bit of \"creative accounting\" but b:227582293 will track this, and I\u0027ll close current since randomization tests seem to have no problem.",
      "parentUuid": "80239f7a_4a093c1a",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e071337b_00579b18",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-03-31T21:13:25Z",
      "side": 1,
      "message": "I\u0027m not a fan of this strategy - based on $BUG, there are test passes instead of skips, so we\u0027re essentially closing one P2 bug in favor of another P2 bug with negligible benefit.\n\nWhy not just resolve it directly here instead of pushing it off?",
      "parentUuid": "c5e2a86f_e54e3097",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ea7d15c_b99aed54",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2022-04-04T20:28:52Z",
      "side": 1,
      "message": "In the champs meeting we discussed whether it\u0027s worth landing the workaround. Since the affected MAR tests aren\u0027t critical and PersistenceBluetoothSansWifi doesn\u0027t seem to be affecting other tests, we should probably only land a root cause fix.\n\nThis was originally filed from the champs view since it affected green stainless dashboards but that was due to the fact that the tests weren\u0027t marked as in development initially. This has been rectified and the tests aren\u0027t showing up in the dashboards.\n\nThat being said, we currently don\u0027t have a good lead on how to resolve this issue outside the workaround and this issue is definitely blocking these tests from being promoted. I think that we shouldn\u0027t plan on landing this change, but if we can\u0027t find a root cause, we should land the workaround change so we get better signal in the lab. WDYT?",
      "parentUuid": "e071337b_00579b18",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1c394d1_76c920cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-04-04T20:36:41Z",
      "side": 1,
      "message": "sgtm",
      "parentUuid": "3ea7d15c_b99aed54",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c2c8f3a_4aa130ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1496163
      },
      "writtenOn": "2022-04-14T16:16:03Z",
      "side": 1,
      "message": "OK.  So I\u0027ve managed to proceed with this bug.  If you agree with other workaround - at shill level - proposed in crrev/c/3585812 then I\u0027ll drop this one.\n\nTwo notes (for the other CL):\n- in the context of this bug this is still a workaround (don\u0027t know yet the reason why we are not getting reply for NL message) but overall this is an \"improvement to shill robustness\" so I would vote to keep it\n- I\u0027ve put some more info in the issue b:227582293",
      "parentUuid": "f1c394d1_76c920cf",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcbacd81_91334179",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2022-04-15T23:08:16Z",
      "side": 1,
      "message": "If crrev/c/3585812 lands, I agree we should drop this workaround since the reboot appears to only addresses the shill issue that you\u0027ve identified and serves no other purpose.",
      "parentUuid": "3c2c8f3a_4aa130ee",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d967d80_71053e56",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-03-27T15:07:32Z",
      "side": 1,
      "message": "We written in go/tast-writing, it is recommended to set up the test running environment by the tests that depend on the feature, rather than depending on the tear downs of other tests.\n\nActually, it is possible that this test may be timed out and this reboot may not be triggered.\nOr, for some reasons, the test may be crashed at some random reasons.\n\nBased on it, a few requests from me:\n- Could you explicitly comment this is for the short term work around?\n- Could you add TODO with the tracking issue to fix the root cause, and possibly remove this reboot (reboot can take time)?\n- Could you work on to find the root cause, and add proper \"set up\" for each test that can be affected by this stuff?",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea80ca7a_0c9950ed",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2022-03-28T22:09:18Z",
      "side": 1,
      "message": "Would it be possible to reserve more time for this reboot subroutine in the defer (ctxutil.Shorten) if the no reboot failure case is an issue?",
      "parentUuid": "5d967d80_71053e56",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ce5836a_5f99a9d9",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1496163
      },
      "writtenOn": "2022-03-31T14:16:41Z",
      "side": 1,
      "message": "The only known way (so far) to recover from that scenario is to restart shill, so I don\u0027t know a way to setup randomization tests that would prepare DUT properly after that happens.\n\nSo instead I\u0027ve spawn a new bug tracking this (with the intent of closing b/219083050, since randomization tests are WAI) and marked CL/code as you requested.",
      "parentUuid": "ea80ca7a_0c9950ed",
      "revId": "ff8440606d41e336feb040d56fa68f5822550c61",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}