{
  "comments": [
    {
      "key": {
        "uuid": "1fefa2fe_1d24978d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/split_view_resize_perf.go",
        "patchSetId": 10
      },
      "lineNbr": 221,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-04-13T16:39:45Z",
      "side": 1,
      "message": "Because simply waiting 350 milliseconds is not the most robust way to wait for the desk mini-view animation, I decided to first of all increase it to 500 milliseconds, and secondly add this check. What do you think?",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 221,
        "endChar": 5
      },
      "revId": "33e2f3a465950488ddd28d1cb985e6dd837d086d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c283c6b_5fb76337",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/split_view_resize_perf.go",
        "patchSetId": 10
      },
      "lineNbr": 221,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2020-04-14T00:27:01Z",
      "side": 1,
      "message": "I guess it is better to use ui.WaitUntilExists(). And you should check the error (I hope FindAllWithTimeout exists, but it does not). i.e.\n\n  findParams :\u003d chromeui.FindParams{ClassName: \"DeskMiniView\"}\n  if err :\u003d chromeui.WaitUntilExists(ctx, tconn, findParams, 5*time.Second); err !\u003d nil {\n    return errors.Wrap(err, \"failed to wait appearing DesksMiniView\")\n  }\n  desksMiniViews, err :\u003d chromeui.FindAll(ctx, tconn, findParams)\n  if err !\u003d nil {\n    ...\n  }",
      "parentUuid": "1fefa2fe_1d24978d",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 221,
        "endChar": 5
      },
      "revId": "33e2f3a465950488ddd28d1cb985e6dd837d086d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97227278_727a7cad",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/split_view_resize_perf.go",
        "patchSetId": 10
      },
      "lineNbr": 221,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-04-14T21:16:24Z",
      "side": 1,
      "message": "It is not about waiting for the desk mini-views to appear; it is about waiting for them to finish sliding horizontally. WaitUntilExists returns immediately because the desk mini-views appear instantly.",
      "parentUuid": "8c283c6b_5fb76337",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 221,
        "endChar": 5
      },
      "revId": "33e2f3a465950488ddd28d1cb985e6dd837d086d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a291a51_8b0c758a",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/split_view_resize_perf.go",
        "patchSetId": 10
      },
      "lineNbr": 221,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2020-04-15T18:58:40Z",
      "side": 1,
      "message": "I can\u0027t see slide behavior on desks-related UI -- am I missing something?  Anyhow...\n* I\u0027m fine with testing.Sleep. If 500msecs would be more robust, that would be great.\n* there\u0027s ui.EventWatcher and EnsureNoEvents, which might be a bit robust way. For waiting of slide animation, it would be:\n\n  ew, err :\u003d chromeui.NewWatcher(ctx, desksMiniViews[1], chromeui.EventTypeLocationChanged)\n  if err !\u003d nil { ... }\n  defer ew.Release(ctx)\n  if err \u003d testing.Poll(ctx, func(ctx context.Context) error { return ew.EnsureNoEvents(ctx, 100*time.Millisecond) }, \u0026testing.PollOptions{Timeout:time.Second}); err !\u003d nil {\n     ...\n  }\n\nthis way, it finishes the polling when no location change happens within 100 msecs, and it waits up until 1 second. Or you could use WaitForLocationChangeCompleted (https://godoc.org/chromium.googlesource.com/chromiumos/platform/tast-tests.git/src/chromiumos/tast/local/chrome/ui#WaitForLocationChangeCompleted)",
      "parentUuid": "97227278_727a7cad",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 221,
        "endChar": 5
      },
      "revId": "33e2f3a465950488ddd28d1cb985e6dd837d086d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}