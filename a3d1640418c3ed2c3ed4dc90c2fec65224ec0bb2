{
  "comments": [
    {
      "key": {
        "uuid": "6b9efa83_665d2b41",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-06-18T17:17:31Z",
      "side": 1,
      "message": "so, based on the previous discussion, should we enable this test in ARCVM?",
      "range": {
        "startLine": 40,
        "startChar": 5,
        "endLine": 43,
        "endChar": 5
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91c17ba7_077d0dd4",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-06-19T00:53:24Z",
      "side": 1,
      "message": "I\u0027ll use the method you described to measure total latency on ARCVM",
      "parentUuid": "6b9efa83_665d2b41",
      "range": {
        "startLine": 40,
        "startChar": 5,
        "endLine": 43,
        "endChar": 5
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1911fd84_c1e37387",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-06-22T18:52:58Z",
      "side": 1,
      "message": "Update: it turns out the rtc clock in ARCVM is not *quite* synced to the host as I thought initially. While they are within 1 second of each other, the ARCVM rtc clock seems to be somewhere on the order of ~10ms behind the host clock. This means that our current method of measuring total latency (rtc timestamp in the test and in the app) does not work and reports negative latencies on ARCVM. We may have to wait until the ARCVM clock-sync work is further along before this will work. For now, I will remove disable this on ARCVM.",
      "parentUuid": "91c17ba7_077d0dd4",
      "range": {
        "startLine": 40,
        "startChar": 5,
        "endLine": 43,
        "endChar": 5
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b9ada80_b2d29f9c",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-06-17T18:20:27Z",
      "side": 1,
      "message": "[this related to my comment in the other CL].\n\nIIUC, the latency that is being measured is the one that happens only on the Android side.\nWe need that info. It is useful to know how fast/slow Android is.\nBut I think we also need the \"Total latency\". E.g:\n\n\n - measure time in host\n - inject event in host\n - read event from guest\n - measure time in guest\n\nAnd we can log the 3 values:\n\n- Total latency\n- Android latency (that the code currently does)\n- Chrome latency (also useful):  Total - Android.\n\nWDYT?",
      "range": {
        "startLine": 88,
        "startChar": 1,
        "endLine": 98,
        "endChar": 80
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dee56433_8a5415aa",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2020-06-18T17:15:31Z",
      "side": 1,
      "message": "update: for keyboard, not changes are needed. the logic of this test work ok.\n\nThe gamepad test, if it is based on this one, will need to get updated since the timestamp is not the \"kernel\" one, but the \"wayland-server\" one.",
      "parentUuid": "6b9ada80_b2d29f9c",
      "range": {
        "startLine": 88,
        "startChar": 1,
        "endLine": 98,
        "endChar": 80
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0aa15db_a7b6af6d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/keyboard_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1303273
      },
      "writtenOn": "2020-06-19T00:53:24Z",
      "side": 1,
      "message": "I think the total latency calculation can be useful in this test as well. It could help us get a good idea of the extra latency added by recording the initial event timestamp in the test (as opposed to in the kernel).",
      "parentUuid": "dee56433_8a5415aa",
      "range": {
        "startLine": 88,
        "startChar": 1,
        "endLine": 98,
        "endChar": 80
      },
      "revId": "a3d1640418c3ed2c3ed4dc90c2fec65224ec0bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}