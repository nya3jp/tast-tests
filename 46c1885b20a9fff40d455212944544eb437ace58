{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3c09d2d2_0a3631f6",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2021-11-08T19:37:33Z",
      "side": 1,
      "message": "is it constant across variation? If so, could we use it this way inline and extract it here when/if needed only?\nsimilar to \nhttps://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/arc/auth_perf.go;l\u003d110",
      "range": {
        "startLine": 20,
        "startChar": 1,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51c500bc_2de1877c",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-11-08T19:47:39Z",
      "side": 1,
      "message": "It is indeed constant as of now. My thought of making it a parameter is that if a test is flaky, it would be much easier to just change the value for a given variant very quickly (without introducing bugs). Otherwise, if we rely on developers extracting it here when needed, they might take the easier route of updating the constant and applying the retries to all variants. \n\nI\u0027m expecting the managed optin test to be flaky.",
      "parentUuid": "3c09d2d2_0a3631f6",
      "range": {
        "startLine": 20,
        "startChar": 1,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23237c19_91d05de8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2021-11-10T17:17:41Z",
      "side": 1,
      "message": "\u003e\u003e would be much easier to just change the value for a given variant very quickly\nper my exp: for local testing it is easier to change one occurrence rather then scroll and see what is for what.\nfor production we submit code only when it is actually needed. For your situation it is NOP. In this case I would just discard it and add when we actually need this.\nOther concerns:\nDo we really want retry here? Is it suppose to be promoted to CQ? I would recommend to leave it as is. If managed provisioning is unhealthy this is good indication that something wrong. If it healthy, what is the purpose of retry?\nThis is key ARC functionality, hiding the flakiness of provisioning behind the retry is not good option.",
      "parentUuid": "51c500bc_2de1877c",
      "range": {
        "startLine": 20,
        "startChar": 1,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15631695_03b6edce",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-11-10T19:16:29Z",
      "side": 1,
      "message": "In the past, when we added retries, we only added them by splitting the test into Unstable/Stable version i.e. the unstable version would be without retries and would be informational that way it wouldn\u0027t block the CQ but it would still give us visibility into the unstability of the optin. The stable version would have retries and it would help distinguish between optin completely being broken and being unstable. Since our most recent guideline is to immediately remove the failing test from CQ to unblock other devs, this split-retry is a compromise that helps catch further optin breakages during the stability effort. Example: https://crrev.com/c/2979454\n\nMaking the retries constant to facilitate local testing.",
      "parentUuid": "23237c19_91d05de8",
      "range": {
        "startLine": 20,
        "startChar": 1,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a79ad9bf_80356cb7",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2021-11-10T20:25:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "15631695_03b6edce",
      "range": {
        "startLine": 20,
        "startChar": 1,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51b275ce_bb579b54",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2021-11-08T19:37:33Z",
      "side": 1,
      "message": "nit:\nmanaged_username to highlight the usage?",
      "range": {
        "startLine": 34,
        "startChar": 14,
        "endLine": 34,
        "endChar": 22
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "294f9ac2_b5716693",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/optin.go",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2021-11-08T19:47:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "51b275ce_bb579b54",
      "range": {
        "startLine": 34,
        "startChar": 14,
        "endLine": 34,
        "endChar": 22
      },
      "revId": "46c1885b20a9fff40d455212944544eb437ace58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}