{
  "comments": [
    {
      "key": {
        "uuid": "f7fc479c_55f96d0f",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1304283
      },
      "writtenOn": "2019-07-18T17:07:44Z",
      "side": 1,
      "message": "The signal is pretty often not continuous because some samples were not captured, even though I\u0027m running \u0027cras_tests capture\u0027 with \u0027nice -20\u0027. How can I ensure that the capture process doesn\u0027t drop samples?",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4354cb50_dfe137a2",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1304283
      },
      "writtenOn": "2019-07-18T17:07:44Z",
      "side": 1,
      "message": "Ideally, this error should always be 0, but almost always I get significant errors because the last samples that cras_tests captures are 0\u0027s because some of the played data is getting dropped. This means we can\u0027t find a perfect overlap for the whole input sine wave. What could be going wrong here? Once, I did get a perfect capture with 0 error, but I have been unable to repeat it.",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e12d6d83_64ab8598",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2019-07-18T17:34:30Z",
      "side": 1,
      "message": "Is the cras_test process getting real time priority?\nHave you tried running with bigger buffers?",
      "parentUuid": "4354cb50_dfe137a2",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22235f01_a18eda16",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1304283
      },
      "writtenOn": "2019-07-18T19:57:47Z",
      "side": 1,
      "message": "Updating cras_tests to run real time helped a bit, so I got the test to pass more often, but it\u0027s still fairly flaky. I didn\u0027t notice much effect from larger buffers. \n\nIn 10 runs, I had 4 failures due to data not being captured, 2 failures from zero samples at the end of capture, and 4 passes.",
      "parentUuid": "e12d6d83_64ab8598",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5261df30_296c6fe9",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1304283
      },
      "writtenOn": "2019-07-19T00:11:24Z",
      "side": 1,
      "message": "Further data: over 300 runs, I had 258 passing, and 42 failed runs from zero samples at the end of capture. It seems that running the test makes later runs more likely to not drop samples. What do you think about having the test run N iterations and then reporting a failure only if all of them fail?",
      "parentUuid": "22235f01_a18eda16",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "855e8f0d_116d29c4",
        "filename": "src/chromiumos/tast/local/bundles/cros/audio/loopback_record.go",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2019-07-19T20:23:03Z",
      "side": 1,
      "message": "That\u0027s not any good. Is it really scheduling causing you trouble? On your machine, I don\u0027t see why there would be a problem getting the threads scheduled. maybe get a trace to see what is going on. The combination of forking processes and these goroutine scheduling is confusing to me.",
      "parentUuid": "22235f01_a18eda16",
      "revId": "449da06bdbfc261d8956bf24738ae0f85ac6f6ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}