{
  "comments": [
    {
      "key": {
        "uuid": "bc0ce75f_32b5c5f7",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Nice :-). Easier to understand.",
      "range": {
        "startLine": 39,
        "startChar": 29,
        "endLine": 39,
        "endChar": 38
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d45690b_d9aeea52",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 49,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Go prefers shorter name by using surrounding context. How about just createCacheDir, because there\u0027s no \"create cache dir without content\" case?",
      "range": {
        "startLine": 49,
        "startChar": 1,
        "endLine": 49,
        "endChar": 26
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9f9a21f_07749c6f",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 49,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0d45690b_d9aeea52",
      "range": {
        "startLine": 49,
        "startChar": 1,
        "endLine": 49,
        "endChar": 26
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "061c8576_efa17b01",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 75,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "nit/style: could you merge these lines?\n\nif _, err :\u003d disk.Fill(...); err !\u003d nil {\n  ...\n}",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 75,
        "endChar": 17
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6a8c51e_ef50116a",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 75,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "061c8576_efa17b01",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 75,
        "endChar": 17
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e245d2bd_91ef106f",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 108,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "optional/style: to minimize the scope (to avoid naming conflict at L124),\n\nif freeSpace, err :\u003d disk.FreeSpace(...); err !\u003d nil {\n  s.Fatal(...)\n} else if freeSpace \u003c 2*homedirSize {\n  s.Fatal(...)\n}\n\nditto for L124.",
      "range": {
        "startLine": 100,
        "startChar": 1,
        "endLine": 108,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b6d0641_002cf731",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 108,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done, updated all that were possible.\n\nL124 not possible as the value is referenced on L174.",
      "parentUuid": "e245d2bd_91ef106f",
      "range": {
        "startLine": 100,
        "startChar": 1,
        "endLine": 108,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c452d265_83184a4a",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "This looks like already done in L118?",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 140,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19f80aa1_35ddc68b",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "This remounts the user directory.",
      "parentUuid": "c452d265_83184a4a",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 140,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c995dedc_ee0dea12",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-10T16:43:52Z",
      "side": 1,
      "message": "I see. Could you add a brief comment? (CreateVault sounds like a function to create a vault, thus the main purpose looks somewhat different from remounting).",
      "parentUuid": "19f80aa1_35ddc68b",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 140,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea92b846_df4de878",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-11T09:16:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c995dedc_ee0dea12",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 140,
        "endChar": 2
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcf880ff_507ac365",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 156,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "nit/style: how about removing this emptyline? The error handling at L153 and L157 looks like something related?",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "059563d3_740aa713",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 156,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dcf880ff_507ac365",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78ed259d_e4a3d5db",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Could you comment why this file is kept open?",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7be1e46_f0965c18",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Comment was on line 146. Should be clearer now.",
      "parentUuid": "78ed259d_e4a3d5db",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff2a327e_12fbf85b",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Could you avoid using testing.Sleep here? What the exact condition this Sleep is waiting for?\nCould you use testing.Poll for the condition instead?",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6982bf9_f8cdc049",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "As discussed with Oleh, there is unfortunately no condition to poll here.\n\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/1924413/5/src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go#176",
      "parentUuid": "ff2a327e_12fbf85b",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0513ce2_2ec2d68f",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-10T16:43:52Z",
      "side": 1,
      "message": "According to the linked comments, you can check the logging message?\nMaybe check via journald? (Actually, some tests use journald already).",
      "parentUuid": "d6982bf9_f8cdc049",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2193efc_c582b778",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-11T09:16:17Z",
      "side": 1,
      "message": "I just checked, there is no log message on cleanup completion unfortunately. Logs are emitted only if something is being deleted. I could poll and stop early on error, but that should not happen unless there is an issue with cryptohome or the test.\n\nThere are UMA stats being reported on cleanup stop (with the step the cleanup reached), is there precedent for waiting on those?",
      "parentUuid": "b0513ce2_2ec2d68f",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88d6509e_91c2b6df",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-12T14:58:49Z",
      "side": 1,
      "message": "Unfortunately, no. Is it possible to write a log message on stopping, e.g., to syslog?\nWe have a utility to wait for it. (Added very recently).",
      "parentUuid": "f2193efc_c582b778",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3578da52_dec51479",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-12T15:18:52Z",
      "side": 1,
      "message": "Theoretically, it is possible, but this is executed periodically on all chromebooks (1/hour or 1/minute) when disk space is low.\n\n@gwendal, @apronin would it be ok to add logging to cryptohome when cleanup completes?",
      "parentUuid": "88d6509e_91c2b6df",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6559706e_d44ee536",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/automatic_cleanup.go",
        "patchSetId": 8
      },
      "lineNbr": 192,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2020-01-10T07:46:38Z",
      "side": 1,
      "message": "Done.\n\nSince https://chromium-review.googlesource.com/c/chromiumos/platform2/+/1987259 was approved, the syslog reader is used.",
      "parentUuid": "3578da52_dec51479",
      "range": {
        "startLine": 190,
        "startChar": 0,
        "endLine": 192,
        "endChar": 34
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "990f02ca_0472287c",
        "filename": "src/chromiumos/tast/local/disk/doc.go",
        "patchSetId": 8
      },
      "lineNbr": 5,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Any plans that the following disk utilities are used from tests other than cryptohome?\nIf there is no concrete plan now, could you create a subpackage under cryptohome, like\nchromiumos/tast/local/bundles/cros/cryptohome/disk and move the files to there?",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd3b1f7d_e541f922",
        "filename": "src/chromiumos/tast/local/disk/doc.go",
        "patchSetId": 8
      },
      "lineNbr": 5,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "990f02ca_0472287c",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cfdcc8e_b2443431",
        "filename": "src/chromiumos/tast/local/disk/fill.go",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "Instead, could you return the path to the file (i.e. string)?",
      "range": {
        "startLine": 17,
        "startChar": 39,
        "endLine": 17,
        "endChar": 47
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39c74d52_5b3df89a",
        "filename": "src/chromiumos/tast/local/disk/fill.go",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3cfdcc8e_b2443431",
      "range": {
        "startLine": 17,
        "startChar": 39,
        "endLine": 17,
        "endChar": 47
      },
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac1093b9_9bf7fafa",
        "filename": "src/chromiumos/tast/local/disk/space.go",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-12-09T14:48:03Z",
      "side": 1,
      "message": "nit: this is used just L17. Could you remove an empty line at L16?",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "485b0d91_27b178ca",
        "filename": "src/chromiumos/tast/local/disk/space.go",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2019-12-09T15:17:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac1093b9_9bf7fafa",
      "revId": "dfc817e88954a65727c111106864c5ffa4913578",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}