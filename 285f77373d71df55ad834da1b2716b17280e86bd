{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3d4ecfba_a5b3113a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-16T23:01:58Z",
      "side": 1,
      "message": "Thanks for the comments Steven!",
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b839435b_6f43287c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:03:22Z",
      "side": 1,
      "message": "(Just replied to some comments, will take another look today)",
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f2142a9_f9f67b52",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-17T21:31:31Z",
      "side": 1,
      "message": "Thank you Jie for the suggestions and pointers. I am learning a ton about shill through this review so I really appreciate it.",
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51f9f5cf_b4636609",
        "filename": "src/chromiumos/tast/common/shillconst/const.go",
        "patchSetId": 8
      },
      "lineNbr": 131,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "No longer needed I guess?",
      "range": {
        "startLine": 131,
        "startChar": 1,
        "endLine": 131,
        "endChar": 46
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ec46705_7f61bf22",
        "filename": "src/chromiumos/tast/common/shillconst/const.go",
        "patchSetId": 8
      },
      "lineNbr": 131,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "51f9f5cf_b4636609",
      "range": {
        "startLine": 131,
        "startChar": 1,
        "endLine": 131,
        "endChar": 46
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a52ee10_19bb941b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "Do we still want to disable portal on Ethernet? I guess this is what we want to verify?",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 46,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0c3c7bd_e2d734de",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-17T21:31:31Z",
      "side": 1,
      "message": "Yep great catch. This had me fooled for a bit. Removed this bit and found out that I am actually getting no-connectivity as my service state on veth. But as long as I setup the dns server correctly (remove the configuration for port\u003d0 and possibly some other setup), I can get the service state back to online",
      "parentUuid": "7a52ee10_19bb941b",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 46,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cdfe0c6_a2cc5489",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f0c3c7bd_e2d734de",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 46,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77db1d6d_fe5a165b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 53,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-16T23:37:20Z",
      "side": 1,
      "message": "nit: re-reading this code, I think that portalEnv would be more clear, even if it is longer. (I kept forgetting that \u0027portal\u0027 was an env type).",
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "310a1880_de233597",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 53,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77db1d6d_fe5a165b",
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23c5bae2_11dab22c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 64,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "Just to check my understanding, what\u0027s the purpose of this check here? I assume:\n1) To check HTTP server is ready: then this can be moved into httpserver.Start() since it makes better sense to let that function return only if it\u0027s ready?\n2) To check we can reach HTTP server from root netns (i.e., can reach a HTTP server on the router from DUT) (this will also include the routing setup on DUT): then maybe we should not run the curl inside netns but run it directly (with the address of router gateway)?",
      "range": {
        "startLine": 64,
        "startChar": 11,
        "endLine": 64,
        "endChar": 39
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66d276d4_f348dc02",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 64,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-17T21:31:31Z",
      "side": 1,
      "message": "1. Correct, we want to make sure the http server is up and running. Good point, we could move that into .Start()\n2. Also correct. Again, I agree with your point here, it should be curling from the address of the router gateway instead. Would be more representative of what the portal detector will do anyways.",
      "parentUuid": "23c5bae2_11dab22c",
      "range": {
        "startLine": 64,
        "startChar": 11,
        "endLine": 64,
        "endChar": 39
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69d98da1_1e365381",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 64,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "This has been removed, so Done.",
      "parentUuid": "66d276d4_f348dc02",
      "range": {
        "startLine": 64,
        "startChar": 11,
        "endLine": 64,
        "endChar": 39
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ece0a466_729d0e62",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 85,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "How about just return the svc in CreateCaptivePortalEnv(), like what CreateRouterEnv() does now? Then we don\u0027t need to this again here.",
      "range": {
        "startLine": 73,
        "startChar": 1,
        "endLine": 85,
        "endChar": 0
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a0a92a2_58596402",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 85,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ece0a466_729d0e62",
      "range": {
        "startLine": 73,
        "startChar": 1,
        "endLine": 85,
        "endChar": 0
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23922620_5199b10c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 99,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "Just curious, so this curl cmd cannot be run in chroot with env.CreateCommand()?",
      "range": {
        "startLine": 99,
        "startChar": 24,
        "endLine": 99,
        "endChar": 41
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8969ede6_8649ab69",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 99,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-17T21:31:31Z",
      "side": 1,
      "message": "It definitely can and I appreciate you pointing this out, as I did not notice the env.CreateCommand(). But in the end, I agree with your point above to instead run the curl command against the gateway address instead.",
      "parentUuid": "23922620_5199b10c",
      "range": {
        "startLine": 99,
        "startChar": 24,
        "endLine": 99,
        "endChar": 41
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "921bd946_65b2927b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 99,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "this has been removed, done.",
      "parentUuid": "8969ede6_8649ab69",
      "range": {
        "startLine": 99,
        "startChar": 24,
        "endLine": 99,
        "endChar": 41
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff5f8a60_e8d0aee2",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 111,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "There is PropertyWatcher on Service, which can listen to the D-Bus signal on a Service, and can be used to simplified the code here. One example: https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/network/vpn/connection.go;drc\u003dc190d76d63015ad49abad45561ae176604db2438;l\u003d527",
      "range": {
        "startLine": 111,
        "startChar": 5,
        "endLine": 111,
        "endChar": 21
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53d98195_2dee13ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_http.go",
        "patchSetId": 8
      },
      "lineNbr": 111,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ff5f8a60_e8d0aee2",
      "range": {
        "startLine": 111,
        "startChar": 5,
        "endLine": 111,
        "endChar": 21
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c94b290b_60b4800a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 8
      },
      "lineNbr": 55,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "nit: since this |address| does not map to the address option in dnsmasq now, we may need a better name and/or some comments to explain.",
      "range": {
        "startLine": 55,
        "startChar": 42,
        "endLine": 55,
        "endChar": 49
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cfabffd5_0969d94e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 8
      },
      "lineNbr": 55,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c94b290b_60b4800a",
      "range": {
        "startLine": 55,
        "startChar": 42,
        "endLine": 55,
        "endChar": 49
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17351336_f6140b7d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/httpserver/httpserver.go",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-17T02:39:27Z",
      "side": 1,
      "message": "Just to check my understanding: do we still need to enable lo now?",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 44,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0a40fb0_d2baa515",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/httpserver/httpserver.go",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-17T21:31:31Z",
      "side": 1,
      "message": "Not if we run it against the gateway address, which is a change I will make in next patchset. Good catch!",
      "parentUuid": "17351336_f6140b7d",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 44,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43e7e9cc_b5241686",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/httpserver/httpserver.go",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "This has been removed, done.",
      "parentUuid": "a0a40fb0_d2baa515",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 44,
        "endChar": 2
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f98a0fa_02f92ec3",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-17T05:06:18Z",
      "side": 1,
      "message": "What about putting these options within the existing type EnvOptions as additional fields to configure ? This should allow to remove CreateCaptivePortalEnv() which looks basically the same as CreateRouterEnv().\n\nAlternatively you can embed type EnvOptions into type CaptivePortalOptions if you want a new type.",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 44,
        "endChar": 13
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a87fdc1f_3586ce41",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Using the existing setup function above now, done.",
      "parentUuid": "7f98a0fa_02f92ec3",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 44,
        "endChar": 13
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "489aa8ef_34b4f6c2",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 162,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-17T05:06:18Z",
      "side": 1,
      "message": "Could we try to reuse one of the eixsting setup function above ? This would avoid having to maintain multiple setup functions when we fix or add something. For instance this function does not have IPv6.",
      "range": {
        "startLine": 162,
        "startChar": 5,
        "endLine": 162,
        "endChar": 27
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9932423f_054e7216",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 162,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "489aa8ef_34b4f6c2",
      "range": {
        "startLine": 162,
        "startChar": 5,
        "endLine": 162,
        "endChar": 27
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20e35df5_82ef0723",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 195,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-17T05:06:18Z",
      "side": 1,
      "message": "IPv4 HTTP server.",
      "range": {
        "startLine": 195,
        "startChar": 4,
        "endLine": 195,
        "endChar": 21
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65769979_24265eba",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 8
      },
      "lineNbr": 195,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-06-24T20:59:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20e35df5_82ef0723",
      "range": {
        "startLine": 195,
        "startChar": 4,
        "endLine": 195,
        "endChar": 21
      },
      "revId": "285f77373d71df55ad834da1b2716b17280e86bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}