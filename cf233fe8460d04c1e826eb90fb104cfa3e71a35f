{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7e580e81_ddc6c592",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 80,
      "author": {
        "id": 1312379
      },
      "writtenOn": "2021-08-06T19:57:39Z",
      "side": 1,
      "message": "I guess you could check for /sys/class/power_supply/BAT0/status instead and like this you could skip the test entirely if the system does not have a battery",
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3036491_7bf79db9",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 80,
      "author": {
        "id": 1512717
      },
      "writtenOn": "2021-08-06T22:46:40Z",
      "side": 1,
      "message": "If we check for that though, we wouldn\u0027t know whether the battery was also full. That\u0027s why I used the method call.\n\nAnd if the system doesn\u0027t have a battery, should I have the test run an update still?",
      "parentUuid": "7e580e81_ddc6c592",
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d869061e_c9b1b950",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 80,
      "author": {
        "id": 1312379
      },
      "writtenOn": "2021-08-07T01:22:03Z",
      "side": 1,
      "message": "If the battery is full: \n$ cat /sys/class/power_supply/BAT0/status \nFull\n\nIf the test does not have a battery, the no_acpower case does not make sense.",
      "parentUuid": "b3036491_7bf79db9",
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99c90fd2_edfac4b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 80,
      "author": {
        "id": 1512717
      },
      "writtenOn": "2021-08-09T15:00:55Z",
      "side": 1,
      "message": "I think we would want this to be stuck in a loop until power_manager specifically knows that we are discharging. \n\nThis is to fix the corner case where cat /sys/class/power_supply/BAT0/status reports discharging but powerd reports full and updates pass wrongly because fwupd only talks to powerd.",
      "parentUuid": "d869061e_c9b1b950",
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bfb61bb_1b195e49",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1312379
      },
      "writtenOn": "2021-08-06T19:57:39Z",
      "side": 1,
      "message": "All of this is repeated... Leave it outside the if",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 120,
        "endChar": 3
      },
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c5b830d_f70e9dcf",
        "filename": "src/chromiumos/tast/local/bundles/cros/firmware/fwupd_powerd_update_check.go",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1312379
      },
      "writtenOn": "2021-08-06T20:11:38Z",
      "side": 1,
      "message": "Better yet, get rid of the if. If the function returns \"update\" or \"reinstall\" you could do:\n\n  subcmd :\u003d updateCheck()\n  cmd :\u003d testexec.CommandContext(ctx, \"/usr/bin/fwupdmgr\", subcmd, \"-v\", \"b585990a-003e-5270-89d5-3705a17f9a43\" ...)",
      "parentUuid": "8bfb61bb_1b195e49",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 120,
        "endChar": 3
      },
      "revId": "cf233fe8460d04c1e826eb90fb104cfa3e71a35f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}