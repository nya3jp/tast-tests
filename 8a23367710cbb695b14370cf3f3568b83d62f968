{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ddfcecb1_ab304658",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-10-29T07:55:00Z",
      "side": 1,
      "message": "Hi Sasha,\n\nPTAL",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fabafbc9_baf17100",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1149154
      },
      "writtenOn": "2021-11-02T17:40:33Z",
      "side": 1,
      "message": "I am not a big expert in Go and Tast tests, but the concept of the test looks good.",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a17ab9eb_738ef699",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-02T17:45:56Z",
      "side": 1,
      "message": "Hi Tast Owners,\n\nPTAL.\n\nIt is a smoke test for ARC data snapshot feature, that requires the device to be enrolled with a real GAIA account to obtain a real MGS robot account in order to be able to install ARC apps via Play.\n\nThis is a remote test, since it requires several reboots to generate snapshots and run MGS with those snapshots.\n\nUsually, this test takes \u003c 20mins on the eve board, but since it is a remote test, requiring several reboots I set a timeout to 40mins and 10mins per MGS.\n\nThis test is important to ensure that the feature works on all boards with arc \u0026 tpm2. Currently, works only for amd64 arch, but it will be expanded to arm/arm64 as well soon.",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19d08427_5a75df62",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-02T17:45:56Z",
      "side": 1,
      "message": "Thanks, Sasha",
      "parentUuid": "fabafbc9_baf17100",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "726c22b5_b49eb4e1",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "Looks like this is not being used anywhere. If so, please delete it.",
      "range": {
        "startLine": 40,
        "startChar": 1,
        "endLine": 40,
        "endChar": 25
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "645e9602_678bd39c",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "726c22b5_b49eb4e1",
      "range": {
        "startLine": 40,
        "startChar": 1,
        "endLine": 40,
        "endChar": 25
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e9fb0b2_e4ad3e60",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "note that user is modified here. To be clearer for future reader, how about \n\nprimaryUser, err :\u003d getPrimaryUser(ctx)\nif err !\u003d nil {...}\nuser \u003d primaryUser",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7498eba0_7d4bcd4f",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Good idea, done",
      "parentUuid": "8e9fb0b2_e4ad3e60",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ac58cbe_633ddbe6",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 166,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "Can you add to the function comment chrome will be disconnected?\n\nBTW, from arc_snapshot.go, you called Enroll only once in the beginning of the test to initialize chrome and called WaitForPackagesInMgs multiple times. Is it expected to have service.cr \u003d\u003d nil?",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a4e6baa_5e4f6c45",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_snapshot_service.go",
        "patchSetId": 2
      },
      "lineNbr": 166,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Added comment.\n\nYes, it will be null for all following MGSs.\n\nIf it was possible to connect to the existing chrome session without changing the flow of the session, it would be great. But I failed to find a way. Do you know if it\u0027s possible?\n\nI can skip the whole \"if cr !\u003d nil\" block, but it checks the chrome\u0027s MGS policy. I\u0027d like to do it at least once per test to ensure that the user policy is set correct.",
      "parentUuid": "6ac58cbe_633ddbe6",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "357921c4_e1ba34fe",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "Giving this is a lengthy test, you might want to have a dedicate suite or control file to avoid hitting global timeout. It helps other tests in the same fleet to run.\n\nFYI, informational-chrome timeout is set to 4hr.\n/chromeos_public/src/third_party/autotest/files/server/site_tests/tast/control.informational-chrome",
      "range": {
        "startLine": 27,
        "startChar": 25,
        "endLine": 27,
        "endChar": 58
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "de783da6_6a065fd3",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "It\u0027s a good point. Added special group:arc-data-snapshot that runs this test per each build.",
      "parentUuid": "357921c4_e1ba34fe",
      "range": {
        "startLine": 27,
        "startChar": 25,
        "endLine": 27,
        "endChar": 58
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6374bd6c_27a2a2bb",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "Use defer in line 68 to avoid perfValues.Save multiple times.",
      "range": {
        "startLine": 83,
        "startChar": 2,
        "endLine": 85,
        "endChar": 3
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "13d79779_65bdc7be",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6374bd6c_27a2a2bb",
      "range": {
        "startLine": 83,
        "startChar": 2,
        "endLine": 85,
        "endChar": 3
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2c44de7_909f0aeb",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "Can you move this a little up to line 94 so it is clearer re-connect is with rebooting?",
      "range": {
        "startLine": 97,
        "startChar": 2,
        "endLine": 100,
        "endChar": 3
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19664c3c_dcaf79db",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a2c44de7_909f0aeb",
      "range": {
        "startLine": 97,
        "startChar": 2,
        "endLine": 100,
        "endChar": 3
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e3021d0_6c476d4d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 148,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "We should avoid copy-pasting and using loop to do what you want.\n\nuser :\u003d \"\"\nperfValues :\u003d perf.NewValues()\ndefer func(ctx context.Context) {\n    // perfValue.Save\n} (ctx)\n\nfor i :\u003d 0; i \u003c 3; i++ {\n    // Running MGS with ith Snapshot \n    // perf.Merge\n    // Reboot\n    // Reconnect\n    // Waiting ith Snapshot\n    // perf.Merge\n}",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcf92df7_2a6f7dbc",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 148,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Fixed to follow this idea:\nfor i :\u003d 0; i \u003c 6; i++ {\n  // Running MGS with Request\n  // Waiting for Snapshot dir if needed\n  // perf.Merge\n  // Waiting for Reboot \u0026 Reconnect if needed\n}",
      "parentUuid": "1e3021d0_6c476d4d",
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2226bf59_42e9e6e4",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "ditto.",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 21
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "632545c4_54174819",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2226bf59_42e9e6e4",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 155,
        "endChar": 21
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47de8877_c7b1f1e7",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1197299
      },
      "writtenOn": "2021-11-03T18:01:41Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 205,
        "startChar": 2,
        "endLine": 209,
        "endChar": 21
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d19f1a9_184ecf4f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/enterprise/arc_snapshot.go",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1124166
      },
      "writtenOn": "2021-11-09T15:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "47de8877_c7b1f1e7",
      "range": {
        "startLine": 205,
        "startChar": 2,
        "endLine": 209,
        "endChar": 21
      },
      "revId": "8a23367710cbb695b14370cf3f3568b83d62f968",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}