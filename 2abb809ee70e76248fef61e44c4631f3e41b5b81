{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7653d42a_b527b405",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-28T04:58:41Z",
      "side": 1,
      "message": "I found that on platform app version, sometimes I will hit an issue with:\n\"Failed to release \u0027this\u0027: cdp.Runtime: ReleaseObject: rpc error: Cannot find context with specified id (code \u003d -32000)\" when running this line.\n\nAdding a testing.Sleep() in front of this line can solve the issue. I suspect we might try to execute codes on background page when v8 inspector has not bound the browser context yet, which is similar to:\nhttps://buganizer.corp.google.com/issues/115747542#comment3\n\nHidehiko (hidehiko@), we might hit this issue since we change to connect to background page at an earlier stage when running tests. Could you suggest if there is anything we can do on Tast side to wait for the readiness of background page before trying to execute codes on it?",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "013fb9c1_36368304",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-10-05T16:18:39Z",
      "side": 1,
      "message": "It is interesting log to me.\nIIUC, it is reported from here:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast-tests/+/622f8a7eae10b111b216289c63184106f5b2bdc7/src/chromiumos/tast/local/chrome/conn.go#216\n\nthough, as you can find, \"this\" is used before hand.\nAlso, in this case, \"this\" we expect is the object representing the background page, so I thought it is set on execution...?\nCould you share more surrounding logs?",
      "parentUuid": "7653d42a_b527b405",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "592e5412_f4c9e72e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-10-06T04:10:36Z",
      "side": 1,
      "message": "Here are the logs:\nhttps://paste.googleplex.com/4881251673571328#\n\nwhich I run with the following CL:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2386704/26",
      "parentUuid": "013fb9c1_36368304",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d134b0cf_aba3a629",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-10-06T16:41:45Z",
      "side": 1,
      "message": "Thanks.\nWaiting for page loading looks like to work to me. Could you give it a try?\n\ncf) https://chromium.googlesource.com/chromiumos/platform/tast-tests/+/14f208d75f5e09872cd21cea92a2da48c30e158d/src/chromiumos/tast/local/chrome/chrome.go#665",
      "parentUuid": "592e5412_f4c9e72e",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fa2a15c_ad7c176f",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-10-07T03:08:00Z",
      "side": 1,
      "message": "Thanks for the pointer. I tried it and things will get better but there are still chances that I hit on the same error. So I am wondering if there are other things we can wait for to ensure the browser context is already bound.",
      "parentUuid": "d134b0cf_aba3a629",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9f69303_8c874a03",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/testutil/test_bridge.go",
        "patchSetId": 22
      },
      "lineNbr": 58,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-10-07T15:34:40Z",
      "side": 1,
      "message": "Hmm, I tried to put \"location.reload()\" before \"document.readyState \u003d\u003d\u003d \u0027complete\u0027\" just like what we did for test extension and it seems works!\nI tried to run all the camera tests for twice and did not hit the issue anymore. Thanks for the advice!",
      "parentUuid": "5fa2a15c_ad7c176f",
      "range": {
        "startLine": 58,
        "startChar": 11,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "2abb809ee70e76248fef61e44c4631f3e41b5b81",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}