{
  "comments": [
    {
      "key": {
        "uuid": "db21f18f_8df6230f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T12:05:56Z",
      "side": 1,
      "message": "Clar: arc-eng looks slightly too wider. pmalani@, do you have any recommendation?",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d818d03c_917ba8c1",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2019-08-29T20:48:21Z",
      "side": 1,
      "message": "Is there arc-audio? Perhaps chromeos-audio is more appropriate?",
      "parentUuid": "db21f18f_8df6230f",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2f14fd4_1aec142d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T21:11:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d818d03c_917ba8c1",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e38d8041_f565b959",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2019-08-29T12:56:29Z",
      "side": 1,
      "message": "_\n?",
      "range": {
        "startLine": 45,
        "startChar": 32,
        "endLine": 45,
        "endChar": 35
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d89185a_0db4247f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T13:38:51Z",
      "side": 1,
      "message": "I think \"ctx\" is common in this case, even if it is unused in the function body.",
      "parentUuid": "e38d8041_f565b959",
      "range": {
        "startLine": 45,
        "startChar": 32,
        "endLine": 45,
        "endChar": 35
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9e813d9b_b0ef3824",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2019-08-29T12:56:29Z",
      "side": 1,
      "message": "Nice idea!",
      "range": {
        "startLine": 48,
        "startChar": 19,
        "endLine": 48,
        "endChar": 28
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ab3bfd4_f46c0a1b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2019-08-29T12:56:29Z",
      "side": 1,
      "message": "I think it\u0027s obvious from the continue. Could you remove?",
      "range": {
        "startLine": 54,
        "startChar": 8,
        "endLine": 54,
        "endChar": 18
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78b80536_77895f26",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T13:38:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4ab3bfd4_f46c0a1b",
      "range": {
        "startLine": 54,
        "startChar": 8,
        "endLine": 54,
        "endChar": 18
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef58e55a_999703f8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2019-08-29T12:56:29Z",
      "side": 1,
      "message": "Having multiple places to check e is a kind of confusing to me.\nHow about computing the value `found bool` in the loop, and check the expectation after the loop?\n\nfound :\u003d false\nfor ... {\n  // found midis process\n  found :\u003d true\n  break\n}\n\nif e \u003d\u003d running \u0026\u0026 !found {\n  return errros....\n}\nif e \u003d\u003d stopped \u0026\u0026 found {\n  return err...\n}\nreturn nil",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92c23c9c_6c145f90",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T13:38:51Z",
      "side": 1,
      "message": "SGTM. Thank you for suggestion. Done.",
      "parentUuid": "ef58e55a_999703f8",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f3fcfa6_b347d76d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2019-08-29T12:56:29Z",
      "side": 1,
      "message": "nit: be running",
      "range": {
        "startLine": 84,
        "startChar": 28,
        "endLine": 84,
        "endChar": 35
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "850ace06_55e1db8d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T13:38:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f3fcfa6_b347d76d",
      "range": {
        "startLine": 84,
        "startChar": 28,
        "endLine": 84,
        "endChar": 35
      },
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "996d4132_6693b07b",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T12:05:56Z",
      "side": 1,
      "message": "Note: the original test tried to log in Chrome twice, and compared the PIDs.\nUnfortunately, Chrome login takes time. This is alternative, which checks the service is properly terminated on login screen.\nThis should ensure the same condition.",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9709c4f_af7402fb",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2019-08-29T21:23:41Z",
      "side": 1,
      "message": "Yeah, I agree it is very expensive to log in to Chrome twice. Unfortunately, this test is meant to check any potential issues in the upstart conditions (stop conditions) which might sneak in due to a bad CL (that is what happened originally, and I\u0027ve seen the upstart signal definitions being changed sporadically in the past across daemons). Thus ensuring that midis stopped correctly doesn\u0027t guarantee that it will start again on relogin, that is why I am hesitant to agree with changing the test conditions.\n\nOf course, any number of tests can be added to bolster testing; just that it is not a \"port\" then :)",
      "parentUuid": "996d4132_6693b07b",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "626252b7_32f583cd",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-29T23:05:18Z",
      "side": 1,
      "message": "Sorry, I may not fully understand your point.\n\nIf the key point here is to check the \"stop condition\", looking at the state on login screen seems the straightforward way to me. Because it actually exercises \"midis is stopped\".\n\n\u003e ensuring that midis stopped correctly doesn\u0027t guarantee that it will start again on relogin...\n\nI couldn\u0027t fully understand this situation. Could you elaborate a bit more?\nAt least, IIUC, the cheets_Midis checks whether or not the old/new PID is different.\nIf old/new PID is same, midis did not stopped on login screen. Thus, I thought this covers the case. What I\u0027m missing...?",
      "parentUuid": "a9709c4f_af7402fb",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08483a2e_e3f9d760",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/midis.go",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2019-08-30T06:39:16Z",
      "side": 1,
      "message": "Sure I can try to clarify:\n\nEarlier, the upstart start condition was \"on starting system-services\". So the first time we booted and logged in, midis started up fine, and it was killed when we logged out, but on logging back in again, since system-services was already started, midis didn\u0027t get restarted again (that bug I linked to in another comment has the context).\n\nNow, this is not to say this would happen again with the current start/stop conditions, but I\u0027m concerned about someone down the line changing some of the upstart conditions to cause similar-ish effects (or indeed, the definition of upstart signals changing).\n\nThat said, please feel free to move ahead with the CL (I believe there\u0027s already a +2 on it).",
      "parentUuid": "626252b7_32f583cd",
      "revId": "78057015ca5bd41bc154f6e22a93369ddbf806b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}