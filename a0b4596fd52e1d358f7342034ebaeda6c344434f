{
  "comments": [
    {
      "key": {
        "uuid": "31047f36_d92c0f5e",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2019-11-20T23:31:33Z",
      "side": 1,
      "message": "This TestNA pattern was used heavily in autotest but in general we would like to avoid it in Tast. This test will appear to pass on devices using e.g. marvell wifi, but without actually having done any verification, so the test dashboard might hide real problems.\n\nWe should either always try to find a devcoredump device, or predicate this test on a dep saying that the platform has intel wifi.",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df5778cd_904e9c0b",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1360092
      },
      "writtenOn": "2019-11-20T23:37:12Z",
      "side": 1,
      "message": "That makes sense -- I looked for a software dependency for Intel Wifi but couldn\u0027t find one used or documented anywhere. Are you aware if this already exists/ where I should check in case I missed it?",
      "parentUuid": "31047f36_d92c0f5e",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6a91efc_7485c998",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-06T21:01:00Z",
      "side": 1,
      "message": "Mike and I had a conversation about this:\n\n\u003e We should either always try to find a devcoredump device,\n\nIt seems like it\u0027s be doable to extend something like this:\nhttps://elixir.bootlin.com/linux/v5.4.2/source/drivers/misc/lkdtm/core.c\nso that we can generate fake devcoredumps, regardless of HW/drivers available. But we\u0027d have to go implement that...\n\n\u003e or predicate this test on a dep saying that the platform has intel wifi.\n\nThis is a Tast deficiency, that it doesn\u0027t support HW dependencies (there\u0027s an open bug for this). We don\u0027t really know in software (build time) what WiFi card will be on a given ${BOARD}. Without Tast support, IMO this is totally fine. You can\u0027t just \"discourage\" something and not provide a valid alternative ;)",
      "parentUuid": "df5778cd_904e9c0b",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "045067e8_3add857e",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2019-12-06T21:26:47Z",
      "side": 1,
      "message": "We do have a USE flag (iwlwifi_dump) that should be gating functionality that depends on this, though. I think plumbing that up is a fine stopgap fine for now.\n\nIf you think use of the TestNA pattern is something that should be revisited, feel free to send mail to the tast owners list and get a second opinion, but tast was explicitly designed not to support this, so I\u0027m not comfortable unilaterally going against that. It might also be a different story if this wasn\u0027t going to be a mainline test, where spurious passes won\u0027t pollute any dashboards.",
      "parentUuid": "a6a91efc_7485c998",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50857493_d1515d16",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-06T21:31:43Z",
      "side": 1,
      "message": "https://groups.google.com/a/chromium.org/d/msg/tast-users/DZmu3o1pKl8/pyLH2c9oAwAJ\n\n\"Hardware dependency support is being worked on by Hidehiko (crbug.com/950346).\"\n\nThat doesn\u0027t provide any advice on what to actually do in a test...\n\n\u003e We do have a USE flag (iwlwifi_dump) that should be gating functionality that depends on this, though. I think plumbing that up is a fine stopgap fine for now.\n\nThat\u0027s orthogonal though. We might enable that flag on boards that support both Intel and ${OTHER_VENDOR} WiFi.",
      "parentUuid": "045067e8_3add857e",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b5c47ca_9f003fe9",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/dev_coredump.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-06T21:35:52Z",
      "side": 1,
      "message": "\u003e \u003e We do have a USE flag (iwlwifi_dump) that should be gating functionality that depends on this, though. I think plumbing that up is a fine stopgap fine for now.\n\u003e \n\u003e That\u0027s orthogonal though. We might enable that flag on boards that support both Intel and ${OTHER_VENDOR} WiFi.\n\nAdditionally, we *never* enable that today (for other reasons), and we *do* want to test this dev-mode feature regardless. So that doesn\u0027t really look like a good stopgap to me.",
      "parentUuid": "50857493_d1515d16",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "a0b4596fd52e1d358f7342034ebaeda6c344434f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}