{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0125aa25_5fbded3b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2021-08-31T03:33:42Z",
      "side": 1,
      "message": "+2 from a tast perspective. Please also get a +1/+2 from a teammate as well before submission.",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86968fad_632ae84b",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-09-01T03:31:39Z",
      "side": 1,
      "message": "nit: Move this into gen ptz function if we still want to keep it.",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5248fbb_60adff63",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-09-01T03:59:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "86968fad_632ae84b",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4ae7e10_353acc43",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-09-01T03:31:39Z",
      "side": 1,
      "message": "Hmm I feel a little bit unintuitive and inconsistent for having both \"Launched\" and \"TestBridgeReady\" variants of CCA textures. \n\nI checked the real usage of these fixtures on https://crrev.com/c/3121690, it looks like many tests are using the TBReady variant simply because it has some subtests, and want to restart CCA for each sub test.\n\nThis sounds like a leaky abstraction if we might need to tweak our fixtures (add a new corresponding TBReady version) when a test is changed to have subtests.\n\nTBReady also introduce an inconsistency when CCA failed to launch. Sometimes it\u0027s a fixture failures, sometimes it\u0027s an in-test failure. Ideally they should be fixture errors except for some meta cases such as policy test.\n\nIt\u0027s open for discussion, and not necessary to change in this CL. We can talk to this in next CL if you want to land this sooner.",
      "range": {
        "startLine": 124,
        "startChar": 20,
        "endLine": 124,
        "endChar": 38
      },
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "407760a1_96e6165e",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-09-01T03:59:27Z",
      "side": 1,
      "message": "To clarify a bit, for \"ccaTestBridgeReady\" and \"ccaLaunched\", currently the failures when launching CCA are considered test failures on both fixtures since we launch/tear-down CCA in PreTest()/PostTest(), which will treat the error happened there as test failures [1].\n\nBut I agree that it will be great if we can use the same flow to launch/tear-down \nCCA for sub tests. From my understanding, Fixture does not support sub tests very well so the current implementation is like a workaround.\n\nAlternatively, we can change all the sub tests to variants of the test itself. For example, for camera.CCAUIDocumentScanning, we make it: camera.CCAUIDocumentScanning.{PDF,Photo,Retake}.\nI am not sure if it is ideal since some tests have a lot of sub tests. But I would think it is a cleaner way for dealing subtests. WDYT?\n\n\n[1]: https://source.corp.google.com/chromeos_public/src/platform/tast/src/chromiumos/tast/internal/testing/fixt.go;rcl\u003d69e52d92770ac2349bccc872f0fd0084629463da;l\u003d246",
      "parentUuid": "c4ae7e10_353acc43",
      "range": {
        "startLine": 124,
        "startChar": 20,
        "endLine": 124,
        "endChar": 38
      },
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a871e086_59ee99a7",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-09-01T04:10:26Z",
      "side": 1,
      "message": "Ah thanks for the clarification!\n\nHmm that would indeed be a lot of test variants... maybe we can expose a RestartApp() function on Fixture to make resetting state between subtests easier (?)\n\nLet\u0027s keep it as is for now in this CL. Not meant to block fixture migration.",
      "parentUuid": "407760a1_96e6165e",
      "range": {
        "startLine": 124,
        "startChar": 20,
        "endLine": 124,
        "endChar": 38
      },
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87e57060_a06c18fa",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-09-01T04:32:16Z",
      "side": 1,
      "message": "I currently use two methods StartApp()/StopApp() instead since now we consider failures when launching/destroying CCA test level. As a result, if we call RestartApp() \"before\" every sub tests, the errors occurred when destroying CCA for previous sub test will be incorrectly reported by current sub test. And if we call RestartApp() \"after\" every sub tests, similarly the errors occurred when launching CCA for next sub test will be reported by current sub test, which I think might be a bit confusing.",
      "parentUuid": "a871e086_59ee99a7",
      "range": {
        "startLine": 124,
        "startChar": 20,
        "endLine": 124,
        "endChar": 38
      },
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51b028d5_3106edd9",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 345,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-08-31T03:25:17Z",
      "side": 1,
      "message": "Also added implementation for Reset() to reset the test bridge between tests to avoid the test bridge somehow broken during test and affects the other camera tests.",
      "range": {
        "startLine": 332,
        "startChar": 1,
        "endLine": 345,
        "endChar": 10
      },
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e8e2beb_75004ed5",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-08-31T10:43:12Z",
      "side": 1,
      "message": "qq: why do we generate this dynamically? Can we have a static data file instead?",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cca794a_fc8e79c8",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-08-31T18:06:12Z",
      "side": 1,
      "message": "I asked this question when reviewing the original CL before, Inker\u0027s opinion was that it is clearer for reader to understand the content of the file.\n\n@inker, could you confirm?",
      "parentUuid": "1e8e2beb_75004ed5",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cdcbb24_8d7186ba",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-09-01T04:10:26Z",
      "side": 1,
      "message": "btw I am ok to land this CL with genFileForPTZ() given it\u0027s already there. We can remove it in another CL if needed.",
      "parentUuid": "4cca794a_fc8e79c8",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b000151_ab136a65",
        "filename": "src/chromiumos/tast/local/camera/cca/fixture.go",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2021-09-01T04:32:16Z",
      "side": 1,
      "message": "I see. Thanks!",
      "parentUuid": "4cdcbb24_8d7186ba",
      "revId": "9abf4729e7b3bb4bc56bc1d607530cfa0af70951",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}