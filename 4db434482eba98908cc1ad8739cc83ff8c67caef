{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9ae4c374_57babeeb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-10-28T01:35:48Z",
      "side": 1,
      "message": "tast side lgtm",
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1810612a_f22f2466",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "Should we also test the difference between strict mode and best effort mode, or you plan to do this in a different test?",
      "range": {
        "startLine": 26,
        "startChar": 3,
        "endLine": 33,
        "endChar": 5
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "662054fa_f864f16f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "You mean to test lockdown mode blocks direct traffic? The bug doesnt mention that part though, @hugobenichi@google.com shall we add that part in this test as well?",
      "parentUuid": "1810612a_f22f2466",
      "range": {
        "startLine": 26,
        "startChar": 3,
        "endLine": 33,
        "endChar": 5
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a76e96d_650e3bee",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-10-28T14:35:28Z",
      "side": 1,
      "message": "Yes we should definitely test this, but I think this can be done as an additional improvement on top of the base patch.\n\nFor traffic, at a minimum we should check that:\n\nsystem traffic is not impacted by strict mode:\n  - if always-on-vpn is set in strict mode, then a connection done by the system (see Jie\u0027s connection pinning patch for some examples) still succeeds if the VPN is not connected. This is also true in best-effort mode so we can just test this for both Params case.\n  - if always-on-vpn is set in strict mode, then a connection done by user applications (I think some of Jason\u0027s tests have some examples, maybe the simplest is to do a subcommand like \"crosh -- ping some_ip\") is blocked if the VPN is not connected.\n  - if always-on-vpn is set in best-effort mode, then a connection by user applications is not blocked if the VPN is not connected.",
      "parentUuid": "662054fa_f864f16f",
      "range": {
        "startLine": 26,
        "startChar": 3,
        "endLine": 33,
        "endChar": 5
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e43ac5c7_4ec95be8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-10-28T14:38:15Z",
      "side": 1,
      "message": "Another thing where we had a couple of bugs before is when logging in and out a user.\n\nWe should have a separate test file where we:\n  - log a user (i.e push a user profile in shill)\n  - configure a VPN for that user, and configure AlwaysOn for that VPN\n  - log out the user, check that AlwaysOn is gone and that the VPN is disconnected\n  - relog the user, check that the VPN starts automatically.",
      "parentUuid": "8a76e96d_650e3bee",
      "range": {
        "startLine": 26,
        "startChar": 3,
        "endLine": 33,
        "endChar": 5
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03666d90_12558418",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "nit: OpenVPN",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 37
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd1ed3dd_d43024a4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03666d90_12558418",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 37
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1ccedda_6e615e98",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "Just a question, is there any special reason we need to push a profile?",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 57,
        "endChar": 16
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce4acfa0_01d16399",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "I thought we need a test profile on top of global default profile in order to prevent polluting test environment? Perhaps I understood it wrongly..",
      "parentUuid": "c1ccedda_6e615e98",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 57,
        "endChar": 16
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4e40752_ca6486f4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T06:38:42Z",
      "side": 1,
      "message": "Ack, sounds good",
      "parentUuid": "ce4acfa0_01d16399",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 57,
        "endChar": 16
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0afb67f_ac9b3d10",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 86,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "I suppose we can call SetProperty direclty on profile since PropertyHodler is embedded in Profile",
      "range": {
        "startLine": 86,
        "startChar": 1,
        "endLine": 86,
        "endChar": 37
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9b89da3_c6b0fe32",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 86,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a0afb67f_ac9b3d10",
      "range": {
        "startLine": 86,
        "startChar": 1,
        "endLine": 86,
        "endChar": 37
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f03e0c88_d1c2dd46",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "Do not discard error",
      "range": {
        "startLine": 88,
        "startChar": 1,
        "endLine": 88,
        "endChar": 11
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "043bba02_15273c7e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "Let\u0027s add this constant (and below) in shillconst",
      "range": {
        "startLine": 88,
        "startChar": 29,
        "endLine": 88,
        "endChar": 49
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e886b50e_289cca07",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f03e0c88_d1c2dd46",
      "range": {
        "startLine": 88,
        "startChar": 1,
        "endLine": 88,
        "endChar": 11
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e1a7662_dd03b8f2",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/host_vpn_always_on.go",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "043bba02_15273c7e",
      "range": {
        "startLine": 88,
        "startChar": 29,
        "endLine": 88,
        "endChar": 49
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "361612f1_795d27cf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/connection.go",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T01:58:24Z",
      "side": 1,
      "message": "As discussed offline, I would suggest just expose service\nThere should be an ObjectPath() method on Service to get the service path",
      "range": {
        "startLine": 100,
        "startChar": 1,
        "endLine": 100,
        "endChar": 28
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96f86ffa_905466b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/connection.go",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1547853
      },
      "writtenOn": "2022-10-28T05:55:55Z",
      "side": 1,
      "message": "I didnt find any method related to ObjectPath, and directly call this on Service would output `type func() *\"chromiumos/tast/local/shill\".Service has no field or method ObjectPath`",
      "parentUuid": "361612f1_795d27cf",
      "range": {
        "startLine": 100,
        "startChar": 1,
        "endLine": 100,
        "endChar": 28
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d778b1e_6e56724a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/connection.go",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-10-28T06:38:42Z",
      "side": 1,
      "message": "Sorry my bad... Could you try Service.DBusObject.ObjectPath?",
      "parentUuid": "96f86ffa_905466b1",
      "range": {
        "startLine": 100,
        "startChar": 1,
        "endLine": 100,
        "endChar": 28
      },
      "revId": "4db434482eba98908cc1ad8739cc83ff8c67caef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}