{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "695f933a_1fa84119",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 148,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2022-04-28T12:19:29Z",
      "side": 1,
      "message": "nit: this wrapped error does not add any useful information. So it can be simplified to:\n\nreturn optin.WaitForPlayStoreShown(ctx, tconn, time.Minute)",
      "range": {
        "startLine": 144,
        "startChar": 1,
        "endLine": 148,
        "endChar": 11
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41581871_3ab9d8af",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 148,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-04-29T02:31:41Z",
      "side": 1,
      "message": "Done. Thanks for the suggestions!",
      "parentUuid": "695f933a_1fa84119",
      "range": {
        "startLine": 144,
        "startChar": 1,
        "endLine": 148,
        "endChar": 11
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c679a86_f002d8cc",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 162,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2022-04-28T12:19:29Z",
      "side": 1,
      "message": "ditto.",
      "range": {
        "startLine": 159,
        "startChar": 2,
        "endLine": 162,
        "endChar": 12
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47fb66b9_aaf6c0cc",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 162,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-04-29T02:31:41Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "3c679a86_f002d8cc",
      "range": {
        "startLine": 159,
        "startChar": 2,
        "endLine": 162,
        "endChar": 12
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98dacdb6_ce7ddb40",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 183,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2022-04-28T12:19:29Z",
      "side": 1,
      "message": "Optional: I should have raised this suggestion earlier. http://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/common/action/action.go?l\u003d18\n\nYou might want to define actions for these functions, so that you can combine them together to reduce code.\n\n1. Define action:\ninvalidateSELinuxHash :\u003d func(path string) action.Action{\n    return func(ctx context.Context) error{\n        cmd :\u003d testexec.CommandContext(ctx, \"setfattr\", \"-n\", \"security.sehash\", \"-v\", \"\\\"\\\"\", path)\n\treturn cmd.Run(testexec.DumpLogOnError)\n    }\n}\n\n2. Combine actions to execute:\nif err :\u003d action.Combine(\"invalidate security.sehash xattr\", \n    invalidateSELinuxHash(filepath.Dir(vaultPath)),\n    invalidateSELinuxHash(vaultPath),\n    invalidateSELinuxHash(filepath.Join(vaultPath, \"root\")),\n    invalidateSELinuxHash(filepath.Join(vaultPath, \"root\", \"android-data\"))\n)(ctx); err !\u003d nil{\n    return errors.Wrap(err, \"failed to invalidate security.sehash xattr\")\n}",
      "range": {
        "startLine": 172,
        "startChar": 1,
        "endLine": 183,
        "endChar": 2
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24e6366a_f0e1baa8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 183,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-04-29T02:31:41Z",
      "side": 1,
      "message": "Thank you for the suggestion and the pointer!\nI let it just return err instead of errors.Wrap(err, ...) because the error message looks okay without wrapping:\n```\narc.SELinuxHostSideRestorecon.vm [ FAIL ] Failed to invalidate security.sehash xattr of tested files: failed to invalidate security.sehash xattr on step 4: exit status 1\n```",
      "parentUuid": "98dacdb6_ce7ddb40",
      "range": {
        "startLine": 172,
        "startChar": 1,
        "endLine": 183,
        "endChar": 2
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd9a2fe5_75fa14a7",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 270,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2022-04-28T12:19:29Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 270,
        "endChar": 11
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7348b40_eee40eae",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/selinux_host_side_restorecon.go",
        "patchSetId": 16
      },
      "lineNbr": 270,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2022-04-29T02:31:41Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "cd9a2fe5_75fa14a7",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 270,
        "endChar": 11
      },
      "revId": "b5bed456ed6018ece8cf524d2b7c688f3d40e299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}