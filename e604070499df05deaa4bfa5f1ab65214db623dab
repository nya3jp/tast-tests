{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2716a6e4_7bc02076",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-01-27T21:03:35Z",
      "side": 1,
      "message": "This is not ready for submission but to ask for advice to address the test scenario commented in the patchset.\nI can follow it up (maybe split this into a few smaller CLs) for migrating ui.* tests. Thanks,",
      "revId": "e604070499df05deaa4bfa5f1ab65214db623dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b0b7284_7e85fcbc",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/desktop_control.go",
        "patchSetId": 5
      },
      "lineNbr": 123,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-01-27T21:03:35Z",
      "side": 1,
      "message": "Hidehiko, Georg, I\u0027m just sending this change to discuss the test scenario here and ask for your thoughts.\n\nThe test needs to open two windows. However, browserfixt.SetUp will open an extra window for lacros fixture.\nA quick fix is like line 112-123 to close the extra window after the setup, which requires having FindTarget/CloseTarget in the Browser.\n\nHowever, I\u0027d like to hear about a way to put this up better for Chrome, Lacros and Browser, so I can follow it up for this migration. A few thoughts\n- let browserfixt.SetUp returns a closure CloseAboutBlank that does the same but for easy use by a caller.\n- have CloseAboutBlank convenience method in Browser that can route a call to lacros.CloseAboutBlank that has already existed.\n- or better ideas.",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 123,
        "endChar": 2
      },
      "revId": "e604070499df05deaa4bfa5f1ab65214db623dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "811554a0_4a58195c",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/desktop_control.go",
        "patchSetId": 5
      },
      "lineNbr": 123,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2022-01-30T17:19:32Z",
      "side": 1,
      "message": "I think the easiest for now would be doing\nbrowserfixt.SetUpWithURL(..., url) with url \u003d \"\" or \"about:blank\" to uniformly open one window in either case, followed by ash.CreateWindows(..., 1) or just br.NewConn(...) to open one additional window.\n\nIf you also need to wait for the windows to be visible, perhaps we can generalize the WaitForWindow from https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3341459 to take a slice of titles instead of a single title.\n\nOther comments:\n\n- lacros.CloseAboutBlank would close all windows in your case, I believe.\n\n- The basic problem is, of course, that browserfixt.SetUp opens a window in the Lacros case but not in the Ash case. Is it fundamentally necessary that it opens a window in the Lacros case, or could we avoid that somehow, perhaps using the keep-alive mechanism that I\u0027m not really familiar with? If we can\u0027t avoid it, could we change SetUp to also open a window in the Ash case?\n\n- The test currently passes even with only one browser window open. If the number of windows is important perhaps you can add an asseertion somewhere.",
      "parentUuid": "0b0b7284_7e85fcbc",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 123,
        "endChar": 2
      },
      "revId": "e604070499df05deaa4bfa5f1ab65214db623dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bba9f39_4923c2e7",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/desktop_control.go",
        "patchSetId": 5
      },
      "lineNbr": 123,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-02-01T20:06:36Z",
      "side": 1,
      "message": "Thanks for your thought, Georg! \nThe intention was keeping the existing test path for ash-chrome as close to what it is now (since it\u0027s a perf test that worried me of a tiny change affecting test results).\nRather I would like to add a new path for lacros-chrome, which comes down to a function closing one extra blank window. We can discuss further with go/lacros-tast-api-comparison and get back to this. Marking CL \"DO NOT SUBMIT\" until we figure this out. Thanks,",
      "parentUuid": "811554a0_4a58195c",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 123,
        "endChar": 2
      },
      "revId": "e604070499df05deaa4bfa5f1ab65214db623dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}