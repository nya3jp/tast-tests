{
  "comments": [
    {
      "key": {
        "uuid": "bff8b591_95fdc5d1",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-12T15:49:12Z",
      "side": 1,
      "message": "Please do not take the testing.State.\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#test-subpackages\n\nInstead, you can report an error by return value.",
      "range": {
        "startLine": 32,
        "startChar": 37,
        "endLine": 32,
        "endChar": 55
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7743fa7d_c4e8ed20",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T16:37:30Z",
      "side": 1,
      "message": "I was trying to avoid duplicating the error message in the users, but OK",
      "parentUuid": "bff8b591_95fdc5d1",
      "range": {
        "startLine": 32,
        "startChar": 37,
        "endLine": 32,
        "endChar": 55
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84181af6_f97a86c0",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-12T15:49:12Z",
      "side": 1,
      "message": "Does RTC need variation of timeout?\nIf not, could you set the timeout in rtc.Write() instead? Ditto for below.",
      "range": {
        "startLine": 33,
        "startChar": 1,
        "endLine": 38,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a5290c4_3fce1e04",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T16:37:30Z",
      "side": 1,
      "message": "I saw that power.GetStatus gave the caller the responsibility of setting a timeout, so that\u0027s what I did here. However, in both the RTC and the power.GetStatus cases I agree with you that the utilities should encapsulate the timeout. I just wanted to follow existing code, but I will change power.GetStatus too. See below.",
      "parentUuid": "84181af6_f97a86c0",
      "range": {
        "startLine": 33,
        "startChar": 1,
        "endLine": 38,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24672d7e_da18968a",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T17:10:20Z",
      "side": 1,
      "message": "Done in https://crrev.com/c/1747034/4..5",
      "parentUuid": "6a5290c4_3fce1e04",
      "range": {
        "startLine": 33,
        "startChar": 1,
        "endLine": 38,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c407424_7d630f87",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-12T15:49:12Z",
      "side": 1,
      "message": "In the case, should the timeout be a part of power.GetStatus, I think?",
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f834231_5a27d0cf",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T16:37:30Z",
      "side": 1,
      "message": "I saw this and thought the same thing, I just figured that there was a reason it was that way. I can fix this. It looks like there is only one case of someone using power.GetStatus (http://cs/search/?q\u003df:go$+%22GetStatus(%22\u0026m\u003d100\u0026sq\u003dpackage:(%5Echromeos_internal$%7C%5Echromeos_public$)\u0026type\u003dcs) so that should be easy.",
      "parentUuid": "8c407424_7d630f87",
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9c9bd6c_9b22b628",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T17:10:20Z",
      "side": 1,
      "message": "Done in https://crrev.com/c/1749453/1",
      "parentUuid": "2f834231_5a27d0cf",
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e2a67ea_6db61154",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-12T15:49:12Z",
      "side": 1,
      "message": "Because these looks like a pair, and there seems no strong reason to set commandTimeout.\nSo, I guess these can be simply inlined in the caller.",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 82,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb5d1f57_880091ed",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T16:37:30Z",
      "side": 1,
      "message": "I don\u0027t think I see what you mean, what is the impact of this being a pair? See below, I was just trying to avoid duplication.",
      "parentUuid": "4e2a67ea_6db61154",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 82,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92a939d7_6ffffea2",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-13T15:52:15Z",
      "side": 1,
      "message": "I meant;\n\nyou just set 3 sec timeout for all the command line executions.\nThus, there seems no strict reason to set the timeout to me at least in the previous iterations.\n\nIf you prefer, I\u0027m ok, but StopJob/StartJob are used a pair, so I guess it should be fit in a context\u0027s timeout?\n\nif err :\u003d upstart.StopJob(ctx, ...); err !\u003d nil {\n  s.Fatal(\"...\", err)\n}\ndefer func() {\n  if err :\u003d upstart.EnsureJobRunning(ctx, ...); err !\u003d nil {\n    s.Error(\"...\", err)\n  }\n}()\n\nctx, cancel :\u003d ctxutil.Shorten(ctx, .../* some amount of time */)\n...\n\nlooks like more commonly used pattern.",
      "parentUuid": "bb5d1f57_880091ed",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 82,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02c401c0_2fdbbf65",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-14T00:24:18Z",
      "side": 1,
      "message": "OK, I\u0027ll inline this to the caller. This does have the problem where if the StopJob() context times out, then the EnsureJobRunning context will also be timed out, so I did this slightly differently.",
      "parentUuid": "92a939d7_6ffffea2",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 82,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b620d79_8a6124b0",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-08-12T15:49:12Z",
      "side": 1,
      "message": "With testing.State removal, these are just unnecessary. Could you inline to the callers?",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 103,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d99eb9d0_fc24284e",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-12T16:37:30Z",
      "side": 1,
      "message": "I was trying to avoid duplicating this code in the 3 (and maybe more in future) places where this is used in the following power.Wilco* test CLs. See my main comment",
      "parentUuid": "5b620d79_8a6124b0",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 103,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88f695ed_5bc7fc3b",
        "filename": "src/chromiumos/tast/local/wilco/wilco.go",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-08-14T00:24:18Z",
      "side": 1,
      "message": "I inlined to callers.",
      "parentUuid": "d99eb9d0_fc24284e",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 103,
        "endChar": 1
      },
      "revId": "274c61b99f818984006c603ca90d561e16113251",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}