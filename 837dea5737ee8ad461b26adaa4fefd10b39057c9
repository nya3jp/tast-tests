{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "977afe4b_d50fdbf3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1520127
      },
      "writtenOn": "2022-07-27T15:03:09Z",
      "side": 1,
      "message": "Hi Eliot,\n\nThis is how far I went. But I still couldn\u0027t figure how to hide `testing.State` on these following places:\n\n        src/chromiumos/tast/local/perfutil/run.go:143:74: \u0027testing.State\u0027 should not be used in support packages, except for precondition implementation\n        src/chromiumos/tast/local/perfutil/run.go:166:78: \u0027testing.State\u0027 should not be used in support packages, except for precondition implementation\n\nWDYT? Thank you very much.",
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "812a9379_5590f6e0",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-07-28T01:21:19Z",
      "side": 1,
      "message": "remove this",
      "range": {
        "startLine": 143,
        "startChar": 73,
        "endLine": 143,
        "endChar": 87
      },
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a939026_f0e86d29",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1520127
      },
      "writtenOn": "2022-07-28T23:45:24Z",
      "side": 1,
      "message": "I\u0027m sorry, I don\u0027t think I quite understood how.\n\nIf we remove the parameter you suggested then we\u0027d have to change the newly added RunFunc type as well. RunFunc is a parameter exposed to all tests within the RunMultiple fn, which is okay but the real problem is that we\u0027d have to change the (internal tast) s.Run signature. Do we want that?",
      "parentUuid": "812a9379_5590f6e0",
      "range": {
        "startLine": 143,
        "startChar": 73,
        "endLine": 143,
        "endChar": 87
      },
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79396d09_fc89990c",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-07-29T00:49:30Z",
      "side": 1,
      "message": "We can\u0027t change the signature of s.Run.\n\nTests can pass in a func(ctx, name) though. Are there any tests that actually depend on having the testing.State here? Or any tests that depend on the fact it makes a new subtest? Tests that need a new subtest can pass a closure that captures testing.State and call s.Run themselves.\n\nThis is getting a bit complicated in the Tast design side for me though. hidehiko@, wdyt?",
      "parentUuid": "7a939026_f0e86d29",
      "range": {
        "startLine": 143,
        "startChar": 73,
        "endLine": 143,
        "endChar": 87
      },
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "456e80de_2d3ae647",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-08-01T13:06:39Z",
      "side": 1,
      "message": "Can we change the thinking way here?\nRun is a function, taking ctx, the name, so that it can do whatever needed.\nE.g., scenario and store can be a part of \"run\" function, I think.",
      "parentUuid": "79396d09_fc89990c",
      "range": {
        "startLine": 143,
        "startChar": 73,
        "endLine": 143,
        "endChar": 87
      },
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60557647_661bf502",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1520127
      },
      "writtenOn": "2022-08-04T21:07:34Z",
      "side": 1,
      "message": "Hi back here, Hidehiko. Based on your and Eliot\u0027s suggestions, I went deeper a bit with this work - the summary of changes are listed in the commit message. PTAL and let me know if this direction is sensible to be continued.\n \nThank you very much.",
      "parentUuid": "456e80de_2d3ae647",
      "range": {
        "startLine": 143,
        "startChar": 73,
        "endLine": 143,
        "endChar": 87
      },
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5c1f9d8_3081a367",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-07-28T01:21:19Z",
      "side": 1,
      "message": "Would need to return this (this just creates an error object) and make the function return bool, error",
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b229403c_5c723130",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1520127
      },
      "writtenOn": "2022-07-28T23:45:24Z",
      "side": 1,
      "message": "I guess we don\u0027t want to change the return value here for similar reason that I\u0027ve mentioned above i.e. we\u0027d need to change s.Run signature.\n\nmaybe we could just log a warning message with testing.ContextLog for all these errors?",
      "parentUuid": "c5c1f9d8_3081a367",
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13465d89_bdb8a29c",
        "filename": "src/chromiumos/tast/local/perfutil/run.go",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2022-07-29T00:49:30Z",
      "side": 1,
      "message": "We need to preserve the behaviour that an error halts RunMultiple, IMO, so we must return an error here (or stop somehow).",
      "parentUuid": "b229403c_5c723130",
      "revId": "837dea5737ee8ad461b26adaa4fefd10b39057c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}