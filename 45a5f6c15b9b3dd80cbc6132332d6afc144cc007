{
  "comments": [
    {
      "key": {
        "uuid": "e8133837_0cb9618e",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "Avoid renaming imports except to avoid a name collision.\ngo/gocomments#imports",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "610e42cc_3f178099",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2020-03-31T14:56:25Z",
      "side": 1,
      "message": "I think for pb, this is allowed.",
      "parentUuid": "e8133837_0cb9618e",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d6ceb13_333da893",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2020-03-31T14:57:58Z",
      "side": 1,
      "message": "We have many examples like this. https://cs.corp.google.com/search/?q\u003d%5E%5Cs%2B%5Cw%2Bpb%5Cs%2B%5C%22.*%5C%22+file:%5C.go+file:tast-tests\u0026m\u003d100\u0026sq\u003dpackage:%5Echromeos_public$%7C%5Echromeos_internal$\u0026type\u003dcs",
      "parentUuid": "610e42cc_3f178099",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d96f220_7b1e4cd6",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "cpb is actually used in the code below. So, we would need to keep it.",
      "parentUuid": "0d6ceb13_333da893",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc8c6ff4_b83da860",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-04-01T06:39:33Z",
      "side": 1,
      "message": "Keigo, thanks for the correction.\n\nJust FYI,\n\nVaibhav wrote:\n\u003e cpb is actually used in the code below. \n\nSorry if my comment was not clear. I did not say \"cdp\" is unused.\nI thought the Google\u0027s internal guideline (not specific to Chrome) said not to use import renaming other than avoiding name collision of the package.\nHowever, this case is a commonly used pattern renaming a protobuf binding package. I\u0027ve got that this is allowed.",
      "parentUuid": "4d96f220_7b1e4cd6",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9a40e47_121d818f",
        "filename": "src/chromiumos/tast/local/bundles/cros/security/boot_lockbox_service.go",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc8c6ff4_b83da860",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9455feec_92d390fe",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "This looks contain many sub-tests.\nDid you consider splitting tests using a test parameter?\nFor example, see src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/platform/user_crash.go",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "750fabe6_3ec18ccc",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "Looked at the above file. In this file, I can think of moving to convert 3 of the sub-tests using test parameters. However, I have a doubt - as in what benefit does it provide ? Pros and Cons of writing helper functions v/s converting them into sub-tests ??",
      "parentUuid": "9455feec_92d390fe",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66a908d2_32fccc31",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2020-04-01T03:22:59Z",
      "side": 1,
      "message": "Parameters are not for creating subtests I think. See https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#parameterized-tests for valid usage of params.\nFor this case, I think it\u0027s fine to keep the subtest functions, because they all depend on the same setup.\n\nRather than passing s to subtests and helpers, I\u0027d recommend to make them return an error, and handle the errors on main test function. For example:\n\nfunc testReadNonExistingEntry(ctx context.Context, client security.BootLockboxServiceClient) error {\n\ttesting.ContextLog(\"Test reading from non-existing entry\")\n\tresponse, err :\u003d client.Read(ctx, \u0026security.ReadBootLockboxRequest{Key: testKeyNeverStored})\n\tif err !\u003d nil {\n\t\treturn errors.Wrap(err, \"Unexpected error when read from boot lockbox\")\n\t}\n\tif len(response.Value) \u003e 0 {\n                return errors.Errorf(\"Reading from unused key should return empty result, but got %q (encoded)\", hex.EncodeToString(response.Value))\n\t}\n\treturn nil\n}\n\nIf you really want to distinguish fatal errors (which was s.Fatalf before) and continuable errors (s.Error before), you can make the error sentinel. See https://play.golang.org/p/1Fnvi80Bo32",
      "parentUuid": "750fabe6_3ec18ccc",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b19b5c4b_16409f06",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "Not passing s to any unnecessary sub-tests now and returning errors as mentioned",
      "parentUuid": "66a908d2_32fccc31",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ab197b3_5ff291db",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2020-04-01T03:22:59Z",
      "side": 1,
      "message": "Could you return error from cr.Close ?",
      "range": {
        "startLine": 35,
        "startChar": 5,
        "endLine": 35,
        "endChar": 10
      },
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd553436_4b86fb31",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6ab197b3_5ff291db",
      "range": {
        "startLine": 35,
        "startChar": 5,
        "endLine": 35,
        "endChar": 10
      },
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7457f186_619df287",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 40,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "Can this be simply done without defer, because this is the last line of the function?",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "151f7fa9_af780f36",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 40,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7457f186_619df287",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6f09145_cf35089e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 40,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-04-01T06:39:33Z",
      "side": 1,
      "message": "By my last comment I suggested just doing\n\u003e cr.Close(ctx, \u0026empty.Empty{})\nin this line based on what you wrote. But in PS9 the line is removed. Is it intended change?",
      "parentUuid": "151f7fa9_af780f36",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa99a7b5_cf9c7d56",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 40,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "No, got confused from your earlier message. Now, returning error from cr.Close()",
      "parentUuid": "f6f09145_cf35089e",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0e094cb_4e5b9eb1",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "this err can be local to the if statement in the next line.",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19e070c6_766dfb00",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0e094cb_4e5b9eb1",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "045f3b98_4d960a0b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "Add description why the test calls read client.Read two times.\nAlso make the LHS \"_, err\" because this value of response is discarded.",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12bd4e7e_ad703451",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "045f3b98_4d960a0b",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5ed2599_b632ecb3",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-04-01T06:39:33Z",
      "side": 1,
      "message": "Based on the PS7 code I was thinking you needed to call the method twice for some reason which I don\u0027t know.\nWas it not needed?",
      "parentUuid": "12bd4e7e_ad703451",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e65a683_53a12d86",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "Yes, realized that it wasn\u0027t needed.",
      "parentUuid": "b5ed2599_b632ecb3",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03f827f0_658ce254",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 103,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2020-03-23T05:43:49Z",
      "side": 1,
      "message": "Is this a correct log when err was non-nil at line 93 or 100?\nI also think test success would be obvious if a test did not output any errors.",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d831a7b4_fb18db39",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 103,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-03-31T19:10:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03f827f0_658ce254",
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "400a282a_429360ca",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 125,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2020-04-01T03:22:59Z",
      "side": 1,
      "message": "Could you check error? same for others.\n\ndefer func() {\n  err :\u003d ...\n}()",
      "range": {
        "startLine": 125,
        "startChar": 7,
        "endLine": 125,
        "endChar": 20
      },
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb336e73_6f52b7cb",
        "filename": "src/chromiumos/tast/remote/bundles/cros/security/boot_lockbox.go",
        "patchSetId": 7
      },
      "lineNbr": 125,
      "author": {
        "id": 1391147
      },
      "writtenOn": "2020-04-15T05:56:32Z",
      "side": 1,
      "message": "Tried using this setup of the defer func(). But the GO code panicked. It is trying to close an already closed channel. This means - only using cl.Close(ctx) before was not working as expected anyway. What should be the thought process to solve this ?",
      "parentUuid": "400a282a_429360ca",
      "range": {
        "startLine": 125,
        "startChar": 7,
        "endLine": 125,
        "endChar": 20
      },
      "revId": "45a5f6c15b9b3dd80cbc6132332d6afc144cc007",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}