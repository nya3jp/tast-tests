{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a0989b71_64d2c7d0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1357200
      },
      "writtenOn": "2021-05-11T04:58:26Z",
      "side": 1,
      "message": "LGTM % nits. General outline LGTM but I\u0027m not very familiar with tast.",
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90fd9290_68e139de",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "Probably want to namespace these, like contentPreviewsTextFile if you\u0027re going to have them at this level.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 31,
        "endChar": 1
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7349518_cdd7e7e6",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "It guess it is ok without the prefix since it is not global.",
      "parentUuid": "90fd9290_68e139de",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 31,
        "endChar": 1
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87ad28ec_7eeb4ef4",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-12T05:06:26Z",
      "side": 1,
      "message": "It\u0027s not global but it is on the apps.* namespace. So any other test that tries to use these vars from an apps.* test will fail",
      "parentUuid": "d7349518_cdd7e7e6",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 31,
        "endChar": 1
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1887bc28_7467c320",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-12T06:23:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "87ad28ec_7eeb4ef4",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 31,
        "endChar": 1
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c21e201c_300b789a",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "Not doing anything with the extra 5s, remove?",
      "range": {
        "startLine": 62,
        "startChar": 1,
        "endLine": 63,
        "endChar": 15
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c08fa370_8f455cfd",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "Need to delete the files in Downloads. The defer func does not take a ctx, so did not assign a cleanupCtx.",
      "parentUuid": "c21e201c_300b789a",
      "range": {
        "startLine": 62,
        "startChar": 1,
        "endLine": 63,
        "endChar": 15
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f89ae79_27d3795f",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-12T05:06:26Z",
      "side": 1,
      "message": "What you\u0027re doing here though is shortening the test context by 5s then discarding the context with the additional 5s. So cleaning up the files in Downloads will be on the shortened context, if they don\u0027t take a context you don\u0027t need to shorten as they simply won\u0027t get cancelled when the enclosing scope finishes.",
      "parentUuid": "c08fa370_8f455cfd",
      "range": {
        "startLine": 62,
        "startChar": 1,
        "endLine": 63,
        "endChar": 15
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c402f0d_f1f99af5",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-12T06:23:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f89ae79_27d3795f",
      "range": {
        "startLine": 62,
        "startChar": 1,
        "endLine": 63,
        "endChar": 15
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e7397fe_561c3220",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "Any reason you don\u0027t fsutil.CopyFile here instead of during each test?",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c4a0bb0d_1cfb6690",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "I guess fsutil.CopyFile only copies files but do not delete them?",
      "parentUuid": "2e7397fe_561c3220",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0e8da44_dbf2f837",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-12T05:06:26Z",
      "side": 1,
      "message": "Sorry I meant on line 126 you\u0027re copying the files after each test, why not just copy them once and delete them once? Why after every test, seems like a waste",
      "parentUuid": "c4a0bb0d_1cfb6690",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76274581_5b32bc31",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-12T06:23:00Z",
      "side": 1,
      "message": "Each of them is copied at the beginning of the test. If they are copied once before the sub test, another field or something might be needed to indicate whether the copy succeeded or not.",
      "parentUuid": "e0e8da44_dbf2f837",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54a4fe8d_751712ec",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-12T06:37:43Z",
      "side": 1,
      "message": "From what I can see, each of them is copied at the start of each subtest? Why not copy them before the defer at line 62? Given you are not deleting them if they succeed before all the subtests, they won\u0027t be altered by each of the subtests.",
      "parentUuid": "76274581_5b32bc31",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2afad0ce_4147b8e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-12T07:51:55Z",
      "side": 1,
      "message": "Yes, each of them are copied at the start of each subtest. If they are copied before the defer, then it needs a field or something to indicate whether the specific file is copied successfully or not. Fail to copy one file only fails the subtest, not the whole test.",
      "parentUuid": "54a4fe8d_751712ec",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3fff92c_244332bc",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1357200
      },
      "writtenOn": "2021-05-11T04:58:26Z",
      "side": 1,
      "message": "nit: maybe clearer to call this \u0027textString\u0027 since it\u0027s not a file.",
      "range": {
        "startLine": 85,
        "startChar": 16,
        "endLine": 85,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9837deb_350f13ae",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "I change the string to textFileName, which is a bit more readable. It might be something else in the future if it is changed.",
      "parentUuid": "f3fff92c_244332bc",
      "range": {
        "startLine": 85,
        "startChar": 16,
        "endLine": 85,
        "endChar": 24
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f6aaaad_1f7cce2d",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 107,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "This is already available under filesapp.Share\n\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/chrome/uiauto/filesapp/filesapp.go;l\u003d49;drc\u003d3bccbe12a18829ced771533ad34a340c0bf19b74",
      "range": {
        "startLine": 107,
        "startChar": 1,
        "endLine": 107,
        "endChar": 22
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2630b04_e8acc299",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 107,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f6aaaad_1f7cce2d",
      "range": {
        "startLine": 107,
        "startChar": 1,
        "endLine": 107,
        "endChar": 22
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac53ab0b_95822a8d",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "I\u0027m wondering if you should define the two functions above and use those to iterate over? e.g.\n```\nclickShareButton :\u003d func (ctx context.Context, files *filesapp.FilesApp) uiauto.Action {\n  shareButton :\u003d nodewith.Name(filesapp.Share).WaitForFile(data.name)\n  return uiauto.NamedAction(\"share button\", files.LeftClick(sharebutton))\n}\n\nclickContextMenuShare :\u003d func (ctx context.Context, files *filesapp.FilesApp) uiauto.Action {\n  return uiauto.NamedAction(\"share context menu\", files.ClickContextMenuItem(data.name))\n}\n\nfor _, shareAction :\u003d range []uiauto.Action{clickShareButton, clickContextMenuShare} {\n...\nif err :\u003d uiauto.Combine(\"share file\",\n  files.OpenDownloads(),\n  files.WithTimeout(30*time.Second).WaitForFile(data.name),\n  files.SelectFile(data.name),\n  shareAction)(ctx); err !\u003d nil {\n  s.Fatal(\"Failed to share file in Downloads: \", err)\n}\n...\n}\n```\nWDYT?",
      "range": {
        "startLine": 117,
        "startChar": 3,
        "endLine": 117,
        "endChar": 6
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcd30536_efe1243c",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "Personally, I think the current one is more readable. Please feel free to disagree.",
      "parentUuid": "ac53ab0b_95822a8d",
      "range": {
        "startLine": 117,
        "startChar": 3,
        "endLine": 117,
        "endChar": 6
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16b5ee48_822d01c2",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-12T05:06:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dcd30536_efe1243c",
      "range": {
        "startLine": 117,
        "startChar": 3,
        "endLine": 117,
        "endChar": 6
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06fe7571_75d9ed49",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-05-11T07:43:00Z",
      "side": 1,
      "message": "Given these are the same for every test, is it worth moving this outside the s.Run scope?",
      "range": {
        "startLine": 159,
        "startChar": 5,
        "endLine": 161,
        "endChar": 104
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9810455_a7987cd3",
        "filename": "src/chromiumos/tast/local/bundles/cros/apps/content_preview.go",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1398801
      },
      "writtenOn": "2021-05-11T08:43:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "06fe7571_75d9ed49",
      "range": {
        "startLine": 159,
        "startChar": 5,
        "endLine": 161,
        "endChar": 104
      },
      "revId": "561ceb7a46ee631cff656400d2279b105a67fd24",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}