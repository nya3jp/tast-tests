{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "17b70323_75cf1125",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/chrome_crash.go",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2021-01-18T11:52:21Z",
      "side": 1,
      "message": "In arc.ConciergeCrash [1], we call arc.New() before each arc.InitPID().\n(1) Is it okay to skip several checks (e.g. for the property ro.arc.boot.completed) in arc.New() and just check arc.InitPID()?\n(2) With arc.New() skipped, is 60 sec sufficient for init PID to come up? arc.Boot [2] sets Timeout to be 5 min. So we seem to be expecting that ARC boot time can generally be a little longer. Maybe it\u0027s okay if init PID comes up well before ARC boots completely (in both ARCVM and ARC container).\n\n[1] http://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/arc/concierge_crash.go\n[2] http://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/arc/boot.go",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 41,
        "endChar": 2
      },
      "revId": "5135cc7608e1f27dab1c66a7eeb3544486ae3d12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a5c9f53_f3b78fdb",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/chrome_crash.go",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-19T10:15:15Z",
      "side": 1,
      "message": "This test is to verify that mini-ARC restarts after a chrome crash before login.\narc.New() cannot be used here because ARC is not fully started yet.\n\nSorry for not making this clear.\nUpdated the test description.\n\nAlso, added code to restart ui to make sure that the login screen is shown even if the device is in logged-in state.",
      "parentUuid": "17b70323_75cf1125",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 41,
        "endChar": 2
      },
      "revId": "5135cc7608e1f27dab1c66a7eeb3544486ae3d12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a14a5fe0_826d48f4",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/chrome_crash.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1256179
      },
      "writtenOn": "2021-01-18T11:54:30Z",
      "side": 1,
      "message": "Shouldn\u0027t this be\n\nif err \u003d\u003d nil \u0026\u0026 pid \u003d\u003d oldPID {",
      "range": {
        "startLine": 61,
        "startChar": 2,
        "endLine": 61,
        "endChar": 34
      },
      "revId": "5135cc7608e1f27dab1c66a7eeb3544486ae3d12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d786baf3_bc9db0b0",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/chrome_crash.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2021-01-18T12:04:00Z",
      "side": 1,
      "message": "\u003e if err \u003d\u003d nil \u0026\u0026 pid \u003d\u003d oldPID {\n\nIn that way we cannot detect arc.InitPID() failure. Maybe we should return err if err !\u003d nil:\n\t\tif err !\u003d nil {\n\t\t\treturn err\n\t\t}\n\t\tif pid \u003d\u003d oldPID {\n\nCf. http://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/arc/concierge_crash.go?l\u003d77-82\u0026rcl\u003d592bb842180f34f9c16c54dfa336ada47aa38d05",
      "parentUuid": "a14a5fe0_826d48f4",
      "range": {
        "startLine": 61,
        "startChar": 2,
        "endLine": 61,
        "endChar": 34
      },
      "revId": "5135cc7608e1f27dab1c66a7eeb3544486ae3d12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96c9771d_606d8fde",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/chrome_crash.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2021-01-19T10:15:15Z",
      "side": 1,
      "message": "Returning nil incase of an error is OK because that means the old init process ig gone.\nThat said, probably it\u0027s better to merge this Poll() with the one below by ensuring that a new init process is started here.\n\nDone.",
      "parentUuid": "d786baf3_bc9db0b0",
      "range": {
        "startLine": 61,
        "startChar": 2,
        "endLine": 61,
        "endChar": 34
      },
      "revId": "5135cc7608e1f27dab1c66a7eeb3544486ae3d12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}