{
  "comments": [
    {
      "key": {
        "uuid": "303f80b7_bd6d511f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1302247
      },
      "writtenOn": "2019-08-08T17:27:57Z",
      "side": 1,
      "message": "Isn\u0027t there a race here where the init phase of crash reporter needs to run first to create the kernel crash logs?",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee00739e_c939120d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-08-08T17:35:49Z",
      "side": 1,
      "message": "Yes. Good point.  One possible solution: wait for a crash-reporter process to be running, then give it 0.1 or so seconds after that.\n\nThat might work, but I\u0027m very averse to using sleep() to \"solve\" race conditions.  Is there some way we can determine for sure that crash reporter is past the point where it would have written these files?",
      "parentUuid": "303f80b7_bd6d511f",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07e4b0a6_788b79b6",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1298800
      },
      "writtenOn": "2019-08-08T17:42:43Z",
      "side": 1,
      "message": "I don\u0027t see anything we do in crash reporter that would indicate when this is done. You definitely don\u0027t just want to watch the process because it runs and exit and you may miss it...and it\u0027s also not on the first invocation. What I\u0027d do is poll this command repeatedly with a decent timeout (like 30 seconds) and if it doesn\u0027t become true during that time it fails.",
      "parentUuid": "ee00739e_c939120d",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9f21464_9d2d07ac",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-08-08T23:32:51Z",
      "side": 1,
      "message": "Ah yes- of course; thanks for the reminder. Added polling logic.",
      "parentUuid": "07e4b0a6_788b79b6",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7700368_65d4c15f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-08-09T17:43:30Z",
      "side": 1,
      "message": "After https://chromium-review.googlesource.com/c/chromiumos/platform2/+/1737202 is in, we could also wait for /run/crash_reporter/boot-collector-done to be created and then fail if it exists and the files we want don\u0027t.",
      "parentUuid": "e9f21464_9d2d07ac",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88775035_9499c876",
        "filename": "src/chromiumos/tast/remote/bundles/cros/crash/kernel_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1298800
      },
      "writtenOn": "2019-08-12T18:56:27Z",
      "side": 1,
      "message": "I wouldn\u0027t worry about making it have tighter timing like that because it *should* always be passing so the timeout really won\u0027t come into play unless it got broken.",
      "parentUuid": "a7700368_65d4c15f",
      "range": {
        "startLine": 66,
        "startChar": 0,
        "endLine": 66,
        "endChar": 86
      },
      "revId": "01f5d7315f13be0c3c36a5cfc9cba3d36b20ee19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}