{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "adbf8eb4_508b8e00",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1314845
      },
      "writtenOn": "2021-05-06T20:39:38Z",
      "side": 1,
      "message": "I think we\u0027re supposed to get \"Tast reviewers\" reviews for all Tast test changes too, so add them to get a +2 before submitting: https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/code_reviews.md",
      "revId": "e6381a863a14c798cab951c7885da052c84183f0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d0ccb30_69c8c3c4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1334530
      },
      "writtenOn": "2021-05-06T21:52:02Z",
      "side": 1,
      "message": "Roger roger",
      "parentUuid": "adbf8eb4_508b8e00",
      "revId": "e6381a863a14c798cab951c7885da052c84183f0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43f7ba61_97bade3a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_flash_fp_mcu_hello.go",
        "patchSetId": 4
      },
      "lineNbr": 59,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2021-05-07T16:28:48Z",
      "side": 1,
      "message": "If flash_fp_mcu returns any nonzero exit status, then the DUT won\u0027t reboot. I\u0027m sure that\u0027s fine sometimes -- for example, if flash_fp_mcu doesn\u0027t even start rebooting the FPMCU. But I suspect there are other times where the FPMCU will reboot (thus losing the TPM seed), but still return a nonzero exit status. Is that true? If so, there are two ways to deal with this:\n\n1. Change the s.Fatal in L59 to s.Error. But that\u0027s not very defensive, since future programmers might insert other Fatals between L59 and the reboot.\n\n2. Defer the reboot before running flash_fp_mcu. This is the preferred way to clean up. Don\u0027t forget to reserve time for cleanup[1]!\n\n    cleanupCtx :\u003d ctx\n    ctx, cancel :\u003d ctxutil.Shorten(ctx, time.Minute) // or whatever duration is appropriate\n    defer cancel()\n    \n    // \u003ccomments from L62-71\u003e\n    defer function(ctx context.Context) {\n        testing.ContextLog(ctx, \"Rebooting DUT to restore TPM seed\")\n        if err :\u003d s.DUT().Reboot(ctx); err !\u003d nil {\n            testing.ContextLog(ctx, \"Failed to reboot device on test exit: \", err)\n        }\n    }\n\n    // \u003cL56â€“60\u003e\n\n[1]: http://go/tast-writing#Reserve-time-for-clean_up-task",
      "range": {
        "startLine": 59,
        "startChar": 4,
        "endLine": 59,
        "endChar": 9
      },
      "revId": "e6381a863a14c798cab951c7885da052c84183f0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2d8306f_a89f4a5f",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_flash_fp_mcu_hello.go",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2021-05-07T16:28:48Z",
      "side": 1,
      "message": "Possible typo: \"lose\"",
      "range": {
        "startLine": 63,
        "startChar": 4,
        "endLine": 63,
        "endChar": 9
      },
      "revId": "e6381a863a14c798cab951c7885da052c84183f0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0549cce_40e74763",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/fp_flash_fp_mcu_hello.go",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2021-05-07T16:28:48Z",
      "side": 1,
      "message": "I\u0027m not sure about this. Even if it\u0027s not this test\u0027s fault, it\u0027s still helpful to collect this information to debug reboot failures when they occur. For that matter, it _can_ be this test\u0027s fault -- if this test fails to reboot more than other reboot tests, we should not sweep that trend under the rug. If this test fails to come back online and the next test fails due to an offline DUT, then that will be a false signal, which will be harder to debug. Finally, when viewing test results on Tastboard[1], common reboot failures will be categorized as \"known issues\" and the test will not be blamed anyway when it comes to promoting to mainline.\n\n[1] http://tastboard/test/firmware.FpFlashFpMcuHello",
      "revId": "e6381a863a14c798cab951c7885da052c84183f0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}