{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "72b334f0_e599485c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-09T18:54:49Z",
      "side": 1,
      "message": "Care to review? I got a little bored",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82dfb0a4_f28f4b82",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-09T20:13:35Z",
      "side": 1,
      "message": "nit: \"got %q, want %q\"",
      "range": {
        "startLine": 60,
        "startChar": 47,
        "endLine": 60,
        "endChar": 55
      },
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c3caeeb_35273c90",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-09T21:07:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82dfb0a4_f28f4b82",
      "range": {
        "startLine": 60,
        "startChar": 47,
        "endLine": 60,
        "endChar": 55
      },
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89956ce0_378bb4f3",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-09T20:13:35Z",
      "side": 1,
      "message": "File a bug for this if you think it\u0027s actually going to get taken care of, or just leave this out... it\u0027ll probably get forgotten otherwise\n\n(Didn\u0027t we have remotely-controlled power modules in the lab for power tests at some point? What happened to those?)",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08497beb_6af88326",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-09T21:07:02Z",
      "side": 1,
      "message": "\u003e File a bug for this if you think it\u0027s actually going to get taken care of, or just leave this out... it\u0027ll probably get forgotten otherwise\n\nSure. I was on the fence about this.\n\n\u003e (Didn\u0027t we have remotely-controlled power modules in the lab for power tests at some point? What happened to those?)\n\nI think some DUTs may have them. I recall dbasehore complaining that he couldn\u0027t get traction on having them installed uniformly, so it was hard to target tests to anything like that. It might be a little easier today, if they still exist.\n\nI\u0027m curious if there are other ways though. Especially with modern USB-C Servo, it feels like it might be possible to do this via servo, but then, I\u0027m not sure that\u0027s very reliable these days.\n\nI guess it could also work if we taught powerd to fake power states. (Does this feature exist?)",
      "parentUuid": "89956ce0_378bb4f3",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17a3df89_58c47b3e",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-09T21:19:14Z",
      "side": 1,
      "message": "I think servo might have this kind of functionality? But I\u0027m not sure off the top of my head.",
      "parentUuid": "08497beb_6af88326",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e886af66_05d638b2",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1160860
      },
      "writtenOn": "2021-09-09T21:54:46Z",
      "side": 1,
      "message": "There is a way to force EC to discharge. \n\nI don\u0027t know if there is promise that there is a type C servo / remotely-controlled power module on every device...",
      "parentUuid": "17a3df89_58c47b3e",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ca4c140_04b49752",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-10T16:29:14Z",
      "side": 1,
      "message": "\u003e There is a way to force EC to discharge. \n\nIs there a reliable way to control that via tests? Do we have support in Autotest or Tast? Especially if it\u0027s not currently reliable (or relied on), I\u0027m not all that interested in trying to stabilize something like that in the context of this test.",
      "parentUuid": "e886af66_05d638b2",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d7e556a_f67c81ee",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1104794
      },
      "writtenOn": "2021-09-10T17:27:16Z",
      "side": 1,
      "message": "Autotest has force_discharge_utils https://chromium.googlesource.com/chromiumos/third_party/autotest/+/HEAD/client/cros/power/force_discharge_utils.py",
      "parentUuid": "4ca4c140_04b49752",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "efd8d660_42ff9e10",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-14T21:53:02Z",
      "side": 1,
      "message": "Thanks! It looks like only 2 tests actually use that, and those 2 are very much not reliable in the lab: http://shortn/_6PBT84sFE6\n\nOn first glance, those problems don\u0027t look like a force_discharge_utils problem, but it makes it impossible to evaluate the real flake.\n\nI think I\u0027ll just go with the current situation for now, because reliable 90% coverage is better than unreliable 100% coverage IMO. Also, I don\u0027t really have the time right now.",
      "parentUuid": "7d7e556a_f67c81ee",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "341a9ff5_b81c42d8",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1104794
      },
      "writtenOn": "2021-09-14T22:03:15Z",
      "side": 1,
      "message": "\u003e It looks like only 2 tests actually use that, \n\nNo. It is used in power_test base class. (Only the two tests you found don\u0027t extend from this base class) \n\nAll power tests can pass force_discharge argument and use this util. Example is power_Idle.default which is very stable in the lab.\n\nhttps://chromium.googlesource.com/chromiumos/third_party/autotest/+/HEAD/client/cros/power/power_test.py#67",
      "parentUuid": "efd8d660_42ff9e10",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d0035a5_06731ef8",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1104794
      },
      "writtenOn": "2021-09-14T22:04:32Z",
      "side": 1,
      "message": "\u003e Also, I don\u0027t really have the time right now.\n\nTotally fine with the current CL as is.",
      "parentUuid": "341a9ff5_b81c42d8",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91ee345a_16c94317",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-14T22:44:53Z",
      "side": 1,
      "message": "Ah, good point. But do other tests actually _rely_ on that though? The base class doesn\u0027t assert on any particular value for _force_discharge_success. So it\u0027s up to each test to decide how to respond. I didn\u0027t read far enough into every test to see if they care whether the operation succeeded or not.\n\n\u003e Totally fine with the current CL as is.\n\nAck. Thanks for looking.",
      "parentUuid": "8d0035a5_06731ef8",
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2871dfed_a13c2b0e",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 93,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-09-09T20:13:35Z",
      "side": 1,
      "message": "nit: \"got %q, want %q\"",
      "range": {
        "startLine": 93,
        "startChar": 61,
        "endLine": 93,
        "endChar": 69
      },
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "676b0a6a_2dedf6a3",
        "filename": "src/chromiumos/tast/local/bundles/cros/power/cpufreq_conf.go",
        "patchSetId": 3
      },
      "lineNbr": 93,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-09-09T21:07:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2871dfed_a13c2b0e",
      "range": {
        "startLine": 93,
        "startChar": 61,
        "endLine": 93,
        "endChar": 69
      },
      "revId": "f48c5da6ef6036d9dfbeb203a16243d258d1ad1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}