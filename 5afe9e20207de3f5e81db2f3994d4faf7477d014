{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3746bf88_2837b2f2",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-15T19:03:54Z",
      "side": 1,
      "message": "Just s.Fatalf(..) is sufficient.",
      "range": {
        "startLine": 43,
        "startChar": 3,
        "endLine": 44,
        "endChar": 9
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12d29ab9_ac86b6ea",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-15T19:23:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3746bf88_2837b2f2",
      "range": {
        "startLine": 43,
        "startChar": 3,
        "endLine": 44,
        "endChar": 9
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12045ca9_44c5ca35",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-15T19:03:54Z",
      "side": 1,
      "message": "Do you still need this?",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05500b8c_f74a6472",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-15T19:23:57Z",
      "side": 1,
      "message": "I think it would be good to check that there exists at least one usb port link per each typec port. If we do not have this, I think the test can still pass if no symlinks exist in any typec conn.",
      "parentUuid": "12045ca9_44c5ca35",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a505e2a7_3e76a4f2",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-15T19:29:07Z",
      "side": 1,
      "message": "What I meant to say is:\n\nShouldn\u0027t you return immediately with true (i.e `nil`) if checkUsbPortDir() returns nil?\n\nI don\u0027t see the use in keeping foundUsbPort if it\u0027s value is going to keep getting over-writte (and it is only set to true within the for loop).",
      "parentUuid": "05500b8c_f74a6472",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9a5cd046_8cb74632",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-15T21:42:11Z",
      "side": 1,
      "message": "If we return immediately when checkUsbPortDir() returns nil, that would check just one usb port out of 3 (usb2, usb3.x, usb4). I think we can check all usb ports, would that sound unnecessary?",
      "parentUuid": "a505e2a7_3e76a4f2",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac65e946_aec27952",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-15T21:45:11Z",
      "side": 1,
      "message": "Well, the problem is, even if you check just the first port, if it leads to `checkUsbPortDir` returns nil, that sets `foundUsbPortDir` to true, so it doesn\u0027t matter what the next iterations return.",
      "parentUuid": "9a5cd046_8cb74632",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edb51a22_01dd1e13",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-15T22:02:46Z",
      "side": 1,
      "message": "Sorry I am not fully understanding.\n\nSo for example, lets say there are 2 usb ports in typec connector: usb2-port0 and usb3-port0. In the first iteration, if usb2-port0 is a valid symlink to a usb port and has a symlink back to typec conn, `checkUsbPortDir` would return nil and `foundUsbPortDir` would set true. In the second iteration, if `usb3-port0` is not a valid symlink to a usb port, I think `checkUsbPortDir` would return an error and the whole function `checkTypecPortDir` would return an error regardless of `foundUsbPortDir` value.\n\nSo, `foundUsbPortDir` would only be used for checking that there is at least one usb port linked to a typec conn.\n\nWould there be something I am missing? Sorry but can you clarify one more time?",
      "parentUuid": "ac65e946_aec27952",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ce65b579_8ae07d5d",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-16T01:25:31Z",
      "side": 1,
      "message": "The minute `checkUsbPortDir` returns an error, you return an error from checkTypecPortDir(). Concordantly, if you\u0027ve gotten through all iterations of checkUsbPortDir() without an error, that means your check succeeded. So `foundUsbPortDir` is redundant.",
      "parentUuid": "edb51a22_01dd1e13",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "273dcbbd_1e04a83a",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 73,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-22T19:46:13Z",
      "side": 1,
      "message": "Discussed offline. Using `usbPorts` to check if there is at least one USB port found. (instead of `foundUsbPortDir`)",
      "parentUuid": "ce65b579_8ae07d5d",
      "range": {
        "startLine": 73,
        "startChar": 2,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dca495d4_fff887e7",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 89,
      "author": {
        "id": 1181774
      },
      "writtenOn": "2022-06-15T19:03:54Z",
      "side": 1,
      "message": "Where is this coming from?\n\nCan you add a comment explaining how this would work.\n\nRegexs are hard to translate/parse to a new reader, so example(s) would help.",
      "range": {
        "startLine": 89,
        "startChar": 35,
        "endLine": 89,
        "endChar": 41
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e5f9870_ddc908e0",
        "filename": "src/chromiumos/tast/local/bundles/cros/typec/symlink_to_usb.go",
        "patchSetId": 16
      },
      "lineNbr": 89,
      "author": {
        "id": 1525977
      },
      "writtenOn": "2022-06-15T19:23:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dca495d4_fff887e7",
      "range": {
        "startLine": 89,
        "startChar": 35,
        "endLine": 89,
        "endChar": 41
      },
      "revId": "5afe9e20207de3f5e81db2f3994d4faf7477d014",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}