{
  "comments": [
    {
      "key": {
        "uuid": "6322a29f_35e378a6",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T22:36:31Z",
      "side": 1,
      "message": "May want to factor out a function to parse the platform name from board.",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ad1d229_96b1a4be",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-18T23:18:57Z",
      "side": 1,
      "message": "Good idea, will do.",
      "parentUuid": "6322a29f_35e378a6",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3cecd5e_88ac8a28",
        "filename": "src/chromiumos/tast/remote/bundles/cros/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-19T20:55:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5ad1d229_96b1a4be",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3d4da47a_88ade44e",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T22:36:31Z",
      "side": 1,
      "message": "In the existing autotest code, the models serves as a lookup to override values, but is not included in the constructed config: \nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/master:src/third_party/autotest/files/server/cros/faft/utils/config.py;l\u003d110\n\nIf we want to retain the model information, it will be better to have a \"Model\" field that is populated according to the provided model and not directly from json.",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e542f22_233030f6",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-18T23:18:57Z",
      "side": 1,
      "message": "It\u0027s true that models isn\u0027t included in the constructed config, but IMO it is not a big deal that we wind up including it here. I do not expect anyone to use it.\n\n\u003e If we want to retain the model information, it will be better to have a \"Model\" field that is populated according to the provided model and not directly from json.\n\nI\u0027m afraid I don\u0027t understand yet. Could you please explain more about what you meant by this?",
      "parentUuid": "3d4da47a_88ade44e",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e5e3076_41f76eb1",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T23:41:15Z",
      "side": 1,
      "message": "I mean just set the Model field to the model passed into NewConfig.  If no one\u0027s using it, we can just drop it or at least make it non-public.",
      "parentUuid": "0e542f22_233030f6",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "057c4d67_6b6100b1",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-19T20:55:43Z",
      "side": 1,
      "message": "Ah, I see. This contains much different than just the model name passed into NewConfig -- this is loading the model-based override values, like in Autotest. We need to include it in order to find and parse the override that matches the provided model.\n\nI tried to make the field non-public (i.e. changing to \"models\"). However, json.Unmarshal is unable to set values of an unexported field. With that change, cfg.models was always unset, so the TestNewConfigModelOverride test failed. So, the latest patch set keeps Models public.",
      "parentUuid": "4e5e3076_41f76eb1",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf619691_fa47acca",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-19T21:34:09Z",
      "side": 1,
      "message": "Can hide the Models field by using a private struct to unmarshal, but probably not worth the effort.",
      "parentUuid": "057c4d67_6b6100b1",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7e6936d_311b65a9",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T22:36:31Z",
      "side": 1,
      "message": "The parsed variable should still be named platform.",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd4daca9_4e30e526",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-18T23:18:57Z",
      "side": 1,
      "message": "I disagree. \"Platform\" is an ambiguous term: it can mean the reference board, the board, the board-variant combination, or the complete combination of reference/board/variant/model. In this CL, I have avoided using the word \"platform\" wherever possible in order to avoid that ambiguity, with two deliberate exceptions:\n1. The RPC is named \"Platform\" because it returns both the board-name and the model-name; i.e., it fully describes the DUT platform.\n2. In L203-219 of this file (immediately below), I preferred the ambiguity of \"platform\" so that it could refer to a board, a parent (i.e. a reference board), or even defaults.\n\nIn this case, however, we are only expecting to receive the board name as an argument. Because this is an argument that test-writers will interact with, it is better to be specific. The fact that board_variant is allowed is an unfortunate fact that results from the way /etc/lsb_release reports the board name.",
      "parentUuid": "e7e6936d_311b65a9",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95ced4db_58375969",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T23:41:15Z",
      "side": 1,
      "message": "My reasoning was that the code here is getting the first part of the board, so the first part should be named something other than board.  Secondly, it corresponds to the lowest level of inheritance in the hierarchy of platform json files.  If platform is ambiguous, maybe call it platformFile or something?",
      "parentUuid": "bd4daca9_4e30e526",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1005f929_a9e677ae",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-19T20:55:43Z",
      "side": 1,
      "message": "I _think_ that the latest patch set addresses this, but let me know if there are further changes you would recommend.",
      "parentUuid": "95ced4db_58375969",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cfe8f71_a2b3b377",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-19T21:34:09Z",
      "side": 1,
      "message": "lg",
      "parentUuid": "1005f929_a9e677ae",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ee87a92_d954db6c",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 231,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T22:36:31Z",
      "side": 1,
      "message": "While this will work with current config json files, technically it is possible for a parent and child to both contain a model override but on different parameters, then doing this unmarhsal here will lose the override in the parent.",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b6a7a68_df13eb0e",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 231,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-18T23:18:57Z",
      "side": 1,
      "message": "Ack, that is technically possible and good to be aware of. However, I don\u0027t think we need to account for that scenario right now. Autotest doesn\u0027t allow for parents to define models, and AFAICT there is no scenario where both a parent and a board config would define models. We would need to do some design work to determine what that means, and how to reconcile differences between the two.\n\nThe purpose of this CL is to reach feature-parity with Autotest. So, let\u0027s punt this potential feature until a need ever comes up. Then we can give it the proper design, and implement it in both frameworks.",
      "parentUuid": "9ee87a92_d954db6c",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d98ca82_c49228bf",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 231,
      "author": {
        "id": 1266306
      },
      "writtenOn": "2020-05-18T23:41:15Z",
      "side": 1,
      "message": "Yea agree, maybe put in a comment that says only non-parent configs can have models.",
      "parentUuid": "8b6a7a68_df13eb0e",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2e18957_39d6f36c",
        "filename": "src/chromiumos/tast/remote/firmware/config.go",
        "patchSetId": 4
      },
      "lineNbr": 231,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2020-05-19T20:55:43Z",
      "side": 1,
      "message": "Done, and also creating a CL to clarify this in fw-testing-configs \u003e DEFAULTS.json \u003e models.DOC.",
      "parentUuid": "9d98ca82_c49228bf",
      "revId": "4a78bbc796ecb29f3a2098fb933c0b2d75079f7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}