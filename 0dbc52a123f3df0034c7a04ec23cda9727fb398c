{
  "comments": [
    {
      "key": {
        "uuid": "b6c3e15b_7385746b",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-18T15:53:33Z",
      "side": 1,
      "message": "GPU\n\nhttps://github.com/golang/go/wiki/CodeReviewComments#initialisms",
      "range": {
        "startLine": 22,
        "startChar": 8,
        "endLine": 22,
        "endChar": 11
      },
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b81da808_a760079c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-03-19T10:03:20Z",
      "side": 1,
      "message": "This wouldn\u0027t work on non-arcvm DUTs. Could you add software dependency?",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54cde16c_a771d33e",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1299948
      },
      "writtenOn": "2019-03-19T10:26:01Z",
      "side": 1,
      "message": "Is there a reason this wouldn\u0027t work on non-arcvm? I was under the impression it would and that the D-Bus service would be started. This would be useful for testing on ARC++ devices since it uses the same mojo connection.",
      "parentUuid": "b81da808_a760079c",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57b22a07_289d0821",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-03-19T16:43:33Z",
      "side": 1,
      "message": "It depends on just the current implementation details, and I\u0027d strongly recommend to avoid such dependency.\nSpecifically, IIUC, your design assumes that the ARCVM is running when libvda is used.\nIf you\u0027d get rid of the assumption, some parts should be revisited, IMHO.\nSpecifically, e.g., Profile handling in Chrome.\n\nAlso, --enable-arcvm is not expected usage on non-ARCVM supported boards.\nRather it is a flag to tell whether the board is supporting ARCVM.\nIt controls not only D-Bus service, but also ArcSession related code.\nAbusing the flag would increase the maintenance cost, which should be avoided,\nbecause it would create unrealistic situations.",
      "parentUuid": "54cde16c_a771d33e",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fbbff94_7fccae03",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-18T15:53:33Z",
      "side": 1,
      "message": "is logging in to chrome actually necessary? it looks like a unit test binary is just being executed. does the test actually establish a connection to chrome via mojo (which i thought wasn\u0027t supported for processes that aren\u0027t started by the mojo service manager)?",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "766515e7_b5364157",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T16:36:45Z",
      "side": 1,
      "message": "Yes, it\u0027s necessary. This binary tests establish a connection to mojom::VideoDecodeAccelerator and exercises the connection.\nIIUC, CL:1478669 (Chrome-side) and CL:1469082 (ChromeOS-side) will make it possible to establish such mojo connection.\n\nAlex, could you add more comments about the following?\n* What is libvda\n* How libvda_unittest works and what it exercises\n* Why Chrome is needed\n\nSince libvda_unittest is quite different from other video binary tests, we should explain them.",
      "parentUuid": "2fbbff94_7fccae03",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8b53ddc_0b6a79c0",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-03-19T10:03:20Z",
      "side": 1,
      "message": "huge nit: Why \"Chrome-login\" is needed, is important, I think.",
      "parentUuid": "766515e7_b5364157",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d647de07_cf550da4",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda/libvda.go",
        "patchSetId": 7
      },
      "lineNbr": 41,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-03-19T10:03:20Z",
      "side": 1,
      "message": "Does it work for you to share the framework/library to run gtest?\n\ncf) https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/1517483\n\nNote: bintest features will be merged into it.\n\nFYI: the CL itself is blocked by some other CLs which are in CQ already. Will be landed sometime soone.",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "576685e6_6aed4cdc",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T05:49:53Z",
      "side": 1,
      "message": "How about creating a separate test exercising only fake implementation?\n\nIn that test, you can run a binary with \"--gtest_filter\u003d*Fake\".\nOn the other hand, the other tests can use \"--gtest_filter\u003d-*Fake\" to exclude fake implementation tests.",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00b2854b_4347cc29",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1299948
      },
      "writtenOn": "2019-03-18T05:53:07Z",
      "side": 1,
      "message": "Is it necessary to create a tast test for running the fake implementation? The fake implementation is self contained and doesn\u0027t really integrate with any other component. I don\u0027t really know the guidelines for when to add a tast test. Is there a doc somewhere?",
      "parentUuid": "576685e6_6aed4cdc",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b2a7676_721a43f2",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T06:09:56Z",
      "side": 1,
      "message": "\u003e Is it necessary to create a tast test for running the fake implementation?\nOtherwise, nobody runs fake implementation test cases, do they?\n\nSince that test cases are running in all three tests in the current patch, it would be okay to keep it. But, I wonder if it makes sense to have a separate test to avoid running same test cases multiple times.\n\n\u003e I don\u0027t really know the guidelines for when to add a tast test. Is there a doc somewhere?\n\nAFAIK, we don\u0027t have. But, I think tests don\u0027t have to be integration tests. Actually, some tests don\u0027t have \"chrome_login\" software dependencies.",
      "parentUuid": "00b2854b_4347cc29",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c1817ac_0076ab82",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T06:11:52Z",
      "side": 1,
      "message": "oops, the second line shouldn\u0027t be included in the quotation",
      "parentUuid": "3b2a7676_721a43f2",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56d9b5ad_284a4415",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1299948
      },
      "writtenOn": "2019-03-18T07:03:49Z",
      "side": 1,
      "message": "Ah ok. Are these tast tests executed automatically by some testing infrastructure? I think atm it would be executed in the testing phase when emerged (although you need the test feature flag), since the unit test has been added to ebuild file.. Can this be done in a separate CL if necessary?",
      "parentUuid": "8c1817ac_0076ab82",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8eb774e1_8c8b3a08",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T08:45:25Z",
      "side": 1,
      "message": "\u003e Are these tast tests executed automatically by some testing infrastructure?\n\nYes. All Tast tests will be run automatically in Chrome OS infra unless it has \"disabled\" attribute. For example, you can see \"tast.video\" tests on stainless [1]. See [2] or go/tast-infra for more detail if you\u0027re interested.\n\n\u003e I think atm it would be executed in the testing phase when emerged\n\nOkay, then,\n* Test cases using fake implementation are intended to run when running emerge.\n* Test cases using GAVDA should be wrapped by Tast and be used in Chrome OS infra and local DUTs.\n\nIs this right? Then, I\u0027m okay to keep this code.\nBut, in this case, you need to exclude GAVDA cases in emerge-side, I guess.\n\n[1] https://stainless.corp.google.com/search?view\u003dmatrix\u0026row\u003dmodel\u0026col\u003dbuild\u0026first_date\u003d2019-03-12\u0026last_date\u003d2019-03-18\u0026test\u003dtast.video\u0026exclude_cts\u003dfalse\u0026exclude_not_run\u003dfalse\u0026exclude_non_release\u003dtrue\u0026exclude_au\u003dtrue\u0026exclude_acts\u003dtrue\u0026exclude_retried\u003dtrue\u0026exclude_non_production\u003dfalse\n[2] https://chrome-internal.googlesource.com/chromeos/chromeos-admin/+/master/doc/tast_add_test.md#step-1_add-a-new-tast-test-with-attribute",
      "parentUuid": "56d9b5ad_284a4415",
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a8c07ce_1d4145a0",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-18T15:53:33Z",
      "side": 1,
      "message": "is support only present on system images that include android support?",
      "range": {
        "startLine": 22,
        "startChar": 25,
        "endLine": 22,
        "endChar": 34
      },
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c01bdeac_4c115b4c",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/libvda_decode_h264.go",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-03-18T16:36:45Z",
      "side": 1,
      "message": "Yes. Actually, libvda is a library for ARCVM. See go/libvda or go/arcvm-video for more detail if you\u0027re interested.\n\nAlex, could you add the reason why \"android\" is needed here?",
      "parentUuid": "8a8c07ce_1d4145a0",
      "range": {
        "startLine": 22,
        "startChar": 25,
        "endLine": 22,
        "endChar": 34
      },
      "revId": "0dbc52a123f3df0034c7a04ec23cda9727fb398c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}