{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bb4f9ee5_ba8673c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1537587
      },
      "writtenOn": "2022-07-12T06:36:21Z",
      "side": 1,
      "message": "Please take a look at the modified policy.UserAvatarImage test. Thanks!",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a67c932_21ce32b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1373635
      },
      "writtenOn": "2022-07-12T09:08:50Z",
      "side": 1,
      "message": "This CL tests only when the Personalization Hub flag is turned on, but what about the case when it is off?",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e58c8cc_86a42d79",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1537587
      },
      "writtenOn": "2022-07-12T21:58:32Z",
      "side": 1,
      "message": "The test will fail. But since we have turned the flag default on since M104, fixture `ChromePolicyLoggedIn` will have personalization hub enabled.",
      "parentUuid": "9a67c932_21ce32b9",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80caf2d8_b1f1914a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1373635
      },
      "writtenOn": "2022-07-13T10:39:09Z",
      "side": 1,
      "message": "If an admin chooses to disable this flag, don\u0027t you think we need to test that flow as well (that is to make sure the policy works as expected in that case)?",
      "parentUuid": "1e58c8cc_86a42d79",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8652915_88370480",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1537587
      },
      "writtenOn": "2022-07-13T18:38:38Z",
      "side": 1,
      "message": "It makes sense to me to keep the old flow, but I\u0027m not sure which one is the best practice to do that:\n1. `if (flag_is_off) /*run old flow*/ else /*run new flow*/`\n2. Keeping both versions, and let the configuration to determine which test to run based on the state of the feature flag.\nDo you have any suggestions?",
      "parentUuid": "80caf2d8_b1f1914a",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2636bf82_8e83fad5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1429709
      },
      "writtenOn": "2022-07-14T17:29:16Z",
      "side": 1,
      "message": "I suggest running both versions of the test all the time, maybe even keeping them as separate tests. You can rename the old file and keep it around",
      "parentUuid": "d8652915_88370480",
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e80d910d_6e21794d",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/user_avatar_image.go",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1373635
      },
      "writtenOn": "2022-07-12T09:08:50Z",
      "side": 1,
      "message": "I don\u0027t have enough context about how the Personalization Hub handles avatars but choosing a fixed avatar used to be buggy in the past because the set of avatar is not fixed and can be changed over time. That\u0027s why in the current version of the code (before this CL), we try to pick an image from the visible set of avatars.\n\nSo the question is, can you guarantee that the set of avatars is fixed?",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 40
      },
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8eed6cf8_2e8fefec",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/user_avatar_image.go",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1429709
      },
      "writtenOn": "2022-07-12T16:32:47Z",
      "side": 1,
      "message": "Avatars get changed on a slow cycle (less than once per year now). But we should be able to find an avatar and get the name if we select something like Nth avatar in the list and read the name attribute.",
      "parentUuid": "e80d910d_6e21794d",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 40
      },
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1969b801_90ff6f01",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/user_avatar_image.go",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1537587
      },
      "writtenOn": "2022-07-12T21:58:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8eed6cf8_2e8fefec",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 40
      },
      "revId": "c66860cad17075c0518a8a945e2f038d3b7fed33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}