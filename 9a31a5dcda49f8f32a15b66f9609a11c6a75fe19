{
  "comments": [
    {
      "key": {
        "uuid": "f7580bb4_d9378dbd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2020-09-08T16:53:21Z",
      "side": 1,
      "message": "Added mwarton@google.com instead of his chromium.org account because his chromium account is inactive.",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23078ce9_9dc4fa96",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/vmc_start.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1370239
      },
      "writtenOn": "2020-09-10T00:47:58Z",
      "side": 1,
      "message": "Which VM is this creating?  Where is it getting the image from?  If it is using Termina, can you please make sure it is using the Termina image under test?  ie the one in the artifacts.  There is code in vm/images.go to help locate and extract these images if necessary.\n\nPerhaps you can make a precondition to extract the images, so that it doesn\u0027t need to be repeated for both this and the other test.",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e496483_a63ec908",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/vmc_start.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2020-09-11T10:43:44Z",
      "side": 1,
      "message": "I found that it downloads a VM image by \u0027org.chromium.ComponentUpdaterService\u0027 method here:\nhttps://source.corp.google.com/chromeos_public/src/platform2/vm_tools/crostini_client/methods.rs;rcl\u003da790f84930c1cef40e49c2445dc750663a5652b8;l\u003d555\n\nThe method creates /run/imageloader/cros-termina/\u003cversion\u003e/ if it doesn\u0027t exist. \n\nSo, I think we don\u0027t need to push crostini.ImageArtifact when running tests. I removed the Params field. Does it make sense?",
      "parentUuid": "23078ce9_9dc4fa96",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa99206f_6f853bea",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/vmc_start.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2020-09-11T14:18:37Z",
      "side": 1,
      "message": "On second thought, I realized precondition is needed to clean up `/run/imageloader/cros-termina/*/` after tests.\nI suspect existing preconditions are enough. Although we don\u0027t need some setup for vmc technically, it\u0027d be okay to have it. \nWDYT?",
      "parentUuid": "6e496483_a63ec908",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ea853c9_d5b2843c",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/vmc_start.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1370239
      },
      "writtenOn": "2020-09-14T00:05:40Z",
      "side": 1,
      "message": "The actual issue is that we should test the correct image.  There is even the potential that the component updater won\u0027t work if it has been affected by the previous tests in the same run.\n\nIt is also confusing as you are following the standard artifact/download split of the tests, but not actually loading the artifact or download Termina.\n\nThe existing preconditions get the appropriate image in this function: https://osscs.corp.google.com/chromiumos/chromiumos/codesearch/+/master:src/platform/tast-tests/src/chromiumos/tast/local/crostini/ui/installer.go;l\u003d189?q\u003dinstaller.go\n\nThen they modify component service to use the correct termina here:\nhttps://osscs.corp.google.com/chromiumos/chromiumos/codesearch/+/master:src/platform/tast-tests/src/chromiumos/tast/local/crostini/ui/installer.go;l\u003d259?q\u003dinstaller.go\n\nIf you need the container, you will also need to start the fake lxd server (a few lines above).\n\nI would strongly prefer that you use the correct images here, otherwise it will confuse anyone trying to debug failures in this test that it is not using the same image that other similarly named tests use.",
      "parentUuid": "aa99206f_6f853bea",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d81ee7b_205fed8f",
        "filename": "src/chromiumos/tast/local/bundles/cros/crostini/vmc_start.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2020-09-17T10:45:06Z",
      "side": 1,
      "message": "Hmm, since the test is using existing preconditions, can\u0027t we assume that a correct image is loaded before the test body VmcStart() is executed?\nSince `InstallCrostini` function, in which `prepareImages()` is called, is called in `Prepare()` function for the preconditions [1], it will be run before each test function according to [2].\n\nSo, I doubt we need to do something special for them in this test. Am I misunderstanding something?\n\n\n[1] https://osscs.corp.google.com/chromiumos/chromiumos/codesearch/+/master:src/platform/tast-tests/src/chromiumos/tast/local/crostini/pre.go;drc\u003d63e57ff22a44b2eed3bf8f48a233bd53e06c781a;l\u003d395\n[2] https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#Preconditions",
      "parentUuid": "2ea853c9_d5b2843c",
      "revId": "9a31a5dcda49f8f32a15b66f9609a11c6a75fe19",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}