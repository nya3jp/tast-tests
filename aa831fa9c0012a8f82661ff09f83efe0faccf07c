{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a8632fe6_bcb68b6c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "LGTM for WiFi, modulo a few small things",
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3477c27d_0cdb682e",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 51,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "Is this actually necessary? You never intentionally changed BT status, so unless you\u0027ve really b0rked the driver/firmware (in which case I doubt this will fix it), this won\u0027t really do anything.",
      "range": {
        "startLine": 48,
        "startChar": 0,
        "endLine": 51,
        "endChar": 3
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9fa3200e_df929010",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 51,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2020-10-05T22:36:24Z",
      "side": 1,
      "message": "Done.\n\nI think most of the time, this is unnecessary. I do think that if I fail the \"Assert bluetooth is up\" assert, it\u0027s possible, outside of the driver being totally borked, for the bluetooth device to be down because another test wasn\u0027t cleaned up properly and the device was left in a bad, but not irrecoverable state (i.e bluetooth was powered down).\n\nPerhaps I should enable bluetooth first and then assert it\u0027s up to make sure that I at least tried to bring the device into a good state if it was bad?\n\nI\u0027ll remove it now to keep the test as lean as possible.",
      "parentUuid": "3477c27d_0cdb682e",
      "range": {
        "startLine": 48,
        "startChar": 0,
        "endLine": 51,
        "endChar": 3
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2550dc98_18b153cf",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 56,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "What\u0027s this for? Just as an extra \"just in case\" cleanup step? AFAICT, you\u0027re cleaning things up just fine without this.",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 3
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c665186_277fd7cd",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 56,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2020-10-05T22:36:24Z",
      "side": 1,
      "message": "I think I can remove this. I already do one reboot anyways and the only setting that needs to be changed is whether the technology is enabled.",
      "parentUuid": "2550dc98_18b153cf",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 3
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c61271fc_5a8e0450",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 133,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "Question for Bluetooth folks: is this good enough of a test for you? For WiFi, there are plenty of ways in which the interface might claim to be Powered yet be completely inoperable, which is why it\u0027s good to have pieces like line 83, where we connect to an AP. I\u0027m not as familiar with common Bluetooth failure modes. Would it be useful to, for instance, make sure a BT scan succeeds?",
      "range": {
        "startLine": 133,
        "startChar": 30,
        "endLine": 133,
        "endChar": 48
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65d8d5a9_616d2d30",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 133,
      "author": {
        "id": 1365249
      },
      "writtenOn": "2020-10-06T21:49:23Z",
      "side": 1,
      "message": "Yes, running a scan on and scan off once and confirming that there were no dbus errors would be an improvement and probably a good test to run here.\n\nI\u0027m not sure what the tast library for doing this looks like but here\u0027s a similar test in autotest: https://source.chromium.org/chromiumos/chromiumos/codesearch/+/master:src/third_party/autotest/files/server/cros/bluetooth/bluetooth_dbus_api_tests.py;l\u003d182\n\nHowever, just checking that an adapter exists and it is powered on would likely have caught the issue that necessitated this. For example, we recently had a regression where no controller was exposed because of the firmware failing to complete initialization. This would have failed immediately since no adapters were found.",
      "parentUuid": "c61271fc_5a8e0450",
      "range": {
        "startLine": 133,
        "startChar": 30,
        "endLine": 133,
        "endChar": 48
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ca23603_ba5ed443",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/persistence_bluetooth_sans_wifi.go",
        "patchSetId": 12
      },
      "lineNbr": 133,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2020-10-06T22:10:49Z",
      "side": 1,
      "message": "There is no current discovery/scan support for bluetooth in tast so far. AFAIK, this is the only tast bluez wrapper: https://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bluetooth/bluez.go?q\u003dbluez.go\u0026sq\u003dpackage:chromeos_public .\n\nIf we need to, I think supporting scan/discovery is just a matter of implementing the correct dbus calls. However, I don\u0027t think we have a good way of validating/testing the integrity of the scan in tast.\n\nI think if the goal of the cl is to prevent the regression from happening in the future and on other platforms, I think what we have is sufficient.",
      "parentUuid": "65d8d5a9_616d2d30",
      "range": {
        "startLine": 133,
        "startChar": 30,
        "endLine": 133,
        "endChar": 48
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb0ffec9_eaa3108b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/wifiutil/ping_util.go",
        "patchSetId": 12
      },
      "lineNbr": 17,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "I\u0027m curious, what\u0027s the idea on making this a function in a separate utility package, rather than a TestFixture function? Is the idea that this more like a test-helper, composed only of otherwise-public test functionality? Just curious about general code-structure decisions, no real need to change this.",
      "range": {
        "startLine": 17,
        "startChar": 5,
        "endLine": 17,
        "endChar": 22
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c09ddecd_adf32e82",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/wifiutil/ping_util.go",
        "patchSetId": 12
      },
      "lineNbr": 17,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2020-10-05T22:36:24Z",
      "side": 1,
      "message": "I originally wanted created this utility to purely remove code reuse in the wifi package for my tests. Originally, I thought it would be better to reduce the amount of non-primitives in TestFixture, but after taking another look at the file, maybe this utility class should be absorbed inside? I\u0027ll keep it as is for now.",
      "parentUuid": "cb0ffec9_eaa3108b",
      "range": {
        "startLine": 17,
        "startChar": 5,
        "endLine": 17,
        "endChar": 22
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "61a9b0ce_d5eea87d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/wifi/wifiutil/ping_util.go",
        "patchSetId": 12
      },
      "lineNbr": 17,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T22:52:43Z",
      "side": 1,
      "message": "*shrug* seems fine either way, I suppose",
      "parentUuid": "c09ddecd_adf32e82",
      "range": {
        "startLine": 17,
        "startChar": 5,
        "endLine": 17,
        "endChar": 22
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "937286b1_3d8ac837",
        "filename": "src/chromiumos/tast/services/cros/network/wifi_service.proto",
        "patchSetId": 12
      },
      "lineNbr": 357,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T21:40:07Z",
      "side": 1,
      "message": "nit: \"Status\" feels a bit generic, and we already have at least two other terms for this: Enabled and Powered. Would \"GetWifiEnabled{Request,Response}\" make sense? Or change the \u0027status\u0027 to \u0027enabled\u0027? Or both?",
      "range": {
        "startLine": 357,
        "startChar": 15,
        "endLine": 357,
        "endChar": 21
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "470ec031_c1358946",
        "filename": "src/chromiumos/tast/services/cros/network/wifi_service.proto",
        "patchSetId": 12
      },
      "lineNbr": 357,
      "author": {
        "id": 1432127
      },
      "writtenOn": "2020-10-05T22:36:24Z",
      "side": 1,
      "message": "Done. I changed the bluetooth proto to use Powered/powered as well. In the actual test, I think it\u0027s fine to use \u0027status\u0027 in the error logs.",
      "parentUuid": "937286b1_3d8ac837",
      "range": {
        "startLine": 357,
        "startChar": 15,
        "endLine": 357,
        "endChar": 21
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f2cb072_d8e95a91",
        "filename": "src/chromiumos/tast/services/cros/network/wifi_service.proto",
        "patchSetId": 12
      },
      "lineNbr": 357,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-10-05T22:52:43Z",
      "side": 1,
      "message": "For the record, the \"powered\" I was talking about was for shill too (see platform2/shill/doc/device-api.txt -- Powered). It\u0027s roughly equivalent to \"Enabled\".",
      "parentUuid": "470ec031_c1358946",
      "range": {
        "startLine": 357,
        "startChar": 15,
        "endLine": 357,
        "endChar": 21
      },
      "revId": "aa831fa9c0012a8f82661ff09f83efe0faccf07c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}