{
  "comments": [
    {
      "key": {
        "uuid": "072ff259_620cc304",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "please put these inside your test function in a single const block",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "492a0402_0cdf9bb2",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "072ff259_620cc304",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be264718_2795832f",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "please follow godoc style in comments on exported symbols\n\nhttps://blog.golang.org/godoc-documenting-go-code",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddbb1f8c_32afc213",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "I believe it now conforms to godoc. Please let me know if it is not.",
      "parentUuid": "be264718_2795832f",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14871054_b1081311",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-30T22:02:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ddbb1f8c_32afc213",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3639d967_45e16fe7",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "delete blank line",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f2c2c4b_b3f4dc30",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3639d967_45e16fe7",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05263c9e_cc1079bf",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "can you delete everything above this line? it\u0027s not clear to me why it\u0027s necessary.",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6723341e_bca2e1fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "After reading the tast writing tests documentation, it looks like I should always cleanly start the VM. This was an attempt to preserve the state of the system from before the test was run.",
      "parentUuid": "05263c9e_cc1079bf",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93e8b0e7_06a71416",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "please don\u0027t add sleeps; they lead to flakiness and/or slowness. ideally, the wilco_dtc upstart job wouldn\u0027t report that the service has started until it\u0027s actually ready. failing that, please use testing.Poll to wait for the actual condition that\u0027s needed.",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d5ba6e0_b6dada76",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 1325305
      },
      "writtenOn": "2019-05-30T14:57:00Z",
      "side": 1,
      "message": "You may need to add a post-start to your upstart config which waits until the VM is in a usable state.",
      "parentUuid": "93e8b0e7_06a71416",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2eef27d_98f1c475",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 1311094
      },
      "writtenOn": "2019-05-30T15:27:44Z",
      "side": 1,
      "message": "Similar to what Mathew did here: https://crrev.com/c/1592273/7/diagnostics/init/wilco_dtc_supportd.conf",
      "parentUuid": "3d5ba6e0_b6dada76",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f6641f4_9d4225de",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "I don\u0027t think we currently have a mechanism to know when the binaries are started. They are currently just launched, and it will take some time to know if they have crashed or not. I\u0027m working on checking if the VM has started, but it require starting a gRPC server which is difficult to do in the upstart script, but should be doable in the tast test. I\u0027ll think on it some more if there is a more robust way.",
      "parentUuid": "a2eef27d_98f1c475",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac159e0a_b81a4b66",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 1002983
      },
      "writtenOn": "2019-05-31T02:01:24Z",
      "side": 1,
      "message": "Shouldn\u0027t the binaries be connecting to some service on the host?  Can we somehow check with that service when it receives the connection?",
      "parentUuid": "8f6641f4_9d4225de",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71b3f4a6_cdb171a8",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "nit: \"process status\"",
      "range": {
        "startLine": 53,
        "startChar": 21,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89ecbc8b_75bb76e4",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71b3f4a6_cdb171a8",
      "range": {
        "startLine": 53,
        "startChar": 21,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "15a1cc49_1fcb778b",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "nit: process",
      "range": {
        "startLine": 56,
        "startChar": 15,
        "endLine": 56,
        "endChar": 21
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31b6fa26_2c4bd98e",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "15a1cc49_1fcb778b",
      "range": {
        "startLine": 56,
        "startChar": 15,
        "endLine": 56,
        "endChar": 21
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2da20156_15a54abd",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "nit: process, also please omit \u0027:\u0027\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#Formatting",
      "range": {
        "startLine": 58,
        "startChar": 13,
        "endLine": 58,
        "endChar": 19
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21e50f42_f8a013be",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2da20156_15a54abd",
      "range": {
        "startLine": 58,
        "startChar": 13,
        "endLine": 58,
        "endChar": 19
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "625eb5ca_4f3f8ee7",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "nit: process status",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 26
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b43aa897_f5df5a08",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "625eb5ca_4f3f8ee7",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 26
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "53d8bf55_3b6c67d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "SA process",
      "range": {
        "startLine": 63,
        "startChar": 11,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bca67a9_bf050044",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "53d8bf55_3b6c67d4",
      "range": {
        "startLine": 63,
        "startChar": 11,
        "endLine": 63,
        "endChar": 21
      },
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4e21b5c_625f69dd",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "is this actually needed? what happens if you just leave it running?",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "638c4f9b_57ffd1df",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "I think it makes the most sense to always stop it as another facet to the test. This was an attempt to preserve the initial state of the system.",
      "parentUuid": "d4e21b5c_625f69dd",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39caa564_1546f173",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "please just put a loop in your test function to reduce repetitive code, e.g.\n\nfor _, name :\u003d range []string{\"ddv\", \"sa\"} {\n    s.Logf(\"Checking %v process\", name)\n    cmd :\u003d testexec.CommandContext(ctx, ...)\n    cmd.Stdin \u003d ...\n    if out, err :\u003d cmd.CombinedOutput(); err !\u003d nil {\n        s.Errorf(\"%v process not found: %v\", name, err)\n    } else {\n        s.Logf(\"%v process running with PID %v\",\n            name, strings.TrimSpace(string(out)))\n    }\n}",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb908046_45736091",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "That looks much better. Thanks!",
      "parentUuid": "39caa564_1546f173",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d22d6cc7_abb7b909",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "putting these all on a single line may make it more readable:\n\n  \"vsh\", \"--cid\u003d\"+wilcoVMCID, \"--\", \"pgrep\", processName)",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5cf06a1d_f8091782",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "I agree. Done.",
      "parentUuid": "d22d6cc7_abb7b909",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1319ebfd_02aa017c",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-05-29T23:51:12Z",
      "side": 1,
      "message": "return cmd.CombinedOutput()",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccb44b57_d673d78c",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/start_sludge.go",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1304442
      },
      "writtenOn": "2019-05-30T21:35:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1319ebfd_02aa017c",
      "revId": "8fe2a2042659d454471e6459ad1c43a5d46a4605",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}