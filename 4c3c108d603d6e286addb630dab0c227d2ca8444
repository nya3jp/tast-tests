{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c7c727c3_81a219ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "Tast Shadow Review: LGTM % nits",
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae6af097_10432386",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "nit: To avoid this cleanup method becoming overly unwieldy I\u0027d prefer if you extracted this method back out (as you had before).\n\nBelow, you would add it to your list of cleanup methods as:\nfunc() error { return cleanupDisplayProcess(ctx, pid, conn, outDir) },",
      "range": {
        "startLine": 44,
        "startChar": 1,
        "endLine": 44,
        "endChar": 49
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1207a32_189de8e0",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T06:59:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae6af097_10432386",
      "range": {
        "startLine": 44,
        "startChar": 1,
        "endLine": 44,
        "endChar": 49
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57a91596_7103460d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "nit: This is getting uncomfortably long for me, consider refactoring as follows:\n\ncleanupFns :\u003d [](func() error){\n  ...\n}\n\nfor _, cleanup :\u003d range cleanupFns {\n\n}",
      "range": {
        "startLine": 75,
        "startChar": 19,
        "endLine": 75,
        "endChar": 42
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c80d765a_cb083d53",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T06:59:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "57a91596_7103460d",
      "range": {
        "startLine": 75,
        "startChar": 19,
        "endLine": 75,
        "endChar": 42
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9791e04d_dab528a1",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:16:01Z",
      "side": 1,
      "message": "Here you assume conn can be nil, but above you call conn without checking. Is there a logic error here (now that you have extracted out the cleanup, you cannot assume all elements have been initialised?)",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9096812_d5cef154",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T03:51:46Z",
      "side": 1,
      "message": "Yes, it\u0027s under assumption(together with clean up order) that the members are setup in order of |conn| \u003e |dir| \u003e |pid|. So if the |dir| is not empty string the conn must not be |nil|. |pid| not empty means |dir| and |conn| not empty. So it should be safe to not check the |conn|.",
      "parentUuid": "9791e04d_dab528a1",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e280d978_73ee9c1b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T04:30:34Z",
      "side": 1,
      "message": "Yes, but you now invoke all cleanup methods regardless of what has been initialised.\nIn this loop you invoke conn.Command first in cleanupDisplayProcess, and only later on check if conn \u003d\u003d nil.\n\nAm I missing something?",
      "parentUuid": "c9096812_d5cef154",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c062fd8_2f2281a2",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T05:22:12Z",
      "side": 1,
      "message": "But the |cleanupDisplayProcess| will check |if len(pid) \u003d\u003d 0| in its body, as the previous assumption if the |conn| is nil in |cleanupDisplayProcess| that means |pid| must be a empty string(because the |pid| require |conn| to be initialized first). So only check |pid| in |cleanupDisplayProcess| is sufficient.",
      "parentUuid": "e280d978_73ee9c1b",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83e7f897_dbbda9ff",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T05:41:37Z",
      "side": 1,
      "message": "Roger, I follow now. Thanks for clarifying ðŸ˜Š \nIf you like, it might be useful to document your assumed initialization order in the method comment for cleanup() and/or on the individual checks. (e.g. \"len(dir) !\u003d 0 implies conn !\u003d nil due to initialization order\")",
      "parentUuid": "4c062fd8_2f2281a2",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8acbc8a_c2fa94fd",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T06:59:49Z",
      "side": 1,
      "message": "Added comment at the head of |cleanup| body.",
      "parentUuid": "83e7f897_dbbda9ff",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}