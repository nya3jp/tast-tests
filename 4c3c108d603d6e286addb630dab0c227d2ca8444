{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c7c727c3_81a219ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "Tast Shadow Review: LGTM % nits",
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae6af097_10432386",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "nit: To avoid this cleanup method becoming overly unwieldy I\u0027d prefer if you extracted this method back out (as you had before).\n\nBelow, you would add it to your list of cleanup methods as:\nfunc() error { return cleanupDisplayProcess(ctx, pid, conn, outDir) },",
      "range": {
        "startLine": 44,
        "startChar": 1,
        "endLine": 44,
        "endChar": 49
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57a91596_7103460d",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:13:15Z",
      "side": 1,
      "message": "nit: This is getting uncomfortably long for me, consider refactoring as follows:\n\ncleanupFns :\u003d [](func() error){\n  ...\n}\n\nfor _, cleanup :\u003d range cleanupFns {\n\n}",
      "range": {
        "startLine": 75,
        "startChar": 19,
        "endLine": 75,
        "endChar": 42
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9791e04d_dab528a1",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T03:16:01Z",
      "side": 1,
      "message": "Here you assume conn can be nil, but above you call conn without checking. Is there a logic error here (now that you have extracted out the cleanup, you cannot assume all elements have been initialised?)",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9096812_d5cef154",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-10-07T03:51:46Z",
      "side": 1,
      "message": "Yes, it\u0027s under assumption(together with clean up order) that the members are setup in order of |conn| \u003e |dir| \u003e |pid|. So if the |dir| is not empty string the conn must not be |nil|. |pid| not empty means |dir| and |conn| not empty. So it should be safe to not check the |conn|.",
      "parentUuid": "9791e04d_dab528a1",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e280d978_73ee9c1b",
        "filename": "src/chromiumos/tast/remote/bundles/cros/camera/chart/chart.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2020-10-07T04:30:34Z",
      "side": 1,
      "message": "Yes, but you now invoke all cleanup methods regardless of what has been initialised.\nIn this loop you invoke conn.Command first in cleanupDisplayProcess, and only later on check if conn \u003d\u003d nil.\n\nAm I missing something?",
      "parentUuid": "c9096812_d5cef154",
      "range": {
        "startLine": 87,
        "startChar": 3,
        "endLine": 87,
        "endChar": 19
      },
      "revId": "4c3c108d603d6e286addb630dab0c227d2ca8444",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}