{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "136e4387_f22843fc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "Thanks for adding this test! \n\n+chadduffin@ FYI\n",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0db25c5b_f814179e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "We should describe what this tests, even if that is fairly trivial, rather than describing this as an \"example\". We can note that it is primarily intended ans an example in the comment above TestConfigDuringOobe.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "efcdc3ec_325afd9e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0db25c5b_f814179e",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0369c68_011ebaa4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "Consider adding this to the informational suite and using this as a baseline test for oobe network configuration.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "325b0a7b_cac1ebfe",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0369c68_011ebaa4",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6b0dbf6_85028d7a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "\"Test\" is redundant, let\u0027s name this OobeNetworkConfig, or maybe OobeNetworkConfigBaseline if the plan is to add more of these in different files (but it might be possible to set these up as a single test with multiple parameters. See diag_passing.go or vpn_connect.go for examples).",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10a6798e_1d650a1e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "Done. There is no plan to extend this test as I created it as an example of how to use the API in the OOBE so it can be used as a reference.",
      "parentUuid": "e6b0dbf6_85028d7a",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1320104_2d5e9ce4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-24T17:01:54Z",
      "side": 1,
      "message": "In that case we could probably omit the \u0027baseline\u0027 for now (but it\u0027s also fine as-is).",
      "parentUuid": "10a6798e_1d650a1e",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83b14f91_bba85ae2",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "We could put both this and the WaitForOOBEConnection call into a fixture if we expect to need them in multiple tests. Using a fixture will also group the tests and reduce per-test overhead.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6b040e46_3195adb4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "As this is an example, I would rather leave all the steps required in here as reference.",
      "parentUuid": "83b14f91_bba85ae2",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80c9c7c3_dd86f8b7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-24T17:01:54Z",
      "side": 1,
      "message": "OK. At some point we probably *should* have additional tests, but if that work isn\u0027t planned we can add the fixture later.",
      "parentUuid": "6b040e46_3195adb4",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5c48720_f3caa6b5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "While it is common practice to defer Close functions directly, we will want to know (and fail this test) if the ForgetNetwork call does not succeed. We should instead defer a local function that calls s.Fatal if ForgetNetwork returns an error.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c09f6d7_adee66d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "Good point, I have added that :)",
      "parentUuid": "c5c48720_f3caa6b5",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a97f5cea_d69023c7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "Let\u0027s this two separate tests with fatal errors since there is something broken if these fail.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d85059f1_10fc458c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "The error already shows that something is broken and makes the test fail. I use error instead of fatal to be able to log the set vs expected information. I do not think it requires two separate tests as this information should be enough to see what is wrong. If any of the fields is not the expected one, with these logs we are able to see if the error comes from one not matching, both, or the configuration actually not being setup.",
      "parentUuid": "a97f5cea_d69023c7",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86725081_6c67c277",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-24T17:01:54Z",
      "side": 1,
      "message": "If we want to use a single test, I would suggest the following. Error lines are much easier to scan than log lines, and will show up in the test failure summary on Stainless:\n\nif !propertiesMatch(managedProperties, newProperties) {\n  s.Fatalf(\"Properties do not match.\\nGot: %+v\\nWant: %+v\", newProperties.TypeConfig.Wifi, managedProperties.TypeProperties.Wifi)\n}",
      "parentUuid": "d85059f1_10fc458c",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "837217b4_db03683a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/test_config_during_oobe.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-27T11:09:55Z",
      "side": 1,
      "message": "Good point, I have updated it so the information appears with the error message.",
      "parentUuid": "86725081_6c67c277",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d2b0b84_aa320835",
        "filename": "src/chromiumos/tast/local/network/netconfig/cros_network_config.go",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T17:58:35Z",
      "side": 1,
      "message": "It looks like this is just NewCrosNetworkConfig with a call to WaitForOOBEConnection. We should keep that outside of this module since it doesn\u0027t have anything to do with cros_network_config. We can make the WaitForOOBEConnection call part of a fixture instead.\n\nAlso, in general, we shouldn\u0027t have something named NewCrosNetworkConfigOobe that returns a CrosNetworkConfig. A reader would expect it to return a CrosNetworkConfigOobe type which doesn\u0027t exist.",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3cfa5ba_4f0e5d62",
        "filename": "src/chromiumos/tast/local/network/netconfig/cros_network_config.go",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-24T09:44:07Z",
      "side": 1,
      "message": "It requires to be here because we are expected to use it in rollback remote tests so it cannot be set up in a fixture. At the moment the connection is only available from the chrome://network page but that it is not possible to make it work during oobe, so I created this alternative one to create the api connection during oobe instead. It follows a similar pattern to the existing NewCrosNetworkConfig but using an oobe connection instead.\n\nAs the name could have been misleading, I have updated it to add Oobe at the beginning instead so the distinction between the two possible creations should be clearer.",
      "parentUuid": "5d2b0b84_aa320835",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c48660fc_1061e51f",
        "filename": "src/chromiumos/tast/local/network/netconfig/cros_network_config.go",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-24T17:01:54Z",
      "side": 1,
      "message": "Oh I see. This is also connecting to a different page. That was not clear to me.\n\nI suggest the following:\n1. Modify NewCrosNetworkConfig to take |conn| as an argument.\n2. Add wrappers for CreateLoggedInCrosNetworkConfig and CreateOobeCrosNetworkConfig that create the appropriate connections and pass that to NewCrosNetworkConfig.\n3. Replace existing calls to NewCrosNetworkConfig with CreateLoggedInCrosNetworkConfig.\n\nThat will make the existing code more clear and will have less duplicate code.",
      "parentUuid": "c3cfa5ba_4f0e5d62",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03874ca3_2bc98750",
        "filename": "src/chromiumos/tast/local/network/netconfig/cros_network_config.go",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1529818
      },
      "writtenOn": "2022-06-27T11:09:55Z",
      "side": 1,
      "message": "Thank you for the suggestion, I have updated the code.",
      "parentUuid": "c48660fc_1061e51f",
      "revId": "45c2e2ab31fbdf219ccb06022ff24b2e95cf58a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}