{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9471f621_a91b9135",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 36,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-14T14:18:46Z",
      "side": 1,
      "message": "for readability, could you introduce enum-like type?",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 15
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d2c5d1f_e9e812c3",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 36,
      "author": {
        "id": 1412245
      },
      "writtenOn": "2021-07-19T21:52:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9471f621_a91b9135",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 15
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9339de37_3018e0b3",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-14T14:18:46Z",
      "side": 1,
      "message": "for stability, could you avoid depending on the human readable text, and instead use some ID etc.?\nDitto for below.",
      "range": {
        "startLine": 79,
        "startChar": 67,
        "endLine": 79,
        "endChar": 89
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9adc8efb_26fced65",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1412245
      },
      "writtenOn": "2021-07-19T21:52:46Z",
      "side": 1,
      "message": "Did you mean NodeId? As i can see in ui tree[1], we don\u0027t have much info to search for and Name/ClassName seem more stable than ids to me. \n\n[1] https://screenshot.googleplex.com/rMwgPdrLF7geJab",
      "parentUuid": "9339de37_3018e0b3",
      "range": {
        "startLine": 79,
        "startChar": 67,
        "endLine": 79,
        "endChar": 89
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4444d8df_88857e66",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-20T04:24:10Z",
      "side": 1,
      "message": "does it work for to introduce such?\n\n\u003e Name/ClassName seem more stable than ids to me. \n\nCould you share the background? In general, name class etc. can be updated as Chromium would like to. They need to be stable across versions, otherwise the test would block to uprev. I.e., this can be a blocker for you to update UI.",
      "parentUuid": "9adc8efb_26fced65",
      "range": {
        "startLine": 79,
        "startChar": 67,
        "endLine": 79,
        "endChar": 89
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fc4272d_f6337780",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1412245
      },
      "writtenOn": "2021-07-20T07:55:12Z",
      "side": 1,
      "message": "From my understandings, Id could also change even when other UI get updated. Also ids could change every test run. I ran RecordPartialScreen.tablet_mode in my local device hatch-release/R93-14010.0.0[1], one cyan-release/91-13904.97.0 device in skylab[2], you can see the id for the same node changes (might be caused by version updates or device difference). Also I suspect that the id trees in clamshell/tablet mode are different as well.\n\nName and ClassName are common used to find nodes as they identify nodes well[3]. It seems a preferred way to use Role, Name, ClassName and Ancestor to find nodes[4].\n\nAbout it could be a potential blocker, I don\u0027t know a better way to stabilize UI automation...Think we are all switching to uiauto.\n\n[1] https://screenshot.googleplex.com/9VCVBcQdxrxBYeF\n[2] https://screenshot.googleplex.com/7Wy6wJvDWAaNrw4\n[3]https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/chrome/uiauto/automation.go;l\u003d137\n[4]https://source.chromium.org/search?q\u003dnodewith\u0026ss\u003dchromiumos%2Fchromiumos%2Fcodesearch:src%2Fplatform%2Ftast-tests%2Fsrc%2Fchromiumos%2F\u0026start\u003d1",
      "parentUuid": "4444d8df_88857e66",
      "range": {
        "startLine": 79,
        "startChar": 67,
        "endLine": 79,
        "endChar": 89
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7524098e_1ad3ac46",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1000101
      },
      "writtenOn": "2021-07-20T15:28:59Z",
      "side": 1,
      "message": "I understand hidehiko@\u0027s concern. It is real and has happened before that chrome uprev fails when UI string is updated but devs forgot to update test.\n\nHowever, a11y tree does not provide unique/stable identifiers as shown by yichenz@. One possible way could be replacing \"FeaturePodIconButton\" class name with a more unique one \"ScreenCaptureFeaturePodIconButton\". However, I am a bit hesitate to make this test only change, slightly increase code size and memory size. Also we have many tests that already depend on UI strings.\n\nRandom example: \nhttps://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/arc/disable_arc.go;l\u003d125\n\nIt seems to me that the problem is generally more of a uiauto support problem rather than this CL\u0027s fault. We should have better infra support, e.g. make a11y tree node id stable. We could revisit this later when we have a more systematic solution.",
      "parentUuid": "8fc4272d_f6337780",
      "range": {
        "startLine": 79,
        "startChar": 67,
        "endLine": 79,
        "endChar": 89
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e2bb535_0dee8673",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-07-14T14:18:46Z",
      "side": 1,
      "message": "Could you move this under the subpackage to be shared?\nIn tast bundles, we do not want to share functions defined in a file with another file for better maintenance.\n(I think tast-lint warns this...?)",
      "range": {
        "startLine": 106,
        "startChar": 13,
        "endLine": 106,
        "endChar": 28
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a4d9d42_44bc130e",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/record_partial_screen.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1412245
      },
      "writtenOn": "2021-07-19T21:52:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e2bb535_0dee8673",
      "range": {
        "startLine": 106,
        "startChar": 13,
        "endLine": 106,
        "endChar": 28
      },
      "revId": "2a896463c6ce39837f399ee33948d37b51c05567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}