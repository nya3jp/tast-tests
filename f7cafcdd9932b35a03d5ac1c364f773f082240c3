{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7621e73a_41701833",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "nit: dnsmasq or Dnsmasq (here and elsewhere)\nhttps://thekelleys.org.uk/dnsmasq/doc.html",
      "range": {
        "startLine": 10,
        "startChar": 19,
        "endLine": 10,
        "endChar": 26
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b3c434d_2ffcec5c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "All fixes. thanks for your reminder.",
      "parentUuid": "7621e73a_41701833",
      "range": {
        "startLine": 10,
        "startChar": 19,
        "endLine": 10,
        "endChar": 26
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5ec08e66_2c495910",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "I think we need to consider both cases of configuring IPv4 name server and IPv6 name server to avoid hardcoding IPv4 behavior into the virtualnet.go.\n\nFor instance right now the fields added to EnvOptions are not ideal from that perspective.\n\nI would suggest to add at least 3 new fields:\n  - enableIPv4DNS bool. Only does something if DHCP is also configured\n  - enableIPv6DNS bool. Only does something if RAServer is also configured\n  - a map[string][]net.IP field that specify a mapping of hostnames-as-strings to list of IP addresses (can be both v4 and v6) to simulate the A and AAAA answers from the nameservers. One thing we should support is the v4 nameserver returning IPv6 addresses (AAAA queries over IPv4).",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e24af2b_871cc3e7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "Ensure that shill sends portal detection probes to the IP address given by dnsmasq",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49721fe1_cbb65da6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e24af2b_871cc3e7",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7b3d20a_0e75dbe0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "cros-network-health-team@google.com",
      "range": {
        "startLine": 32,
        "startChar": 46,
        "endLine": 32,
        "endChar": 74
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8763b95d_a93a466b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e7b3d20a_0e75dbe0",
      "range": {
        "startLine": 32,
        "startChar": 46,
        "endLine": 32,
        "endChar": 74
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b903a30_4f16d4db",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "networking folks, should we have two variants of this test, v4 and v6?",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "446f74a4_36714aab",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "Just to check my understanding, what\u0027s the core logic that this test wants to verify? For example:\n- Do we want to check that portal detector is using the DNS settings on the network it is running on (but not other networks)?\n- Do we want to check that how portal detector uses the DNS resolved results (mix of v4 and v6 addresses) on different network environments (v4-only, v6-only, dual-stack)? (I\u0027m not familiar with portal detection, is there any difference in this case?)",
      "parentUuid": "7b903a30_4f16d4db",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2af64358_e8a3ba46",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T05:02:21Z",
      "side": 1,
      "message": "We want to check that portal detector uses DNS results. My question (more specifically) is: is it meaningful to verify this logic on v6 and/or dual stack networks as well? I think from the portal detector standpoint, there isn\u0027t a difference (HttpRequest handles DNS resolution the same way I think), so I would lean towards \"no\", but just want to double check in case I missed something.",
      "parentUuid": "446f74a4_36714aab",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5496f020_b47c35a2",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "I think we definitely want to cover v4 only and v6 only. However since the portal detector works entirely within one IP family, when it queries the target URLs hostnames IPs it will only ask and consider result of the IP family used for the query. So that means that to test the IPv6 behavior you need to set up an IPv6 nameserver, and advertise it through the RA server with the RA RDNSS option.\n\nSo if this patch only adds configuration for an IPv4 resolved address, we can only test the behavior with IPv4 only.\n\nTesting dual stack is another can of worms because right now the behavior of portal detection will depend on the order of the configuration which is racy. I ll explain more on b/230339227 because it turns out it is exactly related to what we discussed for crrev/c/3722136.\n\nUltimately we probably want to change the portal behavior on dual stack networks, so for now let\u0027s only focus on v4 only and v6 only cases.",
      "parentUuid": "2af64358_e8a3ba46",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a76e9ced_dfd1718e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "/var/log isn\u0027t the right place for this, you can get a directory using testing.ContextOutDir",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fa3137ae_a3e3ac39",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Already used testing.ContextOutDir to replace /var/log, thanks for the suggestion",
      "parentUuid": "a76e9ced_dfd1718e",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f63ad61_f7db851d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "unused",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15e27998_4a69f23e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "I have already removed this field.",
      "parentUuid": "3f63ad61_f7db851d",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa116e2e_61f2f80e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "Portal detection is enabled by default on Ethernet so I suppose we don\u0027t need to set it explicitly here.",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 61,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c262771e_5d3a0f09",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-06-29T23:23:39Z",
      "side": 1,
      "message": "Thanks for your advice. I used “GetProperties()” in “PropertyHolder” to get the default value of “CheckPortalList” and the default value is an empty string. I think \"SetProperty()\" should be used to enable portal detection on ethernet.",
      "parentUuid": "fa116e2e_61f2f80e",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 61,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "165f2b2b_981187f4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-29T23:56:14Z",
      "side": 1,
      "message": "So, portal detection actually defaults to disabled on all technologies (an empty string). Chrome enables it once the TOS is assigned (for reasons I\u0027m not actually familiar with). \n\nSo, any DUT where Chrome has logged in should have this set to \"wifi,cellular,ethernet\", but a freshly imaged DUT may not. We may need to be careful about with portal tests.\n\nIf we do set this, we should also make a best effort to restore the initial state. We can use a testing profile for that (there is a manager.PushTestProfile helper for that) or get/save the initial value and restore it.",
      "parentUuid": "c262771e_5d3a0f09",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 61,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "336a33d1_94de93ad",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-30T01:21:52Z",
      "side": 1,
      "message": "Ah this is something new to me, thanks for the explanation!\nI\u0027ll leave this open for Steven\u0027s comment (restore state or use testing profile)",
      "parentUuid": "165f2b2b_981187f4",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 61,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44361e89_c12fc147",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "don\u0027t assume the gateway here, get it directly from Env",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1cf26b5_5ab59d01",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "You can use GetVethInAddrs() or WaitForVethInAddrs() to get the gateway address. Their difference is WaitForVethInAddrs() will wait for addresses appearing on the interface and thus could be useful to get the IPv6 address allocated by the RA server.",
      "parentUuid": "44361e89_c12fc147",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03af06fc_e276c6cb",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Thanks for your suggestion, I use WaitForVethInAddrs() to get the gateway address instead of setting it here.",
      "parentUuid": "a1cf26b5_5ab59d01",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5cde9b1e_63174d27",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "this doesn\u0027t seem necessary. any other thoughts here?",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebc4ca78_3629dbaf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Checking the nameservers used by shill with the ipconfig api and analyzing the http probe packets with the tcpdump utility is indeed sufficient proof that dnsmasq works. I removed this function to make the whole test clearer.",
      "parentUuid": "5cde9b1e_63174d27",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "246c0885_52009cad",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 99,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "super nit: space after // (same everywhere else)",
      "range": {
        "startLine": 99,
        "startChar": 2,
        "endLine": 99,
        "endChar": 3
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b183749_ac57b96a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 99,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "246c0885_52009cad",
      "range": {
        "startLine": 99,
        "startChar": 2,
        "endLine": 99,
        "endChar": 3
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3174a8cb_a6890cc1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "virtualnet.CreateRouterEnv() returns the associated service for this interface, we can use that directly if we only need the service.",
      "range": {
        "startLine": 101,
        "startChar": 1,
        "endLine": 115,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "511d7f45_a7122aa8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3174a8cb_a6890cc1",
      "range": {
        "startLine": 101,
        "startChar": 1,
        "endLine": 115,
        "endChar": 2
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b8857c0_bb041570",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 136,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "FYI I have a patch in CQ that add a go struct for the IPConfig object, which can be used to simplify this part of code. That patch also adds a GetIPConfigs() method to Service to get the IPConfigs on the Device selecting this Service.\n\n[1] https://crrev.com/c/3697759/16/src/chromiumos/tast/local/shill/ipconfig.go",
      "range": {
        "startLine": 136,
        "startChar": 2,
        "endLine": 136,
        "endChar": 33
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe32068c_36eb14e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "you can skip non-IPv4 configs here.",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d449a5c4_d89f68a1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "I couldn\u0027t find IPv4 and IPv6 categories in ipconfig properties, so I used len(strings.Split(ipAddr, \".\")) to check if ipconfig\u0027s ip address is IPv4 and skip if not. But I\u0027m not sure if this is the most efficient way",
      "parentUuid": "fe32068c_36eb14e8",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e485de45_2a7b9755",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 144,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "you can just directly check gateway here.",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b91fd794_2f44a2a0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 144,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Corrected. If the name server is the same as the IP address of dnsmasq service, the function will return directly and the test will pass. If the correct name server is not found at the end, an error will be reported.",
      "parentUuid": "e485de45_2a7b9755",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1430c192_2db72619",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 148,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "nit: no need for a separate function",
      "range": {
        "startLine": 148,
        "startChar": 5,
        "endLine": 148,
        "endChar": 18
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5acd8a04_a4ecdccc",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 148,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Removed, this function is no longer used,",
      "parentUuid": "1430c192_2db72619",
      "range": {
        "startLine": 148,
        "startChar": 5,
        "endLine": 148,
        "endChar": 18
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f15cfec2_dac9558d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 155,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "rm",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30f54306_00bc8786",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 155,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f15cfec2_dac9558d",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16d65b78_0b7b424c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "Just a question: is this enough to verify that this is the dst IP in the portal detection probe (I suppose this is what we want to verify here), but not other traffic ocassionally includes this address (e.g., reply to DNS query)?",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 57
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4894f517_d36c41d6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T22:13:41Z",
      "side": 1,
      "message": "+1, we should parse this further.",
      "parentUuid": "16d65b78_0b7b424c",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 57
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "566233eb_1487235b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "I captured some tcp packets as follows:\n\n12:51:25.112075 IP 192.168.100.93.39590 \u003e 129.0.0.1.https: Flags [S], seq 3778806688, win 64240, options [mss 1460,sackOK,TS val 3476527466 ecr 0,nop,wscale 7], length 0\n12:51:25.112103 IP 192.168.100.93.44540 \u003e 129.0.0.1.http: Flags [S], seq 1742435852, win 64240, options [mss 1460,sackOK,TS val 3476527466 ecr 0,nop,wscale 7], length 0\n\nThis time I used regular expression to parse the string, the IP address needs to be on the right of the \u003e to prove that it is the dst IP. The IP address must be followed by the http string to prove that it is an http request. Not sure if this is enough? We can continue the discussion.",
      "parentUuid": "4894f517_d36c41d6",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 57
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12fb78a0_4fa591da",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 188,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "I suppose we can Service.WaitForConnectedOrError() or Service.WaitForProperty() to simplify this code.\nExample: https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/network/routing_no_ip.go;drc\u003d22f182da6f80f806a24e162f8d428ceb27290128;l\u003d59",
      "range": {
        "startLine": 188,
        "startChar": 5,
        "endLine": 188,
        "endChar": 21
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a01acc8_58469e15",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_captive_portal_dns.go",
        "patchSetId": 4
      },
      "lineNbr": 188,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "You\u0027re right. Service.WaitForProperty() can do the same thing as my waitServiceReady() so I don\u0027t need to create my own version.",
      "parentUuid": "12fb78a0_4fa591da",
      "range": {
        "startLine": 188,
        "startChar": 5,
        "endLine": 188,
        "endChar": 21
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7479976_aa1dd9a5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "Maybe we can skip introducing this option now since we always want to enable DHCP at the moment?",
      "range": {
        "startLine": 54,
        "startChar": 1,
        "endLine": 54,
        "endChar": 11
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90cdd842_d45b6b65",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "The program will determine whether to start dnsmasq according to EnableDHCP field, and then the DNS function of dnsmasq depends on whether opts.ResolvedHost is set. Is it more appropriate to change EnableDHCP to EnableDnsmasq?",
      "parentUuid": "b7479976_aa1dd9a5",
      "range": {
        "startLine": 54,
        "startChar": 1,
        "endLine": 54,
        "endChar": 11
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c4b218d_ab169f20",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "Worth some comments for the params, e.g., \"enabel DNS server functionality in dnsmasq if enableDNS is true; dns contains the DNS server list which will be broadcasted by DHCP\"",
      "range": {
        "startLine": 61,
        "startChar": 28,
        "endLine": 61,
        "endChar": 37
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "17da522e_d5bcff69",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "I removed the enableDNS parameter and added comments for the new parameters: ResolvedHost and ResolveHostToIP.",
      "parentUuid": "0c4b218d_ab169f20",
      "range": {
        "startLine": 61,
        "startChar": 28,
        "endLine": 61,
        "endChar": 37
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e469875b_a09c51d8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 92,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "do we need a port?",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "623cbd38_03af2b44",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 92,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "DNS A or AAAA results are raw IP addresses. The client that did the query needs to know which destination port to use for the next step, depending on the protocol used. For instance :80 for http, :443 for https, etc.",
      "parentUuid": "e469875b_a09c51d8",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "550d9016_b2523344",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/dnsmasq/dnsmasq.go",
        "patchSetId": 4
      },
      "lineNbr": 92,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "If there is no special setting, the default port is 53. If set to 0, DNS functionality is disabled. In dnsmasq.go, I referenced https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3689992 to avoid too many merge conflicts later, so I added port field here.",
      "parentUuid": "623cbd38_03af2b44",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e419ac0_b106877d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "IIUC, this sentence actually points to the next |AddressToForceIP| field. How about 1) merging these two into one field or 2) just removing this sentence?",
      "range": {
        "startLine": 33,
        "startChar": 49,
        "endLine": 34,
        "endChar": 31
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f74a6d1_849d7ef1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "Normally a real name server would not resolve all hostnames to a set address. We should specify this is a temporary solution until we can support something a bit more sophisticated like providing a /etc/hosts-like file, for instance as a list of {net:IP, string} pairs.\n\nSo maybe say: \"Only support resolving all hostnames to a single IP address provided during configuration\".",
      "parentUuid": "2e419ac0_b106877d",
      "range": {
        "startLine": 33,
        "startChar": 49,
        "endLine": 34,
        "endChar": 31
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3378efc_ade2ac19",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "I ended up removing the EnableDNS field and adding ResolvedHost and ResolveHostToIP fields. When ResolvedHost and ResolveHostToIP are set, dnsmasq will resolve ResolvedHost to ResolveHostToIP.",
      "parentUuid": "0f74a6d1_849d7ef1",
      "range": {
        "startLine": 33,
        "startChar": 49,
        "endLine": 34,
        "endChar": 31
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60424444_b635b6b7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "nit: This name sounds a little confusing to me, since it\u0027s not clear what an \"Address\" is (name or IP address?), how about \"ResolveNamesToIP\" or some other name?",
      "range": {
        "startLine": 38,
        "startChar": 1,
        "endLine": 38,
        "endChar": 17
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6ac9c87_043e5d97",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "If possible prefer to use net.IP type directly.",
      "range": {
        "startLine": 38,
        "startChar": 18,
        "endLine": 38,
        "endChar": 24
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5afaf8a_fe3e5291",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Great idea. I have modified it. Thank you for your suggestion.",
      "parentUuid": "60424444_b635b6b7",
      "range": {
        "startLine": 38,
        "startChar": 1,
        "endLine": 38,
        "endChar": 17
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcf76188_780ec9c1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Understand. I used net.IP as the IP address\u0027s type.",
      "parentUuid": "c6ac9c87_043e5d97",
      "range": {
        "startLine": 38,
        "startChar": 18,
        "endLine": 38,
        "endChar": 24
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bbe2c4d2_8fd02396",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "what is this field used for ?",
      "range": {
        "startLine": 45,
        "startChar": 1,
        "endLine": 45,
        "endChar": 7
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1040bdea_d1722f7a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "The dnsMasqParams struct is not used and has been removed because I can get those fields from env.go.",
      "parentUuid": "bbe2c4d2_8fd02396",
      "range": {
        "startLine": 45,
        "startChar": 1,
        "endLine": 45,
        "endChar": 7
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20b92abc_969feece",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "net.IP",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3949cb00_50ad674e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "The dnsMasqParams struct is not used and has been removed because I can get those fields from env.go.",
      "parentUuid": "20b92abc_969feece",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a2a2032_e0e7c7d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "I suppose this struct is not needed according to other comments. If we still need it, it\u0027s better to avoid a global variable, since CreateRouterEnv() may be called multiple times.",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 50,
        "endChar": 0
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "744790f1_5e81b853",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "The dnsMasqParams struct has been removed entirely.",
      "parentUuid": "2a2a2032_e0e7c7d4",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 50,
        "endChar": 0
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06c39254_03a1b1d7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "What\u0027s the purpose of this?",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fc90117_ae1d9847",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-29T15:00:51Z",
      "side": 1,
      "message": "0.0.0.0 is either a wildcard address or means \"nil address\" depending on context. But it is not an effective destination address. I am also a bit confused why this is needed.\n\nDoes that mean that if we pass to dnsmasq 0.0.0.0 for the name server configuration dnsmasq will act itself as the name server and advertise this in the DHCP leases ? In that case I agree with Jie\u0027s comment below.",
      "parentUuid": "06c39254_03a1b1d7",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a96f300_6b203ff4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-06-29T23:23:39Z",
      "side": 1,
      "message": "dnsmasq will send some standard options to the DHCP client. When the developer sets \"dhcp-option\u003doption:dns-server, 0.0.0.0\" in the dnsmasq configuration, the dnsmasq service tells the DHCP client that the DNS server is set to the address of the machine running dnsmasq. The special address 0.0.0.0 means \"the address of the machine running dnsmasq\", I would move this part to dnsmasq.Start() as Jay suggested.",
      "parentUuid": "2fc90117_ae1d9847",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da87d46d_56dcf951",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-07-01T17:47:07Z",
      "side": 1,
      "message": "I am not sure this is necessary. I believe if you provide no address at all for `dhcp-option\u003doption:dns-server`, it assumes that the host you are running dnsmasq on is the DNS server.\n\nI would double check this though.",
      "parentUuid": "7a96f300_6b203ff4",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5730e3f5_55b35825",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "You\u0027re right. If dhcp-option\u003doption:dns-server is not specifically set in the dnsmasq configuration, the DNS server will be the host on which dnsmasq is running. I have removed this statement. Thank you for the information.",
      "parentUuid": "da87d46d_56dcf951",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c8beb0c_ae8a75f7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 85,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-29T03:43:27Z",
      "side": 1,
      "message": "I think it\u0027s better to do this in dnsmasq.Start(), since when we enable its dns server functionality, we always want to include the address in the DHCP option.",
      "range": {
        "startLine": 81,
        "startChar": 2,
        "endLine": 85,
        "endChar": 3
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0aeea663_9635b147",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 85,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "Based on the discussion above, I removed this statement.",
      "parentUuid": "7c8beb0c_ae8a75f7",
      "range": {
        "startLine": 81,
        "startChar": 2,
        "endLine": 85,
        "endChar": 3
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f7b4ff7_ab2e5c15",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "this is already accessible via Env. Can you just include a gateway field and get rid of this struct?",
      "range": {
        "startLine": 91,
        "startChar": 25,
        "endLine": 91,
        "endChar": 36
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2547538c_4795928c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "The dnsMasqParams struct has been removed entirely.",
      "parentUuid": "2f7b4ff7_ab2e5c15",
      "range": {
        "startLine": 91,
        "startChar": 25,
        "endLine": 91,
        "endChar": 36
      },
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33d8b554_3180f1c1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-29T00:29:45Z",
      "side": 1,
      "message": "I think you may have changed this accidentally",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f0d7ce5_71af6c40",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:24:39Z",
      "side": 1,
      "message": "When I use shillconst.ServicePropertyEphemeralPriority, the test will report an error: Property EphemeralPriority does not exist, so I replaced this parameter. I will try to find a way to correct it.",
      "parentUuid": "33d8b554_3180f1c1",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2036ebe3_ed77ca40",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/virtualnet/virtualnet.go",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1544882
      },
      "writtenOn": "2022-07-08T20:55:57Z",
      "side": 1,
      "message": "I\u0027ve asked @michaelrygiel about this issue and it may be due to an outdated version of ChromeOS on my DUT. The EphemeralPriority property was recently added. I\u0027ll try to flash a new image to my DUT later to fix this.\nThis is the commit for code change: https://chromium-review.googlesource.com/c/chromiumos/platform2/+/3653642",
      "parentUuid": "4f0d7ce5_71af6c40",
      "revId": "f7cafcdd9932b35a03d5ac1c364f773f082240c3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}