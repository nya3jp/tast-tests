{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3b1ebeea_2f23ede4",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 113,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2021-06-14T23:52:25Z",
      "side": 1,
      "message": "This comment is not required. The function name is self-explained.",
      "range": {
        "startLine": 113,
        "startChar": 0,
        "endLine": 113,
        "endChar": 12
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "895e96dc_a51d8082",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 113,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2021-06-15T00:19:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3b1ebeea_2f23ede4",
      "range": {
        "startLine": 113,
        "startChar": 0,
        "endLine": 113,
        "endChar": 12
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52346aa9_59d9ca71",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 119,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2021-06-15T02:07:40Z",
      "side": 1,
      "message": "Similar problem to this cleanup. VM does not have a real input device, so it does not need to set the active device after unload. But on real devices, this step might take time and cause racing issue in next setup (possibly). Add extra safe check here can also be useful.",
      "range": {
        "startLine": 119,
        "startChar": 2,
        "endLine": 119,
        "endChar": 9
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1037f417_453d2f55",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 119,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2021-06-15T03:26:39Z",
      "side": 1,
      "message": "Thanks for pointing this out. I just checked the Aloop file and found that the cleanup waits for its completion. I don\u0027t think we need to worry about this cleanup.",
      "parentUuid": "52346aa9_59d9ca71",
      "range": {
        "startLine": 119,
        "startChar": 2,
        "endLine": 119,
        "endChar": 9
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4730533b_e6ac006f",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 133,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2021-06-14T23:52:25Z",
      "side": 1,
      "message": "Do not understand why need this sleep. It is not encouraged to have sleep in test unless a reason. Can you find a better way to do this?",
      "range": {
        "startLine": 131,
        "startChar": 3,
        "endLine": 133,
        "endChar": 5
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f671d10c_fae0be08",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 133,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2021-06-15T00:19:03Z",
      "side": 1,
      "message": "As mentioned in the comment, input.AudioFromFile calls a playback asynchronically, the sleep was used to wait until the audio finishes playing. \n\nA better way (done) should be to revise input.AudioFromFile to input.AudioFromFileAndWait that waits until the audio  finishes. It is safe to simply change the name and add a cmd.Wait, since this function is only used by the voice test.",
      "parentUuid": "4730533b_e6ac006f",
      "range": {
        "startLine": 131,
        "startChar": 3,
        "endLine": 133,
        "endChar": 5
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1156117b_f7b4ccd4",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 133,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2021-06-15T02:05:40Z",
      "side": 1,
      "message": "Good finding here. You can definitely enhance AudioFromFile to make it wait. crastestclient.WaitForNoStream might be helpful.",
      "parentUuid": "f671d10c_fae0be08",
      "range": {
        "startLine": 131,
        "startChar": 3,
        "endLine": 133,
        "endChar": 5
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1f17887_3dcc9274",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/virtual_keyboard_speech.go",
        "patchSetId": 3
      },
      "lineNbr": 133,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2021-06-15T03:26:39Z",
      "side": 1,
      "message": "Have revised it. `playCmd.Wait()` can wait for the completion of playing audio.",
      "parentUuid": "1156117b_f7b4ccd4",
      "range": {
        "startLine": 131,
        "startChar": 3,
        "endLine": 133,
        "endChar": 5
      },
      "revId": "6004d050635d9a7405d5a68f1454ff8575259f4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}