{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7d6b6f4e_0274d5b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-01-29T05:54:00Z",
      "side": 1,
      "message": "PTAL~\n\nLMK if you have any questions about what I\u0027ve done here.",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15399759_da19a04d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2021-02-01T16:04:45Z",
      "side": 1,
      "message": "Is this intended to be the same as the existing GPU metrics? And if it is: is there some way to have a test to show that it is? Or tests in general?",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90b99a07_7ae7a184",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-02-10T08:01:25Z",
      "side": 1,
      "message": "There is some overlap. The intention is to help work out why we are seeing so much noise in the data. I want to eliminate explanations other than there is just a lot of inherent noise in the system. In particular, I want to eliminate these explanations:\n\n1. Histogram quantisation somehow causes noise - maybe possible if there are very few samples\n2. Some error in the histograms - may be possible since IIRC I\u0027ve seen significantly different values between number of 100 - page flips / 60fps and percent dropped frames\n\nIf we ever see a high metrics percentdropppedframes value but different for these custom metrics then we know there will be a problem there. If these metrics change over time in the same way as the histogram metrics, then I\u0027m much more convinced it\u0027s /only/ inherent noise (albeit a lot of inherent noise).",
      "parentUuid": "15399759_da19a04d",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3dea53cc_52c8a307",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-02-01T05:02:03Z",
      "side": 1,
      "message": "Could you add unit tests, too?",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c47411c9_6728f890",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2021-02-01T16:04:45Z",
      "side": 1,
      "message": "ultra-nit: Lacros Chrome",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27bb5ab9_63415921",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-02-01T05:02:03Z",
      "side": 1,
      "message": "Rob, could you review this strategy?",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18be1e94_eb62e5d3",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-02-01T07:40:32Z",
      "side": 1,
      "message": "It might also be useful for Sadrul to review this strategy.",
      "parentUuid": "27bb5ab9_63415921",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9c37077_ff3c6fe1",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2021-02-01T16:04:45Z",
      "side": 1,
      "message": "Yes. I\u0027d like sadrul@ to make sure that this aligns with how the existing metrics are computed.",
      "parentUuid": "18be1e94_eb62e5d3",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c55ba186_75c2cb48",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-02-10T08:01:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f9c37077_ff3c6fe1",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae5573f8_df4c5fb6",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2021-02-02T14:36:55Z",
      "side": 1,
      "message": "I would recommend using PipelineReporter instead. It contains all these stages (with even more breakdowns) of a particular frame, and includes information like whether the frame was dropped or not. It also makes it much easier to know precisely when a particular frame submitted by a client (browser, renderer) was drawn (in DrawAndSwap()). So a lot of the following logic/heuristics should not be required.",
      "range": {
        "startLine": 19,
        "startChar": 0,
        "endLine": 23,
        "endChar": 45
      },
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49e2bfb4_15f3f0e1",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-02-09T05:35:23Z",
      "side": 1,
      "message": "The reason I didn\u0027t do this is because ideally I would like to measure both lacros chrome and chromeos chrome from inside chromeos-chrome. Unfortunately this doesn\u0027t work, currently, since when exo returns a DidNotProduceFrame, it could be because a frame was dropped AFAICT.\n\nBut yeah, I think it\u0027s worth investigating using the PipelineReporter stuff. Does it work for video / webgl / other things that are submitting compositor frames on their own?\n\nThanks~",
      "parentUuid": "ae5573f8_df4c5fb6",
      "range": {
        "startLine": 19,
        "startChar": 0,
        "endLine": 23,
        "endChar": 45
      },
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad0ee4e1_00257807",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2021-02-09T16:23:42Z",
      "side": 1,
      "message": "It\u0027s not clear to me what process(es) these traces are collected from. Are these processing traces from the ash process or the lacros-chrome process? Can you share some example traces this script is expected to process?\n\nHave you considered collecting UMA metrics, instead of developing trace-based metrics?",
      "parentUuid": "49e2bfb4_15f3f0e1",
      "range": {
        "startLine": 19,
        "startChar": 0,
        "endLine": 23,
        "endChar": 45
      },
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07bd3349_8b7941c3",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-02-10T00:32:01Z",
      "side": 1,
      "message": "\u003eIt\u0027s not clear to me what process(es) these traces are collected from. \n\nCurrently I have it so these traces are collected from ChromeOS chrome for chromeos chrome tests, and lacros chrome for lacros chrome tests. i.e. we are relying on gpu backpressure from chromeos-chrome in lacros chrome to get relatively accurate results (to include any additional overhead from processing + compositing in chromeos chrome).\n\n\u003e Have you considered collecting UMA metrics, instead of developing trace-based metrics?\n\nYes, we also do this. The reason I am writing custom traces code is because we observed a significant amount of noise in the UMA metric histograms, and I want to rule out a few things (like testing methodology, metrics, etc) before concluding that the noise is inherent to chrome.\n\n\u003e Can you share some example traces this script is expected to process?\n\nSure, what are you going to be looking for?",
      "parentUuid": "ad0ee4e1_00257807",
      "range": {
        "startLine": 19,
        "startChar": 0,
        "endLine": 23,
        "endChar": 45
      },
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "039a0ad1_14c68514",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-02-01T05:02:03Z",
      "side": 1,
      "message": "Can be time.Time? Ditto for below.",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d53f6577_477fb7ec",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2021-04-27T15:42:17Z",
      "side": 1,
      "message": "Marked as resolved per offline discusion.",
      "parentUuid": "039a0ad1_14c68514",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3988d2cc_313da14d",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/gpucuj/analyze.go",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2021-02-01T16:04:45Z",
      "side": 1,
      "message": "general comment: function comments would make this easier to understand later.",
      "revId": "2eb3e87348bde29c4377f70517c12f1c7bfa2e72",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}