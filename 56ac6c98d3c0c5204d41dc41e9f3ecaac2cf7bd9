{
  "comments": [
    {
      "key": {
        "uuid": "21abbb61_af002ec2",
        "filename": "src/chromiumos/tast/remote/bundles/cros/example/servo_echo.go",
        "patchSetId": 16
      },
      "lineNbr": 30,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "huge nit: maybe avoid repeating the message?\n\nconst msg \u003d \"hello from servo\"\nactualMessage, err :\u003d ...\n...\nconst expectedMessage \u003d \"ECH0ING: \"+msg\n...",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72248595_5db8e5f0",
        "filename": "src/chromiumos/tast/remote/servo/methods.go",
        "patchSetId": 16
      },
      "lineNbr": 18,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: delete this",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b8ad4b7_1747fbf7",
        "filename": "src/chromiumos/tast/remote/servo/servo.go",
        "patchSetId": 16
      },
      "lineNbr": 48,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: same re putting the message text in a constant?",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "666b3faf_640ebe30",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 54,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "huge nit: xmlBooleanToBool to match the go type\u0027s name?",
      "range": {
        "startLine": 54,
        "startChar": 5,
        "endLine": 54,
        "endChar": 24
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45f2a2e1_59e8e63c",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: boolToXMLBoolean?",
      "range": {
        "startLine": 69,
        "startChar": 5,
        "endLine": 69,
        "endChar": 24
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5836845_d6d1d7de",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 77,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: newValue is a more common naming style",
      "range": {
        "startLine": 77,
        "startChar": 5,
        "endLine": 77,
        "endChar": 14
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a63ff7c7_0710d020",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 78,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: you can use a switch statement here; see https://tour.golang.org/methods/16",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9005eae5_1fd4dcbc",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 90,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: newParams here too, maybe?",
      "range": {
        "startLine": 90,
        "startChar": 5,
        "endLine": 90,
        "endChar": 15
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1b5ce08_2c39f67d",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 95,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: return nil, err\n\n(to avoid returning partial params)",
      "range": {
        "startLine": 95,
        "startChar": 10,
        "endLine": 95,
        "endChar": 16
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a813d59_71ee097f",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 103,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: args ...interface{} here too? you can use \"args...\" on L145",
      "range": {
        "startLine": 103,
        "startChar": 44,
        "endLine": 103,
        "endChar": 62
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5ca0847_0a967898",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 106,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: return nil, err",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "080d95c5_2b4ecbf5",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc.go",
        "patchSetId": 16
      },
      "lineNbr": 169,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "i think i was less clear than i should\u0027ve been before, but i was thinking that you might be able to make unpack() take a ...interface{} and actually do the length-check and type conversions itself, so you won\u0027t need to do them in each of the methods that makes a call.\n\none way to do this might be to make call() take both in and out args, but that would mean making it non-variadic, e.g.\n\n  func ... call(ctx context.Context, method string, in, out []interface{}) error\n\nthat\u0027d probably make the calls a bit more verbose, though.\n\nsomething like this could be a good compromise:\n\ntype call struct {\n    method string\n    args   []interface{}\n}\n\nfunc newCall(method string, args ...interface{}) call {\n    return call{method, args}\n}\n\nfunc (s *Servo) run(ctx context.Context, cl call, out ...interface{}) error {\n    // call serializeMethodCall\n    // send request\n    // unpack into out\n}\n\nand then:\n\nvar val string\nif err :\u003d s.run(ctx, newCall(\"echo\", \"foo\"), \u0026val); err !\u003d nil {\n    ...\n}\n\na sneakier way to do this, which i think is similar to what the d-bus library that we uses does[1], is to defer the call and return an intermediate object that has an e.g. \"store\" method that actually performs the call and unpacks the args.\n\nthe main strategy here is to push the actual logic around so that errors are only returned from a single place, to reduce the number of things that callers need to check.\n\n1. see e.g. https://chromium.googlesource.com/chromiumos/platform/tast-tests/+/HEAD/src/chromiumos/tast/local/dbusutil/proto.go",
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26f0e667_539b368a",
        "filename": "src/chromiumos/tast/remote/servo/xmlrpc_test.go",
        "patchSetId": 16
      },
      "lineNbr": 11,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-21T00:01:44Z",
      "side": 1,
      "message": "nit: i think we usually recapitalize here even though it makes the test name not exactly match the function name, e.g. TestXMLBooleanToBoolean. ditto below",
      "range": {
        "startLine": 11,
        "startChar": 9,
        "endLine": 11,
        "endChar": 28
      },
      "revId": "56ac6c98d3c0c5204d41dc41e9f3ecaac2cf7bd9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}