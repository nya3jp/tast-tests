{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8d18db2c_e09cffd7",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "cuj?",
      "range": {
        "startLine": 20,
        "startChar": 17,
        "endLine": 20,
        "endChar": 21
      },
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b88fa01a_32203a38",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8d18db2c_e09cffd7",
      "range": {
        "startLine": 20,
        "startChar": 17,
        "endLine": 20,
        "endChar": 21
      },
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d43206f5_e89d33c3",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "seems unnecessarily confusing. Why not use maxImages - 1 on line 105?",
      "range": {
        "startLine": 45,
        "startChar": 21,
        "endLine": 45,
        "endChar": 48
      },
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3fe72a5_28bfd9ae",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "Makes sense -- done.",
      "parentUuid": "d43206f5_e89d33c3",
      "range": {
        "startLine": 45,
        "startChar": 21,
        "endLine": 45,
        "endChar": 48
      },
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4c421fd_2ae77bd8",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "comment here would be useful as well. these are for synchronization, right?",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d1fa777_559a2750",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "Added comment. Yes -- to keep the screenshot task in sync with the foreground test.",
      "parentUuid": "f4c421fd_2ae77bd8",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11fe424f_4d4fde0a",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "you don\u0027t think we should keep going?",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00f93adb_79cd4267",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "Hm, this doesn\u0027t actually kill the test, I guess I was just worried about letting errors propagate in the screenshot recorder. I think it makes sense to continue though since each screenshot should be independent, so I removed this line so we can keep going!",
      "parentUuid": "11fe424f_4d4fde0a",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc065ece_8474aadd",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "Don\u0027t we have 1 more at the end?",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "536a30b2_209331ad",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "This was poorly worded -- I hope my new comment is a bit better. I wanted to compress now, without waiting for the last screenshot, because sometimes tests timeout after a wildly long time (some desks tests are timing out after 30 minutes). If I\u0027m taking screenshots every minute, and I reached my max number at 5 minutes, I don\u0027t want to hang around for a potentially really long period of time without doing anything; I\u0027m worried the test will end without compression because of something catastrophic, and we will be stuck with long lists of unzipped images on stainless. \n\nI then call compress again when Stop is called, but that call doesn\u0027t do any duplicate work -- it only compresses the non-compressed images.\n\nNote: lmk if you think that compressing really is unnecessary here. This was only my way of trying to mitigate any side effects of this change.",
      "parentUuid": "cc065ece_8474aadd",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "564b7db4_5f520d49",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-10-02T18:46:01Z",
      "side": 1,
      "message": "Oh, that wasn\u0027t clear. I guess we could also consider compressing each image as it\u0027s created, but we should probably try to do the compression outside of the recorder? Are we concerned about the impact to CPU during compression?\n\nI don\u0027t think we should be too worried about optimizing the error scenario because it\u0027s just an error scenario. Obviously we don\u0027t want to do something really bad like upload a gig of screenshots.",
      "parentUuid": "536a30b2_209331ad",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0080c8f1_3d58cea3",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-10-03T17:46:33Z",
      "side": 1,
      "message": "Note: compressing a jpg file doesn\u0027t shave off much of anything. If we really needed to lessen the space we\u0027d need to resize the image, which would be a CPU heavy op, and there\u0027s no easy way of doing that without other libraries I think. Zipping the file is mainly going to be useful for not having long lists of screenshots for each test when you open stainless, which could be very beneficial.\n\n_Practically_, I\u0027m not worried about the issue of CPU usage during compression, because we set the max number of images, and compressing 10 pictures is basically instantaneous. However, if we were compressing a gig of screenshots, we should be pretty worried, but we\u0027d probably never set the number of screenshots to be above 10 for any test, so we should be ok. \n\nI currently removed the compression from inside the recorder, bc I don\u0027t ever want to try to compress a massive amount of screenshots, since that for sure would affect the CPU. But, we should probably discuss the merits of compressing after each shot, even if we don\u0027t actually do it (which I\u0027m totally ok with!). First, it\u0027d be cheap (I can\u0027t imagine how compressing a single picture, which does very little, would change CPU usage in any way). Second, we\u0027d guarantee that every shot would be in the zip file in stainless. But I\u0027m 100% open in either direction, and currently this CL compresses outside the recorder.",
      "parentUuid": "564b7db4_5f520d49",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "853b2204_395a97ac",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 204,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "What\u0027s iteration? Is this the sequence number of screenshots?",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45638693_a4d4c4e5",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 204,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "Sorry, I had trouble thinking of a succinct word. I updated it to `number of screenshots` which is what I was going for. I did it so we can easily have an ordering of the screenshots if we had it in a list, and quickly see how many screenshots were taken in the test.",
      "parentUuid": "853b2204_395a97ac",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47c9ae0a_072073f6",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 204,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-10-02T18:46:01Z",
      "side": 1,
      "message": "I think \"sequence\" is fine, but whatever works. Iteration is confusing because some tests also have iterations, right?",
      "parentUuid": "45638693_a4d4c4e5",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "506edca3_37edc671",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 204,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-10-03T17:46:33Z",
      "side": 1,
      "message": "Agreed, \"iteration\" is ambiguous. Updated the comment.",
      "parentUuid": "47c9ae0a_072073f6",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dac5f07_a03de212",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-09-30T21:35:21Z",
      "side": 1,
      "message": "What does the final filename look like?",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16722e57_426111eb",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-09-30T22:13:10Z",
      "side": 1,
      "message": "`cuj-tests.zip` -- this is the only file added to stainless.\n\nand after unzipping that file, you\u0027d see\n1-10.jpg\n2-20.jpg\n3-30.jpg\n4-35-end.jpg\n\nThe names were supposed to be succinct, because they would be housed in the test folder anyways, so it felt redundant to put the test name. \n\nI added a reference to the final file name to the `compress` function.",
      "parentUuid": "4dac5f07_a03de212",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ff35be1_cc6423d4",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1000623
      },
      "writtenOn": "2022-10-02T18:46:01Z",
      "side": 1,
      "message": "I think something like cuj-1-10.jpg would be nice because sometimes these screenshots will be shared.",
      "parentUuid": "16722e57_426111eb",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06d76379_dd20cad8",
        "filename": "src/chromiumos/tast/local/chrome/uiauto/screenshot_recorder.go",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1540282
      },
      "writtenOn": "2022-10-03T17:46:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ff35be1_cc6423d4",
      "revId": "59821e4116bb086c105c6551b87429f9f025adb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}