{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "535c3011_a7ec1042",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:16:01Z",
      "side": 1,
      "message": "FYI Kyle and David.",
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d66566c6_2e1f00e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Nice work! You called out all the important questions I would have raised. Passing over to Kyle, who should be able to answer them.",
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e7593c7_18cfa86c",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T01:00:44Z",
      "side": 1,
      "message": "This test breaks if it is run consecutively after .Basic, since the Instant Tether connection is not torn down between the two, given they\u0027re in the same fixture. Two approaches to fixing this for this test: \n\n- We introduce a local function that is called at the top to teardown a connection if it exists, but this assumes that this test is always run second, which I don\u0027t think is a safe assumption.\n- We introduce a new sub-classed Fixture which tears the Instant Tether connection between tests in the same Fixture. Probably the cleanest approach, especially if we\u0027re planning on more InstantTether tests in the long term. Not sure if there\u0027s any way to drop the connection not involving the UI, but that\u0027s an implementation detail TBD.",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 39
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58586e05_6f7d170f",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Kyle, what do you think here?",
      "parentUuid": "2e7593c7_18cfa86c",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 39
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04575384_c363343a",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2022-11-10T17:43:14Z",
      "side": 1,
      "message": ".Basic should disconnect the Instant Tether connection at least, at least when testing crrev.com/c/4014816 I was able to run both of the subtests consecutively. What specifically is broken when running this test afterwards? If cleanup is an issue though, we can definitely add a new fixture or cleanup steps to the existing one to handle Instant Tether connection cleanup",
      "parentUuid": "58586e05_6f7d170f",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 39
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b76628c_4ffc890b",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "I keep using the word \"System Tray\", but given the existence of //chromiumos/tast/local/chrome/uiauto/quicksettings, perhaps \"QuickSettings\" is more apt/self-consistent here.",
      "range": {
        "startLine": 39,
        "startChar": 5,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ddae2f2_08f6980b",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "\"UnifiedSystemTray\" refers to the chip on the bottom bar with the time, but clicking it opens the Quick Settings menu - so I\u0027ve changed the naming in the desc field for this test and will rename file once we land on a more concrete iteration so comments aren\u0027t moved around. :)",
      "parentUuid": "6b76628c_4ffc890b",
      "range": {
        "startLine": 39,
        "startChar": 5,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "218d186d_e5222d58",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Are you clicking the label or button here? https://screenshot.googleplex.com/9ngX8HnPGpvQ5SQ.png\n\nIf wifi is off, clicking the label or button will have the same effect: opening the Network quick settings.\n\nHowever, if wifi is on, clicking the label will open the Network quick settings, while clicking the button will turn off wifi.\n\nPlease clarify which one you\u0027re clicking here (it should most likely be the label).",
      "range": {
        "startLine": 46,
        "startChar": 15,
        "endLine": 46,
        "endChar": 19
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3fac47c_76654910",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Networks",
      "range": {
        "startLine": 46,
        "startChar": 10,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5d9e221_37f3b99e",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3fac47c_76654910",
      "range": {
        "startLine": 46,
        "startChar": 10,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c007f61c_61d8203d",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "The call is to the PodIconButton, so the icon itself. Noted that this does have the behavior as described, so moving to click the label instead.",
      "parentUuid": "218d186d_e5222d58",
      "range": {
        "startLine": 46,
        "startChar": 15,
        "endLine": 46,
        "endChar": 19
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b27624e_9c94769f",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "nit: Please capitalize.",
      "range": {
        "startLine": 49,
        "startChar": 27,
        "endLine": 49,
        "endChar": 28
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5683669e_3ec2b7e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b27624e_9c94769f",
      "range": {
        "startLine": 49,
        "startChar": 27,
        "endLine": 49,
        "endChar": 28
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd1cae12_90449cb7",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Let\u0027s just say \"phone\" to be explicit?",
      "range": {
        "startLine": 60,
        "startChar": 48,
        "endLine": 60,
        "endChar": 61
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "002bc297_96e42839",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dd1cae12_90449cb7",
      "range": {
        "startLine": 60,
        "startChar": 48,
        "endLine": 60,
        "endChar": 61
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4697117e_8cb584c8",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T01:00:44Z",
      "side": 1,
      "message": "This is probably brittle, but since the UITree does not have any distinguishing feature for what is an Instant Tether connection and what is a Wifi network, this is the easiest way forward. Some alternatives, albeit with more effort, include: \n\n- Finding the \"Mobile Data\" header and finding its next sibling. This would require checking that the next element under the parent is not a label (\"no mobile devices found\"), but a button (ie, the device), and then clicking it. This has its own issues with being brittle, as any changes to the UI, similar to this regex match, will break it.\n\n- We introduce some additional metadata to the Mobile data rows in the Quick Settings network panel. This would be most beneficial for future tests, but would touch other parts of the codebase. \n\nA note that this has the potential to break if a nearby network happens to be named the same as the testing device, but I doubt this is an immediate concern for our DUT + lab purposes.\n\nThread discussing is in our Chat space + https://paste.googleplex.com/6004716487049216 for UITree reference.",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 64,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b793544_db394173",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Nice callout Mark, thanks for keeping an eye out for brittle patterns. I will defer to Kyle and David here on what is best.\n\nIf we do keep this, I suggest printing the value of `deviceName` and the button text being search for so that test debuggers can easily see if there\u0027s a mismatch. (unless that is already provided by a failed build of `mobileNetworkView`, or a failed call to `ui.WaitUntilExists(mobileNetworkView)`?)",
      "parentUuid": "4697117e_8cb584c8",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 64,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a722bae2_97cf3966",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:58:06Z",
      "side": 1,
      "message": "Jumping in with another comment - ``WaitUntilExists`` outputs a message with the name of the expected button (and thus the device name) if it fails to find a matching mobile device:\n\n```last error follows: Uncaught (in promise): \"failed to find node with properties: {name: /Connect to .*This is a test device/, role: button, ancestor: {className: /\\\\bNetworkDetailedNetworkViewImpl\\\\b/, ancestor: {className: \\\"UnifiedSystemTrayView\\\"}}}\"```\n\nI think this should provide enough info for debug, unless we want to be more specific.",
      "parentUuid": "4b793544_db394173",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 64,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f87e2ef_ebb3515c",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2022-11-10T17:43:14Z",
      "side": 1,
      "message": "To make it less brittle, can we simply remove the `.Ancestor`? `Role` + `Name` is usually pretty good/stable in my experience. Not perfect since the node names can easily change, but that tends to change less than the node hierarchy and class names from what I\u0027ve seen.\n\nAlso another possibly more reliable way to get the device name could be to extract it from the `Connected devices` section in OS settings rather than the Fixture\u0027s attributes (we just pull those in with ADB commands and don\u0027t do any real verification on them).",
      "parentUuid": "a722bae2_97cf3966",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 64,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a73e5b0e_815c22e4",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "same nit: please capitalize.",
      "range": {
        "startLine": 67,
        "startChar": 27,
        "endLine": 67,
        "endChar": 28
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a0601969_31f0f1c4",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a73e5b0e_815c22e4",
      "range": {
        "startLine": 67,
        "startChar": 27,
        "endLine": 67,
        "endChar": 28
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9371696_afaf4fab",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T01:00:44Z",
      "side": 1,
      "message": "Since the UITree also doesn\u0027t seem to have any exposure to the \"Connected\" label, this simply confirms that the connection has been successfully established by the change in Label to describe it as network settings. \n\nI think an improvement here could be to introduce a check for actual connection using a ping command on terminal like we do for .Basic.",
      "range": {
        "startLine": 77,
        "startChar": 1,
        "endLine": 77,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b82ec7ca_3d015445",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1229022
      },
      "writtenOn": "2022-11-09T18:32:32Z",
      "side": 1,
      "message": "Nice callout again ;) I believe Kyle added an actual connection check in https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/4014816 so I\u0027ll let him chime in here.",
      "parentUuid": "f9371696_afaf4fab",
      "range": {
        "startLine": 77,
        "startChar": 1,
        "endLine": 77,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5210675_ba1174e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1558097
      },
      "writtenOn": "2022-11-09T19:47:12Z",
      "side": 1,
      "message": "Sounds good! I did see that\u0027s being tested now. Is there any reason we\u0027re no longer pinging google.com and rather rendering the Chromium website?",
      "parentUuid": "b82ec7ca_3d015445",
      "range": {
        "startLine": 77,
        "startChar": 1,
        "endLine": 77,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "205b377f_525496af",
        "filename": "src/chromiumos/tast/local/bundles/cros/instanttether/systemtray.go",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2022-11-10T17:43:14Z",
      "side": 1,
      "message": "Ah yeah I forgot to look back into that. For some reason after updating the test the way I did, `ping` would time out even though the connection was good. Not sure why, my guess would be that `ping` wasn\u0027t using the right interface or something like that, maybe since that CL no longer completely disables the WiFi adapter.\n\nI didn\u0027t think it was a big deal, `ping` is probably more reliable but I just wanted to get it working since I\u0027ve been stuck on those test changes for a while.",
      "parentUuid": "a5210675_ba1174e8",
      "range": {
        "startLine": 77,
        "startChar": 1,
        "endLine": 77,
        "endChar": 155
      },
      "revId": "10dc64beb945b331d327f05a0415e0f9b71d5d78",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}