{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ddcc07fb_6f1b1f07",
        "filename": "src/chromiumos/tast/local/memory/crosvm_fincore.go",
        "patchSetId": 2
      },
      "lineNbr": 139,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2022-04-12T00:47:25Z",
      "side": 1,
      "message": "Why is this necessary? We weren\u0027t filtering out crosvm instances launched by other processes before, did something change so that it is now necessary?",
      "range": {
        "startLine": 139,
        "startChar": 3,
        "endLine": 139,
        "endChar": 52
      },
      "revId": "e65f3e51bf1f84265e8546051977eef2268f95b4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f3958a9_b11afda0",
        "filename": "src/chromiumos/tast/local/memory/crosvm_fincore.go",
        "patchSetId": 2
      },
      "lineNbr": 139,
      "author": {
        "id": 1529254
      },
      "writtenOn": "2022-04-12T00:54:19Z",
      "side": 1,
      "message": "We pass images from concierge to crosvm as `/proc/self/fd` paths. This is what changed.\nUnless we use just the toplevel crosvm process there may be weird fd collisions in forked/child processes",
      "parentUuid": "ddcc07fb_6f1b1f07",
      "range": {
        "startLine": 139,
        "startChar": 3,
        "endLine": 139,
        "endChar": 52
      },
      "revId": "e65f3e51bf1f84265e8546051977eef2268f95b4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffd3cc5d_9879697c",
        "filename": "src/chromiumos/tast/local/memory/crosvm_fincore.go",
        "patchSetId": 2
      },
      "lineNbr": 139,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2022-04-12T01:22:20Z",
      "side": 1,
      "message": "So the concern is that child processes would not retain the image fds, so you might end up with fd collisions? Although, is there any guarantee that the main crosvm process actually retains the image fds (instead of doing something like completely handing them off to sandboxed virtio devices)?\n\nEither way, can you expand on this comment? It\u0027s clear from the code that we\u0027re filtering out crosvm processes not spawned by concierge, so the comment as is doesn\u0027t really add any value. What\u0027s not clear is why we\u0027re doing it. Maybe something like this:\n\n // Filter out sandbox crosvm processes spawned from the main crosvm process. This\n // is done because ...",
      "parentUuid": "8f3958a9_b11afda0",
      "range": {
        "startLine": 139,
        "startChar": 3,
        "endLine": 139,
        "endChar": 52
      },
      "revId": "e65f3e51bf1f84265e8546051977eef2268f95b4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}