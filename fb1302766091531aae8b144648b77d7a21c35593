{
  "comments": [
    {
      "key": {
        "uuid": "b6f5c681_7e218f0c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1000221
      },
      "writtenOn": "2020-07-10T09:31:25Z",
      "side": 1,
      "message": "Do you mind filing a buganizer issue for tracking/enabling subtests? One for all should be fine.",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 8
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9316bec3_459e179b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b6f5c681_7e218f0c",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 8
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a2c7402_27be0baa",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-02T10:16:29Z",
      "side": 1,
      "message": "It is okay to leave the ui job stopped after the test. So we can replace this precondition by only three lines of code:\n\n func IGT(ctx context.Context, s *testing.State) {\n   if err :\u003d upstart.StopJob(ctx, \"ui\"); err !\u003d nil {\n     s.Fatal(\"Failed to stop ui job: \", err)\n   }\n\n   ...\n }",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01a21d8a_e9ffd5d2",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-03T06:22:35Z",
      "side": 1,
      "message": "Okay, that\u0027s simpler. What\u0027s the guide for when a precondition should be used, versus just performing the action in the test body as suggested?\n\ngraphics.DRM.* do something similar. My understanding is that I could also make them use the same precondition, which might batch these tests to run consecutively. Maybe not a big time saving in the big picture, though.",
      "parentUuid": "7a2c7402_27be0baa",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "147b3827_3b1bfe3e",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-03T08:46:22Z",
      "side": 1,
      "message": "Hmm, graphics.DRM.* seems not using preconditions. Am I looking at a different file?\nhttps://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/graphics/drm.go\n\nPrecondition\u0027s point is to avoid lengthy setup process for every test. In this case setup is fairly fast (especially when the ui job is already stopped), so we don\u0027t need it.\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#preconditions",
      "parentUuid": "01a21d8a_e9ffd5d2",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d591c67b_fcc78861",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "graphics.DRM doesn\u0027t currently use preconditions; my thought was that since it has the same precondition as this one, I could (in a follow up) refactor graphics.DRM to use the same precondition as the one I defined here.\n\nBut since the setup is fast and simple, it sounds like it\u0027s not worth the effort. I\u0027ll remove the precondition from this file and just do the setup in the test body.\n\nOne side effect of not re-starting the ui job is there is now a delay when starting a test:\n\n2020/07/27 10:26:16 [09:26:14.375] Still waiting for important system services to be running\n2020/07/27 10:26:46 [09:26:44.375] Still waiting for important system services to be running\n2020/07/27 10:26:46 [09:26:44.387] Failed waiting for job debugd: context deadline exceeded; last error follows: status stop/waiting\n\nSeems debugd gets stopped/started along with ui, and (all?) tests wait to check if it\u0027s running in:\nhttp://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/ready/ready.go?l\u003d37\u0026rcl\u003d70dd57f5fe4507c0f9042793c2219f9ca601aca9",
      "parentUuid": "147b3827_3b1bfe3e",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4350fcba_41e3380e",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-29T02:26:33Z",
      "side": 1,
      "message": "Tests being delayed for stopped ui job is not desirable. I filed crbug.com/1110559 and send a fix soon. Thanks for letting me know this issue!",
      "parentUuid": "d591c67b_fcc78861",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2af517cd_98869b90",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-08-03T22:30:01Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "4350fcba_41e3380e",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bce9c5e_6dcf68d5",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-02T10:16:29Z",
      "side": 1,
      "message": "I assume we\u0027re going to add more parameters soon?",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 25
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "130623b3_3c56d9a4",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-03T06:22:35Z",
      "side": 1,
      "message": "Yes, I filled this out with kms_atomic, but there are a few dozen test executables, of which I\u0027d expect to run several. Still working on the exact set.",
      "parentUuid": "2bce9c5e_6dcf68d5",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 25
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a4fd300_6057d353",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-03T08:46:22Z",
      "side": 1,
      "message": "Thanks for clarification!",
      "parentUuid": "130623b3_3c56d9a4",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 25
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf1098a9_228456fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1000221
      },
      "writtenOn": "2020-07-10T09:31:25Z",
      "side": 1,
      "message": "Is this going to run on all devices (especially ARM)?",
      "range": {
        "startLine": 73,
        "startChar": 14,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "024548db_bc653faa",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "Ideally it would run on all devices, but I haven\u0027t tested in on ARM. I know there are some teams looking at running these tests on ARM, though.",
      "parentUuid": "cf1098a9_228456fa",
      "range": {
        "startLine": 73,
        "startChar": 14,
        "endLine": 73,
        "endChar": 24
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f64954d_c99a9b21",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-02T10:16:29Z",
      "side": 1,
      "message": "We can set the per-param timeout to testing.Param.Timeout.",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f37c67a_69e8c97e",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "This timeout is sort of arbitrary right now, but there\u0027s a good chance it could be tuned to be different per test.\n\nWhat\u0027s the recommended approach here? Should I just drop the per-test timeout and add it in when it\u0027s shown that it\u0027s needed?\n\nWhat\u0027s the interaction between the per-test timeout and the one set in line 80? It seems that the timeout for any given test case should be less than the overall timeout, and the sum of all the timeouts should not be less than the overall timeout.",
      "parentUuid": "9f64954d_c99a9b21",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8691b20_529bc8fd",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-07-29T02:26:33Z",
      "side": 1,
      "message": "For parameterized tests, either one of testing.Test.Timeout or testing.Param.Timeout can be set, but not both. If testing.Test.Timeout is set, it is used for all parameters. If testing.Param.Timeout is set, it is used for a particular parameter. Finally, if neither of them are set, the default timeout is used for all parameters.\n\nIn other words, think of parameterized tests as a convenient way to define multiple tests at once. For example, consider the following parameterized test definition:\n\n testing.AddTest(\u0026testing.Test{\n   Name: \"Test\",\n   Params: []testing.Param{\n     {Name: \"foo\", Timeout: 3*time.Second},\n     {Name: \"bar\", Timeout: 5*time.Second},\n   },\n })\n\nThis is semantically similar to the following two AddTest calls (while calling AddTest multiple times is forbidden actually):\n\n testing.AddTest(\u0026testing.Test{\n   Name: \"Test.foo\"\n   Timeout: 3*time.Second,\n })\n testing.AddTest(\u0026testing.Test{\n   Name: \"Test.bar\"\n   Timeout: 5*time.Second,\n })\n\nSo, my recommendation is to remove testing.Test.Timeout and set testing.Param.Timeout to all parameters.",
      "parentUuid": "6f37c67a_69e8c97e",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bb047f2_7eeda9bc",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-08-03T22:30:01Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "c8691b20_529bc8fd",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "496cdf36_4cdc8749",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2020-08-04T10:16:51Z",
      "side": 1,
      "message": "Seems like you didn\u0027t set testing.Param.Timeout? Without it, the default timeout (2min) is used. Note that it\u0027s different from testing.Param.Val.timeout.",
      "parentUuid": "6bb047f2_7eeda9bc",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aea536e2_f6e85001",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-08-04T19:36:30Z",
      "side": 1,
      "message": "If I set testing.Param.Timeout, it would look like:\n\n                {\n\t\t\tName: \"kms_addfb_basic\",\n\t\t\tVal: igtTest{\n\t\t\t\texe:     \"kms_addfb_basic\",\n\t\t\t\ttimeout: 5 * time.Minute,\n\t\t\t},\n\t\t\tExtraSoftwareDeps: []string{\"drm_atomic\"},\n                        Timeout: 5 * time.Minute,\n\t\t},\n\nAt this point, would the testing.Param.Val.timeout be redundant, I suppose? Would I need to extract testing.Param.Timeout to pass into `context.WithTimeout` in the IGT function, or does tast handle testing.Param.Timeout for me?",
      "parentUuid": "496cdf36_4cdc8749",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 29
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fc91295_da4a2ab9",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 81,
      "author": {
        "id": 1000221
      },
      "writtenOn": "2020-07-10T09:31:25Z",
      "side": 1,
      "message": "Lets not run in mainline but in graphics.",
      "range": {
        "startLine": 81,
        "startChar": 27,
        "endLine": 81,
        "endChar": 35
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f048f663_f6f85515",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 81,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6fc91295_da4a2ab9",
      "range": {
        "startLine": 81,
        "startChar": 27,
        "endLine": 81,
        "endChar": 35
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9644225_04858b62",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1000221
      },
      "writtenOn": "2020-07-10T09:31:25Z",
      "side": 1,
      "message": "There is nothing we need to parse from the log files?",
      "range": {
        "startLine": 101,
        "startChar": 1,
        "endLine": 101,
        "endChar": 20
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a4f967d_ac5aafb3",
        "filename": "src/chromiumos/tast/local/bundles/cros/graphics/igt.go",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1196554
      },
      "writtenOn": "2020-07-27T16:48:56Z",
      "side": 1,
      "message": "For now I\u0027m not sure it\u0027s necessary. The return code will indicate if the test failed or not, and the logs can be inspected afterwards.\n\nWe can evaluate whether it\u0027s useful to parse a more detailed failure message out of the log and print that here instead.",
      "parentUuid": "a9644225_04858b62",
      "range": {
        "startLine": 101,
        "startChar": 1,
        "endLine": 101,
        "endChar": 20
      },
      "revId": "fb1302766091531aae8b144648b77d7a21c35593",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}