{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e0a9bbea_5eabe90a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-05T08:48:20Z",
      "side": 1,
      "message": "LGTM with another request (which I overlooked in the previous iterations, sorry!).",
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad7d9873_116abf94",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-05T08:48:20Z",
      "side": 1,
      "message": "nit: let\u0027s use crosCameraAlgoStartCmd.Kill().\nAlso, could you Wait() the process to be shutdown?",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8583b34f_c88bf78b",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1544253
      },
      "writtenOn": "2022-07-05T09:40:06Z",
      "side": 1,
      "message": "there is an infinite loop inside the process, so the process won\u0027t shutdown by itself normally\n\nor did you mean to wait after the .Kill() until the process really exited?",
      "parentUuid": "ad7d9873_116abf94",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "236c37fc_6110016f",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-05T09:58:54Z",
      "side": 1,
      "message": "Yes, kill then wait, to collect the zombie process.",
      "parentUuid": "8583b34f_c88bf78b",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a1e743d_aab01e01",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1544253
      },
      "writtenOn": "2022-07-05T11:02:37Z",
      "side": 1,
      "message": "oh I learned somethi",
      "parentUuid": "8583b34f_c88bf78b",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d134924_d28949d8",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1544253
      },
      "writtenOn": "2022-07-05T11:02:37Z",
      "side": 1,
      "message": "oh I learned something new today\nhttps://stackoverflow.com/questions/36050503/golang-child-processes-become-zombies\n\nAbout the `crosCameraAlgoStartCmd.Kill()`, somehow I\u0027m getting error: `no such process`\nand what actually happen is, the process was still there, not killed at all.\n\nI see that the `testexec Cmd.Kill` implementation is slightly different than the original `os/exec cmd.Process.Kill` implementation",
      "parentUuid": "236c37fc_6110016f",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43181242_4ba58146",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-06T02:25:45Z",
      "side": 1,
      "message": "\u003e the process was still there, not killed at all.\n\nSounded concerning. Could you check what happens exactly?",
      "parentUuid": "7d134924_d28949d8",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73c41a1a_53078f1c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1544253
      },
      "writtenOn": "2022-07-06T07:45:06Z",
      "side": 1,
      "message": "I found the issue, testexec implementation tries to send kill signal to process group id, but it is assuming pid \u003d\u003d pgid, which is apparently the default behavior.\n\nBecause I set SysProcAttr (line 94), the Setpgid was default to `false`, thus the pgid is something else (the parent I think).\nSo, I just need to adjust that part.",
      "parentUuid": "43181242_4ba58146",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e9e0c8d_5c7ccbc1",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-07T13:25:50Z",
      "side": 1,
      "message": "https://source.chromium.org/chromium/chromiumos/platform/tast-tests/+/main:src/chromiumos/tast/common/testexec/testexec.go;l\u003d102\n\nIt\u0027s a default behavior actually. So something different is caused.\nActually, I expect that behavior, so that signal is delivered to the process group.",
      "parentUuid": "73c41a1a_53078f1c",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49a5deed_ca131531",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/hal3_aue.go",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1544253
      },
      "writtenOn": "2022-07-08T03:17:58Z",
      "side": 1,
      "message": "yes that is default, but if I do\n```\ncmd.SysProcAttr \u003d \u0026syscall.SysProcAttr{}\n```\nwithout setting the Setpgid, then it will be default to false,\nin the previous patchset, I modified SysProcAttr by creating a new SysProcAttr without setting the Setpgid value.\n\ndemo:\nhttps://go.dev/play/p/V4klasOiaTt",
      "parentUuid": "1e9e0c8d_5c7ccbc1",
      "range": {
        "startLine": 116,
        "startChar": 36,
        "endLine": 116,
        "endChar": 50
      },
      "revId": "1389ddc8b33e23ac74f3777b072f8427b725efac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}