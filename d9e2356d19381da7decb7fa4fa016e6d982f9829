{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2fcc4b29_fd9c09d0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-07T00:13:02Z",
      "side": 1,
      "message": "Only got this working for local tests. For CB-\u003eCB, it\u0027s trickier since the ssh.Cmd does not associate the context with the command. Instead it is passed like cmd.Start(ctx), and we can\u0027t get the fixture context in PreTest.",
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1dcb379_f4518ed4",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-04-07T01:17:41Z",
      "side": 1,
      "message": "Do you need the context part at all? Could you just start the command in PreTest with something like exec.Command() and then kill it in PostTest?\n\nNot sure on the tast guidelines on it but there are multiple examples in the code base",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e7bef9f_6618ac86",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-07T01:58:51Z",
      "side": 1,
      "message": "The documentation in testexec does say that tast tests should always use it over os/exec. Let\u0027s see if tast-owners have any feedback here, since it would be simpler to use os/exec rather than abusing testexec and the fixture context here.",
      "parentUuid": "b1dcb379_f4518ed4",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36b79a4b_7171140c",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-04-07T03:32:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9e7bef9f_6618ac86",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5ca4028_086108db",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-07T17:58:22Z",
      "side": 1,
      "message": "tast-owners, WDYT about using os/exec so we can avoid this sort of workaround? Once crbug/1189962 is available this will all be much cleaner.",
      "parentUuid": "36b79a4b_7171140c",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49d803b4_1729e677",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-04-08T07:35:34Z",
      "side": 1,
      "message": "Don\u0027t use os/exec as it does not care about context and it can leave processes hanging in the background.\n\nIn this case IMO you can create a callback createbtsnoopCmd in SetUp that creates instances of btsnoopCmd on demand and it will have a reference to s.FixtContext(). It should take the test output dir as a parameter so it can write data there directly, no more need for a tempfile.\n\nThis works around the need to keep a reference to a context in a struct (which is discouraged), but gives you the flexibility you need.",
      "parentUuid": "c5ca4028_086108db",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b08d6b7b_875c402d",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 475,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-08T23:43:08Z",
      "side": 1,
      "message": "Nice, thanks for the neat suggestion! Went ahead and did it that way and it\u0027s much cleaner now.",
      "parentUuid": "49d803b4_1729e677",
      "range": {
        "startLine": 472,
        "startChar": 1,
        "endLine": 475,
        "endChar": 27
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3070b43_0c038cbd",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 480,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-04-07T01:17:41Z",
      "side": 1,
      "message": "Does this need to be fatal?",
      "range": {
        "startLine": 480,
        "startChar": 4,
        "endLine": 480,
        "endChar": 9
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5577fc22_ad195ba5",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 480,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-07T01:58:51Z",
      "side": 1,
      "message": "I just double-checked and it looks like `btmon -w` will overwrite the file if it still exists. Want me to just get rid of this?",
      "parentUuid": "d3070b43_0c038cbd",
      "range": {
        "startLine": 480,
        "startChar": 4,
        "endLine": 480,
        "endChar": 9
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7969f175_2c6a2a4c",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 480,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-04-07T03:32:56Z",
      "side": 1,
      "message": "Sure",
      "parentUuid": "5577fc22_ad195ba5",
      "range": {
        "startLine": 480,
        "startChar": 4,
        "endLine": 480,
        "endChar": 9
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9414bc4_542c7c9a",
        "filename": "src/chromiumos/tast/local/chrome/nearbyshare/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 480,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-04-07T17:58:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7969f175_2c6a2a4c",
      "range": {
        "startLine": 480,
        "startChar": 4,
        "endLine": 480,
        "endChar": 9
      },
      "revId": "d9e2356d19381da7decb7fa4fa016e6d982f9829",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}