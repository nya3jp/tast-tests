{
  "comments": [
    {
      "key": {
        "uuid": "7642c237_baf74067",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-07-21T18:55:18Z",
      "side": 1,
      "message": "Now trying to wait for the windows to be minimized, it waits for five minutes and then times out. That mystifies me.\nhttps://paste.googleplex.com/4900924466135040",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "741e1362_22a1cd58",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1118421
      },
      "writtenOn": "2020-07-21T23:22:57Z",
      "side": 1,
      "message": "Weird. So the error message is \"Ash window state was Maximized but should be Minimized\" which suggested DragToShowHomescreen() does not minimize the ARC window as expected. Is there any way for you to verify that this function https://source.chromium.org/chromium/chromium/src/+/master:ash/home_screen/drag_window_from_shelf_controller.cc;drc\u003dc12f7a008d7096c48d0c4db36c6d6edbc71700fb;l\u003d631?originalUrl\u003dhttps:%2F%2Fcs.chromium.org%2F is called for the two ARC windows?",
      "parentUuid": "7642c237_baf74067",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "672cb193_a2174121",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-07-22T18:38:23Z",
      "side": 1,
      "message": "Actually the error message is different every time I run the test. See [1] and [2].\n\nAnyway, by adding code with LOG(ERROR), I have observed that during my Tast test, the function DragWindowFromShelfController::ScaleDownWindowAfterDrag is called for Settings but not for DeletionHelperActivity.\n\n[1] https://paste.googleplex.com/6557537744715776\n[2] https://paste.googleplex.com/5892951685201920",
      "parentUuid": "741e1362_22a1cd58",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5b33559_e80fff14",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1118421
      },
      "writtenOn": "2020-07-23T18:32:02Z",
      "side": 1,
      "message": "oh sorry, right, this function should only be called for the dragged window, not for other windows. But this function https://source.chromium.org/chromium/chromium/src/+/master:ash/wm/window_util.cc;drc\u003df56b5e1e538025dbd4f1a99ab53e09e2152501ac;l\u003d266?originalUrl\u003dhttps:%2F%2Fcs.chromium.org%2F should be called for all windows, which cause the window state change from MAXIMIZED to MINIMIZED. \n\nwhat if you manually wait for a few seconds (just for testing) before going to overview, will this test pass?",
      "parentUuid": "672cb193_a2174121",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96c70204_5977885d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-07-23T18:39:35Z",
      "side": 1,
      "message": "Unfortunately no, testing.Sleep makes no difference.",
      "parentUuid": "d5b33559_e80fff14",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93012be2_a3ce6379",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1118421
      },
      "writtenOn": "2020-07-23T18:58:37Z",
      "side": 1,
      "message": "Sorry I\u0027m out of ideas. any possibility to modify DragToShowHomescreen() test api so that it only returns true when all windows state have changed?",
      "parentUuid": "96c70204_5977885d",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d3e5fc9_20bab28b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2020-07-23T19:23:03Z",
      "side": 1,
      "message": "DragToShowHomescreen is not using test APIs. It generates certain series of gestures to cause that effect (drag up from the bottom and quickly finish the gesture).\nThis also works on another test (ui.TaskSwitchCUJ.tablet_mode).\n\nDoes that really call MinimizeAndHideWithoutAnimation?  I believe so but it would be great to confirm that. If it\u0027s not happening, that would mean that the generated gesture might be wrong. Seeing the touch points through --ash-touch-hud flag would be helpful to understand what\u0027s going on.",
      "parentUuid": "93012be2_a3ce6379",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a7ef45b_a39ada19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-07-23T19:33:45Z",
      "side": 1,
      "message": "By adding code with LOG(ERROR), I have verified that yes it really calls MinimizeAndHideWithoutAnimation for both windows. The function has a parameter type with a vector of windows, and it is called twice, once with a vector that contains only the \"Remove items\" window, and once with a vector that contains only the \"Settings\" window.",
      "parentUuid": "2d3e5fc9_20bab28b",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1790c9a2_f76a98e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2020-07-23T19:42:01Z",
      "side": 1,
      "message": "If so, that would be a bug on Android, it may fail to minimize the target window even though Ash requests it.  As Daisy said (and written in the comment), the window states for Android app windows are asynchronously updated.\n\nI\u0027ve met such a bug the other day (crbug.com/1081974). Which version of Android are you using? If you haven\u0027t re-imaged ChromeOS for a while, I think it\u0027s better to update to the latest version.",
      "parentUuid": "5a7ef45b_a39ada19",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b539688_2dc86546",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1319142
      },
      "writtenOn": "2020-07-23T19:52:14Z",
      "side": 1,
      "message": "It is Android version 9, and I have re-imaged ChromeOS recently. As we discussed in email, the fix for crbug.com/1081974 never changed what happens when I run the test.",
      "parentUuid": "1790c9a2_f76a98e5",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de3fdaf6_0206f807",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2020-07-23T20:07:38Z",
      "side": 1,
      "message": "Please refer the revision of ARC in ChromeOS, that matters much. The revision is seen in chrome://version.\n\ncrbug.com/1081974 was caused by a CL in Android (see #c17 in it), takise reverted that CL (see #c20). I don\u0027t remember how the referred chromium CL (#c23) is related to the bug.\n\nAlso, if that\u0027s the case, I believe this also reproduces on real use cases. Can you make sure that it also happens if you manually conduct the operation by your finger?",
      "parentUuid": "0b539688_2dc86546",
      "revId": "9af1ad0b4a693e68feb305dc9d0ed40a5f8c6d1b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}