{
  "comments": [
    {
      "key": {
        "uuid": "3f8560bf_28e89ebb",
        "filename": "src/chromiumos/tast/local/dbusutil/proto.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-15T14:45:34Z",
      "side": 1,
      "message": "I think you don\u0027t need to keep these. Just extending CallProtoMethod to take |in| as a sliceshould work?\nNow only four files use the method, so the change wouldn\u0027t be huge, IMO.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc41894e_f4e0a065",
        "filename": "src/chromiumos/tast/local/dbusutil/proto.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-16T12:24:49Z",
      "side": 1,
      "message": "Done, but I\u0027m not sure about the extra boilerplate this adds (x -\u003e []proto.Message{x}). WDYT about keeping both the version with N args and the one with 1 arg, since that\u0027s by far the most common?",
      "parentUuid": "3f8560bf_28e89ebb",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a07ed9b_0c38349f",
        "filename": "src/chromiumos/tast/local/dbusutil/proto.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-16T15:06:15Z",
      "side": 1,
      "message": "Hmm..., I may be too new for golang to make the call :-).\nIf it is some common practice in golang, I\u0027m ok to have CallProtoMethod1. Do you know some examples?\n\nDan and/or nya-san may have some their opinion, here, too.",
      "parentUuid": "cc41894e_f4e0a065",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f44253b5_4586750c",
        "filename": "src/chromiumos/tast/local/dbusutil/proto.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-17T09:06:48Z",
      "side": 1,
      "message": "I didn\u0027t find any examples, so it\u0027s probably either frowned upon or at least an uncommon pattern. Let\u0027s hear what Dan and Shuhei say, but I\u0027d vote to keep only the N-version (see latest patch set).",
      "parentUuid": "0a07ed9b_0c38349f",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ebadb18_00902483",
        "filename": "src/chromiumos/tast/local/dbusutil/proto.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-17T09:20:07Z",
      "side": 1,
      "message": "I\u0027d vote to PS5, too.",
      "parentUuid": "f44253b5_4586750c",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69129d87_5a179625",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-15T14:45:34Z",
      "side": 1,
      "message": "This is not related to SessionManager interface, so could you remove the receiver?\n\nAlso, could you move this function into bundle/cros/session/ownership.go ?",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e94fb6cd_0e3d99b1",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-16T12:24:49Z",
      "side": 1,
      "message": "Remove receiver done.\n\nHowever, I\u0027d rather keep it here. Judging from autotests, it\u0027s highly likely that other tests will use it. Moreover, the function is directly related to StorePolicy/RetrievePolicy and kind of documents the usage. If it were somewhere else, it would be harder to discover. WDYT?",
      "parentUuid": "69129d87_5a179625",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd669b73_05da1910",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-16T15:06:15Z",
      "side": 1,
      "message": "I think;\n- Keeping here for SessionManager D-Bus interface makes sense, because it, specifically some _other_ D-Bus APIs, are used by non session manager related tests, too.\n- On the other hand, Policy related APIs are used only by session_manager policy related tests, which is in bundles/cros/session/..., AFAIK. Because MakeDevicePolicyDescriptor() is used by tests in the dir, my recommendation is move to its sub package now.\n\nActually some utilities about storing/retrieving policy is in the subpackage, so I still recommend you to move this utility to there.\n\nWDYT?",
      "parentUuid": "e94fb6cd_0e3d99b1",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52ede6cb_575ccc90",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-17T09:06:48Z",
      "side": 1,
      "message": "Can you explain where the distinction is between tast/local/session and tast/local/bundles/cros/session? I assume the former is closer to the device (D-Bus stuff etc.) and the latter is closer to tests, but I\u0027m wondering whether there\u0027s a clear guideline where to put what. I glanced through the docs, but didn\u0027t find anything.\n\nI wasn\u0027t able to put MakeDevicePolicyDescriptor under bundles/cros/session since that would create a circular dependency to bundles/cros/session/ownership. ownership seems to be the wrong place, so I created a new package bundles/cros/session/policy. WDYT?",
      "parentUuid": "bd669b73_05da1910",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0e64283_f1d9c7a9",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-17T09:20:07Z",
      "side": 1,
      "message": "\u003e  I assume the former is closer to the device (D-Bus stuff etc.) and the latter is closer to tests\n\nThis is my understanding.\nOr, I\u0027d say, if the utility is referred from multiple test packages (packages directly under bundles/cros), or referred from other utilities (packages under tast/local except bundles),\nwe moves out it from bundle packages, though there is not very strong rule around here.\n\n\u003e I wasn\u0027t able to put MakeDevicePolicyDescriptor under bundles/cros/session since that would create a circular dependency to bundles/cros/session/ownership. ownership seems to be the wrong place, so I created a new package bundles/cros/session/policy. WDYT?\n\nSorry, I meant bundles/cros/session/ownership.\nCould you elaborate why did you feel it is wrong? The package contains policy related utilities for device ownership related tests, such as StoreSettings or RetrieveSettings.\n\nIf bundles/cros/session/policy is better (maybe just for naming...?), then should we move those to policy packages, too?\nI\u0027d appreciate if you explain what should be in ownership and what should be policy.",
      "parentUuid": "52ede6cb_575ccc90",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03d21fbc_0790c43a",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-17T10:44:11Z",
      "side": 1,
      "message": "See my other comment. It seems cleaner to separate generic policy code from ownership-related code.",
      "parentUuid": "c0e64283_f1d9c7a9",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fffcdb7_90051008",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-18T10:04:04Z",
      "side": 1,
      "message": "I decided to put the descriptor function into ownership.go for now, but we should consider factoring out core policy functionality at some point.",
      "parentUuid": "03d21fbc_0790c43a",
      "range": {
        "startLine": 110,
        "startChar": 5,
        "endLine": 110,
        "endChar": 24
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "889198d2_8ff50243",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 120,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-15T14:45:34Z",
      "side": 1,
      "message": "To much with dbus names, could you rename this to StorePolicyEx? Ditto for below.",
      "range": {
        "startLine": 120,
        "startChar": 25,
        "endLine": 120,
        "endChar": 36
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7bf23e5_04aca5e7",
        "filename": "src/chromiumos/tast/local/session/session_manager.go",
        "patchSetId": 2
      },
      "lineNbr": 120,
      "author": {
        "id": 1161264
      },
      "writtenOn": "2019-01-16T12:24:49Z",
      "side": 1,
      "message": "Done. (I was originally planning to rename everything back to StorePolicy in the end, but given the amount of work that is going to be, I think I\u0027ll just leave the Ex)",
      "parentUuid": "889198d2_8ff50243",
      "range": {
        "startLine": 120,
        "startChar": 25,
        "endLine": 120,
        "endChar": 36
      },
      "revId": "4cbcc10d085ca130d8699a3bb94a845435d4a4e8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}