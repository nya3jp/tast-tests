{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "31fd7434_2865af37",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-11-12T05:22:01Z",
      "side": 1,
      "message": "Note you\u0027ll likely hit https://buganizer.corp.google.com/issues/205599498",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95dcb0ea_6e2bb32d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-12T17:27:37Z",
      "side": 1,
      "message": "Thanks for the pointer! Sounds like we won\u0027t get the record files until it\u0027s allowed from that list. Btw, would that be a blocker to check in this change? or can we go in parallel?",
      "parentUuid": "31fd7434_2865af37",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "146856c7_3a35dadf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-11-15T23:33:46Z",
      "side": 1,
      "message": "Generally looks good, but my preference would be to use testing.ContextOutDir in the service so you don\u0027t have to worry about file management and cleanup as much. You could always add an intermediate step in the service to save the recording to a temp dir and rename the file before moving to testing.ContextOutDir.\n\nIf you don\u0027t feel like doing this now, I\u0027d suggest doing it in a follow up at least",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9959858e_20dd1d46",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Kyle, mind following up on the bug to add screen record to the allowlist for reporting?",
      "parentUuid": "95dcb0ea_6e2bb32d",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08fe8af1_0bc46dfe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "146856c7_3a35dadf",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "516baf2a_bfb43ad1",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-11T03:13:19Z",
      "side": 1,
      "message": "Q: I don\u0027t think it\u0027s necessary to record in VM tests. Is there anyway to check if it runs on VM or HW?",
      "range": {
        "startLine": 78,
        "startChar": 18,
        "endLine": 78,
        "endChar": 35
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37657f68_fdbe97fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1118689
      },
      "writtenOn": "2021-11-12T05:22:01Z",
      "side": 1,
      "message": "why exclude VMs?",
      "parentUuid": "516baf2a_bfb43ad1",
      "range": {
        "startLine": 78,
        "startChar": 18,
        "endLine": 78,
        "endChar": 35
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0276c074_0db8a3e3",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-12T17:27:37Z",
      "side": 1,
      "message": "Haven\u0027t looked into why, but I have seen screen record failed in VM (amd64-generic) when tested locally.\nIs there any way to filter out VMs in test runtime? or should I set the software deps `lacros_stable` to exclude tast_vm?",
      "parentUuid": "37657f68_fdbe97fa",
      "range": {
        "startLine": 78,
        "startChar": 18,
        "endLine": 78,
        "endChar": 35
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e74349c3_bdf4e79c",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-11-15T23:33:46Z",
      "side": 1,
      "message": "I\u0027m not aware of any other options to distinguish between VM/non-VM, using tast_vm might be your best bet, but probably would be best not to exclude VMs if possible",
      "parentUuid": "0276c074_0db8a3e3",
      "range": {
        "startLine": 78,
        "startChar": 18,
        "endLine": 78,
        "endChar": 35
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15dd28c8_62e0a724",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Let\u0027s give it a go to see what happens on VMs. If it failed to record, I\u0027ll be able to file a bug for that. Marking this as resolved.",
      "parentUuid": "e74349c3_bdf4e79c",
      "range": {
        "startLine": 78,
        "startChar": 18,
        "endLine": 78,
        "endChar": 35
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29843656_20e56a5a",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-11-11T06:11:11Z",
      "side": 1,
      "message": "why not save this in the test result directory, s.OutDir()?",
      "range": {
        "startLine": 84,
        "startChar": 24,
        "endLine": 84,
        "endChar": 53
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ca9139d_d3709f9d",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-11T19:22:29Z",
      "side": 1,
      "message": "This is a local test service that runs on DUT and is called by a remote test. IIUC the test result directory s.OutDir is accessible from the remote test, but not from local service.\nBtw, alternatively I thought I could use testing.ContextOutDir() in which the files created in the local service would be copied to the test result directory in the remote test automatically for reporting. (Please correct me if I wrongly understood).\nBut I ended up using /tmp/lacros_faillog/ here to rename the randomly generated files by the screen reader.",
      "parentUuid": "29843656_20e56a5a",
      "range": {
        "startLine": 84,
        "startChar": 24,
        "endLine": 84,
        "endChar": 53
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d78768a4_d1b6bd73",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-11T20:54:16Z",
      "side": 1,
      "message": "IMO this part could be further refactored once your https://crrev.com/c/3251207 gets in. eg, moving screen recording logic to the common helper. Btw, for now I would like to get this in for quick investigation on the flakes to see why lacros doesn\u0027t consistently open from time to time. Any thoughts for flakes are welcome.",
      "parentUuid": "3ca9139d_d3709f9d",
      "range": {
        "startLine": 84,
        "startChar": 24,
        "endLine": 84,
        "endChar": 53
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f440436b_bff1c824",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-11-15T06:14:13Z",
      "side": 1,
      "message": "sgtm, jfyi https://crrev.com/c/3251207 is in if that changes anything",
      "parentUuid": "d78768a4_d1b6bd73",
      "range": {
        "startLine": 84,
        "startChar": 24,
        "endLine": 84,
        "endChar": 53
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6b92143_ffe3c4b6",
        "filename": "src/chromiumos/tast/local/bundles/cros/lacros/update_test_service.go",
        "patchSetId": 2
      },
      "lineNbr": 84,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Thanks for checking that in. I moved the code for starting/stopping record to the faillog helper using the same faillog dir. PTAL",
      "parentUuid": "f440436b_bff1c824",
      "range": {
        "startLine": 84,
        "startChar": 24,
        "endLine": 84,
        "endChar": 53
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1585ffc0_0c3177c9",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-11-15T23:33:46Z",
      "side": 1,
      "message": "you could probably skip this whole part using testing.ContextOutDir in the service:\nhttps://source.corp.google.com/chromeos_public/src/platform/tast/docs/writing_tests.md;l\u003d1562",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "381412ad_79cd1be2",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1585ffc0_0c3177c9",
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71f36b43_e0b79e09",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1390967
      },
      "writtenOn": "2021-11-15T23:33:46Z",
      "side": 1,
      "message": "this indexing seems a little weird, I guess the default output order from ls will line up correctly with the test steps? I feel like explicitly labeling them to line up with the test steps would be better in the long run.",
      "range": {
        "startLine": 142,
        "startChar": 87,
        "endLine": 142,
        "endChar": 88
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9dbf4006_a90419af",
        "filename": "src/chromiumos/tast/remote/bundles/cros/lacros/update/helper.go",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2021-11-16T06:43:44Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "71f36b43_e0b79e09",
      "range": {
        "startLine": 142,
        "startChar": 87,
        "endLine": 142,
        "endChar": 88
      },
      "revId": "52fd441f60be4201a116e53b95c8106f24b60806",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}