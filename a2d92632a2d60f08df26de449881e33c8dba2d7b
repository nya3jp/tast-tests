{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f6825348_27339948",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-09T23:11:19Z",
      "side": 1,
      "message": "I understand the timeout gets reduced depending on the num of iterations but I\u0027m sure this could be reduced to a more sensible timeout. 30 days seems pretty large. The global timeout for the test suites you\u0027ve added are less than this.",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c444f3ed_310466bd",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Revised the comment to explicitly call out why we need a long timeout.\n\nIIUC, the test suite timeout is for running CI builders. Is there a global timeout for running `tast run` manually?",
      "parentUuid": "f6825348_27339948",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da03509b_745a8cde",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-10T06:54:09Z",
      "side": 1,
      "message": "Ah ok. Might be worth splitting this test into 2 variants using Params to make the timeouts (and inclusion on mainline) more explicit:\n```\nParams: []testing.Param{{\n  ExtraAttr: []string{\"group:mainline\", \"informational\", \"group:camera-libcamera\"},\n  Timeout:   time.Minute, // some sensible timeout.\n}, {\n  Name: \"manual\",\n  Timeout: 30 * 24 * time.Hour, // timeout used for manual stress testing\n}},\n```\nThis will give you camera.CCAUIStress and camera.CCAUIStress.manual with the former only being ran on CI.\n\nYou can omit all the timeout restructuring in the test then.",
      "parentUuid": "c444f3ed_310466bd",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "605ef609_69f042b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T09:53:12Z",
      "side": 1,
      "message": "sgtm, done and added some more variants.\n\n(I planned to add variants with different emulated cameras in another CL, and afraid that adding \"manual\" would double the number of variants. But after a second thought I think only the real camera worth a manual variant.)",
      "parentUuid": "da03509b_745a8cde",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3744c8b_94bcdc1c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-09T23:11:19Z",
      "side": 1,
      "message": "Would be good to introduce a cleanupCtx as well to ensure these cleanup actions have enough time to execute.\n```\ncleanupCtx :\u003d ctx\nctx, cancel :\u003d ctxutil.Shorten(ctx, 30*time.Second)\ndefer cancel()\n```",
      "range": {
        "startLine": 67,
        "startChar": 19,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d500e07a_d381394c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3744c8b_94bcdc1c",
      "range": {
        "startLine": 67,
        "startChar": 19,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f672fda_8125ae80",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 81,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-09T23:11:19Z",
      "side": 1,
      "message": "Pass the aforementioned cleanupCtx in here.",
      "range": {
        "startLine": 81,
        "startChar": 3,
        "endLine": 81,
        "endChar": 6
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9587ac72_1820c7d9",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 81,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f672fda_8125ae80",
      "range": {
        "startLine": 81,
        "startChar": 3,
        "endLine": 81,
        "endChar": 6
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdf540e2_d0956c49",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 96,
      "author": {
        "id": 1285903
      },
      "writtenOn": "2021-03-09T11:31:23Z",
      "side": 1,
      "message": "How about randomizing the number of photos taken as well?",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 52
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ea2e2eb_8c7e9eab",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 96,
      "author": {
        "id": 1459152
      },
      "writtenOn": "2021-03-09T12:02:10Z",
      "side": 1,
      "message": "I think that is a good idea, but then we have to print the number of photos taken to allow reproducible traces.",
      "parentUuid": "bdf540e2_d0956c49",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 52
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40179209_efb12979",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 96,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2021-03-10T01:59:14Z",
      "side": 1,
      "message": "It recalls me a regression b/176306615 once happen when you press shutter button multiple times consecutively at very quick speed. Not sure if we can to catch this in this kind of stress test.",
      "parentUuid": "8ea2e2eb_8c7e9eab",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 52
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c842f015_c95d28cd",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 96,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Added a TODO for controlling per action parameters.",
      "parentUuid": "40179209_efb12979",
      "range": {
        "startLine": 96,
        "startChar": 4,
        "endLine": 96,
        "endChar": 52
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41482b8a_1475c230",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1459152
      },
      "writtenOn": "2021-03-09T12:02:10Z",
      "side": 1,
      "message": "Same here, might be good to have random video time.",
      "range": {
        "startLine": 106,
        "startChar": 49,
        "endLine": 106,
        "endChar": 59
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12d80ee3_9f2d03ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "ditto.",
      "parentUuid": "41482b8a_1475c230",
      "range": {
        "startLine": 106,
        "startChar": 49,
        "endLine": 106,
        "endChar": 59
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4bbebc9_ae887944",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1001646
      },
      "writtenOn": "2021-03-09T12:34:48Z",
      "side": 1,
      "message": "Why do we want to do this?",
      "range": {
        "startLine": 126,
        "startChar": 2,
        "endLine": 126,
        "endChar": 44
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24c86eaf_1dda3637",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-09T23:11:19Z",
      "side": 1,
      "message": "Another potential option: Generate a random seed at the start of the iteration, use rand.Shuffle to randomize the actions and then pass the seed into the action to randomize the number of photos to take and length of time to record video. Make sure to print out the seed to ensure you can generate the random number again.\n\nWDYT?\n\nhttps://golang.org/pkg/math/rand/#Seed\nhttps://golang.org/pkg/math/rand/#Shuffle",
      "parentUuid": "f4bbebc9_ae887944",
      "range": {
        "startLine": 126,
        "startChar": 2,
        "endLine": 126,
        "endChar": 44
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef3dbef7_dda39cb2",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "That was the idea in Chat - stress testing pseudo-randomized actions.\n\nThe seeding idea is great. I added seed/skip variables to make it easier to reproduce manually.\n\nAdded another TODO for controlling per action parameters. I will implement that in another CL to make this CL simpler.",
      "parentUuid": "24c86eaf_1dda3637",
      "range": {
        "startLine": 126,
        "startChar": 2,
        "endLine": 126,
        "endChar": 44
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8376e317_baafb9cd",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-03-09T23:11:19Z",
      "side": 1,
      "message": "There\u0027s an outer scope cancel that you define, can you be more specific about this cancel, i.e. actionCancel",
      "range": {
        "startLine": 128,
        "startChar": 13,
        "endLine": 128,
        "endChar": 19
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9bb0a2b4_fbd2d21f",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8376e317_baafb9cd",
      "range": {
        "startLine": 128,
        "startChar": 13,
        "endLine": 128,
        "endChar": 19
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62a4518e_67ebd3df",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1459152
      },
      "writtenOn": "2021-03-09T12:06:30Z",
      "side": 1,
      "message": "performe?",
      "range": {
        "startLine": 130,
        "startChar": 23,
        "endLine": 130,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97aa722a_1aee8214",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_stress.go",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2021-03-10T05:59:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62a4518e_67ebd3df",
      "range": {
        "startLine": 130,
        "startChar": 23,
        "endLine": 130,
        "endChar": 30
      },
      "revId": "a2d92632a2d60f08df26de449881e33c8dba2d7b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}