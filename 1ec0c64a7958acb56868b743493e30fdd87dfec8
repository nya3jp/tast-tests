{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9d95f77f_b1894506",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T01:28:58Z",
      "side": 1,
      "message": "If the timeout to wait for sync is five minutes, then the timeout for the overall test should be higher, like six minutes, to allow time for clicking the parent permission dialog etc.",
      "range": {
        "startLine": 28,
        "startChar": 16,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e082d3c_79755df5",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2022-08-26T15:20:02Z",
      "side": 1,
      "message": "Other tests that rely on Sync have a timeout of 5 minutes.\nSounds good to have 5 minutes here as well for consistency.\n\nNit: If it is possible to add comment that explains that long timeout is because waiting for sync, that would be great.\n\n [1] https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/familylink/denied_sites_blocked.go;drc\u003d89303b9dbba464b18dc0dcf4d114f14c4f5210e5;l\u003d29\n [2] https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/familylink/mature_sites_blocked.go;drc\u003d14caad2428faa63f150f507f52acb44287d5e7a2;l\u003d28",
      "parentUuid": "9d95f77f_b1894506",
      "range": {
        "startLine": 28,
        "startChar": 16,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b484d4bc_0d533c7e",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T17:13:11Z",
      "side": 1,
      "message": "In that case, then the timeout below on line 101 should be four minutes. Either way, there should be a ~1 minute delta between the sync timeout and the overall test timeout.",
      "parentUuid": "8e082d3c_79755df5",
      "range": {
        "startLine": 28,
        "startChar": 16,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d61b54a6_62a9f096",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "Comment added and timeout adjusted to 4 below.",
      "parentUuid": "b484d4bc_0d533c7e",
      "range": {
        "startLine": 28,
        "startChar": 16,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae1c43fa_798a1cfe",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-29T20:55:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d61b54a6_62a9f096",
      "range": {
        "startLine": 28,
        "startChar": 16,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02d3d211_b3b53897",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T01:28:58Z",
      "side": 1,
      "message": "Could you manipulate the braces so that this block is indented at the same level as the Ash Chrome test parameters above?",
      "range": {
        "startLine": 37,
        "startChar": 3,
        "endLine": 41,
        "endChar": 4
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "432b1c7d_608fa334",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "Done.  I\u0027m surprised gofmt didn\u0027t fix this!",
      "parentUuid": "02d3d211_b3b53897",
      "range": {
        "startLine": 37,
        "startChar": 3,
        "endLine": 41,
        "endChar": 4
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0b8a169_f6d76262",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T17:13:11Z",
      "side": 1,
      "message": "Nit: consider inlining this on line 63 below.",
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "663e20ec_5d2ecf5f",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a0b8a169_f6d76262",
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3395e1b3_6620a533",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T01:28:58Z",
      "side": 1,
      "message": "Since you can do anything inside this poll body, why not keep refreshing the Chrome Web Store page and clicking the \"Add to Chrome\" button until this error dialog [1] goes away? That\u0027s an alternative way to wait for this pref to sync, and it more closely mimics what a real child user (who\u0027s in a rush to install a particular extension) would do upon logging into a new device.\n\n[1] https://screenshot.googleplex.com/3uFzKYuDbSKuMLH.png",
      "range": {
        "startLine": 58,
        "startChar": 2,
        "endLine": 65,
        "endChar": 12
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b055405c_ce5c1d9f",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2022-08-26T15:20:02Z",
      "side": 1,
      "message": "Discussed this issue in https://chromium-review.googlesource.com/c/chromium/src/+/3857725/comments/d2c65dbe_22a00682",
      "parentUuid": "3395e1b3_6620a533",
      "range": {
        "startLine": 58,
        "startChar": 2,
        "endLine": 65,
        "endChar": 12
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c91a922_7d8fa133",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b055405c_ce5c1d9f",
      "range": {
        "startLine": 58,
        "startChar": 2,
        "endLine": 65,
        "endChar": 12
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dec2302f_68a34712",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T17:13:11Z",
      "side": 1,
      "message": "Could you move this function to projector.go [1] and call it at the beginning of NavigateExtensionApprovalFlow()? The ability to poll wait for prefs to sync seems like a useful helper function to add to the common utility file. These helper functions are also generic and not specific to this test file.\n\n[1] src/platform/tast-tests/src/chromiumos/tast/local/chrome/projector/projector.go",
      "range": {
        "startLine": 72,
        "startChar": 5,
        "endLine": 72,
        "endChar": 40
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1eb55494_6af830d0",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T17:29:07Z",
      "side": 1,
      "message": "Sorry I meant familylink.go [1].\n\n[1] src/platform/tast-tests/src/chromiumos/tast/local/chrome/familylink/familylink.go",
      "parentUuid": "dec2302f_68a34712",
      "range": {
        "startLine": 72,
        "startChar": 5,
        "endLine": 72,
        "endChar": 40
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6201c9f_1c83974a",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "I\u0027m happy to do this in a followup CL.  I\u0027d prefer to limit the scope of this CL to a single file.",
      "parentUuid": "1eb55494_6af830d0",
      "range": {
        "startLine": 72,
        "startChar": 5,
        "endLine": 72,
        "endChar": 40
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a772c365_f9923582",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-29T20:55:38Z",
      "side": 1,
      "message": "Ack, could you add a TODO so we don\u0027t forget?",
      "parentUuid": "f6201c9f_1c83974a",
      "range": {
        "startLine": 72,
        "startChar": 5,
        "endLine": 72,
        "endChar": 40
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d440ef3_654a8b53",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T01:28:58Z",
      "side": 1,
      "message": "Why not do\n\n    if !isLacros {\n        return waitForBoolPrefValue(ctx, c, prefName, expectedValue, timeout)\n    }\n    // Code for Lacros\n \n The more complex code should go in the main body to reduce nesting.",
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a5fc592_e08f73db",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9d440ef3_654a8b53",
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1206f144_231a12ea",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2022-08-26T15:20:02Z",
      "side": 1,
      "message": "Q: How does launching lacros here affect the NavigateExtensionApprovalFlow function?\nIIRC NavigateExtensionApprovalFlow opens the browser window. With this code added do we have 2 browser windows? Or is the lacros.Launch() \u0027silent\u0027 and does not open the UI?",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 74,
        "endChar": 33
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48572d6d_19f1edbf",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T17:13:11Z",
      "side": 1,
      "message": "I don\u0027t see two Lacros windows when I run this test.",
      "parentUuid": "1206f144_231a12ea",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 74,
        "endChar": 33
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "199617fc_a9060df6",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "This window is closed at the end of the function with \"defer l.Close(ctx)\" on line 78.",
      "parentUuid": "48572d6d_19f1edbf",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 74,
        "endChar": 33
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4007495b_672f6c4c",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2022-08-29T15:13:16Z",
      "side": 1,
      "message": "Ack. Nit: Maybe add comment about that? It could have a side effect, if there was a special behavior the first time the browser is opened.",
      "parentUuid": "199617fc_a9060df6",
      "range": {
        "startLine": 74,
        "startChar": 2,
        "endLine": 74,
        "endChar": 33
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8326b06_f15a8cf3",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-26T01:28:58Z",
      "side": 1,
      "message": "If you take my other suggestion, then we don\u0027t need to split the code path depending on Lacros vs Ash. In both cases, we would do the same thing: go to the Chrome Web Store page and keep refreshing until the error dialog disappears and the correct parent permission dialog appears. You wouldn\u0027t need this boolean anymore. I also like this suggestion because we shouldn\u0027t treat the Lacros browser any differently than Ash in tests.",
      "range": {
        "startLine": 92,
        "startChar": 1,
        "endLine": 92,
        "endChar": 9
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "000eb5e1_fb0a82d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2022-08-26T15:20:02Z",
      "side": 1,
      "message": "Lacros and Ash have some differences. Especially when it comes to the startup. Since Ash is a UI process it is not up to user action to start it. It is not true for Lacros that is in user control. Starting Lacros is justified \u0027special treatment \u0027.",
      "parentUuid": "d8326b06_f15a8cf3",
      "range": {
        "startLine": 92,
        "startChar": 1,
        "endLine": 92,
        "endChar": 9
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab4f726f_d71d8729",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-08-26T22:34:57Z",
      "side": 1,
      "message": "With Lacros, the sync will not start until we launch the browser and we need the browser running to query the preference.  This means we need different behavior in the case of Lacros.",
      "parentUuid": "000eb5e1_fb0a82d4",
      "range": {
        "startLine": 92,
        "startChar": 1,
        "endLine": 92,
        "endChar": 9
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ed9245d_4d34f864",
        "filename": "src/chromiumos/tast/local/bundles/cros/familylink/unicorn_extensions.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1351120
      },
      "writtenOn": "2022-08-29T20:55:38Z",
      "side": 1,
      "message": "If you keep checking the Chrome Web Store while waiting for the pref to sync, then you don\u0027t need special logic for Lacros. It just means you would need to refresh the Chrome Web Store for slightly longer in Lacros vs Ash, but we\u0027re not using that approach. Since we\u0027re waiting for the pref to sync instead, the current approach does require special logic to open Lacros ahead of time.",
      "parentUuid": "ab4f726f_d71d8729",
      "range": {
        "startLine": 92,
        "startChar": 1,
        "endLine": 92,
        "endChar": 9
      },
      "revId": "1ec0c64a7958acb56868b743493e30fdd87dfec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}