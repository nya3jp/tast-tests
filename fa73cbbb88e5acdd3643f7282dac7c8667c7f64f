{
  "comments": [
    {
      "key": {
        "uuid": "31d9a9fe_5b82ca5d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1195459
      },
      "writtenOn": "2020-09-01T02:53:09Z",
      "side": 1,
      "message": "can we move them inside IMEBlockingVK, as currently it\u0027s visible from all files under arc/?\n\n    \n    disablePlayStore :\u003d func(ctx context.Context) {\n        ...\n    }\n    enablePlayStore :\u003d func(ctx context.Context) {\n        ...\n    }\n\n    disablePlayStore(ctx)\n    defer enablePlayStore(ctx)\n\nAlso, can we shorten the context so that we can have a time to re-enable play store even if the test timeouts?\n\n    ctx, cancel \u003d ctxutil.Shorten(ctx, 3 * time.Second)\n    defer cancel()",
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6603ca42_6866dec2",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-01T19:27:31Z",
      "side": 1,
      "message": "Tetsui, thanks a lot four the code hints! They are very useful, especially for the beginners in tast-testing like me ;)",
      "parentUuid": "31d9a9fe_5b82ca5d",
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1889f1a9_bb338780",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2020-09-01T05:21:29Z",
      "side": 1,
      "message": "Do we have race here? For example PS may already show notification and disabling would not have effect. WDYT?",
      "range": {
        "startLine": 42,
        "startChar": 1,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17428298_4e2ac45a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-01T19:27:31Z",
      "side": 1,
      "message": "Actually this happens very often (I can see the notification) and as soon as Phonesky is disabled the notification is also removed.",
      "parentUuid": "1889f1a9_bb338780",
      "range": {
        "startLine": 42,
        "startChar": 1,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a4e13f8_8164671d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2020-09-02T16:09:21Z",
      "side": 1,
      "message": "Please list this in comments.\nFYI, we have visibilty app handler. De-facto we start ARC with PS hidden. Probably reliable way would be using it for this purpose. This might require to create a flag in chrome and pass it to Android.\nAlso notifications are removed during the call or \"soon after\". If latest is true, this might be also the race.\nWDYT?",
      "parentUuid": "17428298_4e2ac45a",
      "range": {
        "startLine": 42,
        "startChar": 1,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4e10893_b740e496",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T19:48:16Z",
      "side": 1,
      "message": "After we moved disabling earlier in the code I don\u0027t see the notification at all.\nThere are a lot of things happen prior to the launching of the test app. From the logs: \n2020/09/02 21:07:38 [21:07:37.818] Waiting for test API extension at chrome-extension://behllobkkfkfnphdnhnkndlbkcpglgmj/_generated_background_page.html\n2020/09/02 21:07:38 [21:07:37.822] Connecting to Chrome target 0CD381BC1BBF48F6FE18B6269BDFFE5F\n2020/09/02 21:07:38 [21:07:37.835] Test API extension is ready\n2020/09/02 21:07:38 [21:07:37.835] Starting UI Automator server\n2020/09/02 21:07:43 [21:07:43.288] Installing app\n... Some other steps\nIt takes about 10 seconds between Play Store icon disappears and the test app shows up. It looks like that there is enough time to kill the notification. I feel the test is pretty much race free (at least it makes sense to try).",
      "parentUuid": "7a4e13f8_8164671d",
      "range": {
        "startLine": 42,
        "startChar": 1,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "fa73cbbb88e5acdd3643f7282dac7c8667c7f64f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}