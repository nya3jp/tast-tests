{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d74bbb2c_4fa328cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-17T09:24:05Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee04af5b_d3358dfe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "LGTM % comments.\n\nSorry for late reply, I just returned back from vacation :)",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "112980b3_81359df8",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audio_loopback_latency.go",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: move it inside if statement, e.g.\n\n```\nif err :\u003d audioutils.RunCrosvm(ctx, ...); err !\u003d nil {\n  ...\n}\n```",
      "range": {
        "startLine": 164,
        "startChar": 0,
        "endLine": 164,
        "endChar": 80
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77b2b63a_4e164164",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audio_loopback_latency.go",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "112980b3_81359df8",
      "range": {
        "startLine": 164,
        "startChar": 0,
        "endLine": 164,
        "endChar": 80
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1f33ca1_b6dd44f8",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "same: period",
      "range": {
        "startLine": 28,
        "startChar": 70,
        "endLine": 28,
        "endChar": 75
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b13d5f7_3c398ccc",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f1f33ca1_b6dd44f8",
      "range": {
        "startLine": 28,
        "startChar": 70,
        "endLine": 28,
        "endChar": 75
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2e03e5b_cc79d7f1",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: add period at the end.",
      "range": {
        "startLine": 34,
        "startChar": 61,
        "endLine": 34,
        "endChar": 69
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "622199e0_1b6378e1",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2e03e5b_cc79d7f1",
      "range": {
        "startLine": 34,
        "startChar": 61,
        "endLine": 34,
        "endChar": 69
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee5e65e8_487a66f7",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1370239
      },
      "writtenOn": "2022-01-18T23:48:54Z",
      "side": 1,
      "message": "Is this correct?  Normally defer cleanup() comes after the error check, although there are exceptions.",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f48fa735_6c6e94b0",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-19T09:55:19Z",
      "side": 1,
      "message": "Agree with you here. As I mentioned in my comment, CrosvmCmd should be responsible for cleanup if returns error:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3185059/6/src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go#70",
      "parentUuid": "ee5e65e8_487a66f7",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fdd80d4_e090ec5a",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Well, this works because the cleanup func is a no-op when `crosvmCmd` returns an error. The flow gets real messy when `if len(config.VhostUserArgs) \u003e 0 {` succeeds and `if devCmd \u003d\u003d nil {` fails. This is much cleaner in my opinion.",
      "parentUuid": "f48fa735_6c6e94b0",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d64a2623_37197668",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-20T10:04:26Z",
      "side": 1,
      "message": "You can check in defer statement whether returned error is not nil and if so, run cleanup function.\n\nSee example:\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/remote/firmware/config_test.go;l\u003d95?q\u003dreterr%20file:go%20file:tast-tests",
      "parentUuid": "6fdd80d4_e090ec5a",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6a1d98b_a7f689f9",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-21T09:28:15Z",
      "side": 1,
      "message": "That is an interesting pattern. I honestly don\u0027t think it is cleaner but sure.",
      "parentUuid": "d64a2623_37197668",
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c66d0f7a_a0b9c673",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: commands?",
      "range": {
        "startLine": 63,
        "startChar": 43,
        "endLine": 63,
        "endChar": 50
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "315cad60_d85ab0c9",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: typo?",
      "range": {
        "startLine": 63,
        "startChar": 42,
        "endLine": 63,
        "endChar": 43
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a10b3fb_040f6885",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: add period at the end.",
      "range": {
        "startLine": 63,
        "startChar": 68,
        "endLine": 63,
        "endChar": 75
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d83b53ca_b3761ce3",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "there is only 1 device command (crosvm device ....)",
      "parentUuid": "c66d0f7a_a0b9c673",
      "range": {
        "startLine": 63,
        "startChar": 43,
        "endLine": 63,
        "endChar": 50
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53c5a9dc_322389a3",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "315cad60_d85ab0c9",
      "range": {
        "startLine": 63,
        "startChar": 42,
        "endLine": 63,
        "endChar": 43
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e980725c_878777a9",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a10b3fb_040f6885",
      "range": {
        "startLine": 63,
        "startChar": 68,
        "endLine": 63,
        "endChar": 75
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "115b87b5_56a3980b",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 64,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "rename it to crosvmCmd to don\u0027t expose outside of this package.",
      "range": {
        "startLine": 64,
        "startChar": 5,
        "endLine": 64,
        "endChar": 14
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3909f5af_2ebe73d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 64,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "115b87b5_56a3980b",
      "range": {
        "startLine": 64,
        "startChar": 5,
        "endLine": 64,
        "endChar": 14
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fc483d2e_0bd94012",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "this should be nil if you return error. Also CrosvmCmd caller should not be responsible for cleanup in case if error returned.",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 31
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7febe712_52a6894c",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "See the other comment.",
      "parentUuid": "fc483d2e_0bd94012",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 31
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8a24d4a_df3444bd",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-21T09:28:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7febe712_52a6894c",
      "range": {
        "startLine": 70,
        "startChar": 20,
        "endLine": 70,
        "endChar": 31
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01bb1561_bb1ec4e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-01-18T09:47:25Z",
      "side": 1,
      "message": "nit: add period at the end of comment.",
      "range": {
        "startLine": 106,
        "startChar": 64,
        "endLine": 106,
        "endChar": 72
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1cfac63d_8e72a4e9",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/audioutils/audioutils.go",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1366225
      },
      "writtenOn": "2022-01-20T01:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01bb1561_bb1ec4e8",
      "range": {
        "startLine": 106,
        "startChar": 64,
        "endLine": 106,
        "endChar": 72
      },
      "revId": "44b9ae2a36068b3840a3e3a9b197236e7a966943",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}