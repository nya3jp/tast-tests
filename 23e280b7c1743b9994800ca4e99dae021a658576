{
  "comments": [
    {
      "key": {
        "uuid": "9e4b52f4_6577cc8f",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "should this be fatal?",
      "range": {
        "startLine": 42,
        "startChar": 4,
        "endLine": 42,
        "endChar": 7
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37fce773_6cd692ee",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9e4b52f4_6577cc8f",
      "range": {
        "startLine": 42,
        "startChar": 4,
        "endLine": 42,
        "endChar": 7
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f56c2603_9adddbab",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "what\u0027s the transfer file? can you please comment as to why we need to clear it?",
      "range": {
        "startLine": 44,
        "startChar": 19,
        "endLine": 44,
        "endChar": 45
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03432b56_a0bb08bc",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "There\u0027s a (long) explanation at the function, so I directed readers there.",
      "parentUuid": "f56c2603_9adddbab",
      "range": {
        "startLine": 44,
        "startChar": 19,
        "endLine": 44,
        "endChar": 45
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f66dddfd_db1166a7",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "likewise here?",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 45,
        "endChar": 7
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "558745f7_58a25ada",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f66dddfd_db1166a7",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 45,
        "endChar": 7
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01ecfa07_775f9255",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "I don\u0027t follow, unfortunately. Which crash handling will it use without this option?",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 38
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b50ec786_c9610095",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "It will set the CHROME_HEADLESS and BREAKPAD_DUMP_LOCATION environmental variables, which tell breakpad / crashpad to write directly to a location. I\u0027ll add a little more comment.",
      "parentUuid": "01ecfa07_775f9255",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 38
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "893af906_a2c7c783",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "Would it be any easier to loop around WaitForHistogramUpdate / GetHistogram?",
      "range": {
        "startLine": 73,
        "startChar": 1,
        "endLine": 75,
        "endChar": 56
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56fcbdca_206a4e4f",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "No, because I\u0027d still need a testing.Poll loop. WaitForHistogramUpdate will keep returning if something changed, even if it isn\u0027t the change I wanted, so I still have to loop. Seems easier to have one testing.Poll loop than one inside another.",
      "parentUuid": "893af906_a2c7c783",
      "range": {
        "startLine": 73,
        "startChar": 1,
        "endLine": 75,
        "endChar": 56
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8081588e_2775cb0a",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "nit: please update log string?",
      "range": {
        "startLine": 108,
        "startChar": 11,
        "endLine": 108,
        "endChar": 27
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80445255_cf2cc4ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_miss_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8081588e_2775cb0a",
      "range": {
        "startLine": 108,
        "startChar": 11,
        "endLine": 108,
        "endChar": 27
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cab0f99a_e1c7619d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_success_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "i\u0027m of two minds about this. \n\non the one hand, better to not fail and keep going with the test if we can.\n\non the other, if it isn\u0027t necessary to do either of these, can we just not do them at all? If it\u0027s instead sometimes necessary, it\u0027s may be better for us to fail loudly every time there\u0027s a problem rather than be flaky based on some other harder-to-track condition.\n\nWDYT?",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 46,
        "endChar": 16
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68c1aa2b_f1590068",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_success_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "I promise you it is necessary some of the time. Without this code, if you run the ChromeCrashReporterMissMetrics and then ChromeCrashReporterSuccessMetrics tests one after another, ChromeCrashReporterSuccessMetrics will fail \u003e 90% of the time.\n \nBut it\u0027s not necessary if ChromeCrashReporterSuccessMetrics is running by itself, or (presumably) following a test that doesn\u0027t crash Chrome.\n\nI\u0027ll switch it to errors and see if we\u0027re getting lots of unnecessary test failures. I do agree that having it break and not realizing the cause for a while would be annoying.",
      "parentUuid": "cab0f99a_e1c7619d",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 46,
        "endChar": 16
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad652af_a7e8755d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_success_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "thanks for this comment - very useful :-)",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 95,
        "endChar": 66
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "961f7e09_9b877015",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_success_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "nit: update?",
      "range": {
        "startLine": 106,
        "startChar": 11,
        "endLine": 106,
        "endChar": 27
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6f2ce13_6d75ceb4",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_reporter_success_metrics.go",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "961f7e09_9b877015",
      "range": {
        "startLine": 106,
        "startChar": 11,
        "endLine": 106,
        "endChar": 27
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32ff55af_d69bccaf",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chromecrash/crash.go",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "Can we put the PID (or some other unique info) into this pattern to more narrowly match expected files?",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 242,
        "endChar": 48
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cda4f11e_dc77875f",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chromecrash/crash.go",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Not really.... It doesn\u0027t have the pid in the name, it uses a unpredictable GUID instead.\n\nI could narrow the pattern a bit because it contains the process type (gpu-process) in the name. I decided against that because (a) it\u0027s fragile, it depends on some code in Chrome working a very particular way and (b) it doesn\u0027t simplify the code at all because I still need to scan the file and parse out all its keys to make sure I have the right PID -- a different process of the same type might crash.",
      "parentUuid": "32ff55af_d69bccaf",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 242,
        "endChar": 48
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62e1a3fa_599dd753",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chromecrash/crash.go",
        "patchSetId": 2
      },
      "lineNbr": 244,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "Running a testing.Poll() around WaitForCrashFiles seems odd to me, since it already runs a testing.Poll internally. Can we pull that up out of the poll so it only runs once?\n\nif we are able use the PID we should more-or-less eliminate the possibility of other .dmp files from unrelated sources.",
      "range": {
        "startLine": 244,
        "startChar": 27,
        "endLine": 244,
        "endChar": 44
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4316e8eb_03d13092",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/chromecrash/crash.go",
        "patchSetId": 2
      },
      "lineNbr": 244,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "I need a new list of files each time, since the PID isn\u0027t in the name.",
      "parentUuid": "62e1a3fa_599dd753",
      "range": {
        "startLine": 244,
        "startChar": 27,
        "endLine": 244,
        "endChar": 44
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73e7987c_c82760e7",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 275,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "nit: \u0027scrapes\u0027",
      "range": {
        "startLine": 275,
        "startChar": 47,
        "endLine": 275,
        "endChar": 53
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a9b46ab_d8d53f43",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 275,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "73e7987c_c82760e7",
      "range": {
        "startLine": 275,
        "startChar": 47,
        "endLine": 275,
        "endChar": 53
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f55694b2_55b6a7b0",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 283,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "Is it possible for this to negatively affect other tests? e.g., if some other test tries to write a metric that might be useful for debugging and we clear it before it has a chance to be processed, I could in theory imagine that being annoying for other devs",
      "range": {
        "startLine": 283,
        "startChar": 5,
        "endLine": 283,
        "endChar": 31
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07ff3210_a8384a8b",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 283,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "I don\u0027t think tast framework grabs the list of histograms, does it? In any case, Chrome truncates this file when it reads it, and if we crash Chrome, it loses the histogram data anyways.",
      "parentUuid": "f55694b2_55b6a7b0",
      "range": {
        "startLine": 283,
        "startChar": 5,
        "endLine": 283,
        "endChar": 31
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3484e3e6_c6e89dd2",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "does golang\u0027s os.OpenFile really not give back an EEXIST-equivalent in that case?",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 59
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12ca6787_e96564fe",
        "filename": "src/chromiumos/tast/local/chrome/metrics/histogram.go",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3484e3e6_c6e89dd2",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 59
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96b980a0_d673b811",
        "filename": "src/chromiumos/tast/local/crash/dmp.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1305461
      },
      "writtenOn": "2019-12-07T02:18:49Z",
      "side": 1,
      "message": "What\u0027s the advantage of doing this parsing? I\u0027m worried it may give us more trouble than it\u0027s worth, or be brittle to subtle changes in the dmp formatting.",
      "range": {
        "startLine": 27,
        "startChar": 5,
        "endLine": 27,
        "endChar": 26
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32024b3a_f35cff0a",
        "filename": "src/chromiumos/tast/local/crash/dmp.go",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1300299
      },
      "writtenOn": "2019-12-07T03:28:12Z",
      "side": 1,
      "message": "Only way to determine the pid. \n\nAlso, if the format changes, crash_reporter will fail. This is just a simplified version of ChromeCollector::ParseCrashLog.",
      "parentUuid": "96b980a0_d673b811",
      "range": {
        "startLine": 27,
        "startChar": 5,
        "endLine": 27,
        "endChar": 26
      },
      "revId": "23e280b7c1743b9994800ca4e99dae021a658576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}