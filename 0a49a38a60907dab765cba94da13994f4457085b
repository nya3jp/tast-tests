{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "58aab33f_e2d0318f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1400377
      },
      "writtenOn": "2021-02-16T05:00:03Z",
      "side": 1,
      "message": "Hi Shuhei and Jun,\n\nFollowing the merge of this CL (https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2666200), I feel we should extend the current \"arcBooted\" fixture by allowing Play Store opt-in. Currently a fixture called \"loggedInToCUJUser\" is implemented under cros/ui/cuj/fixture.go. It starts Chrome, does PlayStore opt-in, and then do arc.New(). This fixture is needed by tests requiring Android App installation from play store. When I create a new category \"benchmark\", the benchmark cases also need it. So I created this CL to move the implementation to local/arc package.",
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba7edd59_8a16c07c",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1400377
      },
      "writtenOn": "2021-02-16T05:25:05Z",
      "side": 1,
      "message": "Hi Shuhei, I have a confusion here. Any reason we always use literal string as fixture name, instead of defining a constant? With a constant, users don\u0027t have to worry about misspelling the name, and the name literal string can be changed globally.",
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f295356e_3bfb7b19",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2021-02-17T07:22:29Z",
      "side": 1,
      "message": "You\u0027re right, we\u0027re considering to recommend defining constants. We\u0027ll let you know in tast-users if we decide to do so.",
      "parentUuid": "ba7edd59_8a16c07c",
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d452b1f_5113238c",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2021-02-16T22:33:38Z",
      "side": 1,
      "message": "This looks like it\u0027s better to be defined in arc/optin package, not here.\n\nThat fixture can conduct the optin behavior only, and use \u0027Parent\u0027 to make the arc setup in prior.",
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ef54cda_00852f00",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1400377
      },
      "writtenOn": "2021-02-16T23:36:25Z",
      "side": 1,
      "message": "Jun, thanks for the input of using \"Parent\" feature. But per my test, the play store opt-in logic has to be performed before arc.New() (when chrome.Supported() and GAIA login are enabled). If I define a new fixture with \"Parent\" assigned to \"arcBooted\", I think arcBooted will fail to do arc.New() because play store hasn\u0027t been opted in.\n\nBut I can move the whole implementation into the arc/optin package, with the chrome.New() and arc.New() logic copied. Do you think this approach is preferred?",
      "parentUuid": "8d452b1f_5113238c",
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cef2f867_db1a6b02",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2021-02-17T07:22:29Z",
      "side": 1,
      "message": "TestAPIConn is cached and should not be closed.",
      "range": {
        "startLine": 85,
        "startChar": 2,
        "endLine": 85,
        "endChar": 21
      },
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62fb5ce7_a497e93b",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2021-02-17T07:22:29Z",
      "side": 1,
      "message": "This just emits a log. What operations are skipped?",
      "range": {
        "startLine": 92,
        "startChar": 3,
        "endLine": 92,
        "endChar": 69
      },
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e829cc82_6bfcf43a",
        "filename": "src/chromiumos/tast/local/arc/fixture.go",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2021-02-17T07:22:29Z",
      "side": 1,
      "message": "I think this logic to close the play store window is interesting to all users of optin.Perform. How about introducing a new function optin.PerformAndClose which does exactly this?",
      "range": {
        "startLine": 105,
        "startChar": 3,
        "endLine": 105,
        "endChar": 39
      },
      "revId": "0a49a38a60907dab765cba94da13994f4457085b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}