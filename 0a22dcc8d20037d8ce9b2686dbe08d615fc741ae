{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "45f1a218_053785ea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 18,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2022-05-09T08:45:36Z",
      "side": 1,
      "message": "Adding sleep is known to be a wrong way to \"fix\" test flakiness. I strongly recommend doing something else.\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/code_review_comments.md#Sleep",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "613e7092_3084ebde",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 18,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-09T09:37:49Z",
      "side": 1,
      "message": "I understand. Sleep has been chosen in absence of an alternative that allows us to query the state. One of the two sleeps should go away when the referenced bug is fixed.",
      "parentUuid": "45f1a218_053785ea",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a20cc0ef_954573b8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 18,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-09T09:47:45Z",
      "side": 1,
      "message": "Removed one sleep by moving the validation of uninstall after Play Store is loaded (which gives it enough time to propagate the configuration)",
      "parentUuid": "613e7092_3084ebde",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b1ba59e_29ec838a",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_provisioning.go",
        "patchSetId": 3
      },
      "lineNbr": 240,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2022-05-09T08:45:36Z",
      "side": 1,
      "message": "Even if we can do nothing but sleeping, we should do it within waitForBlockUninstall, not here, because it is waitForBlockUninstall\u0027s responsibility to wait for the condition to be met.",
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1b344e0_0f9351c6",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_provisioning.go",
        "patchSetId": 3
      },
      "lineNbr": 240,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-09T09:37:49Z",
      "side": 1,
      "message": "Good idea. Moved.",
      "parentUuid": "7b1ba59e_29ec838a",
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ac6fb0a_ff4cb19a",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_provisioning.go",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2022-05-09T08:45:36Z",
      "side": 1,
      "message": "So IIUC this function ensures package-restrictions.xml contains some entries but does not ensure it\u0027s loaded by the system server. Can we query the system server instead to know the actual state?",
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efa898f5_1b7f49d3",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_provisioning.go",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-09T09:37:49Z",
      "side": 1,
      "message": "I looked for APIs I can query but package manager (pm) command doesn\u0027t have any way to query package restrictions. Ref: http://adbcommand.com/adbshell/pm\n\nAnd if we attempt an uninstall and it succeeds, then we\u0027ve already removed the package so we can\u0027t do another attempt. Waiting seems to be the only suboptimal way of ensuring that the setting propagates.",
      "parentUuid": "4ac6fb0a_ff4cb19a",
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97f200c6_d5faacac",
        "filename": "src/chromiumos/tast/local/bundles/cros/enterprise/arc_provisioning.go",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1399098
      },
      "writtenOn": "2022-05-09T09:47:45Z",
      "side": 1,
      "message": "Removed the sleep for uninstall by delaying the validation.",
      "parentUuid": "efa898f5_1b7f49d3",
      "revId": "0a22dcc8d20037d8ce9b2686dbe08d615fc741ae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}