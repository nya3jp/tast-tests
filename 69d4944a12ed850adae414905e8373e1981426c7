{
  "comments": [
    {
      "key": {
        "uuid": "4ca562b1_14c180b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2020-08-28T07:19:08Z",
      "side": 1,
      "message": "It looks like this is responsible for the difference between this test\u0027s power metric and the power test\u0027s package-0 metric. I think allowing CPU scaling is a more realistic scenario for measuring power/dropped frames. This also enables thermal throttling for the first part of the test, but that shouldn\u0027t impact hardware decode.",
      "revId": "69d4944a12ed850adae414905e8373e1981426c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd4b0158_db46859a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/video/arc_accel_video.go",
        "patchSetId": 1
      },
      "lineNbr": 418,
      "author": {
        "id": 1288602
      },
      "writtenOn": "2020-08-28T07:44:52Z",
      "side": 1,
      "message": "I based this benchmark setup code on our earlier autotest code which did the same.\n\nI\u0027m really not sure moving this is a good idea:\n- The CPU percentage will be quite useless as a metric, as it will be influenced by scaling.\n- We won\u0027t be able to compare results between two subsequent runs anymore. In one run CPU scaling might kick in, while in a subsequent run this might not happen. This could suddenly cause a jump/decrease in CPU usage, triggering a perf alert while nothing actually changed.\n- We won\u0027t be able to compare results anymore between different tests. e.g. 40% CPU usage for H264 and 60% for VP9 won\u0027t mean anything anymore, as CPU scaling might have kicked in in one case and not the other.\n- The Chrome side video decode/encoder tests also disable CPU scaling, so we won\u0027t be able to compare results between ARC++/ARCVM and Chrome anymore.\n\nakahaung@, acourbot@: What is your opinion?",
      "revId": "69d4944a12ed850adae414905e8373e1981426c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc592731_22fe4b26",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/video/arc_accel_video.go",
        "patchSetId": 1
      },
      "lineNbr": 418,
      "author": {
        "id": 1363051
      },
      "writtenOn": "2020-08-28T07:58:24Z",
      "side": 1,
      "message": "What exactly is the purpose of the CPU usage metric in the first place? It\u0027s not clear to me how it translates to something meaningful to the product, especially if we\u0027re measuring utilization in an artificial no-scaling situation. Depending on the purpose, maybe there\u0027s something better to measure.\n\nIf we do want to continue to use CPU utilization like this, I don\u0027t know how useful power/frame_drop_percentage are. I guess the measurement can be used to catch regressions, but the absolute values won\u0027t have any correspondence to what users experience.\n\nre: comparing this test\u0027s CPU utilization to the chrome side test\u0027s, does that test also report utilization for 30/60fps rendering? Or utilization for max decoding speed?",
      "parentUuid": "fd4b0158_db46859a",
      "revId": "69d4944a12ed850adae414905e8373e1981426c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1b319cb_52af5a53",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/video/arc_accel_video.go",
        "patchSetId": 1
      },
      "lineNbr": 418,
      "author": {
        "id": 1288602
      },
      "writtenOn": "2020-08-31T04:57:20Z",
      "side": 1,
      "message": "I agree that CPU usage is not the most meaningful metric to describe the end-user experience, but it\u0027s still a very valuable metric for us:\n- It can give us an idea of how close a device is running to it\u0027s limits. E.g. 95% CPU usage might give a strong indication that small fluctuations might suddenly cause frames to be dropped.\n- When seeing occasional frame drops pop up I usually cros reference it with CPU utilization, as this graph is usually smoother and easier to understand than spurious spikes in frames dropped.\n\nI also agree that power utilization and frame drop percentage might be more useful in a non-artificial scenario that better reflects the experience users will be seeing. So maybe we could adapt the test a bit to collect power/framedrops without benchmark mode, and CPU and max FPS with benchmark mode enabled.\n\nI still doubt however how much disabling benchmark mode will actually influence the results we see and whether it\u0027s worth the increased flakiness we might be seeing in the results. Maybe we could just add extra power_scaling and framedrop_scaling metrics and run them side by side for a while?\n\nAbout the Chrome tests: These use the same setup and benchmarking mode that is used for ARC testing. The only difference is that they don\u0027t do actual rendering but simulate the rendering, but this shouldn\u0027t make a huge difference.",
      "parentUuid": "dc592731_22fe4b26",
      "revId": "69d4944a12ed850adae414905e8373e1981426c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}