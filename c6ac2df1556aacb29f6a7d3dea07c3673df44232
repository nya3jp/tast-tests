{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a86c5bc9_805b3e1f",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1113505
      },
      "writtenOn": "2022-04-21T10:50:56Z",
      "side": 1,
      "message": "Just curious, will this test is going to be promoted to CQ or it is just for you to monitor the compliance?\n\nIIRC, you are going to consume `cros_healthd` as your data provider and most of data listed here will get from `cros_healthd` Mojo API, right? We have a tast library to fetch the data from Mojo API. It will be the same as what you can get from `cros_healthd` Mojo. I recommended you to use that and you will no need to implement the same logic here and it might be hard to maintain the logics in the future.\n\nSee our tests as example: https://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/health/probe_system_info_v2.go",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29aac05e_dfb0d377",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-04-21T11:29:55Z",
      "side": 1,
      "message": "Yes, we are planning to promote this test to the CQ.\n\nCurrent test implementation supports old and new way of getting OEM name, similar to the browser implementation. Old way is not supported by cros_healthd.\n\nOnce we abandon old implementation, we might use chromiumos/tast/local/bundles/cros/health/utils library to fetch OEM name.\n\nHowever, current implementation is short and it will double check cros_healthd implementation, so we will see in the future what to use in this test.\n\nThansk!",
      "parentUuid": "a86c5bc9_805b3e1f",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "996e14f3_835954e8",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1113505
      },
      "writtenOn": "2022-04-21T11:55:20Z",
      "side": 1,
      "message": "Got it. Thanks for sharing your plan.\n\nMy two sents for OEM names. Just would like to remind that the old implementation (which use sysfs) is not reliable and might give wrong OEM data since some OEM didn\u0027t fill and check the value in the past. Probably we could try to abandon old sysfs approach and move everything (implementation+tast) to new approach if the effort is acceptable. There is a risk that it silently fall back to the old one and get the wrong value while scaling up to more devices/OEMs.",
      "parentUuid": "29aac05e_dfb0d377",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b9d0705_5e6849fd",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2022-04-21T12:40:45Z",
      "side": 1,
      "message": "Yeap, we want to abandon the old approach. For that I created a new test to track what models support new approach: https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3587148",
      "parentUuid": "996e14f3_835954e8",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85f702b9_bdbd0e16",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1373635
      },
      "writtenOn": "2022-04-21T12:49:26Z",
      "side": 1,
      "message": "Just to clarify, the current approach to determine the OEM name is:\n1. Fetch oem_name from cros_healthd (through Mojo API), if no or empty result is returned then,\n2. Fall back to the sysfs.\n\nStep 2) is important to continue supporting the devices that correctly had the oem_name in the sysfs.",
      "parentUuid": "1b9d0705_5e6849fd",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9515befc_46b472c9",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1113505
      },
      "writtenOn": "2022-04-21T17:04:52Z",
      "side": 1,
      "message": "Thanks for explains!\n\n\u003e Step 2) is important to continue supporting the devices that correctly had the oem_name in the sysfs.\n\nGot it. Just curious, is this already activity in used? like already launched?\n\nI am just a little bit worry and want to remind that keeping using this might cause issues in future. I know this is not the priority to migrate it. This is a just small reminder to check if this is already in your radar.",
      "parentUuid": "85f702b9_bdbd0e16",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f37a084_d8e4cc88",
        "filename": "src/chromiumos/tast/local/bundles/cros/telemetryextension/compliance.go",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1373635
      },
      "writtenOn": "2022-04-21T17:32:32Z",
      "side": 1,
      "message": "\u003e Got it. Just curious, is this already activity in used? like already launched?\n\nYes, this is launched. For example, the green devices in the following test depend on the sysfs approach: https://cros-health-prod.googleplex.com/test/telemetryextension.APIAvailableRoutines.target_models.\n\n\u003e I am just a little bit worry and want to remind that keeping using this might cause issues in future. I know this is not the priority to migrate it. This is a just small reminder to check if this is already in your radar.\n\nI understand and we are actively working on that. The test (src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/telemetryextension/cros_config_has_oem_name.go) is about monitoring on which devices have the oem_name populated in cros_config. Once we have cros_config  correctly configured for the devices we are supporting, we are going to remove the dependency on the sysfs (step 2 above).",
      "parentUuid": "9515befc_46b472c9",
      "range": {
        "startLine": 88,
        "startChar": 5,
        "endLine": 88,
        "endChar": 16
      },
      "revId": "c6ac2df1556aacb29f6a7d3dea07c3673df44232",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}