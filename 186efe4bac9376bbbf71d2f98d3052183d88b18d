{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4f736f6b_ff419d7b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-10-28T18:03:26Z",
      "side": 1,
      "message": "A nice idea indeed!",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ab35139_36aa5b32",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-10-28T18:03:26Z",
      "side": 1,
      "message": "This seems to overlap significantly with the existing tests `cryptohome.UpdatePassword` and `cryptohome.AuthSessionUnlock`, although I think some aspects, like the ephemeral unlock, wasn\u0027t previously covered by cryptohome tests.\n\nHow should we go about this duplication? We\u0027re obviously dealing with a complex multidimensional set of test scenarios, and there are different ways of forming test \"paths\" in it.\n\nIn the spirit of behavior-driven testing, I think the mentioned tests were actually good starting points: \"when you want to unlock a.k.a. verify credentials, this should hold\" or \"after you update password, here\u0027s what should hold\". We could expand them to support missing combinations that you found out. WDYT?",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8fa9848_744fe7ff",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1344767
      },
      "writtenOn": "2022-10-28T19:39:42Z",
      "side": 1,
      "message": "I think it is a good idea to include the verify tests in the tests of the supported factors. But the verified intent should also be tested in addition to success-failure",
      "parentUuid": "6ab35139_36aa5b32",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a590838c_33aaedf7",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-28T21:00:27Z",
      "side": 1,
      "message": "I dunno, I struggle to figure out how to incorporate some of these cases into existing tests. Usually there\u0027s something I could just add them on to, but the it sort of feels like making a test which is a mishmash of different things?\n\nNot really sure what the right answer is. I can ditch this and just throw extra verify-only authenticate calls into existing tests, does that give us the coverage we want?",
      "parentUuid": "f8fa9848_744fe7ff",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7cf0de3_ccc39209",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1344767
      },
      "writtenOn": "2022-10-28T21:06:46Z",
      "side": 1,
      "message": "I\u0027m also fine with having this one as a separate test.",
      "parentUuid": "a590838c_33aaedf7",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12c98fd4_860e8dc9",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-10-28T21:24:07Z",
      "side": 1,
      "message": "I guess it depends on the definition of \"mishmash\" :-) The test below, in my opinion, verifies two different behaviors: (a) verification passes for the added credential, (b) verification passes after updating the credential. I think mixing these two into a single test case isn\u0027t strictly necessary.\n\nAlso if we land it like this, it\u0027ll immediately make `cryptohome.AuthSessionUnlock` and `cryptohome.UpdatePassword` obsolete as subsets of this \"combined\" test. I just don\u0027t see a reason for keeping duplicate test code in the tree, which only differ as \"tests for A and for B\" and \"a single test \nfor A-then-B\".",
      "parentUuid": "d7cf0de3_ccc39209",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3a895d8_481fc9b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-28T22:01:31Z",
      "side": 1,
      "message": "Well yes, we can go the route of just making sure that every other test just incorporates a verify into it. I don\u0027t know how to decide on that in general, though.\n\nDoing basically anything with cryptohome requires doing at least half a dozen or so things at a minimum (to set up a session, a mount and at least one kind of credential) and so it\u0027s always a little unclear what things deserve their own test, and what things should just be counted on to happen incidentally as part of another test.",
      "parentUuid": "12c98fd4_860e8dc9",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60d0f3da_78b7d70f",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-11-02T19:48:33Z",
      "side": 1,
      "message": "Okay, I merged this test with AuthSessionUnlock. In practice I basically just replaced the old test with my new one, since after both refactoring (to use the fixtures and `WithAuthSession`) and adding in the factor update, it looks a lot more like the test I wrote than the original.",
      "parentUuid": "c3a895d8_481fc9b1",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e81de137_2d3d4bed",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-11-03T15:10:58Z",
      "side": 1,
      "message": "Ack - Thanks. Replacing sgtm to me - I just wanted to avoid us having duplicate tests that test literally same things (via the same D-Bus calls under the hood).",
      "parentUuid": "60d0f3da_78b7d70f",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "829859c8_8683082b",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-10-28T18:03:26Z",
      "side": 1,
      "message": "Hmm where is the VK-vs-USS parameterized?",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac379bb6_9b403eb8",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-28T21:00:27Z",
      "side": 1,
      "message": "The fixture takes care of that.",
      "parentUuid": "829859c8_8683082b",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af80accc_f762a866",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-11-03T15:10:58Z",
      "side": 1,
      "message": "Please add a comment about this, because it\u0027s non-trivial to discover that when reading the test.",
      "parentUuid": "ac379bb6_9b403eb8",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f70855ce_598083e2",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-10-28T18:03:26Z",
      "side": 1,
      "message": "BTW is this really needed?",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "300fd82e_f977c778",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-28T21:00:27Z",
      "side": 1,
      "message": "I think so? In previous tests I couldn\u0027t create ephemeral users on unmanaged machines.\n\nMaybe there\u0027s some other way to set things up so that they work, but nobody else was able to give me a better working solution for how to do so and this one was already in use in some of the tests, so I\u0027ve reused it elsewhere (maybe I should make it a fixture of its own).",
      "parentUuid": "f70855ce_598083e2",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "79fea7f9_f744bbe0",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2022-11-03T15:10:58Z",
      "side": 1,
      "message": "Ack. Was just asking if you tried deleting this code 😊 And I don\u0027t know off the top of my head why it\u0027s needed, but agreed that investigating this is orthogonal to your CL.",
      "parentUuid": "300fd82e_f977c778",
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd5a78ec_cd45085c",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1344767
      },
      "writtenOn": "2022-10-28T19:39:42Z",
      "side": 1,
      "message": "Could AuthIntent from the AuthenticateAuthFactorReply be used to test whether the lightweight verification is used?",
      "range": {
        "startLine": 166,
        "startChar": 0,
        "endLine": 171,
        "endChar": 3
      },
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b80077c_10a208b6",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-28T21:00:27Z",
      "side": 1,
      "message": "Do you mean, add checking of the intents reported by it? That probably makes sense. I\u0027ll see what I can do.",
      "parentUuid": "dd5a78ec_cd45085c",
      "range": {
        "startLine": 166,
        "startChar": 0,
        "endLine": 171,
        "endChar": 3
      },
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a232a69b_ed5e07da",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1344767
      },
      "writtenOn": "2022-10-28T21:06:46Z",
      "side": 1,
      "message": "exactly",
      "parentUuid": "5b80077c_10a208b6",
      "range": {
        "startLine": 166,
        "startChar": 0,
        "endLine": 171,
        "endChar": 3
      },
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdc05dbf_9c1f5904",
        "filename": "src/chromiumos/tast/local/bundles/cros/cryptohome/verify_factors.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1546868
      },
      "writtenOn": "2022-10-31T20:41:26Z",
      "side": 1,
      "message": "Added intent checks to all of the successful Authenticate calls.",
      "parentUuid": "a232a69b_ed5e07da",
      "range": {
        "startLine": 166,
        "startChar": 0,
        "endLine": 171,
        "endChar": 3
      },
      "revId": "186efe4bac9376bbbf71d2f98d3052183d88b18d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}