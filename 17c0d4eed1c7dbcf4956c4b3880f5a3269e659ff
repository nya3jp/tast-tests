{
  "comments": [
    {
      "key": {
        "uuid": "7532415a_a79d6cc9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T04:59:40Z",
      "side": 1,
      "message": "Excellent! Thanks very much for this change!",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 67
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82ee8b68_d7a559ec",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "How about taking a path to the JS file, not its content? Then we can avoid calling ioutil.ReadFile in every caller.",
      "range": {
        "startLine": 26,
        "startChar": 85,
        "endLine": 26,
        "endChar": 92
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "056975d9_07a9b435",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82ee8b68_d7a559ec",
      "range": {
        "startLine": 26,
        "startChar": 85,
        "endLine": 26,
        "endChar": 92
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7733a2d1_a49889f5",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "huge nit: Concatenating strings with + is not popular in Go, I recommend using errors.Wrapf in this case.\n\n errors.Wrapf(err, \"failed to open %s\", url)",
      "range": {
        "startLine": 30,
        "startChar": 31,
        "endLine": 30,
        "endChar": 53
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4052055d_831c64df",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7733a2d1_a49889f5",
      "range": {
        "startLine": 30,
        "startChar": 31,
        "endLine": 30,
        "endChar": 53
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ef9bb79_80c64633",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "Calling conn.Close() in every error path is a bit fragile (e.g. we must be careful on adding code below later). I recommend using defer statements. Typical usage in this kind of case is:\n\n func OpenChromeMediaInternalsPageAndInjectJS(...) (conn *chrome.Conn, retErr error) {\n   conn, err :\u003d cr.NewConn(...)\n   if err !\u003d nil { ... }\n   defer func() {\n     if retErr !\u003d nil {\n       conn.Close()\n     }\n   }()\n   ...\n   return conn, nil\n }",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26e94958_f00ac0da",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Thanks! Done.",
      "parentUuid": "1ef9bb79_80c64633",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a3fb80_523c9ead",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "Not limited to this function: this is Go, not Java, so I recommend trying to use shorter names. I know there\u0027s pros and cons (I was also annoyed when I started Go), but that\u0027s the Go way.\n\nFor example:\n\n CheckIfURLUsesPlatformVideoDecoder -\u003e URLUsesPlatformVideoDecoder\n theURL -\u003e url\n (usesPlatformVideoDecoder bool, err error) -\u003e (bool, error) // since it\u0027s obvious\n\n checkForPlatformVideoDecoder -\u003e code\n usesPlatformVideoDecoder -\u003e used\n\nSee also: https://golang.org/doc/effective_go.html#names",
      "range": {
        "startLine": 48,
        "startChar": 5,
        "endLine": 48,
        "endChar": 39
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a88d5a8b_1bdc16b3",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "Since this function takes *chrome.Conn, it can accept any *chrome.Conn, not limited to one created by OpenChromeMediaInternalsPageAndInjectJS. We can make it type-safe by introducing a new type.\n\n type MediaInternals struct {\n   conn *chrome.Conn\n }\n\n func NewMediaInternals(ctx context.Context, cr *chrome.Chrome, injectJSPath string) (*MediaInternals, error)\n\n func (mi *MediaInternals) Close() error\n\n func (mi *MediaInternals) URLUsesPlatformVideoDecoder(ctx context.Context, url string) (bool, error)",
      "range": {
        "startLine": 48,
        "startChar": 61,
        "endLine": 48,
        "endChar": 98
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "458e0ceb_7aa22c6b",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "I think I took all these suggestions in, thanks!",
      "parentUuid": "d0a3fb80_523c9ead",
      "range": {
        "startLine": 48,
        "startChar": 5,
        "endLine": 48,
        "endChar": 39
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "035a9908_4f67f8e6",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "This looks like a great idea but it\u0027s a bit beyond my current Go-foo.\nWould you mind if I move from 2 functions to a type in a follow-up CL?",
      "parentUuid": "a88d5a8b_1bdc16b3",
      "range": {
        "startLine": 48,
        "startChar": 61,
        "endLine": 48,
        "endChar": 98
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a468c33_cdf3fe85",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-10-08T22:04:35Z",
      "side": 1,
      "message": "no need \": \"\ncf. https://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#error-construction",
      "range": {
        "startLine": 53,
        "startChar": 76,
        "endLine": 53,
        "endChar": 78
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afe38bed_d71e37f5",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/decode/chrome_media_internals.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a468c33_cdf3fe85",
      "range": {
        "startLine": 53,
        "startChar": 76,
        "endLine": 53,
        "endChar": 78
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7aa60654_afc00dc7",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-10-08T22:04:35Z",
      "side": 1,
      "message": "Would you mind adding a comment about what utilsJSPath is for?\ne.g.\n// utilsJSPath is a path of chrome_media_internals_utils.js.",
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcf0e983_3267a6da",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7aa60654_afc00dc7",
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e39669af_6ad28230",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1273836
      },
      "writtenOn": "2019-10-08T22:04:35Z",
      "side": 1,
      "message": "nit: \"utilsJSPath, videoName string\" because these have a same type.\nsame for measureWithConfig",
      "range": {
        "startLine": 127,
        "startChar": 73,
        "endLine": 127,
        "endChar": 110
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "803e16ac_118f5927",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e39669af_6ad28230",
      "range": {
        "startLine": 127,
        "startChar": 73,
        "endLine": 127,
        "endChar": 110
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2ce2cec_6878aad1",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "ditto: s/: //",
      "range": {
        "startLine": 175,
        "startChar": 69,
        "endLine": 175,
        "endChar": 71
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2762a026_d94d4e00",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2ce2cec_6878aad1",
      "range": {
        "startLine": 175,
        "startChar": 69,
        "endLine": 175,
        "endChar": 71
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d60d51fb_f5c1ce42",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-10-10T19:59:16Z",
      "side": 1,
      "message": "ditto: s/: //",
      "range": {
        "startLine": 180,
        "startChar": 66,
        "endLine": 180,
        "endChar": 68
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "833717cf_e1f5c858",
        "filename": "src/chromiumos/tast/local/bundles/cros/video/playback/playback.go",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2019-10-14T19:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d60d51fb_f5c1ce42",
      "range": {
        "startLine": 180,
        "startChar": 66,
        "endLine": 180,
        "endChar": 68
      },
      "revId": "17c0d4eed1c7dbcf4956c4b3880f5a3269e659ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}