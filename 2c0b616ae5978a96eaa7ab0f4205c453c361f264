{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f6c422c7_7bde24b3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-16T10:38:18Z",
      "side": 1,
      "message": "Adding tast-owners@google.com\n\nFYI: The test is working for me, but I\u0027m not familiar with fixtures and also don\u0027t understand what is the cleanup context, so I may have implemented it wrong.",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "695addbe_a4b5968b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-16T14:33:23Z",
      "side": 1,
      "message": "As this is quite a big change, I will need more time than usual to review it.",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f17ca460_5e2676fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:17:16Z",
      "side": 1,
      "message": "This CL should be split into 3 parts. The fixture, and the 2 tests.\nThey can be added in a relation chain (just pushing them from the same local branch).",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c8cae4e_49203e1c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-18T09:26:02Z",
      "side": 1,
      "message": "Thanks for splitting the CL!",
      "parentUuid": "f17ca460_5e2676fb",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fa2fcb8_18657fb9",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 111,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:33:59Z",
      "side": 1,
      "message": "Instead of putting this into t func to limit the scope, you can use\n\u003e  chromeLoginCtx, cancel :\u003d context.WithTimeout(ctx, chrome.LoginTimeout)\ninstead.",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 111,
        "endChar": 4
      },
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "faf16538_1d16fecc",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 111,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-17T21:40:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3fa2fcb8_18657fb9",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 111,
        "endChar": 4
      },
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c0e56a2_f2347551",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:33:59Z",
      "side": 1,
      "message": "If I understand it correctly, if cr !\u003d nil we cannot reach this point, so there is no need for this defered function.",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ec825e1_9b046843",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-17T21:40:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2c0e56a2_f2347551",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d84b2a5b_1d07f6df",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:33:59Z",
      "side": 1,
      "message": "Most probably you don\u0027t need this function here either.",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f5e1c815_6e5c24f4",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-17T21:40:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d84b2a5b_1d07f6df",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf3a8fa5_4f1aeb88",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:33:59Z",
      "side": 1,
      "message": "This ctx was already shortened to optin.OptinTimeout+time.Minute.\nIf you want to shorten the original timeout here, at the optin part use\n\u003e  optinCtx, cancel :\u003d context.WithTimeout(ctx, optin.OptinTimeout+time.Minute)",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef2a444d_83749e06",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-17T21:40:29Z",
      "side": 1,
      "message": "TBH I don\u0027t know when/why context.WithTimeout is used. I\u0027ve also noticed that a lot of tests don\u0027t shorten it when doing the same things as in this fixture. What is the reason to use it? (Removing context.WithTimeout in both cases for ARC for now)",
      "parentUuid": "cf3a8fa5_4f1aeb88",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38e4f180_ac5e98a7",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-18T09:26:02Z",
      "side": 1,
      "message": "It is used so a certain subtask, like booting up ARC doesn\u0027t take more time than you want to allocate to it, in this case arc.BootTimeout.\nOtherwise it is possible that it will take much more, and\na) the remaining steps won\u0027t have enough time (not really an issue here)\nb) it can hide a problem, as you expect for this step to be done in 2 minutes, but it took 5 for some reason.\n\nSo while it is not that important for this last step, for the optin step it is quite useful.",
      "parentUuid": "ef2a444d_83749e06",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8e94399_4ab5d3b8",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-17T15:33:59Z",
      "side": 1,
      "message": "It is useful to lock the chrome instance in the fixture:\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/arc/fixture.go?q\u003dchrome.Lock()",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a59fae09_68b5f532",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1349779
      },
      "writtenOn": "2021-11-17T21:40:29Z",
      "side": 1,
      "message": "I\u0027m getting this error if I call chrome.Lock() here:\n\nPanic: chromiumos/tast/local/accountmanager.(*accountManagerTestFixture).SetUp is not allowed to call chrome.Lock; check the list in chrome.Lock\n        at chromiumos/tast/internal/usercode.ErrorOnPanic.func1 (usercode.go:28)\n        at chromiumos/tast/internal/usercode.SafeCall.func2.1.1 (usercode.go:101)\n        at chromiumos/tast/internal/usercode.SafeCall.func2.1 (usercode.go:107)\n        at runtime.gopanic (panic.go:969)\n        at chromiumos/tast/internal/caller.Check (caller.go:71)\n        at chromiumos/tast/caller.Check (caller.go:26)\n        at chromiumos/tast/local/chrome.Lock (chrome.go:118)\n        at chromiumos/tast/local/accountmanager.(*accountManagerTestFixture).SetUp (fixture.go:131)\n        ...\n        \nIt looks like I should add my fixture to [1]? Why is the list required?\nThey also say \"It can only be called by preconditions\". Is SetUp a precondition?\n\n[1] https://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/chrome/chrome.go;l\u003d92;drc\u003db7a71a6dc4848b8a1c182422b7e071bab02009eb",
      "parentUuid": "b8e94399_4ab5d3b8",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69c4c2f5_651e559c",
        "filename": "src/chromiumos/tast/local/accountmanager/fixture.go",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2021-11-18T09:26:02Z",
      "side": 1,
      "message": "Preconditions were used before fixtures, and fixtures can be added to the file you linked as well.\n\nIt is needed to protect the chrome instance you create in the fixture, so it cannot be closed by a test. If it is closed by a test, it can make the following test fail, and the TearDown() in the fixture will fail as well, as it cannot close the chrome instance (as it no longer exists anymore).\n\nThe list is required so a test cannot call Unlock().",
      "parentUuid": "a59fae09_68b5f532",
      "revId": "2c0b616ae5978a96eaa7ab0f4205c453c361f264",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}