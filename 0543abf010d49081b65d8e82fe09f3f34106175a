{
  "comments": [
    {
      "key": {
        "uuid": "8d1e9837_bcfab649",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T07:49:29Z",
      "side": 1,
      "message": "it looks like misuese of Shorten context, because you are losing old Longer context which can be used for cleanup for example",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 56,
        "endChar": 51
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9da75a9_bf7b726f",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T13:40:52Z",
      "side": 1,
      "message": "Good catch! Thanks!",
      "parentUuid": "8d1e9837_bcfab649",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 56,
        "endChar": 51
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f88952b0_9d68f3c7",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T07:49:29Z",
      "side": 1,
      "message": "how long it takes to enable PlayStore in the worst case on slow devices? We should reserve enough time to be able to turn it on at the end",
      "range": {
        "startLine": 68,
        "startChar": 1,
        "endLine": 68,
        "endChar": 16
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "547e9e14_67bb3b89",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T13:40:52Z",
      "side": 1,
      "message": "Less than 1 second. So 3 seconds would be enough.",
      "parentUuid": "f88952b0_9d68f3c7",
      "range": {
        "startLine": 68,
        "startChar": 1,
        "endLine": 68,
        "endChar": 16
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7638477_f836a736",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T15:38:25Z",
      "side": 1,
      "message": "The thing is that in reality you probably will have less than 3 seconds for cleanup. What about 5 or 10 seconds to be safe? We had many examples when we were too optimistic about time for cleanup and test was flaky some time.",
      "parentUuid": "547e9e14_67bb3b89",
      "range": {
        "startLine": 68,
        "startChar": 1,
        "endLine": 68,
        "endChar": 16
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b692048_cd2ee55e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T19:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e7638477_f836a736",
      "range": {
        "startLine": 68,
        "startChar": 1,
        "endLine": 68,
        "endChar": 16
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "944ea123_ee4f86a8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T19:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e7638477_f836a736",
      "range": {
        "startLine": 68,
        "startChar": 1,
        "endLine": 68,
        "endChar": 16
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ce600d2_1d223177",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T07:49:29Z",
      "side": 1,
      "message": "1. Please don\u0027t use s.Fatal in defer statement, becuase it will crash goroutine and other defere statements won\u0027t have chance to run which may lead to resource leaking;\n2. Please return error here and let caller to decide what to do with error --\u003e s.Log/s.Fatal/s.Error",
      "range": {
        "startLine": 71,
        "startChar": 2,
        "endLine": 71,
        "endChar": 10
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "262ee26c_303d0b50",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T13:40:52Z",
      "side": 1,
      "message": "1. About s.Fatal - good catch!\n2. For simplicity I would just replace Fatal-\u003eError as there is no way handle the error rather than to just log it. In addition this function is not meant for using outside of the current test. (I agree in more general case it makes sense to return the error)",
      "parentUuid": "1ce600d2_1d223177",
      "range": {
        "startLine": 71,
        "startChar": 2,
        "endLine": 71,
        "endChar": 10
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2c7dc4d_6476310e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T15:38:25Z",
      "side": 1,
      "message": "re 2: agree with you that we can only log error.\n\nThere are few reasons why caller should be responsible for logging:\n1. It\u0027s more explicit;\n2. You need to remember that it is used in defer and cannot panic (crash).\n3. when you read code it looks like disablePlayStore and enablePlayStore cannot fail which is wrong",
      "parentUuid": "262ee26c_303d0b50",
      "range": {
        "startLine": 71,
        "startChar": 2,
        "endLine": 71,
        "endChar": 10
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8f50f77_f125d3b7",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T19:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d2c7dc4d_6476310e",
      "range": {
        "startLine": 71,
        "startChar": 2,
        "endLine": 71,
        "endChar": 10
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e528804_ec7d1151",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T19:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d2c7dc4d_6476310e",
      "range": {
        "startLine": 71,
        "startChar": 2,
        "endLine": 71,
        "endChar": 10
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c577fb62_83e1debf",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T07:49:29Z",
      "side": 1,
      "message": "let\u0027s disable playstore at the beginning of the test",
      "range": {
        "startLine": 75,
        "startChar": 1,
        "endLine": 77,
        "endChar": 0
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3400b87e_ee71e576",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-02T07:49:29Z",
      "side": 1,
      "message": "This is an example how it can look like:\n\n\np :\u003d s.PreValue().(arc.PreData)\ncr :\u003d p.Chrome\na :\u003d p.ARC\n\ndisablePlayStore :\u003d func(ctx context.Context) error {\n  ...\n}\n\nenablePlayStore :\u003d func(ctx context.Context) error {\n  ...\n}\n\ncleanupCtx :\u003d ctx\nctx, cancel :\u003d ctxutil.Shorten(ctx, 10*time.Second)\ndefer cancel()\n\nif err :\u003d disablePlayStore(ctx); err !\u003d nil {\n  s.Fatal(\"Failed to stop PlayStore: \", err)\n}\n\ndefer func(ctx context.Context) {\n  if err :\u003d enablePlayStore(ctx); err !\u003d nil {\n    s.Error(\"Failed to enable PlayStore: \", err)\n  }\n}(cleanupCtx)",
      "range": {
        "startLine": 56,
        "startChar": 1,
        "endLine": 77,
        "endChar": 0
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "653bf093_1755764c",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T13:40:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3400b87e_ee71e576",
      "range": {
        "startLine": 56,
        "startChar": 1,
        "endLine": 77,
        "endChar": 0
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db90bf8b_1d2e11c3",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/ime_blocking_vk.go",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1125794
      },
      "writtenOn": "2020-09-02T13:40:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c577fb62_83e1debf",
      "range": {
        "startLine": 75,
        "startChar": 1,
        "endLine": 77,
        "endChar": 0
      },
      "revId": "0543abf010d49081b65d8e82fe09f3f34106175a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}