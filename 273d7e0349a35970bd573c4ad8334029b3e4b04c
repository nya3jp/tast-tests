{
  "comments": [
    {
      "key": {
        "uuid": "f409fe6f_87036146",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 51,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "(continuing earlier discussion)\n\nthe problem that i have with this is that it\u0027s making an assumption about the internal representation of time.Second. time.Duration values are only expected to be used with other time.Duration values (unless you divide by e.g. time.Second to go back to an integral value).\n\nthe nsec variable on L50 seems misnamed, since it\u0027s actually a fractional second. i think that the right formulation using time.Duration would be something like this:\n\n  int64(time.Duration(fsec*float64(time.Second))/time.Nanosecond)\n\nbut after writing all of that, i just noticed https://golang.org/pkg/time/#ParseDuration. can you get rid of getTimeFromTimestamp and just call time.ParseDuration(s+\"s\") to parse these timestamps?",
      "range": {
        "startLine": 51,
        "startChar": 41,
        "endLine": 51,
        "endChar": 61
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a56b27fd_bed77692",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1003129
      },
      "writtenOn": "2019-04-01T19:54:46Z",
      "side": 1,
      "message": "We should probably put this into the container test image?",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 121,
        "endChar": 2
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6794c657_598452fc",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "i don\u0027t understand this comment. it looks like the evtest command is writing to the pipe created on L153, so how would the event be missed?",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be4bde23_5aa811fe",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 171,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "s/Scaner/Scanner/",
      "range": {
        "startLine": 171,
        "startChar": 2,
        "endLine": 171,
        "endChar": 14
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33cc13f9_bd511762",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 195,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "this is ignoring the test timeout, but per above i\u0027m not sure that it\u0027s necessary",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5e8a1b9_590f3d09",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 222,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "per earlier comment, please don\u0027t sleep. is this even necessary now that you\u0027re waiting for the server to tell you its port?",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a61f46b1_0f728c57",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 257,
      "author": {
        "id": 1003129
      },
      "writtenOn": "2019-04-01T19:54:46Z",
      "side": 1,
      "message": "It might be easier here to have the test listen and have the script connect to that listening port. Then you could avoid the two testing.Poll invocations.\n\nTCP is also probably not the ideal transport here. If using TCP, you\u0027d need to frame your messages to ensure that you\u0027re parsing them correctly. You\u0027re on a single host, so UDP should work well enough (i.e. packets are delivered in-order without dropping) and would essentially provide the framing you want.\n\nOtherwise, if you want to stick with a stream transport I might also suggest just using vsock to at least avoid the whole IP stack.",
      "range": {
        "startLine": 233,
        "startChar": 0,
        "endLine": 257,
        "endChar": 2
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4c54fd5_a28bf87e",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 323,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "why is this necessary? why is it 3 seconds and not 1 or 5?",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11335bf0_6eef397d",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 342,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "this should honor ctx.Done",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e392ee5_dbd3d3c7",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/crostini_input_latency.go",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "this should honor ctx.Done",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b771c916_c35405b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/data/crostini_input_latency_server.py",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2019-03-28T21:29:15Z",
      "side": 1,
      "message": "nit: extra comma?",
      "range": {
        "startLine": 23,
        "startChar": 18,
        "endLine": 23,
        "endChar": 19
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd29bf45_b60a5880",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/data/crostini_input_latency_server.py",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2019-03-28T21:29:15Z",
      "side": 1,
      "message": "nit: assuming guest is on python 2.7\nfrom __future__ import print_function\nprint -\u003e print() (here and in the rest of prints)",
      "range": {
        "startLine": 29,
        "startChar": 8,
        "endLine": 29,
        "endChar": 23
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "316a00b0_a4e39159",
        "filename": "src/chromiumos/tast/local/bundles/cros/vm/data/crostini_input_latency_server.py",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1003129
      },
      "writtenOn": "2019-04-01T19:54:46Z",
      "side": 1,
      "message": "As another point for framing or UDP - the host could send a \"ping\" then \"exit\" and the guest would see \"pingexit\" which would hit the unrecognizable command below.",
      "range": {
        "startLine": 33,
        "startChar": 7,
        "endLine": 33,
        "endChar": 30
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67c0ea63_1b911e9f",
        "filename": "src/chromiumos/tast/local/dbusutil/service.go",
        "patchSetId": 4
      },
      "lineNbr": 86,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2019-03-31T15:38:22Z",
      "side": 1,
      "message": "rebase issue? i thought that this logic was moved to the vm package in https://crrev.com/c/1534214",
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7dd858b7_1dac3d11",
        "filename": "src/chromiumos/tast/local/vm/container.go",
        "patchSetId": 4
      },
      "lineNbr": 239,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2019-03-28T21:29:15Z",
      "side": 1,
      "message": "huge nit: Executes -\u003e executes",
      "range": {
        "startLine": 239,
        "startChar": 15,
        "endLine": 239,
        "endChar": 16
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b4ce83d_3d6a549e",
        "filename": "src/chromiumos/tast/local/vm/container.go",
        "patchSetId": 4
      },
      "lineNbr": 289,
      "author": {
        "id": 1003129
      },
      "writtenOn": "2019-04-01T19:54:46Z",
      "side": 1,
      "message": "nit: get",
      "range": {
        "startLine": 289,
        "startChar": 51,
        "endLine": 289,
        "endChar": 54
      },
      "revId": "273d7e0349a35970bd573c4ad8334029b3e4b04c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}