{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "dd713bd7_ea39294a",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2021-08-25T04:25:06Z",
      "side": 1,
      "message": "It is more common to apply WithTimeout right before doing actions, so that other places that reuse ui is not affected.",
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9bcefbb_fa42325f",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1519363
      },
      "writtenOn": "2021-08-26T07:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dd713bd7_ea39294a",
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c99eeea_8a47224e",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T22:12:09Z",
      "side": 1,
      "message": "optional: I think you can inline it, but it might be the matter of taste.\n\nif err :\u003d ui.WaitUntilExists(nodewith.Name(\"User Action\").Role(role.ColumnHeader))(ctx); err !\u003d nil {",
      "range": {
        "startLine": 113,
        "startChar": 5,
        "endLine": 113,
        "endChar": 11
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be2edf02_de2174e6",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2021-08-25T04:25:06Z",
      "side": 1,
      "message": "If we go without inlining, the variable name might be made more informative like \"userAction\" or \"userActionHeader\".",
      "parentUuid": "8c99eeea_8a47224e",
      "range": {
        "startLine": 113,
        "startChar": 5,
        "endLine": 113,
        "endChar": 11
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea7b7733_d57e351e",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1519363
      },
      "writtenOn": "2021-08-26T07:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be2edf02_de2174e6",
      "range": {
        "startLine": 113,
        "startChar": 5,
        "endLine": 113,
        "endChar": 11
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9feed21_2e585012",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T22:12:09Z",
      "side": 1,
      "message": "remove it.",
      "range": {
        "startLine": 124,
        "startChar": 7,
        "endLine": 124,
        "endChar": 21
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4deee311_19263586",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1519363
      },
      "writtenOn": "2021-08-26T07:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9feed21_2e585012",
      "range": {
        "startLine": 124,
        "startChar": 7,
        "endLine": 124,
        "endChar": 21
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49ecca43_48d68ae1",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T22:12:09Z",
      "side": 1,
      "message": "I know you followed existing code pattern, but we don\u0027t have to use switch here.\n\nif tc.wantAllowed {\n　 // true case\n} else {\n　 // false case\n}",
      "range": {
        "startLine": 128,
        "startChar": 10,
        "endLine": 128,
        "endChar": 15
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97047083_028dfbf4",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1519363
      },
      "writtenOn": "2021-08-26T07:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "49ecca43_48d68ae1",
      "range": {
        "startLine": 128,
        "startChar": 10,
        "endLine": 128,
        "endChar": 15
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4135fcd_be7dd0b6",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T22:12:09Z",
      "side": 1,
      "message": "You can use exsiting ui here, instead of redefining it.",
      "range": {
        "startLine": 133,
        "startChar": 6,
        "endLine": 133,
        "endChar": 50
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48a17724_ab17981e",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/developer_tools_availability.go",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-25T05:16:09Z",
      "side": 1,
      "message": "nvm",
      "parentUuid": "f4135fcd_be7dd0b6",
      "range": {
        "startLine": 133,
        "startChar": 6,
        "endLine": 133,
        "endChar": 50
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a9ba1fe_1dcb210d",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T22:12:09Z",
      "side": 1,
      "message": "Hmm. It seems this entire code is redundant given ui.WaitUntilGone. \nWaitUntilGone does polling inside the function.\nhttps://chromium.googlesource.com/chromiumos/platform/tast-tests/+/70cbb348d0af/src/chromiumos/tast/local/chrome/uiauto/automation.go#435\n\nI think we can remove this.\n\nI think it means this function (UiautoVerifyNotExists) is actually no longer needed. Instead the test itself can call ui.WaitUntilGone and that would work.\n\nCould you update the test in that way and ask review for Jonathan (jonfan@chromium.org)?",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5630920_c2ed661e",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T23:19:55Z",
      "side": 1,
      "message": "Oh sorry I completely misread the intention of this code...\nNever mind this comment.",
      "parentUuid": "2a9ba1fe_1dcb210d",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ecc931e_52219558",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T23:40:15Z",
      "side": 1,
      "message": "This code just checks the node doesn\u0027t exists for timeout period.\nIt seems we can use EnsureGoneFor() for this purpose.\n\nhttps://pkg.go.dev/chromium.googlesource.com/chromiumos/platform/tast-tests.git/src/chromiumos/tast/local/chrome/uiauto@v0.0.0-20210824212705-70cbb348d0af#Context.EnsureGoneFor\n\nTherefore, I think we can simplify the code as follows.\n\nreturn uiauto.Combine(\"verify node is done\", \n  ui.WaitUntilGone(finder),\n  ui.EnsureGoneFor(finder, timeout),\n)(ctx)",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0b8c954_07d38d07",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T23:41:18Z",
      "side": 1,
      "message": "s/done/gone/",
      "parentUuid": "3ecc931e_52219558",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "185f2fea_0ba3ca1d",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2021-08-24T23:43:17Z",
      "side": 1,
      "message": "(In case you haven\u0027t seen this notation, s/foo/bar/ means \"replace foo with bar in the previous comment\". In this case I wrote \"verify node is done\", but it should have been \"verify node is gone\")",
      "parentUuid": "f0b8c954_07d38d07",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc403f0e_af011f51",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1166720
      },
      "writtenOn": "2021-08-25T05:13:40Z",
      "side": 1,
      "message": "EnsureGoneFor() actually returns success as soon as node disappear, without waiting for the timeout period.\nhttps://chromium.googlesource.com/chromiumos/platform/tast-tests/+/70cbb348d0af/src/chromiumos/tast/local/chrome/uiauto/automation.go#397\n\nIt is reported as an issue and still open.\nhttps://b.corp.google.com/issues/190596080",
      "parentUuid": "185f2fea_0ba3ca1d",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "532871a0_469a35fd",
        "filename": "src/chromiumos/tast/local/policyutil/ui.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1519363
      },
      "writtenOn": "2021-08-26T07:26:06Z",
      "side": 1,
      "message": "As the issue reported above, not using EnsureGoneFor() for now.",
      "parentUuid": "bc403f0e_af011f51",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 82,
        "endChar": 2
      },
      "revId": "d68aa7de8d92d572263814891192c180646568dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}