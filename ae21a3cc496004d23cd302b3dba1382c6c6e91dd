{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "34dfab2f_fe60c251",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-09-16T08:21:41Z",
      "side": 1,
      "message": "LGTM with comments.",
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83f78c44_a02d31b8",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-09-16T08:21:41Z",
      "side": 1,
      "message": "So this means \"lacros is disabled even if the system default is enabled\", you meant, right? Could you make it more explicit?\n\nNote: \"Ash will be used\" sounds a bit ambiguous from Lacros team\u0027s point of view, because e.g. in SxS / Primary, web browser in ash can be still used. Also \"ash\" for system itself is kept running even in lacros-only mode. It may be just wording, but I really would like to make it more clear and explicit.",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b172a7de_7eab581c",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-09-20T20:20:46Z",
      "side": 1,
      "message": "Ack. changed to \"if unset, the system default browser will be used\" to avoid any confusion. Thanks,",
      "parentUuid": "83f78c44_a02d31b8",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5223355f_25eafb6e",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-09-21T07:41:00Z",
      "side": 1,
      "message": "in the case, I\u0027d recommend to add \"MODE_DISABLED\".\nThe default behavior is equivalent to MODE_UNSPECIFIED.",
      "parentUuid": "b172a7de_7eab581c",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fd038fc_bb245053",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-09-21T16:50:31Z",
      "side": 1,
      "message": "I\u0027m not quite following why MODE_DISABLED matters much here in that\n(1) `lacros.Mode` doesn\u0027t include MODE_DISABLED http://cs/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/chrome/lacros/config.go?l\u003d48\n(2) disabling lacros could better be handled in Ash by `disable_features` field in this proto if needed\n(3) we are rolling out lacros with lacrosonly enabled and well getting past the point where lacros as non-primary particularly in Tast environment.\n\nShould it be blocking this CL submission?",
      "parentUuid": "5223355f_25eafb6e",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "965d81b7_e5c44fdf",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-09-21T17:57:22Z",
      "side": 1,
      "message": "The source of LacrosMode is defined here.\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ash/crosapi/browser_util.h;l\u003d106\n\nSo, we have 4 kinds: DISABLED, SxS, Primary, and Only.\nI\u0027m ok to have \"unspecified\" in testing, meaning that it is deferred to the current OS\u0027s configuration, in this context.\n\nlacros.Mode has different \"unspecified\", as the intention of the value is \"enabling lacros, but which mode can be deferred to Tast test\u0027s default value for consistency\". This is kind of exception, because chrome itself does not have default-enabled-value now, since lacros is still under the flag.\n\nOTOH, This service is, IIUC, the interface that is talked from outside of Tast, so not the case, right? (So, in the sense, my code review for the previous PS was wrong, as unspecified is forcibly setting Only. Sorry about it).\n\nI have clear two requests:\n- Could you change the implementation of MODE_UNSPECIFIED not to override the ash-chrome\u0027s value?\n- Could you support DISABLED? Or, if you think it should be done via disabled feature as commented, could you explicitly document so? So that future readers can understand the background of the gap from the original enum.\n\nI\u0027m also still open for discussion, if you have different thoughts, so pls let me know then.",
      "parentUuid": "6fd038fc_bb245053",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53955868_2518ffc0",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-09-22T04:34:11Z",
      "side": 1,
      "message": "\u003e Could you change the implementation of MODE_UNSPECIFIED not to override the ash-chrome\u0027s value?\n\n`LacrosMode` in production and `lacros.Mode` in Tast seems to have diverged in the context you mentioned. By the way,\n\nMODE_UNSPECIFIED: Could it be the same as `lacros.Mode.Unspecified` for consistency? Most gRPC users would not care much about the specific transient mode (SxS or Primary) but would be just fine with LacrosOnly since that is where we are going to end up at.\nI\u0027m a bit unsure if we still need to support the \"let the system decide\" mode for gRPC users.\n\n\u003e Could you support DISABLED? Or, if you think it should be done via disabled feature as commented, could you explicitly document so? So that future readers can understand the background of the gap from the original enum.\n\nMODE_DISABLED: Yes, I can add it to this proto in a next patch.",
      "parentUuid": "965d81b7_e5c44fdf",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f0125d0_6a8ddb48",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1507611
      },
      "writtenOn": "2022-09-28T00:00:41Z",
      "side": 1,
      "message": "Marking as resolved as MODE_DISABLED is added (btw, MODE_UNSPECIFIED remains unchanged as a default value for test users for the reason I mentioned above) Please feel free to reopen this or leave a new comment if there is anything else to address. Thanks,",
      "parentUuid": "53955868_2518ffc0",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae87a83e_005cd6d4",
        "filename": "src/chromiumos/tast/services/cros/ui/chrome_service.proto",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1546379
      },
      "writtenOn": "2022-09-28T01:17:53Z",
      "side": 1,
      "message": "Hidehiko san will be OOO for some time. HyungTae do you think this CL is mature enough to land? If so feel free to land. Otherwise feel free to request reviews from other code owners.",
      "parentUuid": "3f0125d0_6a8ddb48",
      "range": {
        "startLine": 87,
        "startChar": 49,
        "endLine": 87,
        "endChar": 75
      },
      "revId": "ae21a3cc496004d23cd302b3dba1382c6c6e91dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}