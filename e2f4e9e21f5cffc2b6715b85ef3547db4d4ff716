{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "050b9052_1bec4a53",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/allow_cross_origin_auth_prompt.go",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2021-03-08T13:08:00Z",
      "side": 1,
      "message": "To host the image with authentication it should work with something like this:\n\nhtml :\u003d fmt.Sprintf(`\u003c!doctype html\u003e\n\u003chtml lang\u003d\"en\"\u003e\n\n\u003chead\u003e\n  \u003cmeta charset\u003d\"utf-8\"\u003e\n  \u003ctitle\u003eAllowCrossOriginAuthPrompt\u003c/title\u003e\n\u003c/head\u003e\n\n\u003cbody\u003e\n  \u003cdiv id\u003d\"imagePage\"\u003e\n    \u003cimg src\u003d\u0027%q/letopis_head.gif\u0027 alt\u003d\u0027img\u0027 id\u003d\u0027img_id\u0027\u003e\n  \u003c/div\u003e\n\u003c/body\u003e\n\n\u003c/html\u003e\n`, server.URL)\n\nauthServer :\u003d httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n  user, pass, ok :\u003d r.BasicAuth()\n\n  if !ok || subtle.ConstantTimeCompare([]byte(user), []byte(username)) !\u003d 1 || subtle.ConstantTimeCompare([]byte(pass), []byte(password)) !\u003d 1 {\n    w.Header().Set(\"WWW-Authenticate\", `Basic realm\u003d\"`+realm+`\"`)\n    w.WriteHeader(401)\n    w.Write([]byte(\"Unauthorised.\\n\"))\n    return\n  } else {\n    w.Header().Add(\"Content-Type\", \"text/html\")\n    io.WriteString(w, html)\n  }\n}))\n\nThen you need to add letopis_head.gif or some other image to be hosted by server of course but you navigate to authServer.URL in line 91",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 66
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "561e965d_2269fe55",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/allow_cross_origin_auth_prompt.go",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2021-03-08T16:33:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "050b9052_1bec4a53",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 66
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7220ccab_573c75a6",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/data/allow_cross_origin_auth_prompt_index.html",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-03-08T12:36:58Z",
      "side": 1,
      "message": "Why not host this image using the server as well?",
      "range": {
        "startLine": 14,
        "startChar": 14,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f25c9541_a9b18d15",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/data/allow_cross_origin_auth_prompt_index.html",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2021-03-08T16:33:25Z",
      "side": 1,
      "message": "created a separate bug as a todo crbug/1185792",
      "parentUuid": "7220ccab_573c75a6",
      "range": {
        "startLine": 14,
        "startChar": 14,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b08514ac_f59a5835",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/data/allow_cross_origin_auth_prompt_index.html",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1368736
      },
      "writtenOn": "2021-03-08T17:07:03Z",
      "side": 1,
      "message": "I would wait until the test is written correctly before merging. We should not depend on resources on the internet.\n\nWe will be requesting that image repeatedly. Is the owner expecting the traffic from our test fleet?",
      "parentUuid": "f25c9541_a9b18d15",
      "range": {
        "startLine": 14,
        "startChar": 14,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "500cd46c_053f4a34",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/data/allow_cross_origin_auth_prompt_index.html",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2021-03-09T17:30:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b08514ac_f59a5835",
      "range": {
        "startLine": 14,
        "startChar": 14,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "e2f4e9e21f5cffc2b6715b85ef3547db4d4ff716",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}