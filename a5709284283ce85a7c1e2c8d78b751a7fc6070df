{
  "comments": [
    {
      "key": {
        "uuid": "cf11689c_8c9104b0",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "In Tast tests, please use chromiumos/tast/testexec instead of os/exec. It has several tweaks for Tast tests.",
      "range": {
        "startLine": 13,
        "startChar": 2,
        "endLine": 13,
        "endChar": 9
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bd04dcf_658640c8",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Prefer grouping consts/vars with parentheses:\n\n const (\n   a \u003d ...\n   b \u003d ...\n )",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6aa4449_308e25fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "What do you think about naming this test UdevCrash? Then the full name will be platform.UdevCrash. logging_ was a category name in autotest, but seems not very necessary now.",
      "range": {
        "startLine": 29,
        "startChar": 12,
        "endLine": 29,
        "endChar": 28
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b606701_71ca7b46",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "If you could find an original author of the autotest and they\u0027re still in Chrome OS, please consider adding them. Otherwise this should be fine.",
      "range": {
        "startLine": 31,
        "startChar": 21,
        "endLine": 31,
        "endChar": 46
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efe6afd9_381c68fc",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "For feature tests like this, team alias is preferred (actually tast-users@ should be in contact only for examples tests). Could you find one? satorux@ may know since he\u0027s been working on crash reporter recently.",
      "range": {
        "startLine": 31,
        "startChar": 48,
        "endLine": 31,
        "endChar": 71
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcd5a504_02e0701f",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "I don\u0027t see the content of these three files. Are they empty? If so I think we don\u0027t need to have them as data files, but just create empty files in code:\n\n ioutil.WriteFile(name, nil, 0644)",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 36,
        "endChar": 27
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05f2d761_8d405a9f",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "ioutil.WriteFile is what you want:\n\nhttps://godoc.org/io/ioutil#WriteFile",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 50,
        "endChar": 1
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "983eaddd_5c7aa5e1",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "This function is trivial and used only in two places. Would you mind inlining it?\n\n if e, err :\u003d os.Stat(whitelistDir); err \u003d\u003d nil \u0026\u0026 e.IsDir() {\n   ...\n }",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 57,
        "endChar": 1
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49f692fc_691494fd",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "nit: Go doesn\u0027t use |foo| style to mention variable names in comments. Please mention it as is.\n\nFor example: https://golang.org/pkg/bufio/#NewScanner\n\n\u003e func NewScanner(r io.Reader) *Scanner\n\u003e NewScanner returns a new Scanner to read from r.",
      "range": {
        "startLine": 60,
        "startChar": 32,
        "endLine": 60,
        "endChar": 43
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "216e4482_11e50408",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Avoid passing around testing.State:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#test-subpackages\n\nIn this case you can update the signature just to\n\n func setConsent(consent bool) error\n\nThat said, since this function is called only with consent\u003dtrue, how about:\n\n func setConsent() error",
      "range": {
        "startLine": 63,
        "startChar": 1,
        "endLine": 63,
        "endChar": 58
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "457e0d25_763b8ecb",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Please prefer doing in Go rather than spawning subprocesses when possible. In this case, os.Chown can be used.\n\nhttps://godoc.org/os#Chown",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 90,
        "endChar": 3
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c46a26b_7c103133",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 113,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Avoid passing around testing.State:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#test-subpackages\n\nIn this case you can update the signature to\n\n func checkAtmelCrashes() (bool, error)",
      "range": {
        "startLine": 113,
        "startChar": 23,
        "endLine": 113,
        "endChar": 39
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "caa757b4_15f8769b",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 118,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Can we assume /var/spool/crash always exists on Chrome OS? I\u0027m not sure when /var/spool/crash is created.\n\nI guess we can just ignore the error and return (false, nil).\n\nSince we call ioutil.ReadDir next, we can skip os.Stat and just check the error of ioutil.ReadDir.\n\n files, err :\u003d ioutil.ReadDir(...)\n if err !\u003d nil {\n   if os.IsNotExist(err) {\n     return false, nil\n   }\n   return false, err\n }",
      "range": {
        "startLine": 117,
        "startChar": 2,
        "endLine": 118,
        "endChar": 14
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b7c9407_2ac65596",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "This will fail if there was an unrelated crash before this test starts.\n\nI recommend recording the list of crashes before sending udev event, and comparing afterwards. See ui.ChromeCrashNotLoggedIn test which does similar thing:\n\nhttps://cs.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/ui/chrome_crash_not_logged_in.go\n\nAlso I think we just want to ignore unrelated crashes so this test doesn\u0027t fail because of crashes of unrelated processes.",
      "range": {
        "startLine": 128,
        "startChar": 2,
        "endLine": 128,
        "endChar": 63
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9913b405_86229c44",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 131,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "huge nit: .meta?",
      "range": {
        "startLine": 131,
        "startChar": 34,
        "endLine": 131,
        "endChar": 38
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af837a81_901367fe",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 140,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Please never ignore errors.\n\nAlso, please always close files when you\u0027re done with them. Usually we use the defer statement to do this:\n\n f, err :\u003d os.Open(...)\n if err !\u003d nil { ... }\n defer f.Close()\n\nBut defer statements won\u0027t work as expected in for loops (it\u0027s executed at the end of the current function, not at the end of the current scope). You may want to introduce a function to be called for each file.",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 140,
        "endChar": 23
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49aba530_f6700e36",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 145,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "ditto: Please handle errors.",
      "range": {
        "startLine": 145,
        "startChar": 9,
        "endLine": 145,
        "endChar": 10
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1406110a_f1b1536c",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 153,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "style: var badLines []string\n\nhttps://github.com/golang/go/wiki/CodeReviewComments#declaring-empty-slices",
      "range": {
        "startLine": 153,
        "startChar": 2,
        "endLine": 153,
        "endChar": 24
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cfce078e_3332eca2",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "When badLines is not empty, this can end up very long message. We want to be careful about constructing useful and concise error messages:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#When-to-log\n\nHow about reporting the first offending line only?",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 161,
        "endChar": 3
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6c52886_75500d12",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 187,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "We don\u0027t want to skip tests at run time:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#device-dependencies\n\nWe want a hardware dependency here, but it\u0027s work in progress now. How about running this test on all boards for now and limiting the boards later?",
      "range": {
        "startLine": 187,
        "startChar": 2,
        "endLine": 187,
        "endChar": 41
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b12b2c3_41ff0a59",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 192,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "nit: Please start log test failure messages with capital letters.\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#formatting",
      "range": {
        "startLine": 192,
        "startChar": 11,
        "endLine": 192,
        "endChar": 17
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f69abfd_9aabf1a5",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 206,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Please always check the command result and handle errors. Typical way is:\n\n for _, args :\u003d range [][]string{\n   {\"udevadm\", \"control\", ...},\n   ...\n } {\n   if err :\u003d testexec.CommandContext(ctx, args[0], args[1]...).Run(testexec.DumpLogOnError); err !\u003d nil {\n     s.Fatal(\"%s failed: %v\", shutil.EscapeSlice(args), err)\n   }\n }",
      "range": {
        "startLine": 201,
        "startChar": 1,
        "endLine": 206,
        "endChar": 63
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b449a7cf_9da381e9",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "nit: Please always use \"err\" or similar to name error values. It\u0027s rarely seen to use different naming.",
      "range": {
        "startLine": 208,
        "startChar": 1,
        "endLine": 208,
        "endChar": 7
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2a1aecb_95051e29",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "FYI, if you want to bail out from testing.Poll loop, you can use testing.PollBreak:\n\nhttps://godoc.org/chromium.googlesource.com/chromiumos/platform/tast.git/src/chromiumos/tast/testing#PollBreak",
      "range": {
        "startLine": 209,
        "startChar": 2,
        "endLine": 209,
        "endChar": 27
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff16917c_930fe71f",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 212,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Construct a meaningful error message why the polling condition is not met. This is included in the error returned from testing.Poll. For example:\n\n return errors.New(\"no atmel crash found\")",
      "range": {
        "startLine": 212,
        "startChar": 9,
        "endLine": 212,
        "endChar": 23
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db8aca28_6ef62208",
        "filename": "src/chromiumos/tast/local/bundles/cros/platform/logging_udev_crash.go",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-05-31T08:43:12Z",
      "side": 1,
      "message": "Please include err in failure messages for better debugging.\n\n s.Error(\"Failed to wait for atmel crash reports: \", err)",
      "range": {
        "startLine": 215,
        "startChar": 2,
        "endLine": 215,
        "endChar": 41
      },
      "revId": "a5709284283ce85a7c1e2c8d78b751a7fc6070df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}