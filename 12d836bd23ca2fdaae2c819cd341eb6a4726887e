{
  "comments": [
    {
      "key": {
        "uuid": "d42732ca_0610e4ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-21T23:04:29Z",
      "side": 1,
      "message": "Maybe better to have \"Timeout: 3*time.Minute\" -- cpu.WaitUntilIdle(ctx) could wait for 1 minute actually, and the default timeout (2 mins) can be too short for this test.",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60d6b098_a9d513db",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T00:04:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d42732ca_0610e4ed",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "965a0622_265cf1e9",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-21T23:04:29Z",
      "side": 1,
      "message": "Recently I got to learn that you don\u0027t have to defer. Just conns.Close() here is fine, you\u0027re not using those connections.",
      "range": {
        "startLine": 65,
        "startChar": 2,
        "endLine": 65,
        "endChar": 21
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a6c24f3_7657813c",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T00:04:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "965a0622_265cf1e9",
      "range": {
        "startLine": 65,
        "startChar": 2,
        "endLine": 65,
        "endChar": 21
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed0ac532_826d35f6",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-21T23:04:29Z",
      "side": 1,
      "message": "nit: I think you should line-break here:\n ...Highlight\",\n} {\n    ....",
      "range": {
        "startLine": 104,
        "startChar": 54,
        "endLine": 104,
        "endChar": 57
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fffc273_b915fe62",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T00:04:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed0ac532_826d35f6",
      "range": {
        "startLine": 104,
        "startChar": 54,
        "endLine": 104,
        "endChar": 57
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58847bcd_bc0c38b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-21T23:04:29Z",
      "side": 1,
      "message": "I\u0027ve heard that some animations (like on Container or Highlight) might not happen on some situations. Does this test scenario cover such things?  Should we exclude some histograms if the animation should not happen on the ongoing operation?",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c7757e4_ff66ccac",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T00:04:15Z",
      "side": 1,
      "message": "Yes, you are right. For two windows test, because both windows fit in the screen when cycling, the container will have no animation. For eight windows test, the highlight doesn\u0027t animate if the next window moves into the current window\u0027s exact position. That\u0027s the reason I added the TotalCount(). For example, here is a result for this test:\n{\n  \"Ash.WindowCycleView.AnimationSmoothness.Container.2windows.0times\": {\n    \"summary\": {\n      \"units\": \"percent\",\n      \"improvement_direction\": \"up\",\n      \"type\": \"scalar\",\n      \"value\": 0\n    }\n  },\n  \"Ash.WindowCycleView.AnimationSmoothness.Container.8windows.14times\": {\n    \"summary\": {\n      \"units\": \"percent\",\n      \"improvement_direction\": \"up\",\n      \"type\": \"scalar\",\n      \"value\": 58.464285714285715\n    }\n  },\n  \"Ash.WindowCycleView.AnimationSmoothness.Highlight.2windows.3times\": {\n    \"summary\": {\n      \"units\": \"percent\",\n      \"improvement_direction\": \"up\",\n      \"type\": \"scalar\",\n      \"value\": 84.33333333333333\n    }\n  },\n  \"Ash.WindowCycleView.AnimationSmoothness.Highlight.8windows.6times\": {\n    \"summary\": {\n      \"units\": \"percent\",\n      \"improvement_direction\": \"up\",\n      \"type\": \"scalar\",\n      \"value\": 71.75\n    }\n  },\n\nAsh.WindowCycleView.AnimationSmoothness.Container.2windows. \n    - container didn\u0027t animate at all (0 times), so histogram being zero is correct.\nAsh.WindowCycleView.AnimationSmoothness.Container.8windows\n    - container animated 14 times even though the test alt-tabbed 16 times, because for the first two tabs, the container didn\u0027t have to move the windows around.\n\nI added the counts just for reference to see a zero histogram is actually resulted from no animation happening at all, so that I don\u0027t forget this shouldn\u0027t be identified as a perf issue.\n\nI agree we can remove the zero reporting. How do you think would be the best way to revise the reporting? I am all ears.",
      "parentUuid": "58847bcd_bc0c38b4",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce23771f_83a4f012",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-22T00:55:05Z",
      "side": 1,
      "message": "The simplest one would be just adding\nif histToReport.TotalCount() \u003d\u003d 0 {\n  continue\n}\na few lines above.\n\n\nA bit more sophisticated idea would be to call s.Error() if total count is 0 but expected to have some, or if the total count is not 0 but expected to have none.",
      "parentUuid": "4c7757e4_ff66ccac",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bdbe2df_327840a1",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T01:27:19Z",
      "side": 1,
      "message": "If there\u0027s animation or not is decided by the layout implementation in window_cycle_view. In our test, the windows are created by default(maximized), but it seems the windows can have different widths based on the original window\u0027s aspect ratios, so it is hard to predict. So I will simply remove the zero reporting here.",
      "parentUuid": "ce23771f_83a4f012",
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "159c58c4_5ef2364d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-21T23:04:29Z",
      "side": 1,
      "message": "How does this total count be a part of the metric name?  This means the the metrics are tracked separately if the number of event is different. I guess there\u0027s no such benefits?",
      "range": {
        "startLine": 118,
        "startChar": 77,
        "endLine": 118,
        "endChar": 102
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edf6415e_45f9dc19",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T00:04:15Z",
      "side": 1,
      "message": "Same as above. Please advice.",
      "parentUuid": "159c58c4_5ef2364d",
      "range": {
        "startLine": 118,
        "startChar": 77,
        "endLine": 118,
        "endChar": 102
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba14b69a_dc101911",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-11-22T00:55:05Z",
      "side": 1,
      "message": "My advice is simply removing that.\n\nA different name would create a different graph in https://crosbolt.googleplex.com/crosbolt/index.html?tab\u003dtime_series\u0026sku_filter\u003dkrane_ARMv8_4GB\u0026suite\u003dcrosbolt\u0026test\u003dtast.ui.ScreenRotationPerf. I believe the difference of total count shouldn\u0027t create any changes, and the total number will not really matter basically. So just removing is fine.  Creating windows can be helpful since the performance characteristics could be different between 2 windows and 8 windows.",
      "parentUuid": "edf6415e_45f9dc19",
      "range": {
        "startLine": 118,
        "startChar": 77,
        "endLine": 118,
        "endChar": 102
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c4dc452_d8d5aff9",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/window_cycle_perf.go",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1372308
      },
      "writtenOn": "2019-11-22T01:27:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba14b69a_dc101911",
      "range": {
        "startLine": 118,
        "startChar": 77,
        "endLine": 118,
        "endChar": 102
      },
      "revId": "12d836bd23ca2fdaae2c819cd341eb6a4726887e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}