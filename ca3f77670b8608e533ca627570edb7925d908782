{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8bbeb0d0_2f7fc5c0",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-05T04:58:46Z",
      "side": 1,
      "message": "ping? Could you avoid CombinedOuptut?",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80065948_88e7f616",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1366764
      },
      "writtenOn": "2022-07-06T10:14:31Z",
      "side": 1,
      "message": "Providing user-input is not required in our case, but \u0027evtest\u0027 command will wait for user input so as per our requirement only CombinedOutput is working.\nHere we need to find particular event number from \u0027evtest\u0027 command\u0027s output.",
      "parentUuid": "8bbeb0d0_2f7fc5c0",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8437d1a5_4e358757",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-07T12:17:05Z",
      "side": 1,
      "message": "\u003e Providing user-input is not required in our case, but \u0027evtest\u0027 command will wait for user input so as per our requirement only CombinedOutput is working.\n\nSorry,user-input and CombinedOutput didn\u0027t connect. Could you elaborate further? Why you need to use \"CombinedOutput\"? Do you need to mix Stdout/Stderr? They may be interleaved so at least parsing it is highly discouraged.",
      "parentUuid": "80065948_88e7f616",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8cec9b92_41ede7d3",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1366764
      },
      "writtenOn": "2022-07-11T12:10:50Z",
      "side": 1,
      "message": "When we give this `evtest` command, it will display some output via Stdout and wait for user-input like below.\n```\nlocalhost ~ # evtest\nNo device specified, trying to scan all of /dev/input/event*\nAvailable devices:\n/dev/input/event0:\tLid Switch\n/dev/input/event1:\tPower Button\n/dev/input/event10:\tELAN90FC:00 04F3:2A49 Stylus\n/dev/input/event11:\tsof-rt5682 Headset Jack\n/dev/input/event12:\tsof-rt5682 HDMI/DP,pcm\u003d2\n/dev/input/event13:\tsof-rt5682 HDMI/DP,pcm\u003d3\n/dev/input/event14:\tsof-rt5682 HDMI/DP,pcm\u003d4\n/dev/input/event15:\tsof-rt5682 HDMI/DP,pcm\u003d5\n/dev/input/event16:\tcros_fp_input\n/dev/input/event2:\tAT Translated Set 2 keyboard\n/dev/input/event3:\tcros_ec_buttons\n/dev/input/event4:\tPRP0001:00\n/dev/input/event5:\tElan Touchpad\n/dev/input/event6:\tELAN90FC:00 04F3:2A49\n/dev/input/event7:\tELAN90FC:00 04F3:2A49 UNKNOWN\n/dev/input/event8:\tELAN90FC:00 04F3:2A49 UNKNOWN\n/dev/input/event9:\tELAN90FC:00 04F3:2A49 Stylus\nSelect the device event number [0-16]: \n```\n\n We are actually interested in this Stdout to identify the device number for touchpad. If we are only using the `testexec.CommandContext().Output()` it fails with exit(1) status. Hence we are using the `CombinedOutput` to get this data and identify the device event number.\n \n If we can achieve this is any other method, please let us know.",
      "parentUuid": "8437d1a5_4e358757",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0850082e_38092e6b",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-07-11T16:17:52Z",
      "side": 1,
      "message": "\u003e If we are only using the  testexec.CommandContext().Output()  it fails with exit(1) status.\n\nCould you check why? And why CombinedOutput solves it?",
      "parentUuid": "8cec9b92_41ede7d3",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "792c02ae_2a5ca968",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1366764
      },
      "writtenOn": "2022-09-27T11:44:00Z",
      "side": 1,
      "message": "Yes, testexec.CommandContext().Output() returns error if command execution fails or given command requires input from user. Whereas, while using exec.Command().CombinedOutput() we\u0027ll get both output log as well error message if command requires any input from user. So by neglecting error message like exit(1) status we can use CombinedOutput() returned output data for getting evtest event number here.",
      "parentUuid": "0850082e_38092e6b",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0fb9f9a_2c0df41e",
        "filename": "src/chromiumos/tast/local/bundles/cros/inputs/tablet_mode_check.go",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2022-10-03T09:42:33Z",
      "side": 1,
      "message": "Ah, I see what you meant.\n\nThen, I think it\u0027s better to avoid evtest at all.\n\nsrc/platform/tast-tests/src/chromiumos/tast/local/input/device.go\n\nis the parsing code. it needs to expose a few members, but we can reuse the library.",
      "parentUuid": "792c02ae_2a5ca968",
      "range": {
        "startLine": 134,
        "startChar": 36,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "ca3f77670b8608e533ca627570edb7925d908782",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}