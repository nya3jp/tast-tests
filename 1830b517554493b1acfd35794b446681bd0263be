{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e07e8141_575db997",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2021-05-20T06:47:10Z",
      "side": 1,
      "message": "LGTM. Deferring approval to taoyl@",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5706472_7c20cd11",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-20T07:30:25Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f154478_9398c315",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-20T08:21:11Z",
      "side": 1,
      "message": "Note: it seems that this test may affect the next test running right after it -- the next test may fail at ipv4 ping step with message \"no response received\". If I put this test as the last one, all tests can pass. I haven\u0027t checked the root cause but seems like another ip conntrack issue?",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "782977d0_7aba2209",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-21T10:42:25Z",
      "side": 1,
      "message": "Is it the ping in line 202? This sound very weird because in next test it\u0027s supposed to be pinging xl2tpdServerIPAddress \u003d \"192.168.1.99\", which is not even used in this test at all? Or am I misunderstanding anything here?",
      "parentUuid": "7f154478_9398c315",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7437728f_6a5135f6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-24T06:45:19Z",
      "side": 1,
      "message": "Ahh nvm, I got a stupid error: in vpn_server.go:159, the template is a global variable and is modified in this test, and thus the following test the vpn server will be set up with the wrong ip. I moved the xl2tpd config out of the map to make a copy of that.\nSorry for the confusion.",
      "parentUuid": "782977d0_7aba2209",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24b40fc8_2522a93d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-24T07:42:38Z",
      "side": 1,
      "message": "I think you can just change the variable value in vpn_server.go:179 (\"xl2tpd_server_ip_address\": xl2tpdServerIPAddress) to avoid copying the template and make the code easier to read? After all, I guess that\u0027s the original reason why a template is used here.",
      "parentUuid": "7437728f_6a5135f6",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c5f04a4_2cd61a9b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-24T08:00:18Z",
      "side": 1,
      "message": "\u003e change the variable value in vpn_server.go:179 (\"xl2tpd_server_ip_address\": xl2tpdServerIPAddress)\nI would prefer that way but the netns address is not exposed from chroot now, we need to move the netns creation out of the chroot.Startup(), to know the netns address before that. Maybe I did the merge to early in the previous patch...\n\nOr maybe we can do the netns creation in chroot.NewNetworkChroot(), I think it\u0027s better to do that after the refactor patch, otherwise we will need more code for checking errors.\n\nWDYT?",
      "parentUuid": "24b40fc8_2522a93d",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d88ffad9_f7af5d53",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-24T10:34:39Z",
      "side": 1,
      "message": "Oh I see the problem here. Thanks for the clarification.\n\nHow about we add a bool variable for control and change the template to something like \n{{if .use_underlay_ip}}{{.netns_ip}}{{else}}{{.xl2tpd_server_ip_address}}{{end}}\n?",
      "parentUuid": "3c5f04a4_2cd61a9b",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95229238_c9af2837",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-25T02:53:20Z",
      "side": 1,
      "message": "Thanks! I didn\u0027t know branches can be used in the template before. The new solution sounds better.\nDone.",
      "parentUuid": "d88ffad9_f7af5d53",
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a11b983a_193dc550",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/vpn_server.go",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-21T10:42:25Z",
      "side": 1,
      "message": "For the same reason I guess this\u0027s supposed to be either L2tpIpsecVpnServer or L2tpipsecVpnServer. Maybe it\u0027s easier to come up later with a separate patch to fix all these?",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 23
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01dd3b19_05472634",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/vpn_server.go",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-24T06:45:19Z",
      "side": 1,
      "message": "Yep, I plan to change this in https://crrev.com/c/2910069",
      "parentUuid": "a11b983a_193dc550",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 23
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1726baeb_6e43b3d3",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/vpn_server.go",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1326157
      },
      "writtenOn": "2021-05-27T15:20:18Z",
      "side": 1,
      "message": "Per http://go/go-code-review-comments#Initialisms, each initialism should have a consistent case. So I would expect to see \"L2TP\" or \"l2tp\", but not \"L2tp\". Similarly \"IP\" and \"VPN\".\n\nBut, I agree that it makes sense to address this in a separate CL.",
      "parentUuid": "01dd3b19_05472634",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 23
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b9e808f_33777f56",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2021-05-20T06:47:10Z",
      "side": 1,
      "message": "\"isOverlay\" -\u003e \"IsOverlay\". Also shouldn\u0027t it be \"Ip\" ?",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1db25ccb_8f9cc0fa",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-20T07:30:25Z",
      "side": 1,
      "message": "\"Ip\" seems a little strange to me... while I have no strong preference here.\n(Waiting on more input to do the change together here)",
      "parentUuid": "2b9e808f_33777f56",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75fe0bfb_cfd7158e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-21T10:42:25Z",
      "side": 1,
      "message": "In Windows coding style we were told to treat 2-character abbreviations as two words and 3+ ones as a single word (i.e. \"IP\" and \"Dns\"). But I just checked and it looks like Google coding style does not differentiate those two cases? I\u0027m for \"underlayIpIsOverlayIp\" therefore.",
      "parentUuid": "1db25ccb_8f9cc0fa",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3253c62_a3568d9a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2021-05-24T06:45:19Z",
      "side": 1,
      "message": "Thanks for the information!\nSo I tried to change this to \"Ip\" and I found that it will make presubmit check unhappy... Actually \"IP\" is preferred in go, see https://github.com/golang/go/wiki/CodeReviewComments#initialisms\n\nChanged it to underlayIPIsOverlayIP",
      "parentUuid": "75fe0bfb_cfd7158e",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00a7f9ea_c0e8d56d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2021-05-24T07:42:38Z",
      "side": 1,
      "message": "Thanks for digging out the Go naming preference. Good to learn.",
      "parentUuid": "b3253c62_a3568d9a",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "1830b517554493b1acfd35794b446681bd0263be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}