{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c2acdb59_69a54b1d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2022-08-09T14:58:32Z",
      "side": 1,
      "message": "LGTM",
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "572ea967_2dc86173",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 209,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-08-09T15:25:02Z",
      "side": 1,
      "message": "Why are there several suggestion popup views? Do these represent different suggestions? How do you know that the first one is always the right one? Could we instead make finder query more specific to find the right one?",
      "range": {
        "startLine": 209,
        "startChar": 97,
        "endLine": 209,
        "endChar": 105
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89581fdf_d0fe058c",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 209,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2022-08-09T15:59:44Z",
      "side": 1,
      "message": "I don\u0027t know why this is happening exactly, but I saw at one of the runs the same popup view repeated, so it\u0027s the same data for autofill, so I just selected the first, since they are the same anyway.",
      "parentUuid": "572ea967_2dc86173",
      "range": {
        "startLine": 209,
        "startChar": 97,
        "endLine": 209,
        "endChar": 105
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8aabd113_75a468a0",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 209,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-08-09T16:34:07Z",
      "side": 1,
      "message": "I checked ~10 UI tree dumps from recent test failures and couldn\u0027t find a single example when we have more than one element with class AutofillPopupSuggestionView. Do you have an example run demoing this?",
      "parentUuid": "89581fdf_d0fe058c",
      "range": {
        "startLine": 209,
        "startChar": 97,
        "endLine": 209,
        "endChar": 105
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3136f2c6_50cb3911",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 209,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2022-08-09T20:23:51Z",
      "side": 1,
      "message": "I tried it on a betty board\nthis was the error\n```\n2022-08-09T20:13:10.411929Z [20:13:03.978] Error at autofill_address_enabled.go:215: allow: Failed to trigger and use address autofill: failed to clicking the Email field and choosing the suggested address on step 2: context deadline exceeded; last error follows: click may not have been received yet: Uncaught (in promise): \"multiple nodes matched, if you expect this and only want the first use First(): {className: \\\"AutofillPopupSuggestionView\\\", role: listBoxOption}\"\n2022-08-09T20:13:10.412070Z [20:13:03.978] Stack trace:\nallow: Failed to trigger and use address autofill\n\tat chromiumos/tast/local/bundles/cros/policy.AutofillAddressEnabled.func1 (autofill_address_enabled.go:215)\n\tat chromiumos/tast/internal/testing.(*State).Run.func1 (state.go:648)\n\tat runtime.goexit (asm_amd64.s:1571)\nfailed to clicking the Email field and choosing the suggested address on step 2\n\tat chromiumos/tast/common/action.Combine.func1 (action.go:42)\n\tat chromiumos/tast/local/bundles/cros/policy.AutofillAddressEnabled.func1 (autofill_address_enabled.go:214)\n\tat chromiumos/tast/internal/testing.(*State).Run.func1 (state.go:648)\n\tat runtime.goexit (asm_amd64.s:1571)\ncontext deadline exceeded; last error follows\n\tat chromiumos/tast/internal/testingutil.Poll (poll.go:87)\n\tat chromiumos/tast/testing.Poll (util.go:43)\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).DoDefaultUntil.func1 (automation.go:796)\n\tat chromiumos/tast/common/action.Combine.func1 (action.go:41)\n\tat chromiumos/tast/local/bundles/cros/policy.AutofillAddressEnabled.func1 (autofill_address_enabled.go:214)\n\tat chromiumos/tast/internal/testing.(*State).Run.func1 (state.go:648)\n\tat runtime.goexit (asm_amd64.s:1571)\nclick may not have been received yet\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).DoDefaultUntil.func1.1 (automation.go:801)\n\tat chromiumos/tast/internal/testingutil.Poll (poll.go:64)\n\tat chromiumos/tast/testing.Poll (util.go:43)\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).DoDefaultUntil.func1 (automation.go:796)\n\tat chromiumos/tast/common/action.Combine.func1 (action.go:41)\n\tat chromiumos/tast/local/bundles/cros/policy.AutofillAddressEnabled.func1 (autofill_address_enabled.go:214)\n\tat chromiumos/tast/internal/testing.(*State).Run.func1 (state.go:648)\n\tat runtime.goexit (asm_amd64.s:1571)\nUncaught (in promise): \"multiple nodes matched, if you expect this and only want the first use First(): {className: \\\"AutofillPopupSuggestionView\\\", role: listBoxOption}\"\n\tat chromiumos/tast/local/chrome/internal/cdputil.(*Conn).Eval (conn.go:124)\n\tat chromiumos/tast/local/chrome/internal/driver.(*Conn).Eval (conn.go:107)\n\tat chromiumos/tast/local/chrome/internal/driver.(*TestConn).Eval (conn.go:256)\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).Exists.func1 (automation.go:452)\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).DoDefaultUntil.func1.1 (automation.go:797)\n\tat chromiumos/tast/internal/testingutil.Poll (poll.go:64)\n\tat chromiumos/tast/testing.Poll (util.go:43)\n\tat chromiumos/tast/local/chrome/uiauto.(*Context).DoDefaultUntil.func1 (automation.go:796)\n```\n\nand this was the screenshot https://screenshot.googleplex.com/32FQpoNViVu8JxN.png\nbut it\u0027s interesting, it\u0027s not duplicated in the ui_tree itself which is strange.",
      "parentUuid": "8aabd113_75a468a0",
      "range": {
        "startLine": 209,
        "startChar": 97,
        "endLine": 209,
        "endChar": 105
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14d4ddf1_1946b7da",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 212,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-08-09T15:25:02Z",
      "side": 1,
      "message": "Why is click replaced with default action here? Is doing a default action more universal somehow?",
      "range": {
        "startLine": 212,
        "startChar": 8,
        "endLine": 212,
        "endChar": 22
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "079f4253_822be076",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 212,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-08-09T15:25:02Z",
      "side": 1,
      "message": "This will repeatedly click on Email field for suggestion popup to show up. I wouldn\u0027t expect normal users having to do the same. Why do we need to do that in the test?\n\nSame for accepting the suggestion below.",
      "range": {
        "startLine": 212,
        "startChar": 8,
        "endLine": 212,
        "endChar": 22
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd2c805c_2ce95d2b",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 212,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2022-08-09T15:59:44Z",
      "side": 1,
      "message": "The problem is some times the popup is a bit slow to appear and the first click miss, so we need to do another click.\nI\u0027d argue that this is actually what the users will do, if they are clicking quickly and the first ones miss somehow, then they will click till the popup appears.",
      "parentUuid": "079f4253_822be076",
      "range": {
        "startLine": 212,
        "startChar": 8,
        "endLine": 212,
        "endChar": 22
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a8b8f861_89510c6a",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 212,
      "author": {
        "id": 1447768
      },
      "writtenOn": "2022-08-09T15:59:44Z",
      "side": 1,
      "message": "more details are here: https://docs.google.com/document/d/1RRo30-R83YWabBFb-Y1zsyl2UcogjaZj0_JuOQ8anBk/edit?usp\u003dsharing\u0026resourcekey\u003d0-7ju-AaBFfUVgXjkm39TlTA",
      "parentUuid": "14d4ddf1_1946b7da",
      "range": {
        "startLine": 212,
        "startChar": 8,
        "endLine": 212,
        "endChar": 22
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "012bd6b4_ee10ef1b",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/autofill_address_enabled.go",
        "patchSetId": 1
      },
      "lineNbr": 212,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-08-09T16:34:07Z",
      "side": 1,
      "message": "IMHO we should be fixing for the suggestion to show up after the first click rather than simulating frustrated user experience in tests. In other words, this test is failing correctly and what needs to be fixed is how the feature works. Have you also tried increasing timeout? Could it be that suggestion pop does show up, but needs more time to do so?",
      "parentUuid": "bd2c805c_2ce95d2b",
      "range": {
        "startLine": 212,
        "startChar": 8,
        "endLine": 212,
        "endChar": 22
      },
      "revId": "9087dd0e375f2e6343509e32983f051a149e20d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}