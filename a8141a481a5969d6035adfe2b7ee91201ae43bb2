{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "37b4dddd_f32bea60",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2021-02-03T04:59:16Z",
      "side": 1,
      "message": "Added the BSSID option in PS2 since hostapd attempts to assign a MAC address itself without it, and this can fail depending on the randomly generated MAC of the primary interface managed0. See https://wiki.gentoo.org/wiki/Hostapd#Invalid_BSSID_mask for more details.",
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cbb9fea5_7ab1c4dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1487074
      },
      "writtenOn": "2021-02-03T06:18:29Z",
      "side": 1,
      "message": "Sorry for the delay, as I want to try the option myself to know if we need corresponding change in Router.\n\nIt looks like hostapd will create/cleanup the additional interfaces, so it works by properly adding the new options.",
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f498f440_8f6c29af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-02-03T20:55:28Z",
      "side": 1,
      "message": "nice, thanks for this\n\nI\u0027ll defer to Yen-lin, apart from my one question.",
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23636efa_12c458a8",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 111,
      "author": {
        "id": 1487074
      },
      "writtenOn": "2021-02-03T06:18:29Z",
      "side": 1,
      "message": "nit: not sure if it might be clearer to note that the three fields are all \"required\", as we have some default setting for the primary BSSID and SSID.",
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e78e40b_4808f613",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-02-03T20:55:28Z",
      "side": 1,
      "message": "do we actually need to let tests specify this? It would be kind of nice if we didn\u0027t have to, because otherwise we tend to use fixed BSSIDs in tests, which then may have problems if they get reused quickly back-to-back. (Technically, that\u0027s probably a device bug, but still.) IOW, it would be best if we can base this off the randomized BSSID as much as possible, either by letting hostapd pick the BSSID, or generating them around ~line 299.\n\nIf we only generate BSSIDs within this class, then it\u0027d be easier to enforce the first bullet from the hostapd docs:\n\n# If an explicit BSSID is specified, it must be chosen such that it:\n# - results in a valid MASK that covers it and the dev_addr\n# - is not the same as the MAC address of the radio\n# - is not the same as any other explicitly specified BSSID",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 17
      },
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1eda49c_4e55f76c",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2021-02-03T22:01:30Z",
      "side": 1,
      "message": "Yeah I think you\u0027re right - we probably don\u0027t need to let tests specify this. Re the first bullet in the docs, I see this in the paragraph before:\n\n# hostapd will generate BSSID mask based on the BSSIDs that are\n# configured. hostapd will verify that dev_addr \u0026 MASK \u003d\u003d dev_addr. If this is\n# not the case, the MAC address of the radio must be changed before starting\n# hostapd (ifconfig wlan0 hw ether \u003cMAC addr\u003e). If a BSSID is configured for\n# every secondary BSS, this limitation is not applied at hostapd and other\n# masks may be used if the driver supports them (e.g., swap the locally\n# administered bit)\n\nIn particular, it says that if we configure a BSSID for every secondary BSS, we don\u0027t need the first bullet (see the auto_addr flag here: https://source.corp.google.com/chromeos_public/src/third_party/wpa_supplicant-2.9/src/ap/hostapd.c;l\u003d627). So I think we can just un-export the BSSID field and assign it to a random MAC instead of enforcing certain things on the dev_addr. Does that sound reasonable?",
      "parentUuid": "7e78e40b_4808f613",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 17
      },
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd9fa0ce_acfa9576",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2021-02-03T22:35:39Z",
      "side": 1,
      "message": "\u003e So I think we can just un-export the BSSID field and assign it to a random MAC instead of enforcing certain things on the dev_addr. Does that sound reasonable?\n\nSure, if that works.\n\nOr if you can avoid specifying BSSIDs altogether (and let hostapd figure it out), that works for me too.",
      "parentUuid": "a1eda49c_4e55f76c",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 17
      },
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fc3c2bf_fe535232",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2021-02-04T00:36:39Z",
      "side": 1,
      "message": "Yeah that works too, I would just have to clear the least significant bits to maintain dev_addr \u0026 MASK \u003d\u003d dev_addr",
      "parentUuid": "dd9fa0ce_acfa9576",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 17
      },
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9a4cf3d_e826c51e",
        "filename": "src/chromiumos/tast/remote/wificell/hostapd/config.go",
        "patchSetId": 2
      },
      "lineNbr": 619,
      "author": {
        "id": 1487074
      },
      "writtenOn": "2021-02-03T06:18:29Z",
      "side": 1,
      "message": "should be bssids? (this also reminds me that adding unit test might help, but it\u0027s awkward that current TestConfigFormat() cannot check the ordering and duplicated keys)",
      "range": {
        "startLine": 619,
        "startChar": 14,
        "endLine": 619,
        "endChar": 19
      },
      "revId": "a8141a481a5969d6035adfe2b7ee91201ae43bb2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}