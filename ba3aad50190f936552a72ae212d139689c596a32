{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8ee4fa91_3bf3b145",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1368301
      },
      "writtenOn": "2022-02-02T08:44:40Z",
      "side": 1,
      "message": "Thanks Kamil!\n\nI just realized that I forgot to add back checks for successful Kiosk launch while offline. It\u0027s necessary if we only restart Chrome. So I uploaded a new patch set to add it back. Please take a look!",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71c74e88_7fa6d3ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/kiosk/apps_cached_offline.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-02-02T10:00:42Z",
      "side": 1,
      "message": "Do you want to continue the test if you have an error here?\nIf so, please add a comment on why it is the case.",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b84fc19_e4b8927a",
        "filename": "src/chromiumos/tast/local/bundles/cros/kiosk/apps_cached_offline.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 1368301
      },
      "writtenOn": "2022-02-02T10:15:43Z",
      "side": 1,
      "message": "Definitely no. But for some reason all existing Kiosk tests are using s.Error() here. I changed it to s.Fatal() anyway.",
      "parentUuid": "71c74e88_7fa6d3ed",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "494c5288_f9ea8934",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-02-02T10:00:42Z",
      "side": 1,
      "message": "Can you check what happens in the defered Kiosk closing, if you make the function fail here? I don\u0027t know what happens if `cr.Close()` is called a second time.\nI want to make sure it won\u0027t panic.",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adc2ceb9_8d738143",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1368301
      },
      "writtenOn": "2022-02-02T10:15:43Z",
      "side": 1,
      "message": "It won\u0027t panic. But it will be stuck at policyutil.ServeAndRefresh() until timeout. Does it make sense skipping policyutil.ServeAndRefresh() if Chrome is already closed?",
      "parentUuid": "494c5288_f9ea8934",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f56387c5_370386af",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-02-03T14:29:08Z",
      "side": 1,
      "message": "I would pass this question to Kamil. How robust should we make the Kiosk fixture?\nAs I see `kiosk.Close()` will fail if chrome is not in a good state.\n@Kamil: how about adding `k.cr \u003d nil` after the closing here, and do a `nil` check in `kiosk.Close()`, and open a new session if needed for updating the policies?",
      "parentUuid": "adc2ceb9_8d738143",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e01dc974_b8f02736",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1459973
      },
      "writtenOn": "2022-02-04T11:41:27Z",
      "side": 1,
      "message": "I would say the nil check is a good to add in the kiosk.Close(). However here I would do what we do in the kiosk.New() https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3420298/9/src/chromiumos/tast/local/kioskmode/kiosk_mode.go#241 - when something goes horribly wrong we call startChromeClearPolicies. The only thing would be to pass the fdms as a parameter as well.",
      "parentUuid": "f56387c5_370386af",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cdd9bae2_a873a44e",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1368301
      },
      "writtenOn": "2022-02-04T13:50:24Z",
      "side": 1,
      "message": "I added both nil check and startChromeClearPolicies here. FakeLogin has been replaced with NoLogin in startChromeClearPolicies because Chrome will still auto launch Kiosk even when FakeLogin is set, resulting in timeout of waiting for cryptohome. Policies can still be refreshed on login screen with NoLogin enabled.",
      "parentUuid": "e01dc974_b8f02736",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "801bf88b_7c5d1935",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1459973
      },
      "writtenOn": "2022-02-04T14:32:59Z",
      "side": 1,
      "message": "Plus the test is covered",
      "parentUuid": "e01dc974_b8f02736",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b713dd32_ecdc19f7",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1459973
      },
      "writtenOn": "2022-02-04T14:33:42Z",
      "side": 1,
      "message": "Please ignore my last comment. Don\u0027t know how it got here.",
      "parentUuid": "801bf88b_7c5d1935",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60c3a233_31691cb4",
        "filename": "src/chromiumos/tast/local/kioskmode/kiosk_mode.go",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-02-07T10:48:54Z",
      "side": 1,
      "message": "Closing this thread.",
      "parentUuid": "b713dd32_ecdc19f7",
      "revId": "ba3aad50190f936552a72ae212d139689c596a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}