{
  "comments": [
    {
      "key": {
        "uuid": "4781519f_6bc943c7",
        "filename": "src/chromiumos/tast/local/chrome/ash/wm.go",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2019-10-18T23:44:02Z",
      "side": 1,
      "message": "(sorry, missed this one).\n\nI guess you are updating the state here, because someone might want to know the state of the window.\n\nIf so, it should be clear in the doc that this state might not be valid. E.g: the window could have been minimized using the ARC API, and this state would be invalid.\n\nAFAIK, nobody is accessing the w.State ATM.\nOne possible solution would be make the the fields for \"Window\" private (they should start with lower case, instead of upper case), and then add getters when/if needed and documenting in the getter that the value might be out-of-sync.",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 16
      },
      "revId": "4eb3aeeebbce2a06e882315771403d6f5fa9c031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcae79b9_e58b7580",
        "filename": "src/chromiumos/tast/local/chrome/ash/wm.go",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1000479
      },
      "writtenOn": "2019-10-22T01:14:14Z",
      "side": 1,
      "message": "I\u0027m getting to understand overall your points, thanks for this comment and others.\n\nSo I was trying to think the Window struct as somewhat proxy object, but I\u0027ve come to realize that this is wrong or quite hard to do -- updating the \u0027State\u0027 field only is a bad idea because this will also update other properties (like bounds) along with the state change and it\u0027s not easy to keep everything updated. Those properties will easily get stale for reasons like you suggested.\n\nI\u0027ve removed this line, and changed this from a method to a toplevel function which accepts window\u0027s ID as a parameter.\n\n(note that we can\u0027t use private fields for State or anything else, Go\u0027s encoding/json package will skip decoding of such fields; see https://play.golang.org/p/yQMIc_mqf96).",
      "parentUuid": "4781519f_6bc943c7",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 16
      },
      "revId": "4eb3aeeebbce2a06e882315771403d6f5fa9c031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e82c037_af319f8d",
        "filename": "src/chromiumos/tast/local/chrome/ash/wm.go",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2019-10-22T18:21:43Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dcae79b9_e58b7580",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 16
      },
      "revId": "4eb3aeeebbce2a06e882315771403d6f5fa9c031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}