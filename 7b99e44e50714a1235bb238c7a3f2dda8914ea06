{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d10ab5bc_4b4ba40b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-05-09T09:16:00Z",
      "side": 1,
      "message": "Some notes about this patch:\n1) This patch will increase the run time if we only run some non-cert tests (e.g., ikev2_psk), since we didn\u0027t use to set cert store for them, but do that now after this patch (cert store setup may need 7 seconds);\n2) To solve 1), one approach could be parameterize the vpn fixture and create two fixtures: one with cert and another without cert. My concern here is we will need to register two groups of tests in vpn_connect.go, it will make the code hard to maintain considering that we may need to pick up some of the tests to mark them critical (more groups will be needed).\n3) We will need the first step in 2) (parameterize the fixture) in the future. For example, tests with ARC may not want cert store operations since it will cause a UI restart (+cassiewang@ here), and we may need to add the interaction with chrome here for the VPNUI tests (I haven\u0027t verified if this works).",
      "revId": "7b99e44e50714a1235bb238c7a3f2dda8914ea06",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "831d800f_5eba190a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1520542
      },
      "writtenOn": "2022-05-10T03:48:11Z",
      "side": 1,
      "message": "For my understanding (since I didn\u0027t dig into it much), does preparing the cert store have to log the user out? If not, I could take an AI to look into setting up a workaround just for the ARCVPN* tast tests",
      "parentUuid": "d10ab5bc_4b4ba40b",
      "revId": "7b99e44e50714a1235bb238c7a3f2dda8914ea06",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84b470e3_97d6713f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-05-10T04:31:07Z",
      "side": 1,
      "message": "Thanks!\n\n\u003e does preparing the cert store have to log the user out?\nMy understanding is yes, since it may restart ui.\n\n\u003e setting up a workaround\nKeep using the current shillReset fixture is also fine. The only difference is that this new fixture does not restart shill between tests.",
      "parentUuid": "831d800f_5eba190a",
      "revId": "7b99e44e50714a1235bb238c7a3f2dda8914ea06",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3f3c5d1_d0ef99d8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1356183
      },
      "writtenOn": "2022-05-10T14:04:20Z",
      "side": 1,
      "message": "+7 seconds for running non-cert tests individually sounds like a reasonable tradeoff since most of the time we do run tests together.\n\nFor Cassie, do you want to log user out between each of your tests? If that\u0027s the case you might want to keep using the old shillReset (the new fixture only logout during fixture set up and tear down but not between tests).",
      "parentUuid": "84b470e3_97d6713f",
      "revId": "7b99e44e50714a1235bb238c7a3f2dda8914ea06",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e95c9741_f38d5eed",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1520542
      },
      "writtenOn": "2022-05-12T00:28:29Z",
      "side": 1,
      "message": "\u003e For Cassie, do you want to log user out between each of your tests?\n\nARCVPN* tests just require an adb connection to issue some commands to verify the adb state - which for now means the user needs to be logged in. The tests are using the old shillReset fixture, but uses a specific host VPN that doesn\u0027t require cert setup so the setup doesn\u0027t log the user out.",
      "parentUuid": "a3f3c5d1_d0ef99d8",
      "revId": "7b99e44e50714a1235bb238c7a3f2dda8914ea06",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}