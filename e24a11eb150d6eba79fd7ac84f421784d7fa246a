{
  "comments": [
    {
      "key": {
        "uuid": "578ac5c0_d787c227",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2020-08-28T05:39:44Z",
      "side": 1,
      "message": "lgtm % question",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e65b7486_279981d8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2020-08-28T05:44:20Z",
      "side": 1,
      "message": "Thanks! Out of curiosity, do you know how hard it\u0027ll be to run the same test in a guest profile?",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c68765f1_1e718d43",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-28T05:47:51Z",
      "side": 1,
      "message": "Hymm. Haven\u0027t researched this.\n\nWe can use chromn.GuestLogin to get a guest profile. But IIUC, SWA won\u0027t be reinstalled in that.\n\nI assume you mean adding a test for SWA installation in guest profile?",
      "parentUuid": "e65b7486_279981d8",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7204575b_ba1693e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2020-08-28T05:51:11Z",
      "side": 1,
      "message": "Yeah, sorry. It would be a slightly different test, where we would only check if apps are installed correctly, since the guest profile is destroyed when logging out.",
      "parentUuid": "c68765f1_1e718d43",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b6ed5dfe_22099f9f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-28T05:52:18Z",
      "side": 1,
      "message": "Yep. I\u0027ll do a followup",
      "parentUuid": "7204575b_ba1693e3",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abc86b88_b095bd72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-28T06:15:59Z",
      "side": 1,
      "message": "lamzin: PTAL",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a277e51_47ec5299",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "Hi Jiewei,\n\nThanks for your CL! I have some comments:",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0156b000_4447839f",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "Is it really so long to install all apps? Default timeout is 90 seconds.",
      "range": {
        "startLine": 24,
        "startChar": 16,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fab6892e_b761654d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "On my test device (rammus), the time to finish one initial install and one reinstall is 50 seconds.\n- The actual install time is about 2*10 \u003d 20 seconds. \n- Time to prepare chrome and login is about 2*15 \u003d 30 seconds.\n\n90 seconds seems to be pushing on slower devices. We don\u0027t want tests to flake due to timeout.\nPerhaps 2-3 minutes is a safer bet (after parameterizing) ?\n\n- The 99th percentile for one install pass is ~20 seconds [1]\n- Estimate total time:\n  - 2 install passes, 20 seconds each\n  - 2 chrome logins, 15 seconds each, might be slower on certain devices\n  - Total: about 2*20 + 2*15 \u003d 70 seconds (or more)\n\nhttps://uma.googleplex.com/p/chrome/histograms?sid\u003dab9103e0fa711f34d5748461647960c7",
      "parentUuid": "0156b000_4447839f",
      "range": {
        "startLine": 24,
        "startChar": 16,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68a99ac4_baba4b68",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-31T17:01:48Z",
      "side": 1,
      "message": "Thanks for explanation, let\u0027s keep 3 minutes then.",
      "parentUuid": "fab6892e_b761654d",
      "range": {
        "startLine": 24,
        "startChar": 16,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2e05e0b_8a4202b5",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-31T17:01:48Z",
      "side": 1,
      "message": "if you remove it your test will immediately part of CQ. Please put back it and once test itself will be stable, you can nominate it to CQ.",
      "range": {
        "startLine": 26,
        "startChar": 43,
        "endLine": 26,
        "endChar": 58
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f684d1c_b0e581a7",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-09-01T04:54:33Z",
      "side": 1,
      "message": "Done. \n\nCurious, what is needed for a test to become stable?",
      "parentUuid": "d2e05e0b_8a4202b5",
      "range": {
        "startLine": 26,
        "startChar": 43,
        "endLine": 26,
        "endChar": 58
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bd5b2207_ab974672",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-09-01T08:18:16Z",
      "side": 1,
      "message": "PTAL on https://chrome-internal.googlesource.com/chromeos/chromeos-admin/+/master/doc/tast_add_test.md#step-4_remove-attribute-to-make-it-run-on-infra",
      "parentUuid": "0f684d1c_b0e581a7",
      "range": {
        "startLine": 26,
        "startChar": 43,
        "endLine": 26,
        "endChar": 58
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "060e42b8_eac68e9f",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-09-01T08:30:04Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "bd5b2207_ab974672",
      "range": {
        "startLine": 26,
        "startChar": 43,
        "endLine": 26,
        "endChar": 58
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46fbae41_52601f9e",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "this method should not know about testing.State, instead please return error -- Go preferred way of handlng errors.\n\nCaller should decide what to do with error",
      "range": {
        "startLine": 30,
        "startChar": 54,
        "endLine": 30,
        "endChar": 70
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66e5ec34_79c9be53",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "46fbae41_52601f9e",
      "range": {
        "startLine": 30,
        "startChar": 54,
        "endLine": 30,
        "endChar": 70
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "628c1235_987b3ba5",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: rename it to tconn, tconn is much more common name for TestAPIConn",
      "range": {
        "startLine": 31,
        "startChar": 1,
        "endLine": 31,
        "endChar": 9
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fd26cd6_52cbc891",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "628c1235_987b3ba5",
      "range": {
        "startLine": 31,
        "startChar": 1,
        "endLine": 31,
        "endChar": 9
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06b0f230_1a7889e6",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 51,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: you can skip it",
      "range": {
        "startLine": 51,
        "startChar": 6,
        "endLine": 51,
        "endChar": 15
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a548363_1b4b19c3",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 51,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "06b0f230_1a7889e6",
      "range": {
        "startLine": 51,
        "startChar": 6,
        "endLine": 51,
        "endChar": 15
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f017f4ee_f1c16028",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: so it will be (int, error)",
      "range": {
        "startLine": 61,
        "startChar": 95,
        "endLine": 61,
        "endChar": 98
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70ea0477_0dfb2902",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: omit get prefix\n\nhttps://golang.org/doc/effective_go.html#Getters",
      "range": {
        "startLine": 61,
        "startChar": 5,
        "endLine": 61,
        "endChar": 36
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d3f5bfe_c17caf9e",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 61,
        "startChar": 58,
        "endLine": 61,
        "endChar": 74
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3875bf32_252f9899",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d3f5bfe_c17caf9e",
      "range": {
        "startLine": 61,
        "startChar": 58,
        "endLine": 61,
        "endChar": 74
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8495c8b_f0a4cce2",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f017f4ee_f1c16028",
      "range": {
        "startLine": 61,
        "startChar": 95,
        "endLine": 61,
        "endChar": 98
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a1d8ce6_d19d954b",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "70ea0477_0dfb2902",
      "range": {
        "startLine": 61,
        "startChar": 5,
        "endLine": 61,
        "endChar": 36
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c8bd20d_1bee4214",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "please don\u0027t close TestAPIConn since it\u0027s shared connection:\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/master:src/platform/tast-tests/src/chromiumos/tast/local/chrome/chrome.go;l\u003d990",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 68,
        "endChar": 23
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb80e570_d2a53173",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5c8bd20d_1bee4214",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 68,
        "endChar": 23
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4960153_7daddd80",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 85,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "s.Fatal will panic and Go test will stop here",
      "range": {
        "startLine": 85,
        "startChar": 1,
        "endLine": 85,
        "endChar": 9
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00fcac8f_a3389f7a",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 85,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Ack. Changed to return error instead",
      "parentUuid": "b4960153_7daddd80",
      "range": {
        "startLine": 85,
        "startChar": 1,
        "endLine": 85,
        "endChar": 9
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c66e872_f708b162",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "I think we have to split this method into 2, because \n1. you need to Close each chrome\n2. it\u0027s good to put Close into defer statements, e.g. you may have multiple returns and may forgot to close it in each case\n3. you need to Close first chrome before starting new one.\n\nIf you won\u0027t Close Chrome you may leak some resources, e.g. goroutines, etc\n\n\nHow it can look like:\n\n\n```\nfunc firstRun(ctx context.Context, chromeOpts ...chrome.Option) error {\n  cleanupCtx :\u003d ctx\n  ctx, cancel :\u003d ctxutil.Shorten(ctx, 5*time.Second)\n  defer cancel()\n\n  cr, err :\u003d chrome.New(ctx, chromeOpts...)\n  if err !\u003d nil {\n    return errors.Wrap(err, \"failed to start first Chrome instance\")\n  }\n  defer func(ctx context.Context) {\n    if err :\u003d cr.Close(ctx); err !\u003d nil {\n      testing.ContextLog(ctx, \"Failed to stop first Chrome instance\")\n    }\n  }(cleanupCtx)\n\n  ...\n}\n\nfunc secondRun(...) {...}\n\nfunc testSystemWebAppsReinstall(ctx context.Context, chromeOpts ...chrome.Option) error {\n  if err :\u003d firstRun(ctx, chromeOpts...); err !\u003d nil {\n    return err;\n  }\n  if err :\u003d secondRun(ctx, chromeOpts...); err !\u003d nil {\n    return err;\n  }\n  return nil;\n}\n```",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28f0c73c_98c7a452",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c66e872_f708b162",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7542db22_e683fb26",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 136,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: remove this message, please log only before long running operations:\n\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#When-to-log",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f4f3743_ae709a7d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 136,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7542db22_e683fb26",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b0a2df7_a8b79c84",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2020-08-28T05:39:44Z",
      "side": 1,
      "message": "Just confirming that calling this twice with the same ctx still results in a brand new profile?",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 139,
        "endChar": 42
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a70dd14_24673f55",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-28T05:41:58Z",
      "side": 1,
      "message": "user-data-dir is nuked in this call, unless `chrome.KeepState()`",
      "parentUuid": "2b0a2df7_a8b79c84",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 139,
        "endChar": 42
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99bc8805_3fc39557",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2020-08-28T05:44:20Z",
      "side": 1,
      "message": "Great! :)",
      "parentUuid": "7a70dd14_24673f55",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 139,
        "endChar": 42
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c4541cc_71521152",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 147,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "same: please remove",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be269f0c_949774b0",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 147,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c4541cc_71521152",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac482f3f_9112e884",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "please return error instead, for example:\n\nreturn errors.Errorf(\"unexpected number of installed apps: want %d; got %d\", registeredAppCount, installedAppCount)",
      "range": {
        "startLine": 149,
        "startChar": 0,
        "endLine": 149,
        "endChar": 81
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b08bf40c_843e68c7",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac482f3f_9112e884",
      "range": {
        "startLine": 149,
        "startChar": 0,
        "endLine": 149,
        "endChar": 81
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a678f755_36c2a6b2",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "chrome.New() should do that, please check documentation:\n\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/master:src/platform/tast-tests/src/chromiumos/tast/local/chrome/chrome.go;l\u003d365?q\u003dchrome%20close\u0026ss\u003dchromiumos%2Fchromiumos%2Fcodesearch:src%2Fplatform%2Ftast-tests%2F",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 156,
        "endChar": 2
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ab3c035_070a5322",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a678f755_36c2a6b2",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 156,
        "endChar": 2
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2540bbc_193e8f3c",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 164,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "nit: \n\nreinstallOpts :\u003d append(chromeOpts, chrome.KeepState(), chrome.EnableFeatures(\"AlwaysReinstallSystemWebApps\"))",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 164,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c2a0f40_95b9cd5d",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 164,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f2540bbc_193e8f3c",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 164,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20297cd2_58d1f1b9",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "What are you actually trying to test here? Do you wanna test that old apps are still installed? or old apps were reinstalled? \n\nHow does Chrome behaves in this situation? Does it silently updating apps or remove all of them and install again?\n\nDo you maybe need waitForSystemWebAppsInstall here as well?",
      "range": {
        "startLine": 170,
        "startChar": 1,
        "endLine": 172,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be555092_2b176367",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Nice catch. There should be a waitForSystemWebAppsIntall before this.",
      "parentUuid": "20297cd2_58d1f1b9",
      "range": {
        "startLine": 170,
        "startChar": 1,
        "endLine": 172,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e30a34a_ca9f43b5",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-31T17:01:48Z",
      "side": 1,
      "message": "Just to confirm.\n\nApps cannot be removed after Chrome start?",
      "parentUuid": "be555092_2b176367",
      "range": {
        "startLine": 170,
        "startChar": 1,
        "endLine": 172,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5eecfaa_0c67e40b",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-09-01T04:54:33Z",
      "side": 1,
      "message": "The Apps can\u0027t be removed after they are installed.",
      "parentUuid": "0e30a34a_ca9f43b5",
      "range": {
        "startLine": 170,
        "startChar": 1,
        "endLine": 172,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3a3f6c2_3c7eac57",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 177,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "Close() won\u0027t be called if s.Fatal will execute or you return from function before, please put it into defer statement.",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e00e56b_c8421067",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 177,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3a3f6c2_3c7eac57",
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25e513fd_e9494744",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 181,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "Please put most important functions first, i.e. right after init()",
      "range": {
        "startLine": 181,
        "startChar": 5,
        "endLine": 181,
        "endChar": 27
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f6ffd89_5f6b1d5b",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 181,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "25e513fd_e9494744",
      "range": {
        "startLine": 181,
        "startChar": 5,
        "endLine": 181,
        "endChar": 27
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "759bd0ca_57c256a0",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 184,
      "author": {
        "id": 1306673
      },
      "writtenOn": "2020-08-28T12:00:35Z",
      "side": 1,
      "message": "instead you may be interested in Parametrized tests:\nhttps://chromium.googlesource.com/chromiumos/platform/tast/+/HEAD/docs/writing_tests.md#Parameterized-tests\n\nIn your approach if there will be erorr in first testSystemWebAppsReinstall, then you won\u0027t run second testSystemWebAppsReinstall.",
      "range": {
        "startLine": 182,
        "startChar": 0,
        "endLine": 184,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5f9a805_f4fd3711",
        "filename": "src/chromiumos/tast/local/bundles/cros/ui/system_web_apps_reinstall.go",
        "patchSetId": 4
      },
      "lineNbr": 184,
      "author": {
        "id": 1378025
      },
      "writtenOn": "2020-08-31T05:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "759bd0ca_57c256a0",
      "range": {
        "startLine": 182,
        "startChar": 0,
        "endLine": 184,
        "endChar": 0
      },
      "revId": "e24a11eb150d6eba79fd7ac84f421784d7fa246a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}