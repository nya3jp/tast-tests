{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "99d8c2ed_b6a29fde",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2021-11-04T06:39:25Z",
      "side": 1,
      "message": "So it turns out the virtio balloon size is already exposed in /proc/vmstat, so it\u0027s really simple to make a metric.",
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8278a981_2f667e5f",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-11-05T02:35:28Z",
      "side": 1,
      "message": "Does this need to be exported? Seems only use case is in this file.",
      "range": {
        "startLine": 21,
        "startChar": 5,
        "endLine": 21,
        "endChar": 6
      },
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c4c837b_87075c12",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2021-11-05T03:58:11Z",
      "side": 1,
      "message": "I thought it would be useful somewhere else, but it turns out there\u0027s similar code inside the kernelmeter package. So I\u0027ve refactored that code to expose the parsing function, and called it instead of using my own.",
      "parentUuid": "8278a981_2f667e5f",
      "range": {
        "startLine": 21,
        "startChar": 5,
        "endLine": 21,
        "endChar": 6
      },
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6e4b5c8_46fd64af",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1413373
      },
      "writtenOn": "2021-11-05T02:35:28Z",
      "side": 1,
      "message": "nit: should this be / ?",
      "range": {
        "startLine": 40,
        "startChar": 46,
        "endLine": 40,
        "endChar": 47
      },
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cac99975_efb9fc5c",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2021-11-05T03:58:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d6e4b5c8_46fd64af",
      "range": {
        "startLine": 40,
        "startChar": 46,
        "endLine": 40,
        "endChar": 47
      },
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4e09e92_8909c5bf",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-11-04T06:47:39Z",
      "side": 1,
      "message": "Generally it\u0027s preferred to avoid shelling out if possible. Can you do this using existing functions without shelling out? e.g. ioutil.ReadFile",
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "de7acaaa_666a51ac",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2021-11-05T02:29:38Z",
      "side": 1,
      "message": "There is a n ARC.ReadFile method, which internally calls `adb pull`, but it gets permission errors for some reason:\n```\n2021-11-05T02:20:03.467631Z [02:20:03.817] Command: adb -s emulator-5554 pull /proc/vmstat /usr/local/tmp/tast/run_tmp/adb077819589\n2021-11-05T02:20:03.467748Z [02:20:03.817] Uncaptured output:\nadb: error: failed to stat remote object \u0027/proc/vmstat\u0027: Permission denied\n\n2021-11-05T02:20:03.467807Z [02:20:03.818] Error at login.go:87: Failed to collect memory metrics: failed to collect ARC vmstat metrics: failed to read ARCMV\u0027s /proc/vmstat: exit status 1\n```\n\nSo I don\u0027t think there\u0027s another way to get a proc file from within ARCVM.",
      "parentUuid": "d4e09e92_8909c5bf",
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5392012_07240559",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1179631
      },
      "writtenOn": "2021-11-04T06:47:39Z",
      "side": 1,
      "message": "might be good to include the direction field",
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8c181ad_4d8d5cd8",
        "filename": "src/chromiumos/tast/local/memory/arc/vmstat.go",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1368712
      },
      "writtenOn": "2021-11-05T02:29:38Z",
      "side": 1,
      "message": "Whether higher is better or lower is better depends on the situation and workload, so there\u0027s no correct direction we can pick here.",
      "parentUuid": "a5392012_07240559",
      "revId": "d3c4a09a54d9d0e84b5894a05130287f7b123bcf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}