{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2c24da84_e54e53b4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-10-08T05:56:48Z",
      "side": 1,
      "message": "Should we align the subtest partitioning method as EncodeAccelJPEGPerf? That is, one subtest for DMA and one for non-DMA?\n\nqq: What is the other non-DMA JEA method (shm?) and what platforms are using that?",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04dc9373_2f55bc8b",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1124415
      },
      "writtenOn": "2020-10-08T06:03:01Z",
      "side": 1,
      "message": "For non-DMA. it is mmap.\nI think all platforms except kukui should use it.",
      "parentUuid": "2c24da84_e54e53b4",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "409cc895_e66e2a71",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1124415
      },
      "writtenOn": "2020-10-08T06:12:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "04dc9373_2f55bc8b",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31e17aa0_96a5e760",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-10-08T06:54:42Z",
      "side": 1,
      "message": "IIUC mmap() is used in JEA to map a fd to an address, so we can access that memory, and the memory might be backed by dmabuf or shm.\n\nLooking at the JEA unittest code [1], it looks like we do test dmabuf and shm.\n\nThere is a comment by wtlee@ in JEA mojo interface [2] says the shm path is to be deprecated. wtlee@ could you help share the latest status? Do we still use it?\n\n[1] https://source.chromium.org/chromium/chromium/src/+/master:components/chromeos_camera/jpeg_encode_accelerator_unittest.cc;l\u003d616;drc\u003decdcbbde281fbd1da8dc21ccd3447b6209d4e1cd\n\n[2] https://source.chromium.org/chromium/chromium/src/+/master:components/chromeos_camera/common/jpeg_encode_accelerator.mojom;l\u003d28;drc\u003d138a82901de3298fb7aa594f53348e300188787e",
      "parentUuid": "409cc895_e66e2a71",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2e05e62_ccf40c08",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1124415
      },
      "writtenOn": "2020-10-08T07:01:31Z",
      "side": 1,
      "message": "The mmap I mean is V4L2_MEMORY_MMAP not mmap() API.\ndmabuf is V4L2_MEMORY_DMABUF",
      "parentUuid": "31e17aa0_96a5e760",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d4c1ff9_338b08f5",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg.go",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-10-08T07:06:07Z",
      "side": 1,
      "message": "Since the CL to use DMA buf for Rockchip HAL still haven\u0027t landed:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform2/+/1624307\n\nSo we still cannot remove the shm path in case devices running Rockchip HAL would like to use JEA.\nBut I am not sure if we still need to merge it since iirc devices running Rockchip HAL actually uses software encoder, and libcamera project might be ready in the near future? (Please correct me if I am wrong)",
      "parentUuid": "31e17aa0_96a5e760",
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fe1bdb0_fc757b79",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-10-08T03:24:17Z",
      "side": 1,
      "message": "Is it intended to run both JpegEncodeAcceleratorTest.SimpleEncode and JpegEncodeAcceleratorTest.SimpleDmaEncode on non-kukui platforms?",
      "range": {
        "startLine": 44,
        "startChar": 3,
        "endLine": 44,
        "endChar": 53
      },
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "771fc470_1942556e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/encode_accel_jpeg_perf.go",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1124415
      },
      "writtenOn": "2020-10-08T03:25:51Z",
      "side": 1,
      "message": "Yes, I intended to do it.\nWe should use DMA buffer for all platforms finally, so we should measure it.",
      "parentUuid": "0fe1bdb0_fc757b79",
      "range": {
        "startLine": 44,
        "startChar": 3,
        "endLine": 44,
        "endChar": 53
      },
      "revId": "2557bdeca6530d8c360f39f60716eb7465232027",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}