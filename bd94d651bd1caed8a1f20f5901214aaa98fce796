{
  "comments": [
    {
      "key": {
        "uuid": "cd93f321_f66e66bc",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/vpn_server.go",
        "patchSetId": 11
      },
      "lineNbr": 68,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "Any way of using the constant above?",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 29
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "714fae5e_a3577f63",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn/vpn_server.go",
        "patchSetId": 11
      },
      "lineNbr": 68,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cd93f321_f66e66bc",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 29
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "878017fe_8a4b605a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 33,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "nit: \"connect to a VPN\". Nothing OpenVPN specific here",
      "range": {
        "startLine": 33,
        "startChar": 32,
        "endLine": 33,
        "endChar": 77
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e2ad83e_39c9cb91",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 33,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "878017fe_8a4b605a",
      "range": {
        "startLine": 33,
        "startChar": 32,
        "endLine": 33,
        "endChar": 77
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8566e712_919e1616",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 203,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "This is unnecessary\nhttps://chromium-review.googlesource.com/c/chromiumos/platform2/+/1799392",
      "range": {
        "startLine": 196,
        "startChar": 2,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4e0de00_ab5e147e",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 203,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "The VPN fails to connect and I get the following err if I remove this part:\n:Error at vpn_connect.go:150: Failed connecting to VPN server: VPN connection failed\n:Waiting for Chrome to write its debugging port to /home/chronos/DevToolsActivePort\n:Failed to take screenshot by Chrome API: failed to create a new Chrome Devtools Protocol session: failed to query browser\u0027s HTTP endpoint: could not resolve IP for 127.0.0.1",
      "parentUuid": "8566e712_919e1616",
      "range": {
        "startLine": 196,
        "startChar": 2,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54285f88_03a90cb7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 203,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-05-08T16:21:23Z",
      "side": 1,
      "message": "For reference, the above CL causes modifications to the StaticIPConfig property to trigger Device::OnIPConfigUpdated. This then triggers Connection::UpdateFromIPConfig, which will clear out all the routing rules for that Device and create new ones. During that interim, connectivity is not possible using that Device as traffic cannot be routed to it.\n\nDevice::OnIPConfigUpdated doesn\u0027t cause an Online Service to change state, as this would lead to fluctuations of what the default Service is every time a DHCP lease is renewed [0]. So in this case we need to wait for routing to be reestablished, but don\u0027t have a good D-Bus property to poll.\n\nTBH I think the reasoning behind [0] is valid for DHCP renewals doesn\u0027t extend to StaticIPConfig changes or DHCP rebinding. Could be worth looking into rectifying this, but in any case, the existing code here makes sense for now because we can actually use state to track the Service\u0027s connectivity. Putting a comment above this code to explain why this is used would be appreciated. Ty for pointing this out!\n\n[0] https://chromium.git.corp.google.com/chromiumos/platform2/+/c975b12e6706ebc36779001b77ae5dcc54f4c1b1",
      "parentUuid": "b4e0de00_ab5e147e",
      "range": {
        "startLine": 196,
        "startChar": 2,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fc8bdbb_f4749c1b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 264,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "nit: connected",
      "range": {
        "startLine": 264,
        "startChar": 48,
        "endLine": 264,
        "endChar": 60
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad0ba5a2_a359533c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 264,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "Service. Ditto for all the other \"server\"s here. The Service represents the VPN *client* state",
      "range": {
        "startLine": 264,
        "startChar": 35,
        "endLine": 264,
        "endChar": 41
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bdec4a3_c9fa46f7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 264,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1fc8bdbb_f4749c1b",
      "range": {
        "startLine": 264,
        "startChar": 48,
        "endLine": 264,
        "endChar": 60
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f04a892b_153f156c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 264,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ad0ba5a2_a359533c",
      "range": {
        "startLine": 264,
        "startChar": 35,
        "endLine": 264,
        "endChar": 41
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc3252fa_8e01d7be",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 284,
      "author": {
        "id": 1288158
      },
      "writtenOn": "2020-04-28T20:50:54Z",
      "side": 1,
      "message": "nit: kIsConnected property is best for this",
      "range": {
        "startLine": 284,
        "startChar": 5,
        "endLine": 284,
        "endChar": 43
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cea919bd_304c45bd",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/vpn_connect.go",
        "patchSetId": 11
      },
      "lineNbr": 284,
      "author": {
        "id": 1373754
      },
      "writtenOn": "2020-04-29T21:01:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc3252fa_8e01d7be",
      "range": {
        "startLine": 284,
        "startChar": 5,
        "endLine": 284,
        "endChar": 43
      },
      "revId": "bd94d651bd1caed8a1f20f5901214aaa98fce796",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}