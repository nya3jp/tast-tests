{
  "comments": [
    {
      "key": {
        "uuid": "83a21a90_d8961849",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-01-10T09:28:22Z",
      "side": 1,
      "message": "Please set this to 6 minutes. Please see my comment to PS2 for details.",
      "range": {
        "startLine": 25,
        "startChar": 16,
        "endLine": 25,
        "endChar": 32
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28b2ae23_72544ade",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83a21a90_d8961849",
      "range": {
        "startLine": 25,
        "startChar": 16,
        "endLine": 25,
        "endChar": 32
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64b2e15c_0d4957e0",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-01-10T09:28:22Z",
      "side": 1,
      "message": "It looks like arc-networkd executes external commands, so this check can break in race conditions.\n\nIf it is enough to check the process whose ppid \u003d 1, then it would be safer. If it\u0027s not enough, we need to identify the root process and its child process.",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "759b416c_a6970ca0",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Could you elaborate? How can this break? I\u0027m not checking parent pids here.",
      "parentUuid": "64b2e15c_0d4957e0",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e212f66a_80e629be",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-01-11T03:07:30Z",
      "side": 1,
      "message": "When a program runs an external program, it first call fork(2), then call execve(2). Between the two system calls, there will be another arc-networkd process.",
      "parentUuid": "759b416c_a6970ca0",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "365b0996_b78d4bc5",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-11T04:34:45Z",
      "side": 1,
      "message": "ah right ok... so I think this can still work with slight modification based on the facts that (a) arc-networkd now launches early in the host startup process and will definitively either be up and running (and not launching any subprocs) or dead by the time the \"ui\" job is restarted; and (b) the only other time it will launch child jobs is when the container goes up or down.\n\nso I think if we get the pids post-logout, then we can check them after logging in, bringing android up/down, and logging out. and then again after doing another chrome logout. so at no point when the pids are inspected should there be more than 2 running and they should always be the same ones.",
      "parentUuid": "e212f66a_80e629be",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2b9c52e_e2e3ee3a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-01-15T06:10:48Z",
      "side": 1,
      "message": "Thanks for explanation, it makes sense. Could you add a comment describing what you explained in this thread? It will help future readers. :)",
      "parentUuid": "365b0996_b78d4bc5",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c27188b_c9f42366",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-16T04:33:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2b9c52e_e2e3ee3a",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 46,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "554f95f8_e5520585",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-10T16:26:51Z",
      "side": 1,
      "message": "Errorf, as the following test can be continued?",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 12
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3226c8f_cd836127",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "554f95f8_e5520585",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 12
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e466e9a0_694a2189",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 56,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2019-01-10T09:28:22Z",
      "side": 1,
      "message": "nit: this might be easier to read:\n\n if !reflect.DeepEqual(a, b) {\n   s.Fatalf(\"PID changed: %v -\u003e %v\", a, b)\n }",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74df77e9_ab4ef982",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 56,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Generally speaking, this will be slower but sure for a 2 element slice...",
      "parentUuid": "e466e9a0_694a2189",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 3
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3aaeeb6b_ad80348e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-10T16:26:51Z",
      "side": 1,
      "message": "In precise, Chrome and ARC (mini container) are running even before login.\nMaybe;\n\n// Logs in Chrome with ARC enabled. Returns the arc-networkd PIDs while ARC full container is running.",
      "range": {
        "startLine": 60,
        "startChar": 4,
        "endLine": 60,
        "endChar": 24
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd94af7d_34174770",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3aaeeb6b_ad80348e",
      "range": {
        "startLine": 60,
        "startChar": 4,
        "endLine": 60,
        "endChar": 24
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcb17bfd_65ad6dee",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-10T16:26:51Z",
      "side": 1,
      "message": "So, nice to avoid the name \"boot\".",
      "range": {
        "startLine": 61,
        "startChar": 1,
        "endLine": 61,
        "endChar": 8
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d3723c9_7649c6ea",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fcb17bfd_65ad6dee",
      "range": {
        "startLine": 61,
        "startChar": 1,
        "endLine": 61,
        "endChar": 8
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f66fa19b_4a8df71a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2019-01-10T16:26:51Z",
      "side": 1,
      "message": "Now, you do not need two Chrome login, I think.\nBecause the arc-networkd should be kept alive, what we expect is the processes are not relaunched. Then,\n\n- Remember PIDs.\n- Start Chrome / ARC.\n- Verify PIDs aren\u0027t changed.\n- Log out from Chrome.\n- Verify PIDs aren\u0027t changed again.\n\nSo, it would be something like;\n\nupstart.RestartJob(\"ui\")  // \u003c- ensure logout from Chrome.\npids :\u003d getPIDs()\ncheckPIDs(pids, bootARC())\nupstart.RestartJob(\"ui\")  // \u003c- this emulates logout from Chrome.\ncheckPIDs(pids, getPIDs())\n\n# Sorry for the not right comment in the previous iteration, since I didn\u0027t find this based on another CL.",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 27
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0ee11ac_7e721166",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-10T23:43:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f66fa19b_4a8df71a",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 27
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b40c0340_eaa3aee3",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/networkd_stability.go",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1307765
      },
      "writtenOn": "2019-01-11T04:34:45Z",
      "side": 1,
      "message": "updated to match above comment.",
      "parentUuid": "d0ee11ac_7e721166",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 27
      },
      "revId": "3c24ad82fcb8eaf7c264da653b6b4b0a0f66ee90",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}