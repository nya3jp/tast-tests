{
  "comments": [
    {
      "key": {
        "uuid": "cdf51be4_d1bf5daa",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-01-07T00:56:12Z",
      "side": 1,
      "message": "Oh, is this enough? I thought I saw the \"Powered\" was incorrectly (?) set to \u0027true\u0027 even in the failing cases. But if you\u0027re checking the right thing here, then maybe that answers my questions here implicitly:\n\nhttps://bugs.chromium.org/p/chromium/issues/detail?id\u003d1038551#c4",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4248dd5_9b29c3fb",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-01-07T03:35:54Z",
      "side": 1,
      "message": "Let me double check when will \"Powered\" be set to true. Thanks for pointing it out.",
      "parentUuid": "cdf51be4_d1bf5daa",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 45,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9738275f_59da0f4a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-01-07T00:56:12Z",
      "side": 1,
      "message": "I believe this won\u0027t actually fail in the scenario you\u0027re addressing ($BUG). It\u0027s not bad to check this, but just FYI, in case you\u0027re not actually looking at how Shill behaves here.",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f24f4964_8de1d816",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-01-07T01:01:27Z",
      "side": 1,
      "message": "Also, if I\u0027m correct, that makes this test very misleading, because it does nothing to test scanning. And taking a look at the Manager API:\n\n                void RequestScan(string type)\n\n                        Request a scan for each device of the specified\n                        technology.  If type is the string \"\" then a scan\n                        request is made for each technology.\n...\n                        Possible Errors: [service].Error.InvalidArguments\n\nThere is no Error scenario for failures of individual Device(s).",
      "parentUuid": "9738275f_59da0f4a",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed25c183_fda5cd37",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-01-07T03:35:54Z",
      "side": 1,
      "message": "Yes you are correct. It is an always positive test and should be removed. At first I just performed RequestScan and found that it didn\u0027t catch the bug.",
      "parentUuid": "f24f4964_8de1d816",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "208f3100_c4f51267",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/wifi_scan.go",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-01-07T19:55:54Z",
      "side": 1,
      "message": "It doesn\u0027t necessarily need to be removed, but it provides so little value (and instead misleads), it\u0027s probably not worth doing on its own.\n\nIf you really wanted to use this approach (i.e., test that scans are really going through to wpa_supplicant), you can still request a scan, but you need to do something to verify the result. You *could* wait for a new BSS result, except that is brittle: we don\u0027t currently guarantee any particular RF environment for lab DUTs.\n\nYou could also possibly get by with playing with wpa_cli for monitoring what\u0027s up with wpa_supplicant. For example, something like this is what the hwsim tests use to sanity check that wpa_supplicant is up:\n\n  # sudo -u wpa -g wpa wpa_cli -iwlan0 ping\n  PONG\n\nNot sure if that would detect the failure either (you\u0027d have to investigate). More directly, you could monitor for CTRL-EVENT-SCAN-STARTED and CTRL-EVENT-SCAN-RESULTS -- you should get these events, regardless of how many APs are nearby.\n\nYou can also take a look at wpaspy.py in the hostap repository, which directly monitors the wpa_supplicant unix socket. That approach might be better than parsing wpa_cli output. Or, you might be able to get equivalent event data by monitoring wpa_supplicant\u0027s D-Bus stream.\n\n---\n\nBut I still think it\u0027s useful to determine/define what the Shill state should be in this sort of case, where wpa_supplicant is malfunctioning this badly. That would likely yield a much simpler test than trying to do any of the above (monitoring precise wpa_supplicant state ourselves).",
      "parentUuid": "ed25c183_fda5cd37",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 50,
        "endChar": 2
      },
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f0fc239_544b8efb",
        "filename": "src/chromiumos/tast/local/shill/manager.go",
        "patchSetId": 2
      },
      "lineNbr": 167,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-01-03T07:16:45Z",
      "side": 1,
      "message": "I guess this is ok for current shill implementation (path\u003d\"/device/\" + link_name_), but I\u0027m not totally sure if this property is guaranteed.\nIf it is not, I guess another way for this may be having a GetWifiDevice to return *Device and let GetWifiInterface to call GetWifiDevice then extract the \"interface\" property string?",
      "revId": "e07e3999565b1088866de01b89733b6407e1aa5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}