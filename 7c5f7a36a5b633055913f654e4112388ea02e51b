{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6131447b_de40aa04",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "The test is not using DPanel.\nnit: we usually prefix tests in this package with \"policy: \"\nE.g.:\n\u003e  policy: Add Lacros test for Printers",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 53
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70aeb365_29b16314",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6131447b_de40aa04",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 53
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0cc08f9d_4ec97674",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T15:27:38Z",
      "side": 1,
      "message": "PTAL at this tast test that replaces a manual test.",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80565e97_8b39b0ea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T15:42:37Z",
      "side": 1,
      "message": "PTAL at this TAST test that replaces a manual test.",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e64e27e7_05ac61b0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "Thanks for the test!",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fd48a703_e5af8baf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T17:51:56Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "e64e27e7_05ac61b0",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75c707dc_51bdd5a9",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T17:51:43Z",
      "side": 1,
      "message": "IMHO this test should be owned by a team that owns printing infrastructure.",
      "range": {
        "startLine": 35,
        "startChar": 3,
        "endLine": 35,
        "endChar": 54
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a430d8c_8ce9f17f",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "I was following go/tast-policy-codelab#metadata, which explicitly asks to add `chromeos-commercial-remote-management@google.com` to policy-related tests. This is also the case for the two other printing-related test files in this directory. WDYT?",
      "parentUuid": "75c707dc_51bdd5a9",
      "range": {
        "startLine": 35,
        "startChar": 3,
        "endLine": 35,
        "endChar": 54
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c6f27fc_6137b0ea",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T19:28:40Z",
      "side": 1,
      "message": "The issue is that we generally do not own each and every policy in Chrome, but do own the policy stack. Hence, it makes sense that we are CC\u0027d here, but if possible, please also add a team that owns the printing stack.",
      "parentUuid": "4a430d8c_8ce9f17f",
      "range": {
        "startLine": 35,
        "startChar": 3,
        "endLine": 35,
        "endChar": 54
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b8482d4_c9156293",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "You need to add \"lacros\" to the dependecies here as well.",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 14
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8084ae7d_c243588a",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b8482d4_c9156293",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 14
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "449d57db_5daf7802",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T17:51:43Z",
      "side": 1,
      "message": "Pleaes format this as indented JSON across multiple lines.",
      "range": {
        "startLine": 59,
        "startChar": 51,
        "endLine": 59,
        "endChar": 427
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "638ea20f_44c2fc81",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T17:58:31Z",
      "side": 1,
      "message": "You can also use string interpolation, i.e. something like this:\n\n printersPolicy :\u003d \u0026policy.Printers{Val: []string{\n   fmt.Sprintln(`{\n     \"display_name\": \"%s\",\n     \"description\": \"The printer next to the water cooler.\",\n     \"manufacturer\": \"Printer Manufacturer\",\n     \"model\": \"Color Laser 2004\",\n     \"uri\": \"ipps://print-server.intranet.example.com:443/ipp/cl2k4\",\n     \"uuid\": \"1c395fdb-5d93-4904-b246-b2c046e79d12\",\n     \"ppd_resource\": {\n       \"effective_model\": \"Printer Manufacturer ColorLaser2k4\",\n       \"autoconf\": false\n     }\n   }`, printerName)\n }};",
      "parentUuid": "449d57db_5daf7802",
      "range": {
        "startLine": 59,
        "startChar": 51,
        "endLine": 59,
        "endChar": 427
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7343e97_8a739be0",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "449d57db_5daf7802",
      "range": {
        "startLine": 59,
        "startChar": 51,
        "endLine": 59,
        "endChar": 427
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "875ee02a_28ba545c",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "You don\u0027t have to put this into a Run() function. The main benefit of Run() is to prefix every log from inside the function, but there is no need for that here, as there are no subtests.",
      "range": {
        "startLine": 61,
        "startChar": 1,
        "endLine": 61,
        "endChar": 79
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1a5dc367_d6e70eab",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "875ee02a_28ba545c",
      "range": {
        "startLine": 61,
        "startChar": 1,
        "endLine": 61,
        "endChar": 79
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcf92693_214497e5",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "If I remember correctly, browserfixt.SetUp() already opens an empty page. If you don\u0027 need the connection (conn) for the opened page, you don\u0027t need to open a new one.",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "553f3725_ab052d73",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "You are right -- however, I think I am running into some sort of race condition after switching to `input.Keyboard` from `input.VirtualKeyboard` (likely because it is faster): The print dialog never opens after pressing CTRL+P (or maybe it opens but is immediately closed due to the initial navigation to the default about:blank page, or there is some other oddity with the about:blank page). I am afraid that I am unsure how I would further debug this, but it works consistently when opening chrome://newtab separately.",
      "parentUuid": "fcf92693_214497e5",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c0e20485_fdbfbd02",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1153089
      },
      "writtenOn": "2022-01-24T19:28:40Z",
      "side": 1,
      "message": "Few things you can do to debug this:\n* observe what happens on the device while the test is running\n* add more logs to Chrome, build and deploy it to the device, run the test and then inspect the logs to see what happens\n\nIMHO we should investigate races instead of just artificially changing the timing until it does not happen any longer. Let me know if you still get stuck and we can have a look at this together.",
      "parentUuid": "553f3725_ab052d73",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6490f745_5f4cb4bb",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-25T09:16:59Z",
      "side": 1,
      "message": "About the race condition: I think NewConn() waits until the page is loaded, but Setup() does not. So you are right, it is better to use NewConn() in this case. And I will look into the Setup() part.",
      "parentUuid": "c0e20485_fdbfbd02",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb0d4e48_823bd610",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-25T09:42:51Z",
      "side": 1,
      "message": "To summarize the flakiness:\nA browserfixt.Setup + br.NewConn with \u0027chrome://newtab\u0027 -\u003e works every time\nB browserfixt.Setup + br.NewConn with \u0027\"\"\u0027 (\u003d about:blank) -\u003e seems to fairly consistently work when I run the test for the first time, but subsequent runs fail due to the print window not opening (I run the test using `tast -verbose run $DUT policy.Printers`). Pressing CTRL+P manually when the test is stuck makes it continue.\nC browserfixt.Setup -\u003e fails to open print window, pressing CTRL+P manually when the test is stuck makes it continue.\nD browserfixt.SetUpWithURL(..., \"chrome://newtab\") -\u003e fails to open print window, pressing CTRL+P manually when the test is stuck DOES NOT make it continue.\n\nWhile C and D can be explained due to Setup(WithURL) not waiting for the page to load, I am not sure why B is also failing. There seems to be some special handling in `Session.NewConn` for `about:blank` URLs (see also https://chromium.googlesource.com/chromium/src/+/HEAD/docs/special_case_urls.md#about_blank).\n\nThe default_search_provider_enabled.go test also apparently had a weird issue with the about:blank page (albeit a different one) and references the following bug [1] which comes to the conclusion that it is likely a tast issue.\n\n[1] https://bugs.chromium.org/p/chromium/issues/detail?id\u003d1188362#c19",
      "parentUuid": "6490f745_5f4cb4bb",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1edf3f1_f2ffe660",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-25T10:05:34Z",
      "side": 1,
      "message": "Thanks for this detailed description. I will create a bug from it :)",
      "parentUuid": "fb0d4e48_823bd610",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98fdd2d0_dbfb4768",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "nit: input.Keyboard(ctx) should be enough. It is faster on boards with physical keyboards, and falls back to VirtualKeyboard() on tablets.",
      "range": {
        "startLine": 91,
        "startChar": 19,
        "endLine": 91,
        "endChar": 34
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "82b3bd8b_afc1235f",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "98fdd2d0_dbfb4768",
      "range": {
        "startLine": 91,
        "startChar": 19,
        "endLine": 91,
        "endChar": 34
      },
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aeabfe91_20f0dee8",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1401350
      },
      "writtenOn": "2022-01-24T16:31:03Z",
      "side": 1,
      "message": "It is possible to combine UI interactions and checks, that way you don\u0027t need to do error handling after each step.\nCheck uiauto.Combine at go/tast-codelab-3",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee74a7df_3307b5b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/policy/printers.go",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1525163
      },
      "writtenOn": "2022-01-24T18:11:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aeabfe91_20f0dee8",
      "revId": "7c5f7a36a5b633055913f654e4112388ea02e51b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}