{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "67bbfc0b_9bb9efa0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-02T19:03:13Z",
      "side": 1,
      "message": "Created another CL for moving the cert functionality to another package.",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da48b339_e294b100",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-08-02T22:10:14Z",
      "side": 1,
      "message": "This probably merits a little more documentation, e.g. describe what steps InstallCerts performs and any notes as to why/how that might not be obvious from the code.",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "361d044c_6daa2c79",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-08-02T23:57:24Z",
      "side": 1,
      "message": "We should also clarify this install additional certificate authorities for allowing clients on the DUTs to verify the authenticity of test certs used by test or fake servers set up in a tast test or test fixture. And that this is completely unrelated to client certs.",
      "parentUuid": "da48b339_e294b100",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d8c55368_2e10d747",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "361d044c_6daa2c79",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a21bec69_5dd5daa7",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-08-02T22:10:14Z",
      "side": 1,
      "message": "nit: s/for/that can be used by a/ ?\nAlso, maybe InstallTestCerts? Normally I would consider \u0027test\u0027 redundant, but I think that it might make it clear that these are specifically test certificates and not something else?",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b351b5de_b5c17333",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-08-02T23:57:24Z",
      "side": 1,
      "message": "\u003e maybe InstallTestCerts\n\nI would double check with pmarko@ for the exact correct technical name, but since we are setting both a) a cert to be shown by the test server to the DUT and b) the CA(s) to validate that cert, we could say \"InstallTestServerCertChain\".",
      "parentUuid": "a21bec69_5dd5daa7",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbcab9ba_6f197cac",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "I like the name InstallTestCerts, since there is both the server and ca that need to be installed. I changed the name of the install function for server and ca to be `writeTestServerCertAndPrivateKey()` and `installTestCertificateAuthorityCert()` respectively to provide more clarity. LMK what yall think",
      "parentUuid": "b351b5de_b5c17333",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "647a9d16_638a82c5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-08-02T23:57:24Z",
      "side": 1,
      "message": "nit: also print |certDirectory| in the error msg.",
      "range": {
        "startLine": 29,
        "startChar": 26,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7715121_0db769ea",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "647a9d16_638a82c5",
      "range": {
        "startLine": 29,
        "startChar": 26,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc382bc2_2563b42c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-08-02T22:10:14Z",
      "side": 1,
      "message": "tiny nit: All one line for a single reasonable length sentence.",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65491305_fc812cbd",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bc382bc2_2563b42c",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "401f489d_a9171f5f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-08-02T23:57:24Z",
      "side": 1,
      "message": "nit: also print |tmpCrtPath| in the error msg.",
      "range": {
        "startLine": 55,
        "startChar": 27,
        "endLine": 55,
        "endChar": 56
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "34cae579_b6a8fc7d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "401f489d_a9171f5f",
      "range": {
        "startLine": 55,
        "startChar": 27,
        "endLine": 55,
        "endChar": 56
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c39c3f8d_ef6b3b7c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-08-02T23:57:24Z",
      "side": 1,
      "message": "nit: also print mount content and target in error msg.",
      "range": {
        "startLine": 67,
        "startChar": 26,
        "endLine": 67,
        "endChar": 48
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6386f05b_eeb1dba8",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c39c3f8d_ef6b3b7c",
      "range": {
        "startLine": 67,
        "startChar": 26,
        "endLine": 67,
        "endChar": 48
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df82941d_04654c7b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-08-02T22:10:14Z",
      "side": 1,
      "message": "It seems like this should be done in InstallCerts since it apples to both Server and SSL Certs?",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "40e23579_9b999dd0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T19:30:26Z",
      "side": 1,
      "message": "Ah I think you pointed out a good bug to me. Technically, only the ca cert needs to be bound and rehashed, but since I also put the server credentials in the same directory, they are also being bound. I put them in separate file paths now so it is clear they are separate.",
      "parentUuid": "df82941d_04654c7b",
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10f7a5f2_154ccf47",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-08-03T01:07:14Z",
      "side": 1,
      "message": "It could be better to return this as a func can be deferred in InstallCerts() (or perhaps wrap some methods/getters in this file as a struct, then we don\u0027t need to pass certDirectory again), so that it\u0027s easier for users to remember to call this.",
      "range": {
        "startLine": 74,
        "startChar": 5,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "131ce5d1_f17b5d35",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-08-03T20:17:37Z",
      "side": 1,
      "message": "I agree that when we move this functionality to a separate package, we should switch to this pattern, i.e. return the uninstall func from InstallTestCerts.",
      "parentUuid": "10f7a5f2_154ccf47",
      "range": {
        "startLine": 74,
        "startChar": 5,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3dd54de_00e69a29",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1530382
      },
      "writtenOn": "2022-08-03T21:09:26Z",
      "side": 1,
      "message": "Done. Added a struct and made the uninstall be returned as a cleanup from install. PTAL.",
      "parentUuid": "131ce5d1_f17b5d35",
      "range": {
        "startLine": 74,
        "startChar": 5,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf0f4e80_3a8220d9",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/certs/certs.go",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-08-04T01:54:04Z",
      "side": 1,
      "message": "Sorry I should mention this earlier: you probably want to do the cleanup when this function fails after switching to this pattern.\n\nOne pattern for this could be\n```\nsuccess :\u003d false\ncleanup :\u003d func(ctx context.Context) {\n  ...\n}\ndefer func() {\n  if !success {\n    cleanup(ctx)\n  }\n}()  // if the following execution can be timeout, we may pass in a cleanupCtx here\n\n...\n\nsuccess \u003d true\nreturn cleanup, nil\n\n```",
      "parentUuid": "c3dd54de_00e69a29",
      "range": {
        "startLine": 74,
        "startChar": 5,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "49245cc52aca50061dd5de4a09872b1cd4c60b0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}