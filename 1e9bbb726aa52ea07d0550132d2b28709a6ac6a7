{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "23e89da1_ae4f6fcd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1518298
      },
      "writtenOn": "2022-10-04T16:42:44Z",
      "side": 1,
      "message": "Adding Seewai to review from Tast perspective",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e3d1f7d_76a25400",
        "filename": "src/chromiumos/tast/local/bundles/cros/example/command_context_user.go",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1431492
      },
      "writtenOn": "2022-10-04T21:02:16Z",
      "side": 1,
      "message": "Why don\u0027t we just test one command at a time? Something like\n\n```\nfunc verifyId(flag string) error {\n\tcmd :\u003d testexec.CommandContext(ctx,\n\t\t\"bash\", \"-c\",\n\t\tfmt.Sprint(\"id %s chronos\", flag)\n\t)\n\texpectedOut, err :\u003d cmd.Output()\n\tif err !\u003d nil {\n\t\treturn err // or something more descriptive.\n\t}\n\n\tcmd, err \u003d testexec.CommandContextUser(ctx, \"chronos\",\n\t\t\"bash\", \"-c\",\n\t\t\"fmt.Sprint(\"id %s\", flag)\",\n\t)\n\tif err !\u003d nil {\n\t\treturn errors.Wrap(err, \"failed to setup CommandContextUser\")\n\t}\n\ttestOut, err :\u003d cmd.Output()\n\tif err !\u003d nil {\n\t\treturn errors.Wrap(err, \"failed to run id as chronos\")\n\t}\n\tif expectedOut !\u003d testOut {\n\t\treturn errors.Errorf(\"failed to get expected output from id; got %q, wanted %q\", testOut, expectedOut)\n\n\t}\n\treturn nil\n}\n```\n\nI think it is much more readable and we can avoid dealing with multiple line output. BTW, the error return in my example is not really descriptive. Please change it to something more descriptive.\n\nThanks.",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9ea12ca_b0f8cf0f",
        "filename": "src/chromiumos/tast/local/bundles/cros/example/command_context_user.go",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1334530
      },
      "writtenOn": "2022-10-04T22:36:25Z",
      "side": 1,
      "message": "Yep, that\u0027s fair. Would you have any issues with me using `s.Run()` for each case?",
      "parentUuid": "8e3d1f7d_76a25400",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fee7bb4_2a0f4321",
        "filename": "src/chromiumos/tast/local/bundles/cros/example/command_context_user.go",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1431492
      },
      "writtenOn": "2022-10-04T23:56:48Z",
      "side": 1,
      "message": "Sorry, I don\u0027t understand why you need s.Run() here? I am thinking you can just do this\n\n```\nfunc CommandContextUser(ctx context.Context, s *testing.State) {\n    flags :\u003d []string{ \"--user\", \"--group\", \"--groups\" }\n    for _, f :\u003d range flags {\n        if err :\u003d verifyId(f); err !\u003d nil {\n            s.Fatal(\"Fail to verify CommandContextUser: \", err)\n        }\n    }\n}\n```",
      "parentUuid": "d9ea12ca_b0f8cf0f",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8886514d_2d9b54c9",
        "filename": "src/chromiumos/tast/local/bundles/cros/example/command_context_user.go",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1334530
      },
      "writtenOn": "2022-10-06T03:16:27Z",
      "side": 1,
      "message": "Just to allow each test case to run independently and to prefix error messages for each case. Let me know if the latest PS seems reasonable.",
      "parentUuid": "3fee7bb4_2a0f4321",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b09a7f2_a307a1e4",
        "filename": "src/chromiumos/tast/local/bundles/cros/example/command_context_user.go",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1431492
      },
      "writtenOn": "2022-10-06T03:25:40Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8886514d_2d9b54c9",
      "revId": "1e9bbb726aa52ea07d0550132d2b28709a6ac6a7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}