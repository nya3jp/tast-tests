{
  "comments": [
    {
      "key": {
        "uuid": "05ec1799_7d42ce12",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T22:45:58Z",
      "side": 1,
      "message": "You mean OS image update? That\u0027s not really a responsibility of the tests. It\u0027s a lab concern, and today, that\u0027s managed via the network_WiFi_UpdateRouter test, plus some manual attention from the lab team. I don\u0027t think that\u0027s a concern for this first phase of porting.",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c64c1be0_6d47ee10",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-23T02:38:16Z",
      "side": 1,
      "message": "Thanks for pointing out the updater code.\nMy update here is a sub-item under sshd Signal. OpenSSH on my router is 7.5, which does not yet have signal feature supported. If Cmd.Abort is still done by ssh signal, then we\u0027ll have to update OpenSSH on router so that we can stop background daemons. (Some other details can be found in router.go before the \"killall\" workaround)\nOne more question: I see the version in network_WiFi_UpdateRouter is built by tryjob? What is changed from official image?",
      "parentUuid": "05ec1799_7d42ce12",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7dceb8a_9f7d55f8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2020-01-09T02:07:41Z",
      "side": 1,
      "message": "There is no official builder for the testbed-ap profile variant of gale and whirlwind. So all builds are formed by tryjobs, and there are special rules to retain those tryjob artifacts for a long period of time.\n\nWe do need to update our APs soon, for a variety of reasons, and we have this open for that:\nhttps://crbug.com/1005443\n\nI\u0027m also working on this, which would be nice to get resolved before we do our next upgrade:\nhttps://crbug.com/960551",
      "parentUuid": "c64c1be0_6d47ee10",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2afaeeea_28984e78",
        "filename": "src/chromiumos/tast/remote/bundles/cros/network/simple_connect.go",
        "patchSetId": 9
      },
      "lineNbr": 108,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T22:45:58Z",
      "side": 1,
      "message": "do you think these things can be abstracted as part of the Router object? In Autotest, the DHCP server is just an implicit part of \"start hostapd\" (hostap_configure()), and we never actually care about providing the interface index (0) -- we just want a unique subnet for each hostapd instance.",
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fc91f37_edcab32a",
        "filename": "src/chromiumos/tast/remote/bundles/cros/network/simple_connect.go",
        "patchSetId": 9
      },
      "lineNbr": 108,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-30T10:09:34Z",
      "side": 1,
      "message": "Extract some handling to Router object and make Router take care of the resources. A more high level wrapper, wifi.TestContext (ported from WifiTestContext in Autotest), is also drafted in crrev.com/c/1984201.",
      "parentUuid": "2afaeeea_28984e78",
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "827de40b_5432e52a",
        "filename": "src/chromiumos/tast/remote/wifi/dhcp_server.go",
        "patchSetId": 9
      },
      "lineNbr": 51,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T23:02:58Z",
      "side": 1,
      "message": "similar story: we probably want to namespace the location to which we write tmp files, so they can be reliably cleared out on subsequent tests if necessary",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 51,
        "endChar": 53
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bf0dd13_63e19161",
        "filename": "src/chromiumos/tast/remote/wifi/dhcp_server.go",
        "patchSetId": 9
      },
      "lineNbr": 51,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-26T06:01:14Z",
      "side": 1,
      "message": "Now we have working directory setting for the daemons.",
      "parentUuid": "827de40b_5432e52a",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 51,
        "endChar": 53
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8dbc6964_69614a91",
        "filename": "src/chromiumos/tast/remote/wifi/dhcp_server.go",
        "patchSetId": 9
      },
      "lineNbr": 81,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T23:02:58Z",
      "side": 1,
      "message": "does this dump logs on error?",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 81,
        "endChar": 2
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81e91ede_be2a7477",
        "filename": "src/chromiumos/tast/remote/wifi/dhcp_server.go",
        "patchSetId": 9
      },
      "lineNbr": 81,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-23T02:38:16Z",
      "side": 1,
      "message": "If the error is in the process of execution call through SSH, it is returned by cmd.Start. If the error is in dnsmasq, it is not collected now.\n\nI think it means two TODOs here:\n1. Direct daemon logs to stdout/stderr (--log-facility\u003d- may help here) and further direct them to files.\n2. Tell tast to collect extra files.",
      "parentUuid": "8dbc6964_69614a91",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 81,
        "endChar": 2
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66a4b439_57ae485d",
        "filename": "src/chromiumos/tast/remote/wifi/dhcp_server.go",
        "patchSetId": 9
      },
      "lineNbr": 81,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-26T06:01:14Z",
      "side": 1,
      "message": "Now we\u0027ll collect the logs. (messages to syslog is also sent to stderr, so I guess we don\u0027t need log-facility setting)",
      "parentUuid": "81e91ede_be2a7477",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 81,
        "endChar": 2
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "901e6d1a_f2338143",
        "filename": "src/chromiumos/tast/remote/wifi/hostap_server.go",
        "patchSetId": 9
      },
      "lineNbr": 45,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T23:02:58Z",
      "side": 1,
      "message": "as we\u0027re trying to work out elsewhere [1], we probably shouldn\u0027t stash stuff directly in /tmp. Even if we *usually* clean it up properly, it\u0027s important that tests know how to easily go in and clear all the old files/logs out, so they don\u0027t accumulate and run out of space on the router.\n\n[1] https://chromium-review.googlesource.com/c/chromiumos/third_party/autotest/+/1965856",
      "range": {
        "startLine": 45,
        "startChar": 0,
        "endLine": 45,
        "endChar": 60
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "795871f0_3e21189a",
        "filename": "src/chromiumos/tast/remote/wifi/hostap_server.go",
        "patchSetId": 9
      },
      "lineNbr": 45,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-26T06:01:14Z",
      "side": 1,
      "message": "Have working dir setting for daemons now.",
      "parentUuid": "901e6d1a_f2338143",
      "range": {
        "startLine": 45,
        "startChar": 0,
        "endLine": 45,
        "endChar": 60
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9d2a7ea_d567e397",
        "filename": "src/chromiumos/tast/remote/wifi/hostap_server.go",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1132414
      },
      "writtenOn": "2019-12-19T23:02:58Z",
      "side": 1,
      "message": "We definitely need to save the stdout as part of the test output. Reading the hostapd logs is often a critical part of debugging test failures.\n\nAlso, you\u0027ve ignored stderr.",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 97,
        "endChar": 33
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d755e92_4932c788",
        "filename": "src/chromiumos/tast/remote/wifi/hostap_server.go",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2019-12-26T06:01:14Z",
      "side": 1,
      "message": "Collect both stdout and stderr to test result.",
      "parentUuid": "e9d2a7ea_d567e397",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 97,
        "endChar": 33
      },
      "revId": "4e5018eb6a579bbbaca4761fba36c6f8d77d13fd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}