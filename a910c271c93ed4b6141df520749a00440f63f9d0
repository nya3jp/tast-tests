{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0506a2ac_5a682ae5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T17:08:37Z",
      "side": 1,
      "message": "Do we want to defer some callbacks to set the roaming properties back to whatever they were at the start of the test?",
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "afd09b4c_53c44d22",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T17:35:51Z",
      "side": 1,
      "message": "Madhav\u0027s deletion of the profile cache should account for resetting properties to their default state.\n\nI considered writing a generic function to restore properties, but the profile deletion approach renders it moot.",
      "parentUuid": "0506a2ac_5a682ae5",
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dffa40d_4cdd23cf",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T17:35:51Z",
      "side": 1,
      "message": "I am considering renaming cellular_multisim as cellular_sim_dependent . That way, we know that the test requires a specific sim to run, and won\u0027t run easily on a local dut. WDYT?",
      "range": {
        "startLine": 22,
        "startChar": 22,
        "endLine": 22,
        "endChar": 36
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfbe45cb_ee03cb34",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T18:52:02Z",
      "side": 1,
      "message": "Not sure exactly what you mean by this?",
      "parentUuid": "5dffa40d_4cdd23cf",
      "range": {
        "startLine": 22,
        "startChar": 22,
        "endLine": 22,
        "endChar": 36
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf1491b1_175d975c",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T19:45:56Z",
      "side": 1,
      "message": "I should have elaborated.\nWhen I run tests on my local dut, I use the following command \ntast run ${cr} \u0027(\"group:cellular\")\u0027\n\nThis test will fail if my local dut does not have a roaming sim. There will be many such tests - esim, pinlock, multisim etc that have dependencies that are identified in a .control file. These tests will run on the correct lab dut because of the control file. However, they may appear as failures when run locally.\n\nThus, we need another group that identifies tests that usually run only in the lab. \ncellular_multisim was created mainly for this purpose. I am proposing that we rename the group \"cellular_multisim\" as \"cellular_sim_dependent\".\n\nThe alternative is to create a subattribute that marks the test as sim_dependent.I suppose Steven will also have an opinion on this, so I will not submit until he chimes in.",
      "parentUuid": "cfbe45cb_ee03cb34",
      "range": {
        "startLine": 22,
        "startChar": 22,
        "endLine": 22,
        "endChar": 36
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ba3db5d_bab93d38",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T17:08:37Z",
      "side": 1,
      "message": "nit: Something a bit shorter like cleanupCtx is fine",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 25
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26cde32c_56fdf087",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T17:35:51Z",
      "side": 1,
      "message": "Ack. This code will also be removed once Madhav provides InitDut",
      "parentUuid": "8ba3db5d_bab93d38",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 25
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25cf8a24_82a86f37",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T18:52:02Z",
      "side": 1,
      "message": "Does the profile cache deletion not also reset AutoConnect?",
      "parentUuid": "26cde32c_56fdf087",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 25
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "342a10d9_f692d9de",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T19:45:56Z",
      "side": 1,
      "message": "The plan is to delete the profile before starting the test, and then disabling autoconnect. Post that, the roaming test begins.\n\nI could have chosen to write a generic function that restore\u0027s any service property, but then I\u0027d be creating two ways of solving the same problem (i.e. restoration of shill\u0027s state)",
      "parentUuid": "25cf8a24_82a86f37",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 25
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bcdd0ba2_d7981e44",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T17:08:37Z",
      "side": 1,
      "message": "We can pull this out of the else as we\u0027ll fatal if err !\u003d nil and never reach this block anyway",
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f19a599_25c75062",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T17:35:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "bcdd0ba2_d7981e44",
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42409aae_88c5e43a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T17:08:37Z",
      "side": 1,
      "message": "You don\u0027t need to pass the cleanup context as an argument here; closing over it is fine",
      "range": {
        "startLine": 41,
        "startChar": 8,
        "endLine": 45,
        "endChar": 29
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19155779_2d914c0a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1425417
      },
      "writtenOn": "2021-07-28T17:35:51Z",
      "side": 1,
      "message": "I am not sure what context I should pass into helper.SetServiceAutoConnect(ctx, true);\n\nCould you please elaborate?",
      "parentUuid": "42409aae_88c5e43a",
      "range": {
        "startLine": 41,
        "startChar": 8,
        "endLine": 45,
        "endChar": 29
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d17f61a4_e57440e6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_cellular_roaming.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1117055
      },
      "writtenOn": "2021-07-28T18:52:02Z",
      "side": 1,
      "message": "For example, you close over \"helper\" here without passing it in (when calling helper.SetServiceAutoConnect). You can do the same with ctxForAutoConnectCleanUp and just reference it by its name outside of this function -- things in scope when the function is declared are also in scope inside its body.",
      "parentUuid": "19155779_2d914c0a",
      "range": {
        "startLine": 41,
        "startChar": 8,
        "endLine": 45,
        "endChar": 29
      },
      "revId": "a910c271c93ed4b6141df520749a00440f63f9d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}