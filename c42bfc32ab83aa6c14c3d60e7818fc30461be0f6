{
  "comments": [
    {
      "key": {
        "uuid": "1e5d8d79_2aed79d7",
        "filename": "src/chromiumos/tast/local/arc/exec.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "this file is pretty short. if you don\u0027t anticipate it getting much longer, how about moving this to commands.go?",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4456ed6_e2ab4afb",
        "filename": "src/chromiumos/tast/local/arc/exec.go",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Fair enough, let\u0027s move to commands.go.",
      "parentUuid": "1e5d8d79_2aed79d7",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f28e9341_839ca7ae",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 19,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "what do you think about renaming this to WaitIntentHelper since \"arc\" is already in the package name? does android have any other services named \"intent helper\" that this could be confused with if doing that rename?\n\n(see the \"avoid stutter\" point at https://blog.golang.org/package-names)",
      "range": {
        "startLine": 19,
        "startChar": 5,
        "endLine": 19,
        "endChar": 24
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34072cb5_92f14c57",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 19,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Yes, that sounds fine. Done.",
      "parentUuid": "f28e9341_839ca7ae",
      "range": {
        "startLine": 19,
        "startChar": 5,
        "endLine": 19,
        "endChar": 24
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8379f783_3b167909",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 20,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "nit: mind pulling this out into a package-level constant like intentHelperTimeout?",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 58
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62009ebb_c66b9568",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 20,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8379f783_3b167909",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 58
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27e18a6e_925eca48",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 25,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "nit: please add a short comment here, e.g.\n\n  // waitSystemEvent blocks until logcat reports an ARC system event named\n  // name. An error is returned if ctx\u0027s deadline is reached.",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbf0b7ad_148ff84a",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 25,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "27e18a6e_925eca48",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0bb55540_c67f64bd",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "nit: consider putting this all on one line if gofmt lets you",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25739b1c_ca263905",
        "filename": "src/chromiumos/tast/local/arc/system_event.go",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "gofmt accepted oneliner. :)",
      "parentUuid": "0bb55540_c67f64bd",
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f602d714_a8ea70ab",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-08T09:01:29Z",
      "side": 1,
      "message": "Oh, BTW, I don\u0027t think this test needs to go into bvt. What should I put here?",
      "range": {
        "startLine": 23,
        "startChar": 24,
        "endLine": 23,
        "endChar": 32
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b6acae0_856ccaf8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "i\u0027m trying to figure this out right now. i was hoping to talk to aviv about this, but it looks like he\u0027s out for a few days. i\u0027ll share a doc with you soon.",
      "parentUuid": "f602d714_a8ea70ab",
      "range": {
        "startLine": 23,
        "startChar": 24,
        "endLine": 23,
        "endChar": 32
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "966feae3_24c9e8b8",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Thanks for starting the thread. I\u0027ll keep this \"bvt\" for now, let\u0027s revisit once we come to conclusion.",
      "parentUuid": "3b6acae0_856ccaf8",
      "range": {
        "startLine": 23,
        "startChar": 24,
        "endLine": 23,
        "endChar": 32
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c3066ff0_8d0fa5a9",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 48,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-08T07:12:01Z",
      "side": 1,
      "message": "After your comments I tried moving the utility function inside the test function. I think it\u0027s okay for this case, but for other tests of longer length, I\u0027m afraid we may feel \"no utility function in the package\" restriction to be cumbersome.\n\nwaitForTab() is a small utility function that calls NewConnForTarget() with just URL (no chrome.Target) and timeout set to 10 secs. I wanted this function because repeating the same logic for three subcases below is tiresome, but I also don\u0027t think it makes a lot of sense to share this function between test cases. \n\nShould this kind of utility funcitons always go inside test case body? I\u0027m afraid it may harm readability of test cases. Do you have any idea about easing this issue?",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bd98573_8a5baf29",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 48,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "it\u0027s at times like this (and also when writing unit tests) that i wish that go had file-level scoping. :-(\n\ni agree that this rule will make long tests harder to read. i haven\u0027t thought about it much, but one option may be permitting helper functions as long as they\u0027re prefixed with the unexported test name, e.g. intentForwardWaitForTab here. what do you think?\n\nyesterday, i was looking into checking that test names and functions match up (e.g. ChromeLogin should come from chrome_login.go). i was trying to check it from testing.AddTest, but a preupload hook may be better. in that case, it might also be easy to verify that test files don\u0027t export any non-test functions, and that their unexported top-level identifiers follow the above naming pattern.",
      "parentUuid": "c3066ff0_8d0fa5a9",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e78a5a9_e1bcdfb2",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 48,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-09T02:05:27Z",
      "side": 1,
      "message": "Hmm, prefixing all utility function names sounds not great... :(\n\nWhat happens if there are name conflicts? Does compiler always give an error? Then we could be simply define utility functions and take care only when conflicts happen.\n\nAnother naive approach would be to create a package for each test cases, but I guess you have already thought about it and not doing so for purpose.\n\n\u003e yesterday, i was looking into checking that test names and functions match up (e.g. ChromeLogin should come from chrome_login.go). i was trying to check it from testing.AddTest, but a preupload hook may be better. in that case, it might also be easy to verify that test files don\u0027t export any non-test functions, and that their unexported top-level identifiers follow the above naming pattern.\n\nYes, writing preupload hooks sounds like a great idea.",
      "parentUuid": "3bd98573_8a5baf29",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "beb58be9_7c66298e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 48,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-09T02:16:47Z",
      "side": 1,
      "message": "i considered using a separate package for each test, but i decided the tradeoffs weren\u0027t worth it:\n\n- the test bundle would need to underscore-import each test instead of just underscore-importing test categories like \u0027ui\u0027. that would result in a bunch of churn and merge conflicts in bundle main.go files.\n- the already-too-long test paths would get even longer, e.g. .../ui/chrome_login/test.go instead of .../ui/chrome_login.go.\n- there would be more opportunity for inconsistencies in filenames, e.g. test.go vs. main.go vs. etc.\n- i fear that having a separate package for each test would encourage people to copy-and-paste code across different test packages instead of refactoring it into shared packages.\n\nthe first reason seemed like the biggest blocker to me, but maybe there\u0027s some way to convince go to automatically build test packages (e.g. a generated index file that imports all tests). that felt a bit too magic to me, though.\n\nyes, the compiler would catch naming conflicts, but i\u0027m concerned that the test code will become hard to manage if we don\u0027t stick to a one-test-per-file model.",
      "parentUuid": "4e78a5a9_e1bcdfb2",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3079610_6eec558e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 48,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Thanks for explanation. For now I\u0027ll just stick with the current style. We may want to revisit as we port more real tests.",
      "parentUuid": "beb58be9_7c66298e",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92537a0f_93f9b887",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-08T07:12:01Z",
      "side": 1,
      "message": "BTW, I found this debug message is useful for debugging NewConnForTarget() errors. Would you mind if I include this in NewConnForTarget() itself?",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 62,
        "endChar": 5
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85ed1877_eab9070e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-06-08T15:06:15Z",
      "side": 1,
      "message": "that sounds useful!",
      "parentUuid": "92537a0f_93f9b887",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 62,
        "endChar": 5
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67d89eaa_8d594324",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/intent_forward.go",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2018-06-11T07:48:15Z",
      "side": 1,
      "message": "Thanks! I\u0027ll create a separate CL for this.",
      "parentUuid": "85ed1877_eab9070e",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 62,
        "endChar": 5
      },
      "revId": "c42bfc32ab83aa6c14c3d60e7818fc30461be0f6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}