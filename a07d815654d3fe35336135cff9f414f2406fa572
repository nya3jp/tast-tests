{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "56f0d197_96d5fb58",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2022-02-03T09:46:11Z",
      "side": 1,
      "message": "If you have many ui interactions in a row you can combine them:\n\n\tconst trustCheckboxText \u003d \"Trust this certificate for identifying websites\"\n\tif err :\u003d uiauto.Combine(\"import CA cert\",\n\t\tui.LeftClick(nodewith.Name(\"Authorities\").Role(role.Tab)),\n\t\tui.WaitUntilExists(nodewith.Name(\"Authorities\").ClassName(\"tab selected\")),\n\t\tui.LeftClick(nodewith.Name(\"Import\").Role(role.Button)),\n\t\tui.LeftClick(nodewith.Name(fileName).Role(role.StaticText)),\n\t\tui.LeftClick(nodewith.Name(trustCheckboxText).Role(role.CheckBox)),\n\t\tui.LeftClick(nodewith.Name(\"OK\").Role(role.Button)),\n\t)(ctx); err !\u003d nil {\n\t\ts.Error(\"Failed to import CA cert: \", err)\n\t}",
      "range": {
        "startLine": 90,
        "startChar": 0,
        "endLine": 114,
        "endChar": 2
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c28e320_d1ded194",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1357438
      },
      "writtenOn": "2022-02-03T12:41:50Z",
      "side": 1,
      "message": "Cool, thanks, done",
      "parentUuid": "56f0d197_96d5fb58",
      "range": {
        "startLine": 90,
        "startChar": 0,
        "endLine": 114,
        "endChar": 2
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d829cac_3a6f4f1a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2022-02-03T09:46:11Z",
      "side": 1,
      "message": "As above, these can be combined:\n\n\tkb, err :\u003d input.Keyboard(ctx)\n\tif err !\u003d nil {\n\t\ts.Fatal(\"Failed to find keyboard: \", err)\n\t}\n\tpasswordDialog :\u003d nodewith.Name(\"Enter your certificate password\").Role(role.Dialog)\n\tpasswordTextBox :\u003d nodewith.Role(role.TextField).Editable()\n\tif err :\u003d uiauto.Combine(\"import client cert\",\n\t\tui.LeftClick(nodewith.Name(\"Your certificates\").Role(role.Tab)),\n\t\tui.WaitUntilExists(nodewith.Name(\"Your certificates\").ClassName(\"tab selected\")),\n\t\tui.LeftClick(nodewith.Name(\"Import and Bind\").Role(role.Button)),\n\t\tui.LeftClick(nodewith.Name(fileName).Role(role.StaticText)),\n\t\tui.LeftClick(nodewith.Name(\"Open\").Role(role.Button)),\n\t\tui.LeftClick(passwordTextBox.Ancestor(passwordDialog)),\n\t\tkb.TypeAction(\"12345\"),\n\t\tui.LeftClick(nodewith.Name(\"OK\").Role(role.Button)),\n\t)(ctx); err !\u003d nil {\n\t\ts.Error(\"Failed to import client certificate: \", err)\n\t}",
      "range": {
        "startLine": 127,
        "startChar": 0,
        "endLine": 158,
        "endChar": 2
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3da2d89b_09c42db6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 1357438
      },
      "writtenOn": "2022-02-03T12:41:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d829cac_3a6f4f1a",
      "range": {
        "startLine": 127,
        "startChar": 0,
        "endLine": 158,
        "endChar": 2
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "604b37ae_5f3c8f0b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2022-02-03T09:46:11Z",
      "side": 1,
      "message": "Is there anything we could poll for instead to ensure the certs are working?",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 266,
        "endChar": 31
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecffa694_ed45d95d",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1357438
      },
      "writtenOn": "2022-02-03T12:41:50Z",
      "side": 1,
      "message": "There\u0027s no UI indication when they start working. \n\nThe only alternative I can imagine, is to try loading the website without waiting, and if it fails, reload it. \nBut I\u0027m not sure the added complexity is worth it. We can think about it, if it\u0027s flaky, but at least on my device it works half of the time even without timeout, so with 1 second I expect it to be quite stable.\n\nFor reloading, I\u0027d like to do it this way:\n1) navigate to the page\n2) wait until (error screen OR cert selection dialog)\n3) if error screen -\u003e go to 1) (no more than N times)\n4) continue working with the website\n\nBut I don\u0027t know how to implement the step 2). Do you know if I can combine two Finder-s and then know which one was triggered? \nEnsureGoneFor(error screen, 1 * Second) could be another option, but then again it can be flaky just because a website didn\u0027t load in 1 sec on some slow device. \n\nAnd we will probably need to sleep on step 3) in this case as well, because if it iterates through all the N attempts too quickly, it will also break.",
      "parentUuid": "604b37ae_5f3c8f0b",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 266,
        "endChar": 31
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "002d42df_2b391eb4",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1411065
      },
      "writtenOn": "2022-02-03T12:53:50Z",
      "side": 1,
      "message": "Ok, then let\u0027s try it with the sleep for now.",
      "parentUuid": "ecffa694_ed45d95d",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 266,
        "endChar": 31
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6dbab29_6ebce877",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1175129
      },
      "writtenOn": "2022-02-04T12:59:55Z",
      "side": 1,
      "message": "I guess you could import CA cert first and client cert second and then wait for the client cert to be in chaps using something like this:\n\nhttps://source.chromium.org/chromiumos/chromiumos/codesearch/+/main:src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/policy/required_client_certificate.go;l\u003d114?q\u003dfile:tast%20requiredcli",
      "parentUuid": "002d42df_2b391eb4",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 266,
        "endChar": 31
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e9fb3c1_85bf3dd3",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/cert_settings_page.go",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1357438
      },
      "writtenOn": "2022-02-07T14:05:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b6dbab29_6ebce877",
      "range": {
        "startLine": 266,
        "startChar": 1,
        "endLine": 266,
        "endChar": 31
      },
      "revId": "a07d815654d3fe35336135cff9f414f2406fa572",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}