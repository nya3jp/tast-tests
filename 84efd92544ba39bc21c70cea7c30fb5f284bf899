{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "627e9de8_d52f8517",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-28T23:50:38Z",
      "side": 1,
      "message": "Rebased to main and made adjustments based off of changed made in https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3741526. I confirmed with jonfan@ that it was best to refactor that work to use this newer API and so I added those changes to this CL.",
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2428bb0c_e1ed2194",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1386944
      },
      "writtenOn": "2022-07-29T03:10:42Z",
      "side": 1,
      "message": "Approving from a Tast Perspective, but please obtain approval from a colleague on your team who knows more about the substance of this change before submitting.",
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "603dd97d_a863671d",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1113904
      },
      "writtenOn": "2022-07-29T00:37:30Z",
      "side": 1,
      "message": "Please don\u0027t hardcode these. There is nothing in the xmlrpc API that says these are constant.\n\nWhat the users should do is call GetSupported{Ports,Inputs,Outputs} to get a list of allowed ids, then GetConnectorType, HasAudioSupport, HasVideoSupport on each of them.\n\nI make no guarantees that for chameleon v3 these IDs are stable or correct, in fact it\u0027s already wrong due to `PortID \u003d 3` being a second HDMI port..",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a68e8ddf_6d0a601f",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-29T21:31:15Z",
      "side": 1,
      "message": "Oh interesting. Are there a list of string constants to compare with GetSupported returns then? What would be the process for getting a specific type of port?",
      "parentUuid": "603dd97d_a863671d",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61c08047_9402c6a5",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1113904
      },
      "writtenOn": "2022-07-29T21:40:53Z",
      "side": 1,
      "message": "I don\u0027t think there is unfortunatelly. GetConnectorType returns just an arbitrary string.\n\nThe only expectation so far I\u0027ve discovered has been https://b.corp.google.com/issues/233676810\n\nThe comment there even used to say \"human readable\".",
      "parentUuid": "a68e8ddf_6d0a601f",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "920c214d_282624ae",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-29T21:45:52Z",
      "side": 1,
      "message": "So what do you want us to use in tests that are trying to use a specific type of port then...?\n\nAre these IDs not consistent? \nhttps://source.corp.google.com/chromeos_public/src/platform/chameleon/chameleond/utils/ids.py",
      "parentUuid": "61c08047_9402c6a5",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e7c7115_b39ce1e5",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-29T21:52:56Z",
      "side": 1,
      "message": "I updated the CL with correct IDs. Looks like I just accidentally copied them all off by one. Unless there is another option than this, we\u0027ll need to keep this in here.",
      "parentUuid": "920c214d_282624ae",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b8b2583_422bbbc7",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1113904
      },
      "writtenOn": "2022-07-29T22:02:07Z",
      "side": 1,
      "message": "`ids.py` is only used for v2. I think it has organically grown (eg: everything past `PortUSBAudioOut PortID \u003d 8`) into what it is now and non-video users have started using it more and more.\n\n`chameleond/interface.py` specifies much less than that and that\u0027s what I\u0027ve developed v3 to target, especially since a lot of those ports in `ids.py` were not applicable or the wrong abstraction. The enabled tests (http://go/chameleon-v3-stainless) have been happy enough with that.\n\nThe client should be able to do everything it needs with `GetSupported{Ports,Inputs,Outputs}`, `Has{Audio,Video}Support` \u0026 `GetConnectorType` (to disambiguate closely related ports). It\u0027s possible that we\u0027re missing a few bluetooth `Has*Support` type functions, but I\u0027m not familiar with the bluetooth architecture.",
      "parentUuid": "920c214d_282624ae",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9df907cf_e445750e",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-29T22:04:49Z",
      "side": 1,
      "message": "Since this ID list is currently already in there, this CL now just renames them with a prefix, I\u0027d like to move the work to using something else out into a separate CL and keep this as-is for now. The focus of this CL is just to enable calling the XMLRPC endpoints, it does not control how to call them.",
      "parentUuid": "6b8b2583_422bbbc7",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "786074a2_9ccf7275",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1113904
      },
      "writtenOn": "2022-07-29T22:08:42Z",
      "side": 1,
      "message": "Perhaps make a bug to remove them and add it as a comment here in this CL so future readers know they\u0027re about to do something wrong by relying on them.",
      "parentUuid": "9df907cf_e445750e",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2db3be33_daee23cc",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-07-29T22:11:39Z",
      "side": 1,
      "message": "Yeah I can do that on Monday.\n\nIs there documentation available on the expected way to use port ids? It seems pretty integral to the system since a lot of the base endpoints require them.",
      "parentUuid": "786074a2_9ccf7275",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f32af2ae_6c0f9f83",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1113904
      },
      "writtenOn": "2022-07-29T22:24:34Z",
      "side": 1,
      "message": "\u003e Is there documentation available on the expected way to use port ids? It seems pretty integral to the system since a lot of the base endpoints require them.\n\nJust chameleond/interface.py. Consider port_id an opaque handle number, not a standard that has to be shared between server and client. I should be able to `random.randint(0, 1000)` them at chameleond bootup.\n\nAll ports that v3 has (including the upcoming audio ones) can be exhausively enumerated and disambiguated with the API methods I listed above without relying on a pre-shared port_id convention.\n\nSuch port_id lists do change and now we have a mismatch between server and client.\n\n\n```\n% ssh cros@chromeos15-row15-metro1-host15-chameleon.cros.corp.google.com -i ~/cros/src/third_party/chromiumos-overlay/chromeos-base/chromeos-ssh-testkeys/files/testing_rsa -L 9992:localhost:9992\n...\n\n% python client/test_server.py --chameleon_host localhost\n2022-07-29 15:22:41,508:INFO:Connected to http://localhost:9992 with MAC address 20:b0:f7:05:36:3a\n2022-07-29 15:22:41,508:INFO:In interactive shell, p is the proxy to chameleond server\n2022-07-29 15:22:42,319:INFO:\n      Port 0 is DP.\n      Port 1 is DP.\n      Port 2 is HDMI.\n      Port 3 is HDMI.\n      E.g.\n      p.Plug(3) to plug HDMI.\n      p.Unplug(3) to unplug HDMI.\nPython 3.10.5 (main, Jun  8 2022, 09:26:22) [GCC 11.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n```",
      "parentUuid": "2db3be33_daee23cc",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2e58626_70142eb2",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-08-02T19:31:02Z",
      "side": 1,
      "message": "I created b:241132806 to track this issue. I\u0027m going to leave this CL as-is without a TODO since I\u0027m just going to do it now and add it to the same chain.",
      "parentUuid": "f32af2ae_6c0f9f83",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "036044c9_a191ab19",
        "filename": "src/chromiumos/tast/common/chameleon/constants.go",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1530777
      },
      "writtenOn": "2022-08-03T01:12:06Z",
      "side": 1,
      "message": "This has been addressed in [CL-3807039](https://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/3807039/1). Note that the commit message of that CL explains why we couldn\u0027t fully rely on this method for port identification. I\u0027ve added you to review that CL as well.",
      "parentUuid": "d2e58626_70142eb2",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 5
      },
      "revId": "84efd92544ba39bc21c70cea7c30fb5f284bf899",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}