{
  "comments": [
    {
      "key": {
        "uuid": "55415f64_52bb8033",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 109,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "This should be done after err check, IIUC.\n\nDitto for below.",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46508907_c5d14b4e",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 109,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "55415f64_52bb8033",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1cdd330_064f4a6b",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "This layering looks conflicting with the function spec, because returned repl is already \"released\" one.\nIt looks caller\u0027s responsibility. Or, alternatively, encapsulating it in this function is necessary.\n\nDitto for below.",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4c34717_54fc95a6",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "This is the lowest layer, and repl is no yet \"released\".\n\nIf a developer marshals a javascript object into a golang struct, repl will contain a \"non-released\" RemoteObject. That object needs to be released since we are only returning the marshalled data to the developer.",
      "parentUuid": "d1cdd330_064f4a6b",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59bb9067_0ac0406d",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-15T09:02:29Z",
      "side": 1,
      "message": "Actually, it is released at the end of this function, but this function still returns the released object to the caller.\nWe should either 1) not to release inside this function (and let caller do), or 2) not to return the repl.\n\nConsidering to make the life cycle management clearer, maybe 2), with mentioning the lifetime management in the document, too? WDYT?",
      "parentUuid": "d4c34717_54fc95a6",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a380bb4_4b9897de",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-15T18:50:31Z",
      "side": 1,
      "message": "Sounds good. That way, the only time a RemoteObject doesn\u0027t get released is when it is explicitly returned through the out param.",
      "parentUuid": "59bb9067_0ac0406d",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a0826e5_e7be1bea",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Could you keep ro at L103, instead?\n\nDitto for below.",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23a0c120_40cbc6a7",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a0826e5_e7be1bea",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7302b77_1f51b2e5",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Could you out \u003d\u003d nil check before L120? So, the logic will be;\n\nif out is nil, return repl immediately. Otherwise,\nif out is RemoteObject type, handle it as a special case. Otherwise\nreturn with json.Unmarshaling.\n\nDitto for below.",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5adad722_1c6081c9",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7302b77_1f51b2e5",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7356172c_97f5337b",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 136,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Hmm... I couldn\u0027t understand what you\u0027re trying to describe by this statement. Could you clarify?",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4365e49e_898dd79f",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 136,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "I am not sure the best way to word this.\n\nEssentially, if a developer sets fn to a arrow syntax function(i.e. \"()\u003d\u003e{return this.data}\"), the \"this\" in the arrow function will not refer to the RemoteObject passed to CallOn. A developer needs to write the function as \"function(){return this.data}\" for it to bind \"this\" correctly.\n\nLook at the \"What about this?\" section on this page for more details:\nhttps://www.w3schools.com/js/js_arrow_function.asp",
      "parentUuid": "7356172c_97f5337b",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e65a3f1_90a30614",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 136,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-15T09:02:29Z",
      "side": 1,
      "message": "Thanks. I see what you meant.\nMaybe nice to mention in chrome/jsobject.go (since it is more user facing API) that...\n\nIf fn is an arrow function, the \"this\" in the function body will be different from the object referred from the JSObject ob, and that will probably lead to unintended behavior.\n\nWDYT?\n\nBTW, what will be the \"this\" if an arrow function is used here? Nice to be mentioned in the comment, too.",
      "parentUuid": "4365e49e_898dd79f",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3a6bb25_b71a4d0c",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 136,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-15T18:50:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e65a3f1_90a30614",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfcf7d14_53d46c22",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Could you handle RemoteObject?",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32eb4dfa_6f0c1216",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bfcf7d14_53d46c22",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18ca5b2d_6771c7f6",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "style: callOnArgs (local var should be camelCase starting with lower case letter).",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad061720_cd876a35",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18ca5b2d_6771c7f6",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5e37703_33095d6e",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 150,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "SetAwaitPromise(true) looks missing?",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f782ce16_800dfdde",
        "filename": "src/chromiumos/tast/local/chrome/cdputil/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 150,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5e37703_33095d6e",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a316978_5096921b",
        "filename": "src/chromiumos/tast/local/chrome/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Could you update the document to mention JSObject. It\u0027d be nice to mention about lifetime.",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36ad3210_38bc7928",
        "filename": "src/chromiumos/tast/local/chrome/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5a316978_5096921b",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43112c8f_e81fb1aa",
        "filename": "src/chromiumos/tast/local/chrome/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "nit: Could you set conn only when the return value is valid?",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7243873e_ee470179",
        "filename": "src/chromiumos/tast/local/chrome/conn.go",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "43112c8f_e81fb1aa",
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aaed3784_ad16cdb5",
        "filename": "src/chromiumos/tast/local/chrome/jsobject.go",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-14T10:43:25Z",
      "side": 1,
      "message": "Clar Is it really necessary to accept both JSObject and *JSObject? I guess only accepting *JSObject works. WDYT?",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 16
      },
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d53ae36_bf10974a",
        "filename": "src/chromiumos/tast/local/chrome/jsobject.go",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-14T21:42:23Z",
      "side": 1,
      "message": "Both are needed. If you only have *JSObject, it will go to the default case for JSObject.\n\nI think it is best to accept both because you don\u0027t want a user to get confused when they pass a JSObject instead of a *JSObject and an error is returned.",
      "parentUuid": "aaed3784_ad16cdb5",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 16
      },
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6706dd51_9f956b4c",
        "filename": "src/chromiumos/tast/local/chrome/jsobject.go",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-01-15T09:02:29Z",
      "side": 1,
      "message": "I\u0027m still concerning to mixing both JSObject and *JSObject.\nCould you instead return an error if value JSObject case? Similarly, return an error for runtime.RemoteObject (non-pointer) case in cdputil package?\n\nNote: I guess, because JSObject is not JSON martialize-able, I guess passing it to the args of CallOn will cause an error on argument conversion?",
      "parentUuid": "9d53ae36_bf10974a",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 16
      },
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f38f3f4_7e7f5e76",
        "filename": "src/chromiumos/tast/local/chrome/jsobject.go",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1358595
      },
      "writtenOn": "2020-01-15T18:50:31Z",
      "side": 1,
      "message": "I am not fully sure what issues you expect to arise from supporting both *JSObject and JSObject, but I changed it to return an explicit error anyway.",
      "parentUuid": "6706dd51_9f956b4c",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 16
      },
      "revId": "18bcce033697e530459bdec698dc92c06cfbd32b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}