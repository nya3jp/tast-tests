{
  "comments": [
    {
      "key": {
        "uuid": "18454dcc_ce8b0599",
        "filename": "src/chromiumos/tast/common/crypto/certificate/cert.go",
        "patchSetId": 2
      },
      "lineNbr": 276,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-06-09T06:45:18Z",
      "side": 1,
      "message": "Currently, it looks OK to me, but I might prefer generating a set of expired client cert here, if not too hard, so that we don\u0027t have to work around in unit test. I\u0027ll see it this can be done.\n\nAnd one alternative we might consider is refactoring the struct and separate client and server cert, which should fits the real usage more. (e.g. for wiredhostapd, it takes the whole Certificate object but should only need the Server and CA ones.) However, when both server and client side are used, the design makes it hard to tell if their CACert is matched. (Let TestCertificate return multiple values can partly solve it, e.g. \"return ca, server, client\", but I\u0027m not yet sure if it\u0027s good enough)",
      "revId": "01ab7442bc55e955b0abf33972b689d7c580f380",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1fe289d_d11ecce4",
        "filename": "src/chromiumos/tast/common/crypto/certificate/cert.go",
        "patchSetId": 2
      },
      "lineNbr": 276,
      "author": {
        "id": 1371981
      },
      "writtenOn": "2020-06-10T02:13:47Z",
      "side": 1,
      "message": "Sorry for the delay. I can\u0027t find the private key for the test CACerts so it might not be possible to generate an expired client cert with the same CACert in TestCertificate (or we\u0027ll have to update all the keys/certs).\n\nAs to the second part, I\u0027m wondering if we can somehow better identify the certs/keys with the same CACert in addition to the assumption in function commentary. Do you think something like the structure below might help?\n\n  type Credential {\n    Cert       string\n    PrivateKey string\n  }\n  type CertSet {\n    CACert            string\n    ServerCred        Credential\n    ClientCred        Credential\n\n    // Optional parameters, access with “comma ok” getter (or pointer is an alternative).\n    expiredServerCred Credential\n    // ... maybe more to go in the future\n  }\n  func (cs CertSet) ExpiredServerCred() (Credential, bool){\n    if cs.expiredServerCred.PrivateKey \u003d\u003d \"\" {\n      return Credential{}, false\n    }\n    return cs.expiredServerCred, true\n  }\n  func TestCertificateSet() CertSet {\n    return CertSet{...}\n  }",
      "parentUuid": "18454dcc_ce8b0599",
      "revId": "01ab7442bc55e955b0abf33972b689d7c580f380",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f602ceb4_8294cdf8",
        "filename": "src/chromiumos/tast/common/crypto/certificate/cert.go",
        "patchSetId": 2
      },
      "lineNbr": 276,
      "author": {
        "id": 1387481
      },
      "writtenOn": "2020-06-10T09:33:26Z",
      "side": 1,
      "message": "Sounds good.",
      "parentUuid": "a1fe289d_d11ecce4",
      "revId": "01ab7442bc55e955b0abf33972b689d7c580f380",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c000bbdb_9b972c6b",
        "filename": "src/chromiumos/tast/common/crypto/certificate/cert.go",
        "patchSetId": 2
      },
      "lineNbr": 287,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2020-06-09T06:16:31Z",
      "side": 1,
      "message": "Ouch, Get is a stop word in Golang. Please rename it to TestCert2().\n\nFor the GetTestCertificate() rename, please do it in another CL. Order does not matter. Perhaps before the CL is better.",
      "range": {
        "startLine": 287,
        "startChar": 5,
        "endLine": 287,
        "endChar": 24
      },
      "revId": "01ab7442bc55e955b0abf33972b689d7c580f380",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b42069b_81df2424",
        "filename": "src/chromiumos/tast/common/crypto/certificate/cert.go",
        "patchSetId": 2
      },
      "lineNbr": 287,
      "author": {
        "id": 1387481
      },
      "writtenOn": "2020-06-10T09:33:26Z",
      "side": 1,
      "message": "Done: http://crrev.com/c/2239689",
      "parentUuid": "c000bbdb_9b972c6b",
      "range": {
        "startLine": 287,
        "startChar": 5,
        "endLine": 287,
        "endChar": 24
      },
      "revId": "01ab7442bc55e955b0abf33972b689d7c580f380",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}