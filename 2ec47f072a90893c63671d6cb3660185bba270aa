{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "81593dbd_88630fec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1510282
      },
      "writtenOn": "2021-12-11T23:38:35Z",
      "side": 1,
      "message": "@takise and @toshikikikuchi - The split screen test is still failing even though https://chromium-review.googlesource.com/c/chromium/src/+/3272213/ was pushed. This CL: (1) makes the rotate/mode switch a little more reliable, and (2) gives some leeway to the screen size check to account for the divider width. ",
      "revId": "2ec47f072a90893c63671d6cb3660185bba270aa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbe73ad7_e5f1104e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1413870
      },
      "writtenOn": "2021-12-13T00:48:56Z",
      "side": 1,
      "message": "Thank you for working on this!\nAs I mentioned, my patch doesn\u0027t fix all the cases. The extreme cases defined at L587 (#line after the change) and following are not covered by my fix.\n\n\u003e (1) makes the rotate/mode switch a little more reliable,\nIn the extreme cases, as you know, it triggers the rotation and the tablet conversion at the same time and that makes it very unstable. So, your approach basically makes it sense.\nOnly thing that we should address is that your CL uses Sleep() to wait for the animation completion, which in general we should avoid because it will easily causes another flakiness. I guess in our cases, we can wait for the bounds change instead because both rotation and conversion always result in changing bounds.\n\n\u003e (2) gives some leeway to the screen size check to account for the divider width.\nLGTM.",
      "parentUuid": "81593dbd_88630fec",
      "revId": "2ec47f072a90893c63671d6cb3660185bba270aa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f4b9a9b_c571fe47",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1510282
      },
      "writtenOn": "2021-12-16T01:19:06Z",
      "side": 1,
      "message": "I was able to eliminate the sleeps on the rotations by waiting for window animation. \n\nThe mode transition (tablet/clamshell) is a little tricker when needing to run multiple times during a test (as noted in the bug: b/187788935). The only thing I could find to poll on was the Window.CaptionButtonVisibleStatus, which contains \"MaximizeAndRestore\" when in clamshell mode. However, I\u0027m not sure if that\u0027s always true/if tablet mode could ever have that value.\n\nIf you\u0027re familiar with that state and can confirm it\u0027s reliable, I can adjust the test to use that value. Otherwise, I think it\u0027s OK to leave the sleep in for now (as other tests do something similar) and get the test running to completion so we can start tracking other failures while b/187788935 is investigated.\n\nWhat are your thoughts on the above?",
      "parentUuid": "fbe73ad7_e5f1104e",
      "revId": "2ec47f072a90893c63671d6cb3660185bba270aa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6709f6ae_32f11003",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1298257
      },
      "writtenOn": "2021-12-20T02:57:07Z",
      "side": 1,
      "message": "I\u0027ll defer to the decision to Toshiki-san for this, but my two cents are:\n\nI\u0027m fine with checking caption button state and even adding sleep if that\u0027s the only way. As we don\u0027t have any reliable way, I think we want to make some iterations fast and find out what will work and what will not?",
      "parentUuid": "9f4b9a9b_c571fe47",
      "revId": "2ec47f072a90893c63671d6cb3660185bba270aa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "facf71ac_d87fab70",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1510282
      },
      "writtenOn": "2021-12-20T20:29:23Z",
      "side": 1,
      "message": "I agree - assuming Toshiki-san is OK with the current implementation then we should see the WMResizableConversion test start to pass (it currently does not pass at all), at which point we\u0027ll start to see what other issues arise that we can iterate on.",
      "parentUuid": "6709f6ae_32f11003",
      "revId": "2ec47f072a90893c63671d6cb3660185bba270aa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}