{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "50459383_8c55e945",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1395692
      },
      "writtenOn": "2022-06-01T03:52:40Z",
      "side": 1,
      "message": "Discussed with Alvin. Alvin will own future ACR++ testing review.",
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81bab5c5_f616070f",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2022-06-01T04:32:01Z",
      "side": 1,
      "message": "you also need `PreTestTimeout`, otherwise the PreTest never runs.",
      "range": {
        "startLine": 60,
        "startChar": 2,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e420d2f0_3c56bdb3",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1477974
      },
      "writtenOn": "2022-06-01T11:25:22Z",
      "side": 1,
      "message": "The `Impl` (which is the `arc.bootedFixture` in `arc/fixture.go`) here, the context passed from PreTest is never used (context passed to `func (a *ARC) ResetOutDir(context.Context, string) error` but the function does not actually use it). Also none of the fixtures defined in the `arc/fixture.go` have specified the `PreTestTimeout`.\n\nShould we add `PreTestTimeout` for this and all other arc fixtures?\nAlso should we refine the `func (a *ARC) ResetOutDir(context.Context, string) error` by removing the unused argument?",
      "parentUuid": "81bab5c5_f616070f",
      "range": {
        "startLine": 60,
        "startChar": 2,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd75f459_5514c3f3",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2022-06-01T22:08:28Z",
      "side": 1,
      "message": "I would suggest to add a `preTestTimeout` here as the fixture `arc.bootedFixture` implements a PreTest function, regardless of how it operates. Also, the functionality of that method could be changed in the future without any notice to your test here.",
      "parentUuid": "e420d2f0_3c56bdb3",
      "range": {
        "startLine": 60,
        "startChar": 2,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d05adcf_30fcf185",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1477974
      },
      "writtenOn": "2022-06-02T12:19:52Z",
      "side": 1,
      "message": "Got it, thanks, `PreTestTimeout` added.",
      "parentUuid": "cd75f459_5514c3f3",
      "range": {
        "startLine": 60,
        "startChar": 2,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16674f90_08a93420",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2022-06-01T04:49:18Z",
      "side": 1,
      "message": "type FixtValue struct {\n\tChrome *chrome.Chrome\n\tARC  *arc.ARC\n}\n\nNo need to create `Chrome()` and `ARC()`",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f65d83d0_e9f00e45",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1477974
      },
      "writtenOn": "2022-06-01T11:25:22Z",
      "side": 1,
      "message": "We removed the `ARC()`.\nHowever we will need the `Chrome()` to support the lacros variant in future CLs.\nExtra comments were added to express the purpose of `Chrome()`\n\nShould we remove the `Chrome()` and make changes in future CLs?",
      "parentUuid": "16674f90_08a93420",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30ccc85a_34c4ecc9",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2022-06-01T22:08:28Z",
      "side": 1,
      "message": "I am not sure why you need this to support the lacros variant. Could you give me an example of how you will use it for lacros?",
      "parentUuid": "f65d83d0_e9f00e45",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57194eb0_3ec076cc",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1477974
      },
      "writtenOn": "2022-06-02T12:19:52Z",
      "side": 1,
      "message": "To include the lacros variant, extra fixture is needed which might make the type of fixt-value not fixed.\n\nAs a result, the specific type and an extra examination are needed to acquire the Chrome instance, like:\n var cr *chrome.Chrome\n if s.TestName() \u003d\u003d \"lacros\" {\n\tcr \u003d s.FixtValue().(*chrome.Chrome)\n } else {\n\tcr \u003d s.FixtValue().(*mtbf.FixtValue).Chrome\n }\nSince all fixt-value of lacros\u0027 fixtures implement the `chrome.HasChrome`, if the fixt-value in this CL implements the `chrome.HasChrome`, above codes can be reduced as:\n cr :\u003d s.FixtValue().(chrome.HasChrome).Chrome()\n\nAlso the lacros fixtures are being changed frequently, so having the `FixtValue` implements the `chrome.HasChrome` might benefit on stability.\n\nWe still need the specific type and an extra examination to acquire the `*arc.ARC` indeed, however, not all tests in MTBF need the ARC resources but almost all tests need the Chrome instance.\nTherefore, we make the `FixtValue` in this CL implements the `chrome.HasChrome`.",
      "parentUuid": "30ccc85a_34c4ecc9",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2ffac44_005bd8c5",
        "filename": "src/chromiumos/tast/local/mtbf/fixture.go",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1508900
      },
      "writtenOn": "2022-06-02T22:01:29Z",
      "side": 1,
      "message": "Thanks for the clarification.\n\nThough I am still not entirely sure why you cannot do lacros within the same fixture (i.e., choosing different ChromeOption for Ash/Lacros in the `Setup`), I don\u0027t mind the way that you are planning to do.\n\n(optional) If you want to use `cr :\u003d s.FixtValue().(chrome.HasChrome).Chrome()`, you may try simply defining:\n```\ntype FixtValue struct {\n\tchrome.HasChrome\n\tARC  *arc.ARC\n}\n```\n\nwhich implicitly makes `FixtValue` implement `Chrome()`.",
      "parentUuid": "57194eb0_3ec076cc",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "69002c39edcc6a3d2ff4eaedd1baec0aa8d45ba2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}