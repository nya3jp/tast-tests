{
  "comments": [
    {
      "key": {
        "uuid": "8609d769_0c144285",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-15T17:15:15Z",
      "side": 1,
      "message": "nit: Hmm when will this happen? Could we remove this check?",
      "range": {
        "startLine": 272,
        "startChar": 8,
        "endLine": 272,
        "endChar": 21
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03ba2cc0_d73e51a5",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-06-16T03:24:51Z",
      "side": 1,
      "message": "Hmm. I have read requestIdleCallback explanation, but it looked ambiguous.\nAnyways, done.",
      "parentUuid": "8609d769_0c144285",
      "range": {
        "startLine": 272,
        "startChar": 8,
        "endLine": 272,
        "endChar": 21
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5783404_33565243",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-15T17:15:15Z",
      "side": 1,
      "message": "dumb question: why we need to wrap the function here?",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5fe815d_309f1158",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-06-16T03:24:51Z",
      "side": 1,
      "message": "To access \"this\". Added the comment.",
      "parentUuid": "b5783404_33565243",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f8cabe7_13323610",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-16T06:24:48Z",
      "side": 1,
      "message": "Hmm IMO the impl details leaked here. cca.go should not need to know whether the underlying implementation of switchMode() uses `this` or not, and it\u0027s a little bit cumbersome to remember what functions need to be wrapped when writing tests.\n\nI am not sure what\u0027s the best solution here though... Is it possible to select the correct `this` in the implementation of conn.Call()? If not, maybe we should use `Tast` instead of `this` in cca_ui.js as a convention with clear comments, or bind those functions with correct `this` by some simple reflections. WDYT?",
      "parentUuid": "b5fe815d_309f1158",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e6be2d0_443a128e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-07-03T06:17:43Z",
      "side": 1,
      "message": "Selecting \"this\" looks not that easier according to my local experiment.\n\nEven if Tast is set to this, we still need Tast.switchMode as eval expression to select the method for some reason, that means, we have to set two \"Tast\".\n\nInstead of using the closure here, I replace \"this\" by \"Tast\" with introducing the name of the class. That looks simpler to me that introducing auto bind wrapper. WDYT?",
      "parentUuid": "6f8cabe7_13323610",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61444a4a_4b18d0ac",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-03T07:57:05Z",
      "side": 1,
      "message": "lgtm. huge nit: Could you help add some comments about why we have to use Tast instead of `this` in cca_ui.js? Thanks.",
      "parentUuid": "4e6be2d0_443a128e",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ca4334f_afa02670",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 956,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-07-06T04:39:40Z",
      "side": 1,
      "message": "Sure, done.",
      "parentUuid": "61444a4a_4b18d0ac",
      "range": {
        "startLine": 956,
        "startChar": 34,
        "endLine": 956,
        "endChar": 44
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d298504f_84e4f9cc",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 1137,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-15T17:15:15Z",
      "side": 1,
      "message": "Can we store the promise within a chrome.JSObject? Is it possible with the new Eval API?\n\nIf it\u0027s not possible, maybe we should store a function that will return that promise here, and call that function later after trigger(). WDYT?",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f3a509a_04acd7f6",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 1137,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-06-16T03:24:51Z",
      "side": 1,
      "message": "Promise is awaited on Eval().\nAdded a wrapper function.",
      "parentUuid": "d298504f_84e4f9cc",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "187489ff_59996cd5",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 1137,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-16T06:24:48Z",
      "side": 1,
      "message": "Could we wrap it here as something like:\n((p) \u003d\u003e () \u003d\u003e p)(Tast.waitNextConfiguration())\nor\n{promise: Tast.waitNextConfiguration()}\n\ninstead of changing the JS implementation?",
      "parentUuid": "2f3a509a_04acd7f6",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "266dc8b8_f7c56056",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 1137,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-07-03T06:17:43Z",
      "side": 1,
      "message": "Done by the closure. Note that the latter object approach won\u0027t work, because it\u0027s blocked here.",
      "parentUuid": "187489ff_59996cd5",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2cfa18c_ac328f6c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 1
      },
      "lineNbr": 1137,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-07-03T07:57:05Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "266dc8b8_f7c56056",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36a5352f_40b7730c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/data/cca_ui.js",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-06-16T03:24:51Z",
      "side": 1,
      "message": "nit: unused.",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8320f173_1a05590d",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/data/cca_ui.js",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-16T06:24:48Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "36a5352f_40b7730c",
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e21ffa54_9a4cc4eb",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/getusermedia/get_user_media.go",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1001886
      },
      "writtenOn": "2020-06-15T17:15:15Z",
      "side": 1,
      "message": "huge nit: const",
      "range": {
        "startLine": 75,
        "startChar": 4,
        "endLine": 75,
        "endChar": 7
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58f5d068_05a03da7",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/getusermedia/get_user_media.go",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-06-16T03:24:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e21ffa54_9a4cc4eb",
      "range": {
        "startLine": 75,
        "startChar": 4,
        "endLine": 75,
        "endChar": 7
      },
      "revId": "755dc077aa9e09b5e0e0934ae7588303a89aa047",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}