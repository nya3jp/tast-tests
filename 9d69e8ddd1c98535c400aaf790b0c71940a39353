{
  "comments": [
    {
      "key": {
        "uuid": "7978d1ad_414ea2d4",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 17
      },
      "lineNbr": 1090,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "Wrap with |testing.PollBreak|, example:\nhttps://source.corp.google.com/chromeos_public/src/platform/tast-tests/src/chromiumos/tast/local/bundles/cros/camera/gca/gca.go;rcl\u003d384bed0c1026ead64a3d7db1ef1beef52c56943c;l\u003d111",
      "range": {
        "startLine": 1090,
        "startChar": 10,
        "endLine": 1090,
        "endChar": 68
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "469f8754_505efabe",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca/cca.go",
        "patchSetId": 17
      },
      "lineNbr": 1090,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7978d1ad_414ea2d4",
      "range": {
        "startLine": 1090,
        "startChar": 10,
        "endLine": 1090,
        "endChar": 68
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0475edf5_eb82e1bb",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 265,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "Because the |closeCCAAndTestApp| and |closeCCA| shares a large part of code, also the parameter are similar, can you try unify them by definition like |closeCCA(...options intentOptions...)|?",
      "range": {
        "startLine": 265,
        "startChar": 5,
        "endLine": 265,
        "endChar": 23
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfa1b0f5_f4674256",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 265,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Hmm, I don\u0027t think they should be merged together. Since closeCCAAndTestApp() is a cleanup method which should be executed after the test is finished, it can contain anything that we need to cleanup in the future. And it has already reused the codes by calling closeCCA() rather than rewriting new ones. If you think they are similar because of their names, I can change closeCCAAndTestApp() back to cleanup(), which is its original name, but I just think closeCCAAndTestApp() would be more clear.",
      "parentUuid": "0475edf5_eb82e1bb",
      "range": {
        "startLine": 265,
        "startChar": 5,
        "endLine": 265,
        "endChar": 23
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23ab1f5b_dc2ca53c",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 265,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T04:21:42Z",
      "side": 1,
      "message": "Sound reasonable. Let\u0027s keep the name |closeCCAAndTestApp|.",
      "parentUuid": "bfa1b0f5_f4674256",
      "range": {
        "startLine": 265,
        "startChar": 5,
        "endLine": 265,
        "endChar": 23
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f6068ca_38ac5ea1",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 277,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "The |error| returned by |closeCCAAndTestApp| includes result from |CheckJSError|. I think we need to catch this. To catch this, you can try\n1. Pass in |s *testing.State| to this scope and use |s.Error()| to report this.\n2. Or set the named return if it\u0027s nil in defer:\nfunc checkIntentBehavior(...) (retErr error) {\n  ...\n  defer func() {\n    if err :\u003d closeCCAAndTestApp(...); err !\u003d nil {\n      if retErr !\u003d nil {\n        testing.ContextLog(ctx, \"Failed to close CCA: \", err)\n      } else {\n        retErr \u003d err\n      }\n    }\n  }\n  ...\n}",
      "range": {
        "startLine": 277,
        "startChar": 7,
        "endLine": 277,
        "endChar": 25
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3699c2bb_549f670e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 277,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "If we only need to log it, we can just put |testing.ContextLog()| in closeCCAAndTestApp() since this method is only used for cleanup.\n\nBTW, currently we often check the JS error and close the app in the defer functions. But I think if we want to fail a test if there is any JS error rather than just logging it, we should better move CheckJSError() in app.Close() and including app.Close() as a part of test flow at the end of a test. If you also agree then we can do this in another CL.",
      "parentUuid": "2f6068ca_38ac5ea1",
      "range": {
        "startLine": 277,
        "startChar": 7,
        "endLine": 277,
        "endChar": 25
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18a73830_6442d693",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 277,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T04:21:42Z",
      "side": 1,
      "message": "SGTM. We may need the distinguish the error returned from |Restart|.\nI would expect this looks like:\n\nif err :\u003d a.Restart(ctx); err !\u003d nil {\n  if cca.IsJSError(err) {\n    s.Error(\"...\", err)\n  } else {\n    s.Fatal(\"...\", err)\n  }\n}",
      "parentUuid": "3699c2bb_549f670e",
      "range": {
        "startLine": 277,
        "startChar": 7,
        "endLine": 277,
        "endChar": 25
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06c1d8c2_3fcd5ce9",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_intent.go",
        "patchSetId": 17
      },
      "lineNbr": 277,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T08:45:47Z",
      "side": 1,
      "message": "Just uploaded a CL to move the CheckJSError() into app.Close() and also includes app.Close() as a part of test flow. PTAL, thanks.\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/tast-tests/+/2428463",
      "parentUuid": "18a73830_6442d693",
      "range": {
        "startLine": 277,
        "startChar": 7,
        "endLine": 277,
        "endChar": 25
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7293ad3_dbdc65b9",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_multi_camera.go",
        "patchSetId": 17
      },
      "lineNbr": 134,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "|Fatal| will make the whole test process end immediately. Let\u0027s use |Error| here.",
      "range": {
        "startLine": 134,
        "startChar": 4,
        "endLine": 134,
        "endChar": 9
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75d265d0_4e536b78",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_multi_camera.go",
        "patchSetId": 17
      },
      "lineNbr": 134,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7293ad3_dbdc65b9",
      "range": {
        "startLine": 134,
        "startChar": 4,
        "endLine": 134,
        "endChar": 9
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6c31d43_42e61dd7",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_preview.go",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 53,
        "startChar": 5,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45077ee2_e158eddb",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_preview.go",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d6c31d43_42e61dd7",
      "range": {
        "startLine": 53,
        "startChar": 5,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4c10712_6f6ea00e",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_resolutions.go",
        "patchSetId": 17
      },
      "lineNbr": 66,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d83bf33_9668e637",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_resolutions.go",
        "patchSetId": 17
      },
      "lineNbr": 66,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4c10712_6f6ea00e",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3275f97_f22037b0",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_take_picture.go",
        "patchSetId": 17
      },
      "lineNbr": 54,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 54,
        "startChar": 5,
        "endLine": 54,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa2bfb5c_162c1f31",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_take_picture.go",
        "patchSetId": 17
      },
      "lineNbr": 54,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3275f97_f22037b0",
      "range": {
        "startLine": 54,
        "startChar": 5,
        "endLine": 54,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4eda5964_65fd3973",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_volume_shutter.go",
        "patchSetId": 17
      },
      "lineNbr": 158,
      "author": {
        "id": 1271173
      },
      "writtenOn": "2020-09-24T02:17:37Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 158,
        "startChar": 5,
        "endLine": 158,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dec907e_73ba8ded",
        "filename": "src/chromiumos/tast/local/bundles/cros/camera/cca_ui_volume_shutter.go",
        "patchSetId": 17
      },
      "lineNbr": 158,
      "author": {
        "id": 1290370
      },
      "writtenOn": "2020-09-24T03:07:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4eda5964_65fd3973",
      "range": {
        "startLine": 158,
        "startChar": 5,
        "endLine": 158,
        "endChar": 10
      },
      "revId": "9d69e8ddd1c98535c400aaf790b0c71940a39353",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}