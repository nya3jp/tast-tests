{
  "comments": [
    {
      "key": {
        "uuid": "51052209_1e519b00",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-27T06:05:14Z",
      "side": 1,
      "message": "What the build configuration these are installed?\nCan you control them by software dependency (USE flags) or device architecture?",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ecc4fca_39f91675",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "They are installed according to build-time USE flags (houdini/ndk_translation).\n\nSo it is possible to use these flags via tast-use-flags and testing.ContextSoftwareDeps() here to determine whether native bridge is supported.\n\nBtw, currently binfmt_misc is mounted regardless of the flags and thus unmount check should be done regardless of their presence. But it is possible (and might be desirable) to make that mount conditional for some new flag (equivalent to the logical disjunction houdini || ndk_translation) and add it to SoftwareDeps of the test itself.",
      "parentUuid": "51052209_1e519b00",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "329ae757_70b4e617",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-30T04:42:46Z",
      "side": 1,
      "message": "So, I\u0027d recommend to split this test into two.\n- arc.BinfmtMisc: to make sure binfmt_misc is unmounted as you did in L42-L51.\n- arc.NativeBridge: to make sure libhoudini/libndk_translation works.\n  - Guarding by SoftwareDeps.\n  - make sure ro.boot.native_bridge is properly set. (Fail if not).\n  - executes hello_world_arm(64)? and it works.\n\nWDYT?",
      "parentUuid": "3ecc4fca_39f91675",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f047f839_ebb0c93c",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-30T07:46:16Z",
      "side": 1,
      "message": "Thanks for the suggestion!\n\nNow I\u0027m considering making binfmt_misc mounted/unmounted only when the property ro.boot.native_bridge has a non-zero value.\nThe change would make the init process a little bit safer and cleaner.\nThe property ro.boot.native_bridge has a non-zero value iff at least one of the USE flags houdini and ndk_translation is set; we already have a unittest for it.\nSo I guess it might be better to make the whole test dependent on a feature defined by (houdini || ndk_translation) after the change described above is made.\n\nOne possibility is that binfmt_misc is somehow erroneously mounted when the flags are not set.\nIf we should take the possibility seriously, then splitting the test would be a better idea even after the change.",
      "parentUuid": "329ae757_70b4e617",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd53e4f6_2b75597d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 79,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-27T06:05:14Z",
      "side": 1,
      "message": "Should this file be removed after execution?",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa55df95_d684042a",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 79,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "Thanks! I think it should. Done.",
      "parentUuid": "bd53e4f6_2b75597d",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7160c69_d816fd6c",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T06:46:54Z",
      "side": 1,
      "message": "I forgot to put returns here, and because of this it seems that I\u0027ve been getting wrong results recently.",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 85,
        "endChar": 2
      },
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "137c18c4_11e26d0d",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "f7160c69_d816fd6c",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 85,
        "endChar": 2
      },
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7806e074_6e581632",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-27T06:05:14Z",
      "side": 1,
      "message": "optional: how about adding testexec.DumpLogOnError just in case?",
      "range": {
        "startLine": 92,
        "startChar": 22,
        "endLine": 92,
        "endChar": 24
      },
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5f2be7b_daa5b014",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/binfmt_misc.go",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "Thanks! Done.",
      "parentUuid": "7806e074_6e581632",
      "range": {
        "startLine": 92,
        "startChar": 22,
        "endLine": 92,
        "endChar": 24
      },
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "091308d9_59413222",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data/hello_world_arm.external",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-27T06:05:14Z",
      "side": 1,
      "message": "Could you document somewhere how to build/update/maintain these files?",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a878ac13_8956f18e",
        "filename": "src/chromiumos/tast/local/bundles/cros/arc/data/hello_world_arm.external",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "I think I should, but am not sure where/how to put the information.\n\nBasically they are binaries compiled by NDK tools from the trivial hello_world.c.\n\nCould you give me any suggestions?",
      "parentUuid": "091308d9_59413222",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8473fa8_1101c5e2",
        "filename": "src/chromiumos/tast/local/sysutil/mountinfo.go",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2020-03-27T06:05:14Z",
      "side": 1,
      "message": "How about introducing\nParseMountInfo(b []byte) ([]MountInfo, error)\nto parse entire file content and expose it, instead of exposing ParseMountInfoLine?\n\nI think you can share the line handling part, too.\n\nIn this file, the code will look like:\n\nb, err :\u003d ioutil.ReadFile(path)\nif err !\u003d nil {\n  ...\n}\n\nreturn ParseMountInfo(b)\n\nWDYT?",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85536b54_69d15bdb",
        "filename": "src/chromiumos/tast/local/sysutil/mountinfo.go",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1394308
      },
      "writtenOn": "2020-03-27T09:12:46Z",
      "side": 1,
      "message": "Sounds good! Done.",
      "parentUuid": "c8473fa8_1101c5e2",
      "revId": "c8c15919bf9dc2f70dd136063db58f53f9380c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}