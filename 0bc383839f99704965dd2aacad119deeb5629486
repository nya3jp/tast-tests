{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "18914d9c_a0ef31dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-01T20:13:19Z",
      "side": 1,
      "message": "PTAL",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4838a0c7_848bb763",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-02T00:23:58Z",
      "side": 1,
      "message": "Do we really need to fail here ? Wouldn\u0027t it be simpler to simply skip the final section of the test with the shill restart ?",
      "range": {
        "startLine": 47,
        "startChar": 2,
        "endLine": 47,
        "endChar": 50
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee82ca59_cd178a55",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4838a0c7_848bb763",
      "range": {
        "startLine": 47,
        "startChar": 2,
        "endLine": 47,
        "endChar": 50
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f948293_92990769",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-02T07:02:42Z",
      "side": 1,
      "message": "nit: this else is not needed?",
      "range": {
        "startLine": 69,
        "startChar": 3,
        "endLine": 69,
        "endChar": 7
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "197de7cc_d5ee6f1a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "It\u0027s not strictly needed, but it does group these nicely and seems to be a more common pattern in go (but I will defer to any golang readability reviewers here).",
      "parentUuid": "2f948293_92990769",
      "range": {
        "startLine": 69,
        "startChar": 3,
        "endLine": 69,
        "endChar": 7
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86ef6573_08e3daed",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-27T16:50:02Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "197de7cc_d5ee6f1a",
      "range": {
        "startLine": 69,
        "startChar": 3,
        "endLine": 69,
        "endChar": 7
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38e2b516_c1a7a7ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-02T07:02:42Z",
      "side": 1,
      "message": "Can we guarantee that the Ethernet service is selected here?\nI assume this should only happen after the auto-connect is triggered?",
      "range": {
        "startLine": 82,
        "startChar": 19,
        "endLine": 82,
        "endChar": 37
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8af9c6fb_1bcb0192",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "If we have an Ethernet Device in Shill, a Service will be created. That said, I went ahead and restored this to WaitForSelectedService (but modified it to return the Service instead of the path, since that\u0027s pretty much always what we will want and there aren\u0027t any other callers of that function, except virtualnet.go in your CL which we can modify).",
      "parentUuid": "38e2b516_c1a7a7ed",
      "range": {
        "startLine": 82,
        "startChar": 19,
        "endLine": 82,
        "endChar": 37
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a7494f1_7aa082ed",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-06T03:12:16Z",
      "side": 1,
      "message": "Yes, sure, I can do the rebase if this patch goes in at first",
      "parentUuid": "8af9c6fb_1bcb0192",
      "range": {
        "startLine": 82,
        "startChar": 19,
        "endLine": 82,
        "endChar": 37
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1a0fa58_74d789a6",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-02T01:41:07Z",
      "side": 1,
      "message": "Doesn\u0027t this make the assumption that DHCP doesn\u0027t fail before we check the state? Is it meaningful to check the state with nothing on the other side of the veth pair?",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51519ab2_08a5d551",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1238096
      },
      "writtenOn": "2022-06-02T01:53:46Z",
      "side": 1,
      "message": "\u003e  Is it meaningful to check the state with nothing on the other side of the veth pair\n\nYes that a good point. I would say no, unless we can also push a static ip config. However I thought this was impossible to do for a eth service that is not the \"any\" service ?",
      "parentUuid": "e1a0fa58_74d789a6",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea34daf9_cc125e18",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-02T02:16:26Z",
      "side": 1,
      "message": "\u003e Doesn\u0027t this make the assumption that DHCP doesn\u0027t fail before we check the state\nThis assumption itself sounds good to me here. I think this actually verifies that \"whether shill auto-connects a (v)eth device\", but I don\u0027t have a strong opinion on whether we should have this check here.\n\n\"Setting a static ip config when there is no DHCP will turn the state from configuring to connected\" is in the scope of the routing tests for the Network refactor work.",
      "parentUuid": "51519ab2_08a5d551",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8996e061_86b3c3b1",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "The intention here is partly to document the veth behavior, which is that by default it remains in a configuration state. If we change that intentionally, we should update this test. If we make a change that unexpectedly changes that, it would be good to know about it.",
      "parentUuid": "ea34daf9_cc125e18",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66e0a48d_65e4bd0f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-03T22:07:13Z",
      "side": 1,
      "message": "I guess my point was that if you wait long enough, DHCP will timeout and we\u0027ll end up in a fail/idle state, and since there aren\u0027t any guarantees here in terms of timing, asserting that we\u0027re in the configuration state is not technically correct (even though it may always be the case in practice). I don\u0027t really have a strong opinion here since I don\u0027t think there\u0027s a way to start watching the Service properties right after it\u0027s created to check for the transition to configuring, so if others are fine with this I am too.",
      "parentUuid": "8996e061_86b3c3b1",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8794a31b_75e5cf00",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-06T03:12:16Z",
      "side": 1,
      "message": "The current DHCP timeout value is 30 seconds which I think it\u0027s long enough and thus I\u0027m fine with this.",
      "parentUuid": "66e0a48d_65e4bd0f",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37f36656_2d67438a",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 95,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T19:29:09Z",
      "side": 1,
      "message": "Matthew has a good point, we shouldn\u0027t rely on the timeout. This is really just for my own edification, I\u0027ll go ahead and just make this an informational log.",
      "parentUuid": "8794a31b_75e5cf00",
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d97d3a4_3ade8411",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 102,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-02T02:16:26Z",
      "side": 1,
      "message": "Just a further explanation on what we discussed in another patch, if we read the Priority on the same service here, we will find that its value is 0 but not 1.",
      "range": {
        "startLine": 102,
        "startChar": 1,
        "endLine": 102,
        "endChar": 2
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9cbfa30c_88d8707f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 102,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "Actually, since the veth network is not connected, it will not become prioritized over the physical Ethernet device, so the ethernet_any profile does not get loaded. (This was the cause of some of my confusion with the EphemeralPriority CL).",
      "parentUuid": "3d97d3a4_3ade8411",
      "range": {
        "startLine": 102,
        "startChar": 1,
        "endLine": 102,
        "endChar": 2
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1db7762_87c1126f",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 127,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-02T01:41:07Z",
      "side": 1,
      "message": "can we get the priority above and check it against that instead to avoid making assumptions about the default value?",
      "range": {
        "startLine": 127,
        "startChar": 16,
        "endLine": 127,
        "endChar": 17
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b422b4f2_37367f00",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 127,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-03T20:00:05Z",
      "side": 1,
      "message": "We could but... I\u0027d rather be able to make that assumption. It could be problematic down the line if we can\u0027t.",
      "parentUuid": "f1db7762_87c1126f",
      "range": {
        "startLine": 127,
        "startChar": 16,
        "endLine": 127,
        "endChar": 17
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1aa3a50_1f27aaa5",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 127,
      "author": {
        "id": 1243287
      },
      "writtenOn": "2022-06-03T22:07:13Z",
      "side": 1,
      "message": "My concern here is that if some other test (or a user) sets the priority and forgets/fails to reset it for whatever reason, that breaks this test. Maybe we could remove the default profile at the beginning of the test?",
      "parentUuid": "b422b4f2_37367f00",
      "range": {
        "startLine": 127,
        "startChar": 16,
        "endLine": 127,
        "endChar": 17
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3efed59e_499b41e0",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 127,
      "author": {
        "id": 1364246
      },
      "writtenOn": "2022-06-06T03:12:16Z",
      "side": 1,
      "message": "\u003e Maybe we could remove the default profile at the beginning of the test?\nSounds good to me, I would suggest using the shillReset fixture",
      "parentUuid": "a1aa3a50_1f27aaa5",
      "range": {
        "startLine": 127,
        "startChar": 16,
        "endLine": 127,
        "endChar": 17
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff071051_1a25848b",
        "filename": "src/chromiumos/tast/local/bundles/cros/network/shill_veth.go",
        "patchSetId": 6
      },
      "lineNbr": 127,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2022-06-22T19:29:09Z",
      "side": 1,
      "message": "I thought about using shillReset, but this test isn\u0027t a great model for a fixture because we restart shill in the middle of the test which is a bit unusual, and adding another restart is a pretty large hammer.\n\nHowever, getting the initial priority and increasing it by one is pretty trivial, so it makes sense to do that. Done.",
      "parentUuid": "3efed59e_499b41e0",
      "range": {
        "startLine": 127,
        "startChar": 16,
        "endLine": 127,
        "endChar": 17
      },
      "revId": "0bc383839f99704965dd2aacad119deeb5629486",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}